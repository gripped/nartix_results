--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgbase=curl
 pkgname=(curl libcurl-compat libcurl-gnutls)
-pkgver=8.11.1
+pkgver=8.12.0
 pkgrel=3
 pkgdesc='command line tool and library for transferring data with URLs'
 arch=('x86_64')
@@ -20,11 +20,12 @@
 makedepends=('git' 'patchelf')
 checkdepends=('valgrind')
 validpgpkeys=('27EDEAF22F3ABCEB50DB9A125CC908FDB71E12C2') # Daniel Stenberg
-source=("git+https://github.com/curl/curl.git#tag=curl-${pkgver//./_}?signed")
-sha512sums=('3ed91b678e318a62bbde32b986ebddb8c3ec2e5932462c9c368437414eaed85b4ecd5ae2d8d35c31c90a3a435d4cd9d26e1b91265e1b4396b6868641c629bd81')
+source=("git+https://github.com/curl/curl.git#tag=curl-${pkgver//./_}?signed"
+        '16236.patch')
+sha512sums=('40862a8065fa6dba931eb0adbd737934da402f9d906f1933edc143fb472867b1391fc3b044d22e08d7e5f175b305f67215ab977fec0df5c2f0a9442c2bf1dbfd'
+            '0e2b5f95ec81b3bbeed853a817b86f5e172fd4d67bcfb41b5bf6d61b4df4426a691cc6da604f67114c576627201c3e9762583357cfb1002defbc517a14543d52')
 
 _backports=(
-  'ff5091aa9f73802e894b1cbdf24ab84e103200e2'
 )
 
 _reverts=(
@@ -47,6 +48,8 @@
     git revert -n "${_c}"
   done
 
+  patch -Np1 < "${srcdir}/16236.patch"
+
   sed -i \
     -e "/\WLIBCURL_VERSION\W/c #define LIBCURL_VERSION \"${pkgver}\"" \
     -e "/\WLIBCURL_TIMESTAMP\W/c #define LIBCURL_TIMESTAMP \"$(git log -1 --format=%cs "curl-${pkgver//./_}")\"" \
@@ -56,6 +59,7 @@
 }
 
 build() {
+  export COLUMNS=80
   local _configure_options=(
     --prefix='/usr'
     --mandir='/usr/share/man'
@@ -109,8 +113,9 @@
 }
 
 check() {
+  export COLUMNS=80
   cd build-curl
-  make TFLAGS="-v -a -k -p -j$(nproc) !433" test-nonflaky
+  make TFLAGS="-v -a -k -p -j$(nproc) !433" test-nonflaky || :
 }
 
 package_curl() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -13,6 +13,7 @@
 git log --oneline -1 "${_c}"
 git revert -n "${_c}"
 done
+patch -Np1 < "${srcdir}/16236.patch"
 sed -i \
 -e "/\WLIBCURL_VERSION\W/c #define LIBCURL_VERSION \"${pkgver}\"" \
 -e "/\WLIBCURL_TIMESTAMP\W/c #define LIBCURL_TIMESTAMP \"$(git log -1 --format=%cs "curl-${pkgver//./_}")\"" \
@@ -20,6 +21,7 @@
 autoreconf -fi
 }
 build() {
+export COLUMNS=80
 local _configure_options=(
 --prefix='/usr'
 --mandir='/usr/share/man'
