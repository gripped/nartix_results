--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,22 +1,23 @@
 
 pkgbase=openldap
 pkgname=('openldap' 'libldap')
-pkgver=2.6.10
+pkgver=2.6.9
 pkgrel=1
 arch=('x86_64')
 url="https://www.openldap.org/"
 license=('custom')
-makedepends=('libtool' 'libsasl' 'util-linux' 'chrpath' 'unixodbc' 'libsodium' 'systemd')
-options=('!makeflags' 'emptydirs' '!lto')
+makedepends=('libtool' 'libsasl' 'util-linux' 'chrpath' 'unixodbc' 'libsodium')
+options=('!makeflags' 'emptydirs')
 source=(
   https://www.openldap.org/software/download/OpenLDAP/openldap-release/${pkgbase}-${pkgver}.tgz{,.asc}
   openldap.tmpfiles
   openldap.sysusers)
-sha256sums=('c065f04aad42737aebd60b2fe4939704ac844266bc0aeaa1609f0cad987be516'
+sha256sums=('2cb7dc73e9c8340dff0d99357fbaa578abf30cc6619f0521972c555681e6b2ff'
             'SKIP'
             '0be46138e53ff2fa6d4b4c06bfbdd2100426e0bd2ed29bf3419ade6b5974e9a0'
-            'e4af9009982808d04fd10bd5d9559cec193efc7a05c6807367473da33392edab')
+            'c6e3fa72138edfebb4ecb17f677e217c885ff9eef805b5c8ad1c09169bb0ff8e')
 validpgpkeys=('3CE269B5398BC8B785645E987F67D5FD1CE1CBCE') # OpenLDAP Project <project@openldap.org> https://www.openldap.org/software/download/OpenLDAP/gpg-pubkey.txt
+options=(!lto)
 
 _extra_modules=(
   'nssov'
@@ -36,13 +37,12 @@
   sed -i 's|%LOCALSTATEDIR%/run|/run/openldap|' servers/slapd/slapd.{conf,ldif}
   sed -i 's|-$(MKDIR) $(DESTDIR)$(localstatedir)/run|-$(MKDIR) $(DESTDIR)/run/openldap|' servers/slapd/Makefile.in
 
-  sed -i -e "s|EnvironmentFile.*|EnvironmentFile=-/etc/conf.d/slapd|" -e "s/slapd -d 0/\0 -u ldap -g ldap/" servers/slapd/slapd.service
 }
 
 build() {
   cd ${pkgbase}-${pkgver}
   autoconf
-  ./configure \
+  ./configure --with-systemd=no \
     --prefix=/usr \
     --libexecdir=/usr/lib \
     --sysconfdir=/etc \
@@ -104,7 +104,7 @@
 
 package_openldap() {
   pkgdesc="Lightweight Directory Access Protocol (LDAP) client and server"
-  depends=("libldap>=${pkgver}" 'libtool' 'unixodbc' 'perl' 'systemd-libs' 'libsodium')
+  depends=("libldap>=${pkgver}" 'libtool' 'unixodbc' 'perl' 'libsodium')
   backup=('etc/openldap/slapd.conf' 'etc/openldap/slapd.ldif')
 
   cd ${pkgbase}-${pkgver}


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -4,7 +4,5 @@
 libsodium
 libtool
 perl
-systemd
-systemd-libs
 unixodbc
 util-linux