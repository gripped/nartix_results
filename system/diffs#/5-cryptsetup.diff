--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,19 +1,14 @@
 
 pkgname=cryptsetup
 pkgver=2.7.5
-pkgrel=2
+pkgrel=1
 pkgdesc='Userspace setup tool for transparent encryption of block devices using dm-crypt'
-arch=('x86_64')
-license=('GPL-2.0-or-later')
+arch=(x86_64)
+license=('GPL')
 url='https://gitlab.com/cryptsetup/cryptsetup/'
-depends=('device-mapper' 'libdevmapper.so'
-         'glibc'
-         'openssl' 'libcrypto.so'
-         'popt'
-         'util-linux-libs' 'libblkid.so' 'libuuid.so'
-         'json-c' 'libjson-c.so')
+depends=('device-mapper' 'libdevmapper.so' 'openssl' 'popt' 'util-linux-libs'
+         'libuuid.so' 'json-c' 'libjson-c.so' 'argon2' 'libargon2.so')
 makedepends=('util-linux' 'asciidoctor')
-checkdepends=('jq' 'procps-ng' 'xxd')
 conflicts=('mkinitcpio<38-1')
 provides=('libcryptsetup.so')
 options=('!emptydirs')
@@ -28,15 +23,11 @@
   ./configure \
     --prefix=/usr \
     --sbindir=/usr/bin \
+    --enable-libargon2 \
     --disable-ssh-token \
     --disable-static
   sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
   make
-}
-
-check() {
-  cd "${srcdir}"/$pkgname-${pkgver}
-  make check
 }
 
 package() {


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,9 +1,8 @@
+argon2
 asciidoctor
 device-mapper
-glibc
 json-c
-libblkid.so
-libcrypto.so
+libargon2.so
 libdevmapper.so
 libjson-c.so
 libuuid.so

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,6 +3,7 @@
 ./configure \
 --prefix=/usr \
 --sbindir=/usr/bin \
+--enable-libargon2 \
 --disable-ssh-token \
 --disable-static
 sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
