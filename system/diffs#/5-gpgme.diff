--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,9 +1,9 @@
 
 pkgbase=gpgme
 pkgname=(gpgme qgpgme-qt6 python-gpgme)
-pkgver=1.24.2
-pkgrel=1
-pkgdesc='A C wrapper library for GnuPG'
+pkgver=1.24.3
+pkgrel=2
+pkgdesc='C wrapper library for GnuPG'
 arch=('x86_64')
 url='https://www.gnupg.org/related_software/gpgme/'
 license=(
@@ -12,6 +12,7 @@
   LGPL-2.1-or-later
 )
 makedepends=(
+  'git'
   'gnupg'
   'libassuan'
   'libgpg-error'
@@ -25,19 +26,22 @@
 )
 validpgpkeys=('6DAA6E64A76D2840571B4902528897B826403ADA'  # Werner Koch (dist signing 2020)
               'AC8E115BF73E2D8D47FA9908E98E9B2D19C6C8BD') # Niibe Yutaka (GnuPG Release Key)
-source=("https://www.gnupg.org/ftp/gcrypt/${pkgbase}/${pkgbase}-${pkgver}.tar.bz2"{,.sig})
-sha256sums=('e11b1a0e361777e9e55f48a03d89096e2abf08c63d84b7017cfe1dce06639581'
-            'SKIP')
+source=("git+https://dev.gnupg.org/source/gpgme.git#tag=${pkgbase}-${pkgver}?signed"
+        '0025_debian_default_is_openpgp.diff')
+sha256sums=('630d7301a614bf22916cecdb78bbb34ea1dd724071a9ea9aee67aab06ba3dea1'
+            'f8bdaba4732347067ce291ca2acd6096e7a02c162a760be3515e0c4cdac60d6f')
 
 prepare() {
-  cd ${pkgbase}-${pkgver}/
+  cd ${pkgbase}
+
+  patch -Np1 < ../0025_debian_default_is_openpgp.diff
 
   sed -i 's/-unknown//' autogen.sh
   autoreconf -fi
 }
 
 build() {
-  cd ${pkgbase}-${pkgver}
+  cd ${pkgbase}
 
   ./configure \
     --prefix=/usr \
@@ -50,12 +54,12 @@
 
   (
     cd lang/python/
-    top_builddir="$srcdir/$pkgbase-$pkgver" python -m build --wheel --no-isolation
+    top_builddir="$srcdir/$pkgbase" python -m build --wheel --no-isolation
   )
 }
 
 check() {
-  cd ${pkgbase}-${pkgver}
+  cd ${pkgbase}
 
   sed -i 's#"t-keylist-secret",##' tests/json/t-json.c
 
@@ -76,7 +80,7 @@
             'libgpgmepp.so')
   license+=(MIT)
 
-  cd ${pkgbase}-${pkgver}
+  cd ${pkgbase}
 
   make DESTDIR="${pkgdir}" install
 
@@ -96,7 +100,7 @@
     'qt6-base'
   )
 
-  cd ${pkgbase}-${pkgver}/lang/qt
+  cd ${pkgbase}/lang/qt
 
   make DESTDIR="${pkgdir}" install
 }
@@ -109,6 +113,6 @@
     'python'
   )
 
-  cd ${pkgbase}-${pkgver}/lang/python
+  cd ${pkgbase}/lang/python
   python -m installer --destdir="$pkgdir" dist/*.whl
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,5 @@
 gcc-libs
+git
 glib2
 glibc
 gnupg

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,10 +1,11 @@
 prepare() {
-cd ${pkgbase}-${pkgver}/
+cd ${pkgbase}
+patch -Np1 < ../0025_debian_default_is_openpgp.diff
 sed -i 's/-unknown//' autogen.sh
 autoreconf -fi
 }
 build() {
-cd ${pkgbase}-${pkgver}
+cd ${pkgbase}
 ./configure \
 --prefix=/usr \
 --disable-fd-passing \
@@ -14,6 +15,6 @@
 make
 (
 cd lang/python/
-top_builddir="$srcdir/$pkgbase-$pkgver" python -m build --wheel --no-isolation
+top_builddir="$srcdir/$pkgbase" python -m build --wheel --no-isolation
 )
 }
