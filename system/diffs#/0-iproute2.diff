--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,10 +1,10 @@
 
 pkgname=iproute2
-pkgver=6.13.0
+pkgver=6.12.0
 pkgrel=1
 pkgdesc='IP Routing Utilities'
 arch=('x86_64')
-license=('GPL-2.0-or-later')
+license=('GPL2')
 url='https://git.kernel.org/pub/scm/network/iproute2/iproute2.git'
 depends=('glibc'
          'libxtables.so' # from iptables or iptables-nft
@@ -16,12 +16,12 @@
             'linux-atm: ATM support'
             'python: for routel')
 provides=('iproute')
-options=('!emptydirs')
+options=('staticlibs')
 validpgpkeys=('9F6FC345B05BE7E766B83C8F80A77F6095CDE47E') # Stephen Hemminger
 source=("https://www.kernel.org/pub/linux/utils/net/${pkgname}/${pkgname}-${pkgver}.tar."{xz,sign}
         '0001-make-iproute2-fhs-compliant.patch'
         '0002-bdb-5-3.patch')
-sha256sums=('a43aa43338d882b44d01e549f3f105a92ae9feea32a82fae45a88e7a49302819'
+sha256sums=('bbd141ef7b5d0127cc2152843ba61f274dc32814fa3e0f13e7d07a080bef53d9'
             'SKIP'
             '758b82bd61ed7512d215efafd5fab5ae7a28fbfa6161b85e2ce7373285e56a5d'
             '611c1ad7946aab226a5f4059922d9430f51b3377e33911427f8fdf7f7d31f7d6')
@@ -32,10 +32,15 @@
   patch -Np1 -i "${srcdir}"/0001-make-iproute2-fhs-compliant.patch
 
   patch -Np1 -i "${srcdir}"/0002-bdb-5-3.patch
+
+  sed -i 's/-Werror//' Makefile
+
 }
 
 build() {
   cd "${srcdir}/${pkgname}-${pkgver}"
+
+  export CFLAGS+=' -ffat-lto-objects'
 
   ./configure
   make DBM_INCLUDE='/usr/include/db5.3'


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,9 +2,11 @@
 cd "${srcdir}/${pkgname}-${pkgver}"
 patch -Np1 -i "${srcdir}"/0001-make-iproute2-fhs-compliant.patch
 patch -Np1 -i "${srcdir}"/0002-bdb-5-3.patch
+sed -i 's/-Werror//' Makefile
 }
 build() {
 cd "${srcdir}/${pkgname}-${pkgver}"
+export CFLAGS+=' -ffat-lto-objects'
 ./configure
 make DBM_INCLUDE='/usr/include/db5.3'
 }
