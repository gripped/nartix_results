--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 
 pkgname=perl
-pkgver=5.40.0
+pkgver=5.38.2
 _baseversion="${pkgver%.*}"
-pkgrel=1
+pkgrel=2
 pkgdesc="A highly capable, feature-rich programming language"
 arch=(x86_64)
 license=('GPL' 'PerlArtistic')
@@ -10,40 +10,40 @@
 depends=('gdbm>=1.17' 'db5.3' 'glibc' 'libxcrypt' 'libcrypt.so')
 makedepends=('patchutils')
 checkdepends=('procps-ng')
-provides=('perl-archive-tar=3.02_001'
+provides=('perl-archive-tar=2.40'
           'perl-attribute-handlers=1.03'
-          'perl-autodie=2.37'
+          'perl-autodie=2.36'
           'perl-autoloader=5.74'
           'perl-autouse=1.11'
           'perl-base=2.27'
-          'perl-bignum=0.67'
+          'perl-bignum=0.66'
           'perl-carp=1.54'
-          'perl-compress-raw-bzip2=2.212'
-          'perl-compress-raw-zlib=2.212'
+          'perl-compress-raw-bzip2=2.204_001'
+          'perl-compress-raw-zlib=2.204_001'
           'perl-config-perl-v=0.36'
           'perl-constant=1.33'
-          'perl-cpan-meta-requirements=2.143'
+          'perl-cpan-meta-requirements=2.140'
           'perl-cpan-meta-yaml=0.018'
           'perl-cpan-meta=2.150010'
           'perl-cpan=2.36'
-          'perl-data-dumper=2.189'
-          'perl-db_file=1.859'
-          'perl-devel-ppport=3.72'
+          'perl-data-dumper=2.188'
+          'perl-db_file=1.858'
+          'perl-devel-ppport=3.71'
           'perl-devel-selfstubber=1.06'
           'perl-digest-md5=2.58_01'
           'perl-digest-sha=6.04'
           'perl-digest=1.20'
           'perl-dumpvalue=1.21'
-          'perl-encode=3.21'
+          'perl-encode=3.19'
           'perl-encoding-warnings=0.14'
           'perl-env=1.06'
-          'perl-experimental=0.032'
-          'perl-exporter=5.78'
-          'perl-extutils-cbuilder=0.280240'
+          'perl-experimental=0.031'
+          'perl-exporter=5.77'
+          'perl-extutils-cbuilder=0.280238'
           'perl-extutils-constant=0.25'
           'perl-extutils-install=2.22'
           'perl-extutils-makemaker=7.70'
-          'perl-extutils-manifest=1.75'
+          'perl-extutils-manifest=1.73'
           'perl-extutils-parsexs=3.51'
           'perl-extutils-pl2bat=0.005'
           'perl-file-fetch=1.04'
@@ -51,16 +51,16 @@
           'perl-file-temp=0.2311'
           'perl-filter-simple=0.96'
           'perl-filter-util-call=1.64'
-          'perl-findbin=1.54'
-          'perl-getopt-long=2.57'
-          'perl-http-tiny=0.088'
+          'perl-findbin=1.53'
+          'perl-getopt-long=2.54'
+          'perl-http-tiny=0.086'
           'perl-i18n-collate=1.02'
           'perl-i18n-langtags=0.45'
           'perl-if=0.0610'
-          'perl-io-compress=2.212'
-          'perl-io-socket-ip=0.42'
-          'perl-io-zlib=1.15'
-          'perl-io=1.55'
+          'perl-io-compress=2.204'
+          'perl-io-socket-ip=0.41_01'
+          'perl-io-zlib=1.14'
+          'perl-io=1.52'
           'perl-ipc-cmd=1.04'
           'perl-ipc-sysv=2.09'
           'perl-json-pp=4.16'
@@ -68,64 +68,66 @@
           'perl-libnet=3.15'
           'perl-locale-maketext-simple=0.21_01'
           'perl-locale-maketext=1.33'
-          'perl-math-bigint-fastcalc=0.5018'
-          'perl-math-bigint=2.003002'
+          'perl-math-bigint-fastcalc=0.5013'
+          'perl-math-bigint=1.999837'
+          'perl-math-bigrat=0.2624'
           'perl-math-complex=1.62'
           'perl-memoize=1.16'
           'perl-mime-base64=3.16_01'
-          'perl-module-corelist=5.20240609'
+          'perl-module-corelist=5.20231129'
           'perl-module-load-conditional=0.74'
           'perl-module-load=0.36'
           'perl-module-loaded=0.08'
-          'perl-module-metadata=1.000038'
+          'perl-module-metadata=1.000037'
           'perl-net-ping=2.76'
           'perl-params-check=0.38'
           'perl-parent=0.241'
-          'perl-pathtools=3.90'
+          'perl-pathtools=3.89'
           'perl-perl-ostype=1.010'
-          'perl-perlfaq=5.20240218'
+          'perl-perlfaq=5.20210520'
           'perl-perlio-via-quotedprint=0.10'
-          'perl-pod-checker=1.77'
+          'perl-pod-checker=1.75'
           'perl-pod-escapes=1.07'
           'perl-pod-perldoc=3.2801'
-          'perl-pod-simple=3.45'
+          'perl-pod-simple=3.43'
           'perl-pod-usage=2.03'
           'perl-podlators=5.010'
-          'perl-safe=2.46'
+          'perl-safe=2.44'
           'perl-scalar-list-utils=1.63'
           'perl-search-dict=1.07'
-          'perl-selfloader=1.27'
-          'perl-socket=2.038'
+          'perl-selfloader=1.26'
+          'perl-socket=2.036'
           'perl-storable=3.32'
           'perl-sys-syslog=0.36'
           'perl-term-ansicolor=5.01'
           'perl-term-cap=1.18'
           'perl-term-complete=1.403'
           'perl-term-readline=1.17'
-          'perl-term-table=0.018'
-          'perl-test-harness=3.48'
-          'perl-test-simple=1.302199'
-          'perl-test2-suite=0.000162'
+          'perl-test-harness=3.44'
+          'perl-test-simple=1.302194'
           'perl-test=1.31'
           'perl-text-abbrev=1.02'
           'perl-text-balanced=2.06'
           'perl-text-parsewords=3.31'
-          'perl-text-tabs=2024.001'
+          'perl-text-tabs=2021.0814'
           'perl-thread-queue=3.14'
           'perl-thread-semaphore=2.13'
-          'perl-threads-shared=1.69'
-          'perl-threads=2.40'
-          'perl-tie-file=1.09'
+          'perl-threads-shared=1.68'
+          'perl-threads=2.36'
+          'perl-tie-file=1.07'
           'perl-tie-refhash=1.40'
-          'perl-time-hires=1.9777'
-          'perl-time-local=1.35'
+          'perl-time-hires=1.9775'
+          'perl-time-local=1.30'
           'perl-time-piece=1.3401_01'
           'perl-unicode-collate=1.31'
           'perl-unicode-normalize=1.32'
-          'perl-version=0.9930'
+          'perl-version=0.9929'
           'perl-xsloader=0.32')
 provides=("${provides[@]}")
 source=(https://www.cpan.org/src/5.0/perl-${pkgver}.tar.xz
+        https://github.com/pjacklam/p5-Math-BigInt/commit/c8e5f82f10959085f7ce3ec74b3caaaf72497693.patch
+        https://github.com/pjacklam/p5-Math-BigInt/commit/441f53eb116a003c78acad32f133b16f2f4c0814.patch
+        https://github.com/pjacklam/p5-Math-BigInt/commit/5020d66cc0ece2a5fbf5cb182ab7ab62c8adade5.patch
         config.over
         perlbin.sh
         perlbin.csh
@@ -133,7 +135,10 @@
         detect-old-perl-modules.sh
         detect-old-perl-modules.hook)
 options=('makeflags' '!purge' 'emptydirs')
-sha512sums=('a2fb1a24c6367b4043f4e929b2d74fc3bad1415e53b791ed1f219f1701064ae21b2bd3164ba95fcf24eaf458bd54433024ccae43725c0bb82a1ec6a98dc7052d'
+sha512sums=('0ca51e447c7a18639627c281a1c7ae6662c773745ea3c86bede46336d5514ecc97ded2c61166e1ac15635581489dc596368907aa3a775b34db225b76d7402d10'
+            '0327bb66f2cff72e0a81723b09204088afb558530f8b1a69dd50cb8f50fff138f14c5d02d7e7ffa69aafcffce3e8e3d34c44dc693b194ec8d8a7d3aded081865'
+            'a01b581b5af7899cafdc860d685741e782d97c7b56b3fc4bfb526ee0b3711f92f0ba4027fe2863190e6f10fa91a441b0185ad0a82174b254baacfbb9969bc9a6'
+            '470ae0f4624e6493ecb66aadbd282f1560e315dbe282264717c768d182cace4c23690b330c318821063155a6f2b1aa19c4fe7126ebf32e9e6953078990b81e9e'
             '1c924b5bf7413d097f62638a574d7decf36d98598b84cdb5fb31ff633b6f953371e14b004a2558a1a0b74b6b60b90b481af0f68555a49208fe6b226381fed79f'
             '6ed5bc6dbdc47bc7f4c0fedbe18deaf35ab02a2e6700988beb545954bb1d0fe20ff1a4de39d6d9fc882ef1741f7bf6d85ba165d0cd8dc0d9939b789c894f48a1'
             '53eb0cddfd637014f3d3a101665db8dcafe5ac5bf3d319a259974334eb89c1c405097518ae96b6d18e520194633c7be57c9b2cd9ae6398443eb08f1a2008d112'
@@ -144,7 +149,20 @@
 prepare() {
   cd "${pkgname}-${pkgver}"
 
+  chmod +w cpan/Math-BigInt/{lib/Math/Big{Float,Int}.pm,t/{mbimbf.t,upgrade.{inc,t}}}
+  filterdiff -p1 ../5020d66cc0ece2a5fbf5cb182ab7ab62c8adade5.patch \
+    -x xt/author/sparts-mbf.t | patch -Np1 -d cpan/Math-BigInt/
+  filterdiff -p1 ../441f53eb116a003c78acad32f133b16f2f4c0814.patch \
+    -x xt/author/sparts-mbf.t | patch -Np1 -d cpan/Math-BigInt/
+  patch -Np1 -i "$srcdir"/c8e5f82f10959085f7ce3ec74b3caaaf72497693.patch \
+    -d cpan/Math-BigInt/
+  chmod -w cpan/Math-BigInt/{lib/Math/Big{Float,Int}.pm,t/{mbimbf.t,upgrade.{inc,t}}}
+
   [ -n "${SOURCE_DATE_EPOCH}" ] && touch -h -d @$SOURCE_DATE_EPOCH patchlevel.h
+
+  if [[ "$pkgver" == "5.38.1" ]]; then
+	  sed 's#"release_status" : "testing",#"release_status" : "stable",#' -i META.json
+  fi
 }
 
 build() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,17 @@
 prepare() {
 cd "${pkgname}-${pkgver}"
+chmod +w cpan/Math-BigInt/{lib/Math/Big{Float,Int}.pm,t/{mbimbf.t,upgrade.{inc,t}}}
+filterdiff -p1 ../5020d66cc0ece2a5fbf5cb182ab7ab62c8adade5.patch \
+-x xt/author/sparts-mbf.t | patch -Np1 -d cpan/Math-BigInt/
+filterdiff -p1 ../441f53eb116a003c78acad32f133b16f2f4c0814.patch \
+-x xt/author/sparts-mbf.t | patch -Np1 -d cpan/Math-BigInt/
+patch -Np1 -i "$srcdir"/c8e5f82f10959085f7ce3ec74b3caaaf72497693.patch \
+-d cpan/Math-BigInt/
+chmod -w cpan/Math-BigInt/{lib/Math/Big{Float,Int}.pm,t/{mbimbf.t,upgrade.{inc,t}}}
 [ -n "${SOURCE_DATE_EPOCH}" ] && touch -h -d @$SOURCE_DATE_EPOCH patchlevel.h
+if [[ "$pkgver" == "5.38.1" ]]; then
+sed 's#"release_status" : "testing",#"release_status" : "stable",#' -i META.json
+fi
 }
 build() {
 cd "${pkgname}-${pkgver}"
