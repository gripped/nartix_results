--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,50 +1,34 @@
 
 pkgname=ncurses
 pkgver=6.4_20230520
-_commit=c74a1c4202f4524076da8be8554dacec391c84b2  # refs/tags/v6_4_20230520
-pkgrel=2
+pkgrel=1
 pkgdesc='System V Release 4.0 curses emulation library'
 arch=(x86_64)
 url='https://invisible-island.net/ncurses/ncurses.html'
-license=(MIT-open-group)
-depends=(
-  glibc
-  gcc-libs
-)
-makedepends=(
-  autoconf-archive
-  git
-)
+license=(MIT)
+depends=(glibc gcc-libs)
+makedepends=(autoconf-archive)
 optdepends=('bash: for ncursesw6-config')
-provides=(
-  libncurses++w.so
-  libformw.so
-  libmenuw.so
-  libpanelw.so
-  libncursesw.so
-)
+provides=(libncurses++w.so libformw.so libmenuw.so libpanelw.so libncursesw.so)
 replaces=(alacritty-terminfo)
 source=(
-  $pkgname::git+https://github.com/ThomasDickey/ncurses-snapshots.git?signed#commit=$_commit
+  https://invisible-mirror.net/archives/$pkgname/current/$pkgname-${pkgver/_/-}.tgz{,.asc}
   $pkgname-6.3-libs.patch
   $pkgname-6.3-pkgconfig.patch
 )
-sha512sums=('94fd092907471539fbf8f8e65e353a870fca5b35af06803b111dfca193a7b3112f1a9b659e7876d5d58f3008bae45aa0f5d43f4ab805b45ec063ed1930629c10'
+sha512sums=('bbb1dd33f4c701165b7612657a7577d3175b94c5815a89eaab3a8774510feb9322d284896dba8d3896f6dd89a8b98031829a76f7e3397aebb6cf2a71e989f93c'
+            'SKIP'
             'adb02b838c40f1e58a1b31c26d5cd0f2a1c43f3b6d68e839981764c0f6c905a9eb51dd36ff018628fdeb20747cc7467727d57135408ab4848259384077a52b28'
             '2d2c0ec3c880e638ab4aa3dbff5e28e4cd233153e24816bd87e077f848aa3edd5114cd0f2a7f6e8869dd1861a2746e512886c18264ff1676927dcc320c5ef958')
-b2sums=('7df6d10b7807cebd5706e730b783ae2405aaba1958488edf3c9c17c6bbeac1c9d259ec27aa6ea1a57cd4e997eab7e58ea52351b19dbfeb32ee045d19e9f6ca01'
+b2sums=('d5e88198140ab6471a36bef08685e17ac2e43b4e66b53abaa961d5f8912eb3eae3784db194436c2b3e5f2deaeefaaed93e0550bcab0456f1486fc35d0cdac440'
+        'SKIP'
         '31bb10e82dd018a75e57252052650d9f0f5eb5e7e887118c2ea40032b11f59ec6aa4d9bae804c615cbecdf3382f3434e0c9e9e8440fdefe66a507be020b8965c'
         'fb6cf606cf3db7f6b306272696a63bce83d52cfa91e850f9a7bdb9d3d8455a26943529a9cf79731dddc7f763c27211a9afab9c4c31dbb6d12fd720eb390eb0a3')
 validpgpkeys=('19882D92DDA4C400C22C0D56CC2AF4472167BE03')  # Thomas Dickey <dickey@invisible-island.net>
 
-pkgver() {
-  cd $pkgname
-  git describe --tags | sed 's/\([^-]*-g\)/r\1/;s/-/./g;s/v//g;s/_/./'
-}
-
 prepare() {
-  patch -Np1 -d $pkgname -i ../$pkgname-6.3-libs.patch
-  patch -Np1 -d $pkgname -i ../$pkgname-6.3-pkgconfig.patch
+  patch -Np1 -d $pkgname-${pkgver/_/-} -i ../$pkgname-6.3-libs.patch
+  patch -Np1 -d $pkgname-${pkgver/_/-} -i ../$pkgname-6.3-pkgconfig.patch
 }
 
 build() {
@@ -66,7 +50,7 @@
     --without-ada
   )
 
-  cd $pkgname
+  cd $pkgname-${pkgver/_/-}
   ./configure "${configure_options[@]}"
   make
 }
@@ -74,8 +58,8 @@
 package() {
   local _pkgver=${pkgver/_*/}
 
-  make DESTDIR="$pkgdir" install -C $pkgname
-  install -vDm 644 $pkgname/COPYING -t "$pkgdir/usr/share/licenses/$pkgname/"
+  make DESTDIR="$pkgdir" install -C $pkgname-${pkgver/_/-}
+  install -vDm 644 $pkgname-${pkgver/_/-}/COPYING -t "$pkgdir/usr/share/licenses/$pkgname/"
 
   for lib in ncurses ncurses++ form panel menu; do
     printf "INPUT(-l%sw)\n" "${lib}" > "$pkgdir/usr/lib/lib${lib}.so"


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
 autoconf-archive
 gcc-libs
-git
 glibc

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 prepare() {
-patch -Np1 -d $pkgname -i ../$pkgname-6.3-libs.patch
-patch -Np1 -d $pkgname -i ../$pkgname-6.3-pkgconfig.patch
+patch -Np1 -d $pkgname-${pkgver/_/-} -i ../$pkgname-6.3-libs.patch
+patch -Np1 -d $pkgname-${pkgver/_/-} -i ../$pkgname-6.3-pkgconfig.patch
 }
 build() {
 local configure_options=(
@@ -20,7 +20,7 @@
 --with-xterm-kbs=del
 --without-ada
 )
-cd $pkgname
+cd $pkgname-${pkgver/_/-}
 ./configure "${configure_options[@]}"
 make
 }
