--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,19 +2,19 @@
 
 pkgbase=glibc
 pkgname=(glibc lib32-glibc glibc-locales)
-pkgver=2.43+r5+g856c426a7534
-_commit=856c426a753450b8c6861a5b994a564f4fc16d4b
-pkgrel=1
-arch=(x86_64 aarch64)
+pkgver=2.42+r51+gcbf39c26b258
+_commit=cbf39c26b25801e9bc88499b4fd361ac172d4125
+pkgrel=2
+arch=(x86_64)
 url='https://www.gnu.org/software/libc'
 license=(GPL-2.0-or-later LGPL-2.1-or-later)
 makedepends=(
   gd
   git
+  lib32-gcc-libs
   python
 )
-makedepends_x86_64=(lib32-gcc-libs)
-options=(staticlibs !lto)
+options=(staticlibs !lto debug)
 source=(
   "git+https://sourceware.org/git/glibc.git#commit=${_commit}"
   locale.gen.txt
@@ -25,7 +25,7 @@
 )
 validpgpkeys=(7273542B39962DF7B299931416792B4EA25340F8 # Carlos O'Donell
               BC7C7372637EC10C57D7AA6579C43DFBF1CF2187) # Siddhesh Poyarekar
-b2sums=('97d1704b3b730c966ba202bb769ee21f0688f7a326f90c33756cb94bb32e954bd8ee2ce27dfcc9c4b6cca2221a337195889c21db25005969736c045b3b0c153e'
+b2sums=('f394fb9efd1564cbbea60f5f5b023a4431bf4300bcb24f4b39cdaca7b8e87d69eba76a47c4bca5b120a8484ab178c487efcf606e5fe71b29e5352b8849cedb9b'
         'c859bf2dfd361754c9e3bbd89f10de31f8e81fd95dc67b77d10cb44e23834b096ba3caa65fbc1bd655a8696c6450dfd5a096c476b3abf5c7e125123f97ae1a72'
         'bdc313a77d7158768b06864fdee6419b25f9eda5b942a394713bf61e289a37993d003c779761be4a70d9febeee2377ba2912f459e879801e3d80f4d0550a2592'
         '7c265e6d36a5c0dff127093580827d15519b6c7205c2e1300e82f0fb5b9dd00b6accb40c56581f18179c4fbbc95bd2bf1b900ace867a83accde0969f7b609f8a'
@@ -48,7 +48,7 @@
   local _configure_flags=(
       --prefix=/usr
       --with-headers=/usr/include
-      --with-bugurl=https://gitlab.archlinux.org/archlinux/packaging/packages/glibc/-/issues
+      --with-bugurl=https://gitea.artixlinux.org/packages/glibc/issues
       --enable-bind-now
       --enable-fortify-source
       --enable-kernel=4.4
@@ -62,11 +62,6 @@
 
   CFLAGS=${CFLAGS/-Wp,-D_FORTIFY_SOURCE=3/}
 
-  if [[ ${CARCH} = "aarch64" ]]; then
-     CFLAGS=${CFLAGS/-fno-plt/}
-     _configure_flags+=(--enable-memory-tagging)
-  fi
-
   (
     cd glibc-build
 
@@ -79,7 +74,6 @@
         --libdir=/usr/lib \
         --libexecdir=/usr/lib \
         --enable-cet \
-        --enable-sframe \
         "${_configure_flags[@]}"
 
     make -O
@@ -87,7 +81,7 @@
     make info
   )
 
- if [[ ${CARCH} == x86_64* ]]; then (
+  (
     cd lib32-glibc-build
     export CC="gcc -m32 -mstackrealign"
     export CXX="g++ -m32 -mstackrealign"
@@ -107,7 +101,7 @@
 
     make -O
   )
- fi
+
   make -C "${srcdir}"/glibc/localedata objdir="${srcdir}"/glibc-build \
     DESTDIR="${srcdir}"/locales install-locale-files
 }
@@ -130,7 +124,6 @@
   _skip_test tst-ntp_gettime         sysdeps/unix/sysv/linux/Makefile
   _skip_test tst-ntp_gettimex        sysdeps/unix/sysv/linux/Makefile
   _skip_test tst-pkey                sysdeps/unix/sysv/linux/Makefile
-  _skip_test tst-mseal-pkey          sysdeps/unix/sysv/linux/Makefile
   _skip_test tst-process_mrelease    sysdeps/unix/sysv/linux/Makefile
   _skip_test tst-shstk-legacy-1g     sysdeps/x86_64/Makefile
   _skip_test tst-adjtime             time/Makefile
@@ -180,7 +173,6 @@
   depends=("glibc=$pkgver")
   options+=('!emptydirs')
   install=lib32-glibc.install
-  arch=(x86_64)
 
   cd lib32-glibc-build
 


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -7,7 +7,7 @@
 local _configure_flags=(
 --prefix=/usr
 --with-headers=/usr/include
---with-bugurl=https://gitlab.archlinux.org/archlinux/packaging/packages/glibc/-/issues
+--with-bugurl=https://gitea.artixlinux.org/packages/glibc/issues
 --enable-bind-now
 --enable-fortify-source
 --enable-kernel=4.4
@@ -19,10 +19,6 @@
 --disable-werror
 )
 CFLAGS=${CFLAGS/-Wp,-D_FORTIFY_SOURCE=3/}
-if [[ ${CARCH} = "aarch64" ]]; then
-CFLAGS=${CFLAGS/-fno-plt/}
-_configure_flags+=(--enable-memory-tagging)
-fi
 (
 cd glibc-build
 echo "slibdir=/usr/lib" >> configparms
@@ -33,12 +29,11 @@
 --libdir=/usr/lib \
 --libexecdir=/usr/lib \
 --enable-cet \
---enable-sframe \
 "${_configure_flags[@]}"
 make -O
 make info
 )
-if [[ ${CARCH} == x86_64* ]]; then (
+(
 cd lib32-glibc-build
 export CC="gcc -m32 -mstackrealign"
 export CXX="g++ -m32 -mstackrealign"
@@ -54,7 +49,6 @@
 "${_configure_flags[@]}"
 make -O
 )
-fi
 make -C "${srcdir}"/glibc/localedata objdir="${srcdir}"/glibc-build \
 DESTDIR="${srcdir}"/locales install-locale-files
 }
