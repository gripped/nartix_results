--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 
 pkgbase=curl
 pkgname=(curl libcurl-compat libcurl-gnutls)
-pkgver=8.8.0
-pkgrel=1
+pkgver=8.7.1
+pkgrel=6
 pkgdesc='command line tool and library for transferring data with URLs'
 arch=('x86_64')
 url='https://curl.se/'
@@ -18,12 +18,22 @@
          'zlib' 'libz.so'
          'zstd' 'libzstd.so')
 makedepends=('git' 'patchelf')
+options=(debug)
 checkdepends=('valgrind')
 validpgpkeys=('27EDEAF22F3ABCEB50DB9A125CC908FDB71E12C2') # Daniel Stenberg
-source=("git+https://github.com/curl/curl.git#tag=curl-${pkgver//./_}?signed")
-sha512sums=('743cac6059697b8aec637cb0ca94bc0606a9bbcf274f77847a1ceb9bbadc0259a9fbf30133323af2543d8df65ec6cd3e396cd999aca8fe73dde794a9c3dcbf6c')
+source=("git+https://github.com/curl/curl.git#tag=curl-${pkgver//./_}?signed"
+        '0001-bump-version-to-match-last-tag.patch'
+        'curl-8_7_1-h2-ngtcp2-write-error-handling.patch')
+sha512sums=('38b55dc916a64a1fd40a8af3e9a694ae918f8efb714430834491ebbe0ceeee4b58ba804afa15da966cbcf9cd7100ce373aed7b2101dff56f742996072caaf09a'
+            '51df4903eff9f1a15b1317ea4a8ee2b8537f347984f2524f42213b09344cd6109c621a4b81b37d2fcf2027387bb81cf0a744a48e96b86c4e268c43261ff86845'
+            '5af6c46ac6bfc39963d22450721f89770fd3ebbe198186c0a95ee3b16b8f89722d8d2d230ec21fdd9a52b949be5704c6980802e2052eec325085f60881f32c1f')
 
 _backports=(
+  'b30d694a027eb771c02a3db0dee0ca03ccab7377'
+
+  '721941aadf4adf4f6aeb3f4c0ab489bb89610c36'
+
+  '2793acbfc5e89fb130b1d4e045cb6cd7b6549412'
 )
 
 _reverts=(
@@ -45,6 +55,10 @@
     git log --oneline -1 "${_c}"
     git revert -n "${_c}"
   done
+
+  patch -Np1 < ../0001-bump-version-to-match-last-tag.patch
+
+  patch -Np1 < ../curl-8_7_1-h2-ngtcp2-write-error-handling.patch
 
   sed -i \
     -e "/\WLIBCURL_VERSION\W/c #define LIBCURL_VERSION \"${pkgver}\"" \


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -13,6 +13,8 @@
 git log --oneline -1 "${_c}"
 git revert -n "${_c}"
 done
+patch -Np1 < ../0001-bump-version-to-match-last-tag.patch
+patch -Np1 < ../curl-8_7_1-h2-ngtcp2-write-error-handling.patch
 sed -i \
 -e "/\WLIBCURL_VERSION\W/c #define LIBCURL_VERSION \"${pkgver}\"" \
 -e "/\WLIBCURL_TIMESTAMP\W/c #define LIBCURL_TIMESTAMP \"$(git log -1 --format=%cs "curl-${pkgver//./_}")\"" \
