--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -18,15 +18,17 @@
          'zlib' 'libz.so'
          'zstd' 'libzstd.so')
 makedepends=('git' 'patchelf')
+options=(debug)
 checkdepends=('valgrind')
 validpgpkeys=('27EDEAF22F3ABCEB50DB9A125CC908FDB71E12C2') # Daniel Stenberg
 source=("git+https://github.com/curl/curl.git#tag=curl-${pkgver//./_}?signed"
-        '0001-bump-version-to-match-last-tag.patch')
+        '0001-bump-version-to-match-last-tag.patch'
+        '0002-brotli-and-others-simply-pass-through-0-length-writes.patch')
 sha512sums=('38b55dc916a64a1fd40a8af3e9a694ae918f8efb714430834491ebbe0ceeee4b58ba804afa15da966cbcf9cd7100ce373aed7b2101dff56f742996072caaf09a'
-            '51df4903eff9f1a15b1317ea4a8ee2b8537f347984f2524f42213b09344cd6109c621a4b81b37d2fcf2027387bb81cf0a744a48e96b86c4e268c43261ff86845')
+            '51df4903eff9f1a15b1317ea4a8ee2b8537f347984f2524f42213b09344cd6109c621a4b81b37d2fcf2027387bb81cf0a744a48e96b86c4e268c43261ff86845'
+            '6bb9bf70eacef55a91ed0cec5edd8887af9a7ef6e6d819624c6c532360fe1f524aa9b2417496fcdca54e1ede22bc542c6581d420b068b5c24da932ea03426106')
 
 _backports=(
-  'b30d694a027eb771c02a3db0dee0ca03ccab7377'
 )
 
 _reverts=(
@@ -50,6 +52,7 @@
   done
 
   patch -Np1 < ../0001-bump-version-to-match-last-tag.patch
+  patch -Np1 < ../0002-brotli-and-others-simply-pass-through-0-length-writes.patch
 
   sed -i \
     -e "/\WLIBCURL_VERSION\W/c #define LIBCURL_VERSION \"${pkgver}\"" \


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -14,6 +14,7 @@
 git revert -n "${_c}"
 done
 patch -Np1 < ../0001-bump-version-to-match-last-tag.patch
+patch -Np1 < ../0002-brotli-and-others-simply-pass-through-0-length-writes.patch
 sed -i \
 -e "/\WLIBCURL_VERSION\W/c #define LIBCURL_VERSION \"${pkgver}\"" \
 -e "/\WLIBCURL_TIMESTAMP\W/c #define LIBCURL_TIMESTAMP \"$(git log -1 --format=%cs "curl-${pkgver//./_}")\"" \
