--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -5,7 +5,7 @@
   glib2-devel
   glib2-docs
 )
-pkgver=2.86.0
+pkgver=2.84.4
 pkgrel=2
 pkgdesc="Low level core library"
 url="https://gitlab.gnome.org/GNOME/glib"
@@ -44,15 +44,13 @@
   "git+https://gitlab.gnome.org/GNOME/gvdb.git"
   0001-glib-compile-schemas-Remove-noisy-deprecation-warnin.patch
   0002-gdesktopappinfo-Add-more-known-terminals.patch
-  0003-meson.build-Avoid-linking-with-libatomic-when-unneed.patch
   gio-querymodules.hook
   glib-compile-schemas.hook
 )
-b2sums=('afe82f85c6b93273917ef4b7127dfb58c5e0f1e1946226abb7e0b80abd1ab6f0d8a98b030b0dffac79e48b2f9c9540879044b8a486d8996e59c5210dcd333d0c'
+b2sums=('6b3f266d7bbe12eb01b04e886836daf0c4908e4dff53491baf8af94e40445d7ae1d463ac65b3f6499c173930a9463899ab789a37a09c1bde4252035ce1868368'
         'SKIP'
         '4ddbd31f5f466fce99d82890292ff922555a9ab379d22202aeea5127f58798668f871dea0485cc0f458069276ad512412285ede6c8f3e36bea899358f49e931a'
-        'cc39621757253c9f9e11da4ae40dc16d24f2898a7ee34fbfe5b7709c4f0139c04fab6c1138402c16859b2421c45d55bdde522aa1a1b2c6c3544d87b7c2d10dff'
-        '76033114a10d3df461981502eb386d0d6e645eaf27885f5e6dc75bc8495d770e0e75338f7191ae534825b30b75a84e2e9889f33fcdbd109ae10a85c2d34b1e28'
+        'bf57425e3081a8f5d36d6a54eff1bfa93ba6bab8f0a4d3f3bf1e319ebfa71d99ce6a0466166fc694f53c5bd151e9cc65339e222c48e963f0cdc075852d0e1f7c'
         '14c9211c0557f6d8d9a914f1b18b7e0e23f79f4abde117cb03ab119b95bf9fa9d7a712aa0a29beb266468aeb352caa3a9e4540503cfc9fe0bbaf764371832a96'
         'acc2f474139e535f4bdd70ac22a9150f786b3395e679b14d0d3fbb9361d511bb1b5069d95b2a7ac9c0f3d901b03a0c037eb273446ba00764191b30a777bd2bc9')
 validpgpkeys=(
@@ -63,11 +61,11 @@
 prepare() {
   cd glib
 
+  git revert -n 4e6dc4dee0e1c6407113597180d9616b4f275f94
+
   git apply -3 ../0001-glib-compile-schemas-Remove-noisy-deprecation-warnin.patch
 
   git apply -3 ../0002-gdesktopappinfo-Add-more-known-terminals.patch
-
-  git apply -3 ../0003-meson.build-Avoid-linking-with-libatomic-when-unneed.patch
 
   git submodule init
   git submodule set-url subprojects/gvdb "$srcdir/gvdb"
@@ -93,7 +91,7 @@
   CFLAGS+=" -ffat-lto-objects"
   CXXFLAGS+=" -ffat-lto-objects"
 
-  arch-meson glib build "${meson_options[@]}"
+  artix-meson glib build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -123,7 +121,6 @@
     'gvfs: most gio functionality'
   )
   options+=(staticlibs)
-  install=glib2.install
 
   meson install -C build --destdir "$pkgdir"
 


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 prepare() {
 cd glib
+git revert -n 4e6dc4dee0e1c6407113597180d9616b4f275f94
 git apply -3 ../0001-glib-compile-schemas-Remove-noisy-deprecation-warnin.patch
 git apply -3 ../0002-gdesktopappinfo-Add-more-known-terminals.patch
-git apply -3 ../0003-meson.build-Avoid-linking-with-libatomic-when-unneed.patch
 git submodule init
 git submodule set-url subprojects/gvdb "$srcdir/gvdb"
 git -c protocol.file.allow=always -c protocol.allow=never submodule update
@@ -23,6 +23,6 @@
 CXXFLAGS+=" -g3"
 CFLAGS+=" -ffat-lto-objects"
 CXXFLAGS+=" -ffat-lto-objects"
-arch-meson glib build "${meson_options[@]}"
+artix-meson glib build "${meson_options[@]}"
 meson compile -C build
 }
