--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -13,9 +13,9 @@
 pkgdesc='GNU GRand Unified Bootloader (2)'
 epoch=2
 _pkgver=2.12
-_unifont_ver='16.0.02'
-pkgver='2.12.r212.g4dc616657'
-pkgrel=2
+_unifont_ver='16.0.01'
+pkgver=${_pkgver/-/}
+pkgrel=3.2
 url='https://www.gnu.org/software/grub/'
 arch=('x86_64')
 license=('GPL-3.0-or-later')
@@ -98,23 +98,20 @@
   '0001-00_header-add-GRUB_COLOR_-variables.patch'
   '0002-10_linux-detect-archlinux-initramfs.patch'
   '0003-support-dropins-for-default-configuration.patch'
-  '1001-loopback-ext.patch'
   'grub.default'
   'sbat.csv'
 )
 b2sums=('a6cec7271c3ea54a99f02ee6bc0a5825c8be657af68ba9a32b39a5fe8bcb571fb1ba39210426f6bf6a48d913e6e00df37dc2123ea1b39330f4c47bd9dbac9ae3'
         'SKIP'
-        '03d2c64d795e0dc904d3648ff0d74e49ca4003964cd1c784dc82e61b3d070cc35c295a3291163c3c990db61a8590df0f718fb212ea96e4a4b4734e02d005bc2c'
+        '9f306564a63961f3a9f7a45f3f3363b1cc44a1651c3fb858ca4e87cdad79668f9aaa4b2989f91032cd614e37a98e5ca5eda2e2b0315d99deab6d0732b6f57a0d'
         'SKIP'
         '992c71790785304c28fbaf0dba21dab3e283b199509f0e7e1aa0df08126da75e15b6626c3638279ff2ecaa59b925096d7dbd67d6a53cebd0ce4326ff3719d25b'
         'b4cd9ac976a579eca19d54c0b31c8d6324525fe5a0b9f5405deb63845367ac1adaa80ece4c166dfd5304608c41aa44b4f64efe235c03f437523b993be06e06e3'
         'a7820bfe9bddc34af49de63222b3d2a9788367083e29db13b33120269adbfa1619ac421d8597f662f756592889f5cc5538544a17d9936d1420bd5742282c710c'
-        'b8316136261563a411d30fd44b71c20c8c8c65b94fd576ac4122ac40a15c8b948547c31b17cc31757f224dd2bb79fb8936aa0d20315e988ed1e9f5b55f649044'
-        '5e42db2161e8f594b82005b26e590a20a0e8d32b01119bdd7b1a7f7c4b0f3360e8730a3ecdd5912a4dc7af5bd9aed1c3e780965ad6747d831b470158da19388d'
-        'ce9b3904ce4bd00463c226ab1c97d3af94c6151c408bcd6483a0dd07ae4c343ee135907ad887c1d93525ec95d87409ef703ac7278698d49e99342332e483c436')
+        'cc37eb36944fc2d61a6f07f9957e2092288d6e5aceb317bd61d2ed3234b8fb479a5bf41570cebded2ba565bb8c9ed3743982bc108748d8e2de1aae8f287b49fc'
+        'e1320fd6487946fbc806d7ccae7ec6b1066d8abc1f709c803a346f41947286432c71967a94b891b374db854f8efad1b1d45578f56ffe198d9052979c3b7b5b60')
 
 _backports=(
-  "grub-${_pkgver}..4dc6166571645780c459dde2cdc1b001a5ec844c"
 )
 
 _reverts=(
@@ -147,19 +144,17 @@
   cd "${srcdir}/grub/"
 
   echo "Apply backports..."
-  local _c _l
+  local _c
   for _c in "${_backports[@]}"; do
-    if [[ "${_c}" == *..* ]]; then _l='--reverse'; else _l='--max-count=1'; fi
-    git log --oneline "${_l}" "${_c}"
-    git cherry-pick --mainline 1 --no-commit "${_c}"
+    git log --oneline -1 "${_c}"
+    git cherry-pick -n "${_c}"
   done
 
   echo "Apply reverts..."
-  local _c _l
+  local _c
   for _c in "${_reverts[@]}"; do
-    if [[ "${_c}" == *..* ]]; then _l='--reverse'; else _l='--max-count=1'; fi
-    git log --oneline "${_l}" "${_c}"
-    git revert --mainline 1 --no-commit "${_c}"
+    git log --oneline -1 "${_c}"
+    git revert -n "${_c}"
   done
 
   echo "Patch to enable GRUB_COLOR_* variables in grub-mkconfig..."
@@ -170,9 +165,6 @@
 
   echo "Patch to support dropins for default configuration..."
   patch -Np1 -i "${srcdir}/0003-support-dropins-for-default-configuration.patch"
-
-  echo "Patch: fs/ext2: Rework out-of-bounds read for inline and external exten"
-  patch -Np1 -i "${srcdir}/1001-loopback-ext.patch"
 
   echo "Fix DejaVuSans.ttf location so that grub-mkfont can create *.pf2 files for starfield theme..."
   sed 's|/usr/share/fonts/dejavu|/usr/share/fonts/dejavu /usr/share/fonts/TTF|g' -i "configure.ac"
@@ -362,4 +354,8 @@
 
   echo "Package grub bios stuff..."
   _package_grub-common_and_bios
-}
+
+  install -m0755 /dev/stdin "${pkgdir}"/usr/bin/update-grub <<END
+grub-mkconfig -o /boot/grub/grub.cfg
+END
+}


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,18 +1,16 @@
 prepare() {
 cd "${srcdir}/grub/"
 echo "Apply backports..."
-local _c _l
+local _c
 for _c in "${_backports[@]}"; do
-if [[ "${_c}" == *..* ]]; then _l='--reverse'; else _l='--max-count=1'; fi
-git log --oneline "${_l}" "${_c}"
-git cherry-pick --mainline 1 --no-commit "${_c}"
+git log --oneline -1 "${_c}"
+git cherry-pick -n "${_c}"
 done
 echo "Apply reverts..."
-local _c _l
+local _c
 for _c in "${_reverts[@]}"; do
-if [[ "${_c}" == *..* ]]; then _l='--reverse'; else _l='--max-count=1'; fi
-git log --oneline "${_l}" "${_c}"
-git revert --mainline 1 --no-commit "${_c}"
+git log --oneline -1 "${_c}"
+git revert -n "${_c}"
 done
 echo "Patch to enable GRUB_COLOR_* variables in grub-mkconfig..."
 patch -Np1 -i "${srcdir}/0001-00_header-add-GRUB_COLOR_-variables.patch"
@@ -20,8 +18,6 @@
 patch -Np1 -i "${srcdir}/0002-10_linux-detect-archlinux-initramfs.patch"
 echo "Patch to support dropins for default configuration..."
 patch -Np1 -i "${srcdir}/0003-support-dropins-for-default-configuration.patch"
-echo "Patch: fs/ext2: Rework out-of-bounds read for inline and external exten"
-patch -Np1 -i "${srcdir}/1001-loopback-ext.patch"
 echo "Fix DejaVuSans.ttf location so that grub-mkfont can create *.pf2 files for starfield theme..."
 sed 's|/usr/share/fonts/dejavu|/usr/share/fonts/dejavu /usr/share/fonts/TTF|g' -i "configure.ac"
 echo "Fix mkinitcpio 'rw' FS#36275..."
