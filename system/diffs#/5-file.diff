--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,31 +1,25 @@
 
 pkgname=file
 pkgver=5.46
-pkgrel=4
+pkgrel=3
 pkgdesc='File type identification utility'
 arch=('x86_64')
 license=('custom')
 url='https://www.darwinsys.com/file/'
-depends=('glibc'
-         'bzip2' 'libbz2.so'
-         'libseccomp' 'libseccomp.so'
-         'xz' 'liblzma.so'
-         'zlib' 'libz.so'
-         'zstd' 'libzstd.so')
-makedepends=('git')
+depends=('glibc' 'zlib' 'xz' 'bzip2' 'libseccomp' 'libseccomp.so' 'zstd' 'libzstd.so')
 provides=('libmagic.so')
 options=('!emptydirs')
-source=("git+https://github.com/file/file.git#tag=FILE${pkgver//./_}"
+source=("https://astron.com/pub/$pkgname/$pkgname-$pkgver.tar.gz"{,.asc}
         '0001-PR-579-net147-Fix-stack-overrun.patch'
         '0002-PR-571-jschleus-Some-zip-files-are-misclassified-as-data.patch')
 validpgpkeys=('BE04995BA8F90ED0C0C176C471112AB16CB33B3A') # Christos Zoulas
-sha256sums=('c0e07f4456de8ca4c7c8225f0675bc2709e9ed376db8d6e44c799884b1053cf2'
-            'fd618e04f3c52a77a74883ec81e918576b4c326b1d42be0dc5427033b181f7b2'
+sha256sums=('c9cc77c7c560c543135edc555af609d5619dbef011997e988ce40a3d75d86088'
+            'SKIP'
+            '2db041dcadaf8500a8e10d914890963f27a5b716e97f0baf839e01f7c3d8b576'
             'c93c8ae784ba27c2eec02a94db7bc7080d1b116d4c8e4a9191bd67b4288f2b0e')
 
 prepare() {
-  cd file
-
+  cd $pkgname-$pkgver
   local src
   for src in "${source[@]}"; do
     src="${src%%::*}"
@@ -34,12 +28,10 @@
     echo "Applying patch $src..."
     patch -Np1 < "../$src"
   done
-
-  autoreconf -fiv
 }
 
 build() {
-  cd file
+  cd $pkgname-$pkgver
 
   CFLAGS+=" -pthread"
 
@@ -53,14 +45,12 @@
 }
 
 check() {
-  cd file
-
+  cd $pkgname-$pkgver
   make check
 }
 
 package() {
-  cd file
-
+  cd $pkgname-$pkgver
   make DESTDIR="$pkgdir" install
   install -Dm644 COPYING "$pkgdir/usr/share/licenses/$pkgname/COPYING"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,11 +1,7 @@
 bzip2
-git
 glibc
-libbz2.so
-liblzma.so
 libseccomp
 libseccomp.so
-libz.so
 libzstd.so
 xz
 zlib

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,5 @@
 prepare() {
-cd file
+cd $pkgname-$pkgver
 local src
 for src in "${source[@]}"; do
 src="${src%%::*}"
@@ -8,10 +8,9 @@
 echo "Applying patch $src..."
 patch -Np1 < "../$src"
 done
-autoreconf -fiv
 }
 build() {
-cd file
+cd $pkgname-$pkgver
 CFLAGS+=" -pthread"
 ./configure \
 --prefix=/usr \
