--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,28 +1,21 @@
 
-pkgbase=links
-pkgname=('links'
-         'xlinks')
+pkgname=links
+pkgver=2.30
+pkgrel=1
 pkgdesc='A text WWW browser, similar to Lynx'
-pkgver=2.30
-pkgrel=2
 arch=('x86_64')
 url='http://links.twibright.com/'
-license=('GPL-2.0-or-later')
-depends=('brotli' 'libbrotlidec.so'
-         'bzip2' 'libbz2.so'
-         'glibc'
-         'gpm' 'libgpm.so'
-         'libevent' 'libevent-2.1.so'
-         'openssl' 'libcrypto.so' 'libssl.so'
-         'xz' 'liblzma.so'
-         'zstd' 'libzstd.so'
-         'zlib' 'libz.so')
-makedepends=('libgomp' 'libjpeg-turbo' 'libpng' 'libtiff' 'libwebp' 'libx11')
-source=("http://links.twibright.com/download/${pkgbase}-${pkgver}.tar.bz2"
-        '0001-fix-build-with-recent-gcc.patch'
+license=('GPL')
+depends=('brotli' 'libbrotlidec.so' 'bzip2' 'libbz2.so' 'gpm' 'libgpm.so'
+         'libevent' 'openssl' 'xz' 'zstd' 'libzstd.so')
+makedepends=('libtiff' 'libpng' 'libxt' 'librsvg')
+optdepends=('libx11: for using xlinks'
+	    'libtiff: for using xlinks'
+	    'libpng: for using xlinks'
+	    'librsvg: for using xlinks')
+source=("http://links.twibright.com/download/${pkgname}-${pkgver}.tar.bz2"
         'links.desktop')
 sha256sums=('c4631c6b5a11527cdc3cb7872fc23b7f2b25c2b021d596be410dadb40315f166'
-            '0b3bd401d9ff6ff1354607e56647ad2cb7ed7c1258c99bef714bdd050d3c64bb'
             'f96bf2638e9c309bfdb857bd62a732b980231b3a683cd585ec872b249c2c1b19')
 
 _configure_options=(
@@ -32,16 +25,14 @@
 )
 
 prepare() {
-  cd "${pkgbase}-${pkgver}"
-
-  patch -Np1 < ../0001-fix-build-with-recent-gcc.patch
+  cd "${pkgname}-${pkgver}"
 
   sed -i '/AC_PROG_CC/a AC_PROG_CXX/' configure.in
   autoreconf -fi
 }
 
 build() {
-  cd "${pkgbase}-${pkgver}"
+  cd "${pkgname}-${pkgver}"
 
   ( cd intl
     ./gen-intl
@@ -63,11 +54,12 @@
   make
 }
 
-package_links() {
-  optdepends=('xlinks: support for X11')
+package() {
+  cd "${pkgname}-${pkgver}"
+  make DESTDIR="${pkgdir}" install
 
-  cd "${pkgbase}-${pkgver}"
-  make DESTDIR="${pkgdir}" install
+  install -D -m0755 xlinks "${pkgdir}/usr/bin/xlinks"
+  ln -s links.1.gz "${pkgdir}/usr/share/man/man1/xlinks.1.gz"
 
   install -D -m0644 "${srcdir}/links.desktop" "${pkgdir}/usr/share/applications/links.desktop"
   install -d "${pkgdir}/usr/share/pixmaps"
@@ -76,21 +68,3 @@
   install -d "${pkgdir}/usr/share/doc/links/calibration"
   install -m0644 doc/links_cal/* "${pkgdir}/usr/share/doc/links/calibration/"
 }
-
-package_xlinks() {
-  pkgdesc='A text WWW browser, similar to Lynx (with support for X11)'
-  depends+=('links'
-            'libgomp' 'libgomp.so'
-            'libjpeg-turbo' 'libjpeg.so'
-            'libpng' 'libpng16.so'
-            'libtiff' 'libtiff.so'
-            'libwebp' 'libwebp.so'
-            'libx11' #'libX11.so'
-  )
-
-  cd "${pkgbase}-${pkgver}"
-
-  install -D -m0755 xlinks "${pkgdir}/usr/bin/xlinks"
-  install -d -m0755 "${pkgdir}/usr/share/man/man1"
-  ln -s links.1.gz "${pkgdir}/usr/share/man/man1/xlinks.1.gz"
-}


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,30 +1,15 @@
 brotli
 bzip2
-glibc
 gpm
 libbrotlidec.so
 libbz2.so
-libcrypto.so
 libevent
-libevent-2.1.so
-libgomp
-libgomp.so
 libgpm.so
-libjpeg-turbo
-libjpeg.so
-liblzma.so
 libpng
-libpng16.so
-libssl.so
+librsvg
 libtiff
-libtiff.so
-libwebp
-libwebp.so
-libx11
-libz.so
+libxt
 libzstd.so
-links
 openssl
 xz
-zlib
 zstd

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,11 +1,10 @@
 prepare() {
-cd "${pkgbase}-${pkgver}"
-patch -Np1 < ../0001-fix-build-with-recent-gcc.patch
+cd "${pkgname}-${pkgver}"
 sed -i '/AC_PROG_CC/a AC_PROG_CXX/' configure.in
 autoreconf -fi
 }
 build() {
-cd "${pkgbase}-${pkgver}"
+cd "${pkgname}-${pkgver}"
 ( cd intl
 ./gen-intl
 ./synclang )
