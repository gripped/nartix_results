--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 
 
 pkgname=(gcc gcc-libs lib32-gcc-libs gcc-ada gcc-d gcc-fortran gcc-go gcc-m2 gcc-objc gcc-rust gcc-gcobol lto-dump libgccjit)
-pkgver=15.2.1+r301+gf24307422d1d
-_commit=f24307422d1d15f99b2f8af19894e573f7036fb1
+pkgver=15.2.1+r22+gc4e96a094636
+_commit=c4e96a094636b3c15b5e3bfde8673ec3b8172993
 pkgrel=1
 pkgdesc='The GNU Compiler Collection'
 arch=(x86_64)
@@ -29,7 +29,7 @@
   python-pytest
   tcl
 )
-options=(!emptydirs !lto)
+options=(!emptydirs !lto debug)
 _libdir=usr/lib/gcc/$CHOST/${pkgver%%+*}
 source=(git+https://sourceware.org/git/gcc.git#commit=${_commit}
         c89 c99
@@ -39,14 +39,10 @@
               86CFFCA918CF3AF47147588051E8B148A9999C34  # foutrelis@archlinux.org
               13975A70E63C361C73AE69EF6EEB81F8981C74C7  # richard.guenther@gmail.com
               D3A93CAD751C2AF4F8C7AD516C35B99309B5FA62) # Jakub Jelinek <jakub@redhat.com>
-sha256sums=('76a99cc53c730139e838ef6c132c0b36b4e511a5c2266b596015d2b765a3fa89'
+sha256sums=('d1d0263f7595e2189110dbe5d12608e144637a6a29a247e41c6926915caab8de'
             '7b09ec947f90b98315397af675369a1e3dfc527fa70013062e6e85c4be0275ab'
             '44ea973558842f3f4bd666bdaf6e810fd7b7c7bd36b5cc4c69f93d2cd0124fc7'
             '1773f5137f08ac1f48f0f7297e324d5d868d55201c03068670ee4602babdef2f')
-pkgver() {
-  cd gcc
-  echo "$(cat gcc/BASE-VER)+$(git describe --abbrev=12 --tags | sed 's/[^-]*-[^-]*-//;s/[^-]*-/r&/;s/-/+/g;s/_/./')"
-}
 
 prepare() {
   [[ ! -d gcc ]] && ln -s gcc-${pkgver/+/-} gcc
@@ -69,7 +65,7 @@
       --libexecdir=/usr/lib
       --mandir=/usr/share/man
       --infodir=/usr/share/info
-      --with-bugurl=https://gitlab.archlinux.org/archlinux/packaging/packages/gcc/-/issues \
+      --with-bugurl=https://gitea.artixlinux.org/packages/gcc/issues
       --with-build-config=bootstrap-lto
       --with-linker-hash-style=gnu
       --with-system-zlib
@@ -205,18 +201,15 @@
   make -C $CHOST/libstdc++-v3/include DESTDIR="$pkgdir" install
   make -C $CHOST/libstdc++-v3/libsupc++ DESTDIR="$pkgdir" install
   make -C $CHOST/libstdc++-v3/python DESTDIR="$pkgdir" install
-  make -C $CHOST/libatomic DESTDIR="$pkgdir" install
   make -C $CHOST/32/libstdc++-v3/src DESTDIR="$pkgdir" install
   make -C $CHOST/32/libstdc++-v3/include DESTDIR="$pkgdir" install
   make -C $CHOST/32/libstdc++-v3/libsupc++ DESTDIR="$pkgdir" install
-  make -C $CHOST/32/libatomic DESTDIR="$pkgdir" install
 
   make DESTDIR="$pkgdir" install-libcc1
   install -d "$pkgdir/usr/share/gdb/auto-load/usr/lib"
   mv "$pkgdir"/usr/lib/libstdc++.so.6.*-gdb.py \
     "$pkgdir/usr/share/gdb/auto-load/usr/lib/"
   rm "$pkgdir"/usr/lib{,32}/libstdc++.so*
-  rm "$pkgdir"/usr/lib{,32}/libatomic.so*
 
   make DESTDIR="$pkgdir" install-fixincludes
   make -C gcc DESTDIR="$pkgdir" install-mkheaders
@@ -437,32 +430,32 @@
 }
 
 package_gcc-rust() {
-  pkgdesc="Rust frontend for GCC"
-  depends=("gcc=$pkgver-$pkgrel" libisl.so)
-
-  cd gcc-build
-  make -C gcc DESTDIR="$pkgdir" rust.install-{common,man,info}
-
-  install -Dm755 gcc/gccrs "$pkgdir"/usr/bin/gccrs
-  install -Dm755 gcc/crab1 "$pkgdir"/usr/bin/crab1
-
-  install -d "$pkgdir/usr/share/licenses/$pkgname/"
-  ln -s /usr/share/licenses/gcc-libs/RUNTIME.LIBRARY.EXCEPTION \
-    "$pkgdir/usr/share/licenses/$pkgname/"
+ pkgdesc="Rust frontend for GCC"
+ depends=("gcc=$pkgver-$pkgrel" libisl.so)
+
+ cd gcc-build
+ make -C gcc DESTDIR="$pkgdir" rust.install-{common,man,info}
+
+ install -Dm755 gcc/gccrs "$pkgdir"/usr/bin/gccrs
+ install -Dm755 gcc/crab1 "$pkgdir"/usr/bin/crab1
+
+ install -d "$pkgdir/usr/share/licenses/$pkgname/"
+ ln -s /usr/share/licenses/gcc-libs/RUNTIME.LIBRARY.EXCEPTION \
+   "$pkgdir/usr/share/licenses/$pkgname/"
 }
 
 package_gcc-gcobol() {
-  pkgdesc="Cobol frontend for GCC"
-  depends=("gcc=$pkgver-$pkgrel" libisl.so)
-
-  cd gcc-build
-  make -C gcc DESTDIR="$pkgdir" cobol.install-{common,man,info}
-
-  install -Dm755 gcc/gcobol "$pkgdir"/usr/bin/gcobol
-
-  install -d "$pkgdir/usr/share/licenses/$pkgname/"
-  ln -s /usr/share/licenses/gcc-libs/RUNTIME.LIBRARY.EXCEPTION \
-    "$pkgdir/usr/share/licenses/$pkgname/"
+ pkgdesc="Cobol frontend for GCC"
+ depends=("gcc=$pkgver-$pkgrel" libisl.so)
+
+ cd gcc-build
+ make -C gcc DESTDIR="$pkgdir" cobol.install-{common,man,info}
+
+ install -Dm755 gcc/gcobol "$pkgdir"/usr/bin/gcobol
+
+ install -d "$pkgdir/usr/share/licenses/$pkgname/"
+ ln -s /usr/share/licenses/gcc-libs/RUNTIME.LIBRARY.EXCEPTION \
+   "$pkgdir/usr/share/licenses/$pkgname/"
 }
 
 package_lto-dump() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -14,7 +14,7 @@
 --libexecdir=/usr/lib
 --mandir=/usr/share/man
 --infodir=/usr/share/info
---with-bugurl=https://gitlab.archlinux.org/archlinux/packaging/packages/gcc/-/issues \
+--with-bugurl=https://gitea.artixlinux.org/packages/gcc/issues
 --with-build-config=bootstrap-lto
 --with-linker-hash-style=gnu
 --with-system-zlib
