--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,7 +3,7 @@
 pkgname=(
   lib32-p11-kit
 )
-pkgver=0.25.7
+pkgver=0.25.5
 pkgrel=1
 pkgdesc="Loads and enumerates PKCS#11 modules (32-bit library)"
 url="https://p11-glue.freedesktop.org"
@@ -16,40 +16,36 @@
   libp11-kit
 )
 makedepends=(
-  git
   meson
+
 )
 checkdepends=(
   lib32-gnutls
 )
 source=(
-  "git+https://github.com/p11-glue/p11-kit?signed#tag=$pkgver"
-  git+https://github.com/p11-glue/pkcs11-json
+  https://github.com/p11-glue/p11-kit/releases/download/$pkgver/p11-kit-$pkgver.tar.xz{,.sig}
 )
-b2sums=('b69e4b5a97671dd1b72b9914a1ae565164ad84fa0209bdbbfce3a73e4f36ce6c60b0f19c619c2817a5d920d310bed56db3124843ea677cd1325866006abfde02'
-        'SKIP')
+b2sums=('96d6a9c2807586abafae4da4df89f566672733963997d6a83e00aaf83a7a0c0e2995638f505e98fb87a90c60bde28814f1e8b7d5071bf0af96bb0467105a1ddc'
+  'SKIP')
 validpgpkeys=(
-  C0F67099B808FB063E2C81117BFB1108D92765AF  # Stef Walter <stef@thewalter.net>
-  462225C3B46F34879FC8496CD605848ED7E69871  # Daiki Ueno <ueno@unixuser.org>
-  5D46CB0F763405A7053556F47A75A648B3F9220C  # Zoltan Fridrich <zfridric@redhat.com>
+  C0F67099B808FB063E2C81117BFB1108D92765AF # Stef Walter <stef@thewalter.net>
+  462225C3B46F34879FC8496CD605848ED7E69871 # Daiki Ueno <ueno@unixuser.org>
+  5D46CB0F763405A7053556F47A75A648B3F9220C # Zoltan Fridrich <zfridric@redhat.com>
 )
 
 prepare() {
-  cd p11-kit
-
-  git submodule init
-  git submodule set-url subprojects/pkcs11-json "$srcdir/pkcs11-json"
-  git -c protocol.file.allow=always -c protocol.allow=never submodule update
+  cd p11-kit-$pkgver
 }
 
 build() {
   local meson_options=(
     --cross-file lib32
     -D bash_completion=disabled
+    -D systemd=disabled
     -D trust_paths=/etc/ca-certificates/trust-source:/usr/share/ca-certificates/trust-source
   )
 
-  arch-meson p11-kit build "${meson_options[@]}"
+  artix-meson p11-kit-$pkgver build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -64,6 +60,6 @@
 
   rm -r "$pkgdir"/{etc,usr/{bin,include,lib,share}}
 
-  install -Dt "$pkgdir/usr/share/licenses/$pkgname" -m644 p11-kit/COPYING
+  install -Dt "$pkgdir/usr/share/licenses/$pkgname" -m644 p11-kit-$pkgver/COPYING
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
-git
 lib32-glibc
 lib32-libffi
 lib32-libtasn1

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,15 +1,13 @@
 prepare() {
-cd p11-kit
-git submodule init
-git submodule set-url subprojects/pkcs11-json "$srcdir/pkcs11-json"
-git -c protocol.file.allow=always -c protocol.allow=never submodule update
+cd p11-kit-$pkgver
 }
 build() {
 local meson_options=(
 --cross-file lib32
 -D bash_completion=disabled
+-D systemd=disabled
 -D trust_paths=/etc/ca-certificates/trust-source:/usr/share/ca-certificates/trust-source
 )
-arch-meson p11-kit build "${meson_options[@]}"
+artix-meson p11-kit-$pkgver build "${meson_options[@]}"
 meson compile -C build
 }
