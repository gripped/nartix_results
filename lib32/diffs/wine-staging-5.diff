--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 
 pkgname=wine-staging
-pkgver=10.3
+pkgver=10.2
 pkgrel=1
 
 _pkgbasever=${pkgver/rc/-rc}
@@ -8,10 +8,12 @@
 
 source=("git+https://gitlab.winehq.org/wine/wine.git?signed#tag=wine-$_pkgbasever"
         "git+https://gitlab.winehq.org/wine/wine-staging.git#tag=v$_pkgbasever"
+        fix-ptr-access.patch::https://gitlab.winehq.org/wine/wine/-/commit/05315ce3da4d6f04232611fb5dd6ffbd77f87ce7.patch
         30-win32-aliases.conf
         wine-binfmt.conf)
-sha512sums=('d3cdc9c798d7c3ebffc73de8000e7c79260b8ba3019b41bebed8b329293ed4283110b3404a7d71a8204416fda2045bb2778d5f260f1139fb991ea798a5166e27'
-            '4fb3757b5b129db1913299283dc7819ab50531e0c56afd9a63eb09785cd8a0b5739d51c2bbff98140c9def78f564d57053ac9219743d613fce9d8c965225ca8d'
+sha512sums=('2664d57860cd74706556bcf7e6ec48b4a7c49d8f22ed791bfc43caa50d43733a5a28c68a9d89842b9cce7b403d68dd21b9e328efc3349229cdeaf1f31188b51e'
+            '913331168a9e0011314f26dfdc9f41241652246688984025768c7b2e7a52aa257fb17c8477c22df795a23b199c834b462e03aa8da29bebe3811057129741dd00'
+            '547a1a31fcfa421e982da6032cdf398e5814d6f35c0670029d69853b89bde6dddfe47c514c2c5ff59d1d0f673c9a9df9adce88d199305f8ed2143ae8d65e2057'
             '6e54ece7ec7022b3c9d94ad64bdf1017338da16c618966e8baf398e6f18f80f7b0576edf1d1da47ed77b96d577e4cbb2bb0156b0b11c183a0accf22654b0a2bb'
             'bdde7ae015d8a98ba55e84b86dc05aca1d4f8de85be7e4bd6187054bfe4ac83b5a20538945b63fb073caab78022141e9545685e4e3698c97ff173cf30859e285')
 validpgpkeys=(5AC1A08B03BD7A313E0A955AF5E6E9EEB9461DD7
@@ -22,6 +24,7 @@
 arch=(x86_64)
 options=(staticlibs !lto)
 license=(LGPL-2.1-or-later)
+CFLAGS+=" -Wno-error=incompatible-pointer-types -fPIC"
 depends=(
   attr            lib32-attr
   desktop-file-utils
@@ -34,7 +37,8 @@
   libxi           lib32-libxi
   libxrandr       lib32-libxrandr
 )
-makedepends=(autoconf bison perl flex mingw-w64-gcc
+CFLAGS+=" -Wno-error=incompatible-pointer-types -fPIC"
+makedepends=(autoconf bison perl flex
   git
   alsa-lib              lib32-alsa-lib
   ffmpeg
@@ -59,6 +63,7 @@
   v4l-utils             lib32-v4l-utils
   vulkan-icd-loader     lib32-vulkan-icd-loader
 )
+CFLAGS+=" -Wno-error=incompatible-pointer-types -fPIC"
 optdepends=(
   alsa-lib              lib32-alsa-lib
   alsa-plugins          lib32-alsa-plugins
@@ -94,6 +99,7 @@
 
   cd wine
   ../wine-staging/staging/patchinstall.py --backend=git-apply --all
+  patch -Np1 -i "$srcdir"/fix-ptr-access.patch
 }
 
 build() {
@@ -149,7 +155,5 @@
   ln -s ../conf.avail/30-win32-aliases.conf "$pkgdir/usr/share/fontconfig/conf.default/30-win32-aliases.conf"
   install -Dm 644 "$srcdir/wine-binfmt.conf" "$pkgdir/usr/lib/binfmt.d/wine.conf"
 
-  i686-w64-mingw32-strip --strip-unneeded "$pkgdir"/usr/lib/wine/i386-windows/*.dll
-  x86_64-w64-mingw32-strip --strip-unneeded "$pkgdir"/usr/lib/wine/x86_64-windows/*.dll
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -53,7 +53,6 @@
 libxxf86vm
 mesa
 mesa-libgl
-mingw-w64-gcc
 opencl-headers
 opencl-icd-loader
 perl

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,6 +3,7 @@
 mkdir $pkgname-{32,64}-build
 cd wine
 ../wine-staging/staging/patchinstall.py --backend=git-apply --all
+patch -Np1 -i "$srcdir"/fix-ptr-access.patch
 }
 build() {
 export CFLAGS="$CFLAGS -ffat-lto-objects -Wno-error=incompatible-pointer-types"
