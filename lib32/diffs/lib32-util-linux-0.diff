--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,20 +1,22 @@
 
 _pkgbasename=util-linux
 pkgname=lib32-${_pkgbasename}
-_tag='2.40.2'
+_tag='2.40.1'
 pkgver="${_tag/-/}"
 pkgrel=1
 pkgdesc='Miscellaneous system utilities for Linux (32-bit)'
 url='https://github.com/util-linux/util-linux'
 arch=('x86_64')
 makedepends=('git' 'meson' 'lib32-libxcrypt' 'lib32-ncurses')
-depends=('util-linux-libs' 'lib32-glibc')
+depends=("util-linux-libs=${pkgver}" 'lib32-glibc')
 provides=('libuuid.so' 'libblkid.so' 'libfdisk.so' 'libmount.so' 'libsmartcols.so')
 license=('GPL2')
 options=('!emptydirs')
 validpgpkeys=('B0C64D14301CC6EFAEDF60E4E4B71D5EEC39C284')  # Karel Zak
-source=("git+https://github.com/util-linux/util-linux#tag=v${_tag}?signed")
-sha256sums=('ccae05afaddd61119bbf35173f7045d1c8e98cc42c1355f5e9072433ebc42ee1')
+source=("git+https://github.com/util-linux/util-linux#tag=v${_tag}?signed"
+        '0001-fix-build.patch')
+sha256sums=('c08ac20cf4fb061a0aa0d318a245b269acdfd14f7abf1f272476358878e6862a'
+            '07b42d50b8450ecd1ef7e939d579d20526388036926e33a2927818e24a8e180c')
 
 _backports=(
 )
@@ -36,6 +38,8 @@
     git log --oneline "${_l}" "${_c}"
     git revert --mainline 1 --no-commit "${_c}"
   done
+
+  patch -Np1 < ../0001-fix-build.patch
 
   sed -i '/dirty=/c dirty=' tools/git-version-gen
 }
@@ -61,7 +65,7 @@
     -Dncursesw=enabled
   )
 
-  arch-meson "${_pkgbasename}" build "${_meson_options[@]}"
+  artix-meson "${_pkgbasename}" build "${_meson_options[@]}"
 
   meson compile -C build
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -11,6 +11,7 @@
 git log --oneline "${_l}" "${_c}"
 git revert --mainline 1 --no-commit "${_c}"
 done
+patch -Np1 < ../0001-fix-build.patch
 sed -i '/dirty=/c dirty=' tools/git-version-gen
 }
 build() {
@@ -29,6 +30,6 @@
 -Dncurses=disabled
 -Dncursesw=enabled
 )
-arch-meson "${_pkgbasename}" build "${_meson_options[@]}"
+artix-meson "${_pkgbasename}" build "${_meson_options[@]}"
 meson compile -C build
 }
