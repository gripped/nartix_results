--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -7,55 +7,59 @@
 arch=(x86_64)
 license=(LGPL-2.0-or-later)
 depends=(
-  lib32-glib2
-  lib32-systemd
-  polkit
+	lib32-glib2
+	lib32-elogind
+	polkit
 )
 makedepends=(
-  git
-  lib32-expat
-  lib32-pam
-  meson
+	git
+	lib32-expat
+	lib32-pam
+	meson
 )
 provides=(libpolkit-gobject-1.so)
-_commit=82f0924dc0eb23b9df68e88dbaf9e07c81940a5a  # tags/124
+_commit=82f0924dc0eb23b9df68e88dbaf9e07c81940a5a # tags/124
 source=(
-  "git+https://gitlab.freedesktop.org/polkit/polkit.git#commit=$_commit"
+	"git+https://gitlab.freedesktop.org/polkit/polkit.git#commit=$_commit"
+	"0001-fix-sysusers-d.patch"
 )
-b2sums=('SKIP')
+b2sums=('SKIP'
+	'360556ed06af2b8d69a9107ff91b7668b16e5bff0a1be165c60189c5631f2a4dd60341b7a409d98e978e698bb69138177d4d3dc49a5305d83fe89e2ffc79b9de')
 
 pkgver() {
-  cd polkit
-  git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
+	cd polkit
+	git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
 }
 
 prepare() {
-  cd polkit
+	cd polkit
+	patch -Np1 -i ../0001-fix-sysusers-d.patch
 }
 
 build() {
-  local meson_options=(
-    --cross-file lib32
-    -D introspection=false
-    -D libs-only=true
-    -D os_type=redhat
-    -D polkitd_uid=102
-    -D polkitd_user=polkitd
-    -D session_tracking=libsystemd-login
-    -D tests=true
-  )
+	local meson_options=(
+		--cross-file lib32
+		-D introspection=false
+		-D libs-only=true
+		-D os_type=redhat
+		-D session_tracking=libelogind
+		-D systemdsystemunitdir=no
+		-D polkitd_uid=102
+		-D polkitd_user=polkitd
+		-D tests=true
+	)
 
-  arch-meson polkit build "${meson_options[@]}"
-  meson compile -C build
+	artix-meson polkit build "${meson_options[@]}"
+	meson compile -C build
 }
 
 check() {
-  meson test -C build --print-errorlogs -t 3
+	meson test -C build --print-errorlogs -t 3
 }
 
 package() {
-  meson install -C build --destdir "$pkgdir"
+	meson install -C build --destdir "$pkgdir"
 
-  rm -r "$pkgdir"/usr/{include,lib,share}
+	rm -r "$pkgdir"/usr/{include,lib,share}
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,7 +1,7 @@
 git
+lib32-elogind
 lib32-expat
 lib32-glib2
 lib32-pam
-lib32-systemd
 meson
 polkit

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,6 @@
 prepare() {
 cd polkit
+patch -Np1 -i ../0001-fix-sysusers-d.patch
 }
 build() {
 local meson_options=(
@@ -7,11 +8,12 @@
 -D introspection=false
 -D libs-only=true
 -D os_type=redhat
+-D session_tracking=libelogind
+-D systemdsystemunitdir=no
 -D polkitd_uid=102
 -D polkitd_user=polkitd
--D session_tracking=libsystemd-login
 -D tests=true
 )
-arch-meson polkit build "${meson_options[@]}"
+artix-meson polkit build "${meson_options[@]}"
 meson compile -C build
 }
