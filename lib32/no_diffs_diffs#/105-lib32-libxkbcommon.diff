--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -5,7 +5,7 @@
   lib32-libxkbcommon-x11
 )
 pkgver=1.7.0
-pkgrel=2
+pkgrel=1
 pkgdesc='Keymap handling library for toolkits and window systems (32-bit)'
 url='https://xkbcommon.org/'
 arch=(x86_64)
@@ -25,8 +25,14 @@
   libgl
   xorg-server-xvfb
 )
-source=("git+https://github.com/xkbcommon/libxkbcommon#tag=xkbcommon-$pkgver")
+_commit=7a31e3585edf78be281559377e26d15f8c4bc655  # tags/xkbcommon-1.7.0^0
+source=("git+https://github.com/xkbcommon/libxkbcommon#commit=$_commit")
 b2sums=('70da3ad61589c68a06c6456034f17afad3962045552641ab9e099cee821eb935d84b11de9ac52af8f79111ef222466f39cfc9a6f5ae9cac610c474a9305cd50a')
+
+pkgver() {
+  cd libxkbcommon
+  git describe --tags | sed 's/^xkbcommon-//;s/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd libxkbcommon
@@ -39,7 +45,7 @@
     -D enable-tools=false
   )
 
-  arch-meson libxkbcommon build "${meson_options[@]}"
+  artix-meson libxkbcommon build "${meson_options[@]}"
   meson compile -C build
 }
 


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -7,6 +7,6 @@
 -D enable-bash-completion=false
 -D enable-tools=false
 )
-arch-meson libxkbcommon build "${meson_options[@]}"
+artix-meson libxkbcommon build "${meson_options[@]}"
 meson compile -C build
 }
