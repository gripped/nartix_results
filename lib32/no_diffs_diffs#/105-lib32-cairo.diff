--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,8 +3,8 @@
 pkgname=(
   lib32-cairo
 )
-pkgver=1.18.2
-pkgrel=1
+pkgver=1.18.0
+pkgrel=2
 pkgdesc="2D graphics library with support for multiple output devices (32-bit)"
 url="https://cairographics.org/"
 arch=(x86_64)
@@ -14,7 +14,6 @@
   lib32-fontconfig
   lib32-freetype2
   lib32-glib2
-  lib32-glibc
   lib32-libpng
   lib32-libx11
   lib32-libxcb
@@ -28,8 +27,14 @@
   meson
   valgrind
 )
-source=("git+https://gitlab.freedesktop.org/cairo/cairo.git#tag=$pkgver")
-b2sums=('ff661ec100a24a457c91b928ad537e783e59ffc56812aa1d1da09bfe425390f8e6df0191a7993aeb56e9b064403a389d252e64f557f09ea6f773f821a021c9ca')
+_commit=3909090108bb2db55330e3eb148aebe664735363  # tags/1.18.0^0
+source=("git+https://gitlab.freedesktop.org/cairo/cairo.git#commit=$_commit")
+b2sums=('SKIP')
+
+pkgver() {
+  cd cairo
+  git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd cairo
@@ -45,7 +50,7 @@
     -D tests=disabled
   )
 
-  arch-meson cairo build "${meson_options[@]}"
+  artix-meson cairo build "${meson_options[@]}"
   meson compile -C build
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -3,7 +3,6 @@
 lib32-fontconfig
 lib32-freetype2
 lib32-glib2
-lib32-glibc
 lib32-libpng
 lib32-libx11
 lib32-libxcb

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -10,6 +10,6 @@
 -D symbol-lookup=disabled
 -D tests=disabled
 )
-arch-meson cairo build "${meson_options[@]}"
+artix-meson cairo build "${meson_options[@]}"
 meson compile -C build
 }
