--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 
 pkgname=lib32-pam
-pkgver=1.7.1
+pkgver=1.7.0
 pkgrel=1
 pkgdesc='Pluggable Authentication Modules'
 arch=(x86_64)
@@ -11,7 +11,7 @@
   lib32-libnsl
   lib32-libtirpc
   lib32-libxcrypt
-  lib32-systemd
+  lib32-elogind
   pam
 )
 makedepends=(
@@ -22,9 +22,11 @@
   w3m
 )
 _tag=v$pkgver
-source=(git+https://github.com/linux-pam/linux-pam.git?signed#tag=${_tag})
+source=(git+https://github.com/linux-pam/linux-pam.git?#tag=${_tag}
+       use_elogind.patch)
 validpgpkeys=(296D6F29A020808E8717A8842DB5BD89A340AEB7) # Dimitry V. Levin <ldv@altlinux.org>
-b2sums=('ae06eea144c64ba5efa3b71df9094190eb094bcc8d2e6f9dcc93816bbf5070ff4c8e82a3cf1e2a6a43411a51e9c394c271fc7d734ca745374f19700526d51063')
+b2sums=('88ecba59692fe86f6f6516007b87fb897018cc5f818c106a037f15df4dda7c31e50fbfcb137493d49cb754e41f2f69a60f24ffea3374ff5e38ce6263bfa7abac'
+        '2a60a23eb74dc0f0b3ae5102188eeee1048e16d35c6512067068fa8c6741ca33b4de755ab5e9afb524e416b7b2344ec40ef32b84ff51d220bfcabaff9c6d4919')
 options=(!emptydirs)
 
 pkgver() {
@@ -33,18 +35,21 @@
   git describe --tags | sed 's/^v//'
 }
 
+prepare() {
+  cd linux-pam
+  patch -Np1 -i ../use_elogind.patch
+}
+
 build() {
   export CC='gcc -m32'
   export CXX='g++ -m32'
   export PKG_CONFIG_PATH='/usr/lib32/pkgconfig'
 
-  arch-meson linux-pam \
+  artix-meson linux-pam \
     --libdir=lib32 \
-    -Dlogind=enabled \
     -Ddocs=disabled \
     -Deconf=disabled \
     -Dselinux=disabled \
-    -Delogind=disabled \
     -Dpam_userdb=disabled \
     build
   meson compile -C build


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,11 +1,11 @@
 fop
 git
 lib32-audit
+lib32-elogind
 lib32-flex
 lib32-libnsl
 lib32-libtirpc
 lib32-libxcrypt
-lib32-systemd
 meson
 pam
 w3m