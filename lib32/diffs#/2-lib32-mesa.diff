--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -12,8 +12,8 @@
   lib32-vulkan-virtio
   lib32-vulkan-mesa-layers
 )
-pkgver=25.1.2
-pkgrel=1
+pkgver=25.1.1
+pkgrel=2
 epoch=1
 pkgdesc="Open-source OpenGL drivers - 32-bit"
 url="https://www.mesa3d.org/"
@@ -44,7 +44,6 @@
   lib32-rust-libs
   lib32-spirv-llvm-translator
   lib32-spirv-tools
-  lib32-systemd
   lib32-vulkan-icd-loader
   lib32-wayland
   lib32-xcb-util-keysyms
@@ -71,6 +70,7 @@
 )
 source=(
   "https://archive.mesa3d.org/mesa-$pkgver.tar.xz"{,.sig}
+  0001-kopper-Revert-kopper-Explicitly-choose-zink.patch
 )
 validpgpkeys=(
   946D09B5E4C9845E63075FF1D961C596A7203456 # Andres Gomez <tanty@igalia.com>
@@ -106,8 +106,9 @@
   )
 done
 
-b2sums=('2c92a5fb09353034936951f75848fbc1da113a1c78391d781cecc61a8b2aed6e579f0c5e2cf95b213af0f8b8823c73dc48659cb51f124c3e1ee266bfed408189'
+b2sums=('73618405dee247f7e3141f817ab66e5bbb6256d116cc1bb3eb86ed8c9511194891d3e68b3d7d36cdc3a68fab25a231da58e3bba2da7914e8c7d55ea861d50952'
         'SKIP'
+        '52ed2848b9aaf7a4c2bb01492a00326ed6e0046e1c7e900e678ce395f34fe28a46fd726d5cb02e57b2a60d116ee1fae30677cdb0e1243157a76b6d6bc7e86db1'
         'a6d47c903be6094423d89b8ec3ca899d0a84df6dbd6e76632bb6c9b9f40ad9c216f8fa400310753d392f85072756b43ac3892e0a2c4d55f87ab6463002554823'
         '9a73962e1e38b84131ab2350b69a1f5d611c549533eec73e898c394a9b9442f357bb5d5f59e1be12270dd29bdf237dc2d21786c0c2210736e224ef5d48300dcf'
         'fac5cf6339dc3c0a40b100035a5c874cc7b2efeafeb31c51488d25156e392dc9db86a497e76eead351d2126f69d060422faa9c55d73407a0de9f5be18d234123'
@@ -124,8 +125,9 @@
         '7681b1a7497b5711e663773c1a7e076f333c06c10d3f289079a781c36f050c1620cc279742ea8e5b15ec48f3d6038a6079bbda7fee3ae8e1128bd916d53ed43a'
         '8bc6f68ed286bea617a2cfaf3949bb699d3a0466faeca735314a51596ce950e4ee57eda88154bd562c1728cfaff4cdb5bc1ba701b9d47a9c50d4c4f011bee975')
 
-sha256sums=('c29c93fd35119b949a589463d1feb61b4000c0daad04e8d543d7f909f119bd97'
+sha256sums=('cf942a18b7b9e9b88524dcbf0b31fed3cde18e6d52b3375b0ab6587a14415bce'
             'SKIP'
+            '6b111e9fbbc615a0d7c0a780226c8832c7a53038e4a031da466fef3480328b32'
             'ed646292ffc8188ef8ea4d1e0e0150fb15a5c2e12ad9b8fc191ae7a8a7f3c4b9'
             '7f9f832470494906d1fca5329f8ab5791cc60beb230c74815dff541cbd2b5ca0'
             '168fb715dda47215e360912c096649d23d58bf392ac62f73919e831745e40f26'
@@ -144,6 +146,8 @@
 
 prepare() {
   cd mesa-$pkgver
+
+  patch -Np1 -i ../0001-kopper-Revert-kopper-Explicitly-choose-zink.patch
 
   echo "$pkgver-arch$epoch.$pkgrel" >VERSION
 }
@@ -174,7 +178,7 @@
 
   export MESON_PACKAGE_CACHE_DIR="$srcdir"
 
-  arch-meson mesa-$pkgver build "${meson_options[@]}"
+  artix-meson mesa-$pkgver build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -230,7 +234,7 @@
     'lib32-mesa-vdpau<1:24.2.7-1'
   )
 
-  meson install -C build --destdir "$pkgdir" --no-rebuild
+  meson install -C build --destdir "$pkgdir"
 
   (
     local libdir=usr/lib32 icddir=usr/share/vulkan/icd.d
@@ -315,7 +319,6 @@
     lib32-libxcb
     lib32-libxshmfence
     lib32-spirv-tools
-    lib32-systemd
     lib32-vulkan-icd-loader
     lib32-wayland
     lib32-xcb-util-keysyms
@@ -342,7 +345,6 @@
     lib32-libx11
     lib32-libxcb
     lib32-libxshmfence
-    lib32-systemd
     lib32-vulkan-icd-loader
     lib32-wayland
     lib32-xcb-util-keysyms
@@ -368,7 +370,6 @@
     lib32-libxcb
     lib32-libxshmfence
     lib32-spirv-tools
-    lib32-systemd
     lib32-vulkan-icd-loader
     lib32-wayland
     lib32-xcb-util-keysyms
@@ -396,7 +397,6 @@
     lib32-libxcb
     lib32-libxshmfence
     lib32-spirv-tools
-    lib32-systemd
     lib32-vulkan-icd-loader
     lib32-wayland
     lib32-xcb-util-keysyms
@@ -426,7 +426,6 @@
     lib32-libxshmfence
     lib32-llvm-libs
     lib32-spirv-tools
-    lib32-systemd
     lib32-vulkan-icd-loader
     lib32-wayland
     lib32-xcb-util-keysyms
@@ -455,7 +454,6 @@
     lib32-libxshmfence
     lib32-llvm-libs
     lib32-spirv-tools
-    lib32-systemd
     lib32-vulkan-icd-loader
     lib32-wayland
     lib32-xcb-util-keysyms
@@ -484,7 +482,6 @@
     lib32-libx11
     lib32-libxcb
     lib32-libxshmfence
-    lib32-systemd
     lib32-vulkan-icd-loader
     lib32-wayland
     lib32-xcb-util-keysyms


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -27,7 +27,6 @@
 lib32-rust-libs
 lib32-spirv-llvm-translator
 lib32-spirv-tools
-lib32-systemd
 lib32-vulkan-icd-loader
 lib32-wayland
 lib32-xcb-util-keysyms