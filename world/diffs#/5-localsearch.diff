--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,8 +4,8 @@
   localsearch
   localsearch-testutils
 )
-pkgver=3.10.0
-pkgrel=1
+pkgver=3.9.0
+pkgrel=3
 pkgdesc="Filesystem indexer and metadata extractor"
 url="https://gnome.pages.gitlab.gnome.org/localsearch/"
 arch=(x86_64)
@@ -34,7 +34,6 @@
   libpng
   libseccomp
   libtiff
-  libwebp
   libxml2
   poppler-glib
   tinysparql
@@ -49,11 +48,10 @@
   gobject-introspection
   meson
   python
-  python-dbusmock
   python-gobject
 )
 source=("git+https://gitlab.gnome.org/GNOME/localsearch.git#tag=${pkgver/[a-z]/.&}")
-b2sums=('2a41545bedc9afd25f47d812b53b975744b78fe24a2bd6827b4fee1009c0307b0bf35762317bd9d9b3f9fea3b552622aeb62d5d454a7a2bbf5efe8d71020488a')
+b2sums=('17ede26f72d60ab46f48b1bf2e944c8ab812be5a084ce9f21f0c25ff8ec32ea551f33f449473fedc12b1be5a14b214c82cb1405b3ae9eede36e6e662397d09af')
 
 prepare() {
   cd localsearch
@@ -61,11 +59,12 @@
 
 build() {
   local meson_options=(
+    -D systemd_user_services=false
     -D landlock=enabled
     -D tests_tap_protocol=true
   )
 
-  arch-meson localsearch build "${meson_options[@]}"
+  artix-meson localsearch build "${meson_options[@]}"
   meson compile -C build
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -27,12 +27,10 @@
 libseccomp
 libtiff
 libtinysparql-3.0.so
-libwebp
 libxml2
 meson
 poppler-glib
 python
-python-dbusmock
 python-gobject
 tinysparql
 totem-plparser

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,9 +3,10 @@
 }
 build() {
 local meson_options=(
+-D systemd_user_services=false
 -D landlock=enabled
 -D tests_tap_protocol=true
 )
-arch-meson localsearch build "${meson_options[@]}"
+artix-meson localsearch build "${meson_options[@]}"
 meson compile -C build
 }
