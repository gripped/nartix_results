--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=opendht
 epoch=1
-pkgver=3.5.1
+pkgver=3.2.0
 pkgrel=2
 pkgdesc="C++17 Distributed Hash Table (DHT) implementation"
 arch=(x86_64)
@@ -12,12 +12,13 @@
 checkdepends=(cppunit)
 optdepends=('python: to use the Python bindings'
             'msgpack-cxx: linking against opendht')
-source=(git+${url}#tag=v$pkgver)
-sha256sums=('fd1c6349b61e4d95ba7904d8c41603a516c5f631b6dbf527166217b73a494cb3')
+source=(git+${url}#tag=v$pkgver
+        llhttp.patch)
+sha256sums=('12f71503ba7253ca5545676ffed7a6fea9497e0227c9e2112d1901b7c8a63412'
+            '0f0b394656f719508ea83dd3ea87b08245fa1413a91e50a144dede20b2e3ca22')
 
 prepare() {
-  cd $pkgname
-  git cherry-pick -n daf2f8edafc82e031deedbf8e0ed3e66a551fb60 # Fix build of jami-daemon
+  patch -d $pkgname -p1 < llhttp.patch # Fix llhttp lib name
 }
 
 build() {
@@ -25,8 +26,6 @@
     -DCMAKE_INSTALL_PREFIX=/usr \
     -DOPENDHT_DOCUMENTATION=OFF \
     -DOPENDHT_TESTS=ON \
-    -DOPENDHT_SYSTEMD=ON \
-    -DOPENDHT_SYSTEMD_UNIT_FILE_LOCATION=/usr/lib/systemd/system/ \
     -DOPENDHT_INDEX=ON \
     -DOPENDHT_PYTHON=ON \
     -DOPENDHT_HTTP=ON \


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,14 +1,11 @@
 prepare() {
-cd $pkgname
-git cherry-pick -n daf2f8edafc82e031deedbf8e0ed3e66a551fb60 # Fix build of jami-daemon
+patch -d $pkgname -p1 < llhttp.patch # Fix llhttp lib name
 }
 build() {
 cmake -B build -S ${pkgname} \
 -DCMAKE_INSTALL_PREFIX=/usr \
 -DOPENDHT_DOCUMENTATION=OFF \
 -DOPENDHT_TESTS=ON \
--DOPENDHT_SYSTEMD=ON \
--DOPENDHT_SYSTEMD_UNIT_FILE_LOCATION=/usr/lib/systemd/system/ \
 -DOPENDHT_INDEX=ON \
 -DOPENDHT_PYTHON=ON \
 -DOPENDHT_HTTP=ON \
