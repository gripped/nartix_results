--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=sddm
 pkgver=0.21.0
-pkgrel=6
+pkgrel=6.1
 pkgdesc='QML based X11 and Wayland display manager'
 arch=(x86_64)
 url='https://github.com/sddm/sddm'
@@ -9,17 +9,16 @@
 depends=(bash
          gcc-libs
          glibc
+         libelogind
          libxau
          libxcb
          pam
          qt6-base
          qt6-declarative
-         systemd-libs
          ttf-font
-         xorg-server
+         x11win-server
          xorg-xauth)
 makedepends=(extra-cmake-modules
-             git
              python-docutils
              qt5-base
              qt5-declarative
@@ -32,26 +31,29 @@
         'etc/pam.d/sddm-autologin'
         'etc/pam.d/sddm-greeter')
 provides=(display-manager)
-source=(git+https://github.com/$pkgname/$pkgname#tag=v$pkgver)
-sha256sums=('67394c93f331fc02f89559f68e149a992efaed07690f548e6a83ec384ebb8000')
-
-prepare() {
-  git -C $pkgname cherry-pick -n 228778c2b4b7e26db1e1d69fe484ed75c5791c3a # Fix build with cmake 4
-}
+source=(https://github.com/$pkgname/$pkgname/archive/v$pkgver/$pkgname-$pkgver.tar.gz
+        sddm.{tmpfiles,sysusers})
+sha256sums=('f895de2683627e969e4849dbfbbb2b500787481ca5ba0de6d6dfdae5f1549abf'
+            'db625f2a3649d6d203e1e1b187a054d5c6263cadf7edd824774d8ace52219677'
+            '9fce66f325d170c61caed57816f4bc72e9591df083e89da114a3bb16b0a0e60f')
 
 build() {
-  cmake -B build -S $pkgname \
+  cmake -B build -S $pkgname-$pkgver \
         -DCMAKE_INSTALL_PREFIX=/usr \
         -DCMAKE_INSTALL_LIBEXECDIR=/usr/lib/sddm \
         -DBUILD_WITH_QT6=ON \
         -DDBUS_CONFIG_DIR=/usr/share/dbus-1/system.d \
         -DDBUS_CONFIG_FILENAME=sddm_org.freedesktop.DisplayManager.conf \
         -DBUILD_MAN_PAGES=ON \
-        -DUID_MAX=60513
+        -DUSE_ELOGIND=yes \
+        -DNO_SYSTEMD=yes \
+        -DUID_MAX=60513 \
+		-DCMAKE_POLICY_VERSION_MINIMUM=3.5
   cmake --build build
 
-  cmake -B build5 -S $pkgname \
-        -DCMAKE_INSTALL_PREFIX=/usr
+  cmake -B build5 -S $pkgname-$pkgver \
+        -DCMAKE_INSTALL_PREFIX=/usr \
+		-DCMAKE_POLICY_VERSION_MINIMUM=3.5
   cmake --build build5/src/greeter
   cmake --build build5/components
 }
@@ -65,4 +67,7 @@
   "$pkgdir"/usr/bin/sddm --example-config > "$pkgdir"/usr/lib/sddm/sddm.conf.d/default.conf
   sed -r 's|DefaultPath=.*|DefaultPath=/usr/local/sbin:/usr/local/bin:/usr/bin|g' -i "$pkgdir"/usr/lib/sddm/sddm.conf.d/default.conf
   sed -e "/^InputMethod/s/qtvirtualkeyboard//" -i "$pkgdir"/usr/lib/sddm/sddm.conf.d/default.conf
+
+  install -Dm644 sddm.sysusers "$pkgdir"/usr/lib/sysusers.d/sddm.conf
+  install -Dm644 sddm.tmpfiles "$pkgdir"/usr/lib/tmpfiles.d/sddm.conf
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,8 +1,8 @@
 bash
 extra-cmake-modules
 gcc-libs
-git
 glibc
+libelogind
 libxau
 libxcb
 pam
@@ -13,7 +13,6 @@
 qt6-base
 qt6-declarative
 qt6-tools
-systemd-libs
 ttf-font
-xorg-server
+x11win-server
 xorg-xauth