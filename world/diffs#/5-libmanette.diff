--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,31 +1,41 @@
 
-pkgname=libmanette
-pkgver=0.2.9
-pkgrel=2
-pkgdesc='Simple GObject game controller library'
+pkgbase=libmanette
+pkgname=(
+  libmanette
+  libmanette-docs
+)
+pkgver=0.2.11
+pkgrel=1
+pkgdesc="Simple GObject game controller library"
+url="https://gnome.pages.gitlab.gnome.org/libmanette/"
 arch=(x86_64)
-url='https://gnome.pages.gitlab.gnome.org/libmanette/'
 license=(LGPL-2.1-or-later)
 depends=(
   gcc-libs
   glib2
   glibc
+  hidapi
   libevdev
   libgudev
 )
 makedepends=(
+  gi-docgen
   git
   gobject-introspection
-  gtk-doc
   meson
   vala
 )
-source=("git+https://gitlab.gnome.org/GNOME/$pkgname.git#tag=$pkgver")
-b2sums=(8c8ea03efb067e91984dbecb54eaed747644eb675ecb7b98691b5b52915aa88ce96343e62328096d814282e769438944b04d2456c3e978cfa094ff813231f596)
+source=("git+https://gitlab.gnome.org/GNOME/libmanette.git#tag=$pkgver")
+b2sums=('52429dabe15fef2a4d33fbe819ad4b1794d75bc545291eee6abc3ecc2caffc694771bac81bd0768e75ebdbd7a61fb89214b596ecb2298ad89931e8647f68a1bc')
+
+prepare() {
+  cd $pkgname
+
+  git revert -n 60f4692161adc40a5a9be7cdeab4d81129aa9705
+}
 
 build() {
-  arch-meson $pkgname build \
-    -D doc=true
+  artix-meson $pkgname build -D doc=true
   meson compile -C build
 }
 
@@ -33,6 +43,19 @@
   meson test -C build --print-errorlogs
 }
 
-package() {
+package_libmanette() {
+  provides=(libmanette-0.2.so)
+
   meson install -C build --destdir "$pkgdir"
+
+  mkdir -p doc/usr/share
+  mv {"$pkgdir",doc}/usr/share/doc
 }
+
+package_libmanette-docs() {
+  pkgdesc+=" (documentation)"
+  depends=()
+
+  mv doc/* "$pkgdir"
+}
+


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,9 +1,11 @@
+
 gcc-libs
+gi-docgen
 git
 glib2
 glibc
 gobject-introspection
-gtk-doc
+hidapi
 libevdev
 libgudev
 meson

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,8 @@
+prepare() {
+cd $pkgname
+git revert -n 60f4692161adc40a5a9be7cdeab4d81129aa9705
+}
 build() {
-arch-meson $pkgname build \
--D doc=true
+artix-meson $pkgname build -D doc=true
 meson compile -C build
 }
