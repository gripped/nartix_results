--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,35 +1,36 @@
 
 pkgname=ebook-tools
 pkgver=0.2.2
-pkgrel=8
-pkgdesc='Tools for accessing and converting various ebook file formats'
+pkgrel=7.3
+pkgdesc="Tools for accessing and converting various ebook file formats"
 arch=(x86_64)
-url='https://sourceforge.net/projects/ebook-tools/'
-license=(MIT)
-depends=(convertlit
-         glibc
-         libxml2
-         libzip
-         sh)
+url="https://sourceforge.net/projects/ebook-tools/"
+license=(custom)
+depends=(libzip libxml2 convertlit)
 makedepends=(cmake)
-source=(https://downloads.sourceforge.net/$pkgname/$pkgname-$pkgver.tar.gz
+source=("https://downloads.sourceforge.net/${pkgname}/${pkgname}-${pkgver}.tar.gz"
         crash-fix.patch)
 sha256sums=('cbc35996e911144fa62925366ad6a6212d6af2588f1e39075954973bbee627ae'
             'ad556ce08909727a6022c9f1632086ccb8623a81a4f39cd34722e22116e14527')
 
 prepare() {
+  mkdir -p build
+
   cd $pkgname-$pkgver
   patch -p2 -i ../crash-fix.patch # https://sourceforge.net/p/ebook-tools/bugs/8/
 }
 
 build() {
-  cmake -B build -S $pkgname-$pkgver \
+  cd build
+  cmake ../$pkgname-$pkgver \
     -DCMAKE_INSTALL_PREFIX=/usr
-  cmake --build build
+  make
 }
 
 package() {
-  DESTDIR="$pkgdir" cmake --install build
+  cd build
+  make DESTDIR="$pkgdir" install
 
-  install -Dm644 $pkgname-$pkgver/LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname
+  install -Dm644 "$srcdir"/$pkgname-$pkgver/LICENSE \
+    -t "$pkgdir"/usr/share/licenses/$pkgname/
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,4 @@
 cmake
 convertlit
-glibc
 libxml2
 libzip
-sh

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,9 +1,11 @@
 prepare() {
+mkdir -p build
 cd $pkgname-$pkgver
 patch -p2 -i ../crash-fix.patch # https://sourceforge.net/p/ebook-tools/bugs/8/
 }
 build() {
-cmake -B build -S $pkgname-$pkgver \
+cd build
+cmake ../$pkgname-$pkgver \
 -DCMAKE_INSTALL_PREFIX=/usr
-cmake --build build
+make
 }
