--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,12 +1,7 @@
 
-pkgbase=gnome-builder
-pkgname=(
-  gnome-builder
-  gnome-builder-clang
-  gnome-builder-flatpak
-)
+pkgname=gnome-builder
 pkgver=46.1
-pkgrel=3
+pkgrel=5
 pkgdesc="An IDE for writing GNOME-based software"
 url="https://wiki.gnome.org/Apps/Builder"
 arch=(x86_64)
@@ -14,6 +9,7 @@
 depends=(
   autoconf-archive
   cairo
+  clang
   cmark
   ctags
   d-spy
@@ -22,6 +18,7 @@
   devhelp
   editorconfig-core-c
   enchant
+  flatpak
   gcc-libs
   gdk-pixbuf2
   gjs
@@ -57,8 +54,6 @@
 )
 makedepends=(
   appstream-glib
-  clang
-  flatpak
   git
   gobject-introspection
   llvm
@@ -68,11 +63,24 @@
   yelp-tools
 )
 checkdepends=(weston)
+optdepends=(
+  'bash-language-server: Shell code assistance'
+  'python-lsp-server: Python code assistance'
+)
+conflicts=(
+  gnome-builder-clang
+  gnome-builder-flatpak
+)
+replaces=(
+  'gnome-builder-clang<=46.1-4'
+  'gnome-builder-flatpak<=46.1-4'
+)
+groups=(gnome-extra)
 source=("git+https://gitlab.gnome.org/GNOME/gnome-builder.git#tag=${pkgver/[a-z]/.&}")
 b2sums=('daf402ee078c5be66ea1c589767767af63b11cc5173835a03cf8d090500cb0117472895f4b6bfb0e3344407f996ad64f4b6fe50b54e65c80da2b0bd180ad7db1')
 
 prepare() {
-  cd $pkgbase
+  cd $pkgname
 }
 
 build() {
@@ -80,7 +88,7 @@
     -D help=true
   )
 
-  arch-meson $pkgbase build "${meson_options[@]}"
+  artix-meson $pkgname build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -97,51 +105,9 @@
   dbus-run-session meson test -C build --print-errorlogs
 )
 
-package_gnome-builder() {
+package() {
   depends+=(libgit2.so)
-  optdepends=(
-    'bash-language-server: Shell code assistance'
-    'gnome-builder-clang: Clang integration'
-    'gnome-builder-flatpak: Flatpak integration'
-    'python-lsp-server: Python code assistance'
-  )
-  groups=(gnome-extra)
 
   meson install -C build --destdir "$pkgdir"
-
-  mkdir -p {clang,flatpak}/usr/lib
-  mv {"$pkgdir",clang}/usr/lib/gnome-builder-clang
-  mv {"$pkgdir",flatpak}/usr/lib/gnome-builder-flatpak
 }
 
-package_gnome-builder-clang() {
-  pkgdesc+=" (clang module)"
-  depends=(
-    clang
-    gcc-libs
-    glib2
-    glibc
-    gtk4
-    gtksourceview5
-    jsonrpc-glib
-    libdex
-    libpeas-2
-  )
-  groups=(gnome-extra)
-
-  mv clang/* "$pkgdir"
-}
-
-package_gnome-builder-flatpak() {
-  pkgdesc+=" (flatpak module)"
-  depends=(
-    flatpak
-    gcc-libs
-    glib2
-    glibc
-  )
-  groups=(gnome-extra)
-
-  mv flatpak/* "$pkgdir"
-}
-


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,10 +1,10 @@
 prepare() {
-cd $pkgbase
+cd $pkgname
 }
 build() {
 local meson_options=(
 -D help=true
 )
-arch-meson $pkgbase build "${meson_options[@]}"
+artix-meson $pkgname build "${meson_options[@]}"
 meson compile -C build
 }
