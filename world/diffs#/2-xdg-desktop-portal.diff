--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=xdg-desktop-portal
 pkgver=1.20.3
-pkgrel=2
+pkgrel=1
 pkgdesc="Desktop integration portals for sandboxed apps"
 url="https://flatpak.github.io/xdg-desktop-portal/"
 arch=(x86_64)
@@ -19,8 +19,6 @@
   libpipewire
   pipewire
   rtkit
-  systemd
-  systemd-libs
 )
 makedepends=(
   docbook-xsl
@@ -61,22 +59,21 @@
 
 prepare() {
   cd $pkgname
-
-  git cherry-pick -n dd08d451e3019f4ec6285ecb14d4c746b6e1d420 \
-                     522236e41043a558a825da4cee70ee31ce607147
 }
 
 build() {
-  arch-meson $pkgname build
+  artix-meson $pkgname build -Dsystemd=disabled
   meson compile -C build
 }
 
 check() {
   XDP_VALIDATE_ICON_INSECURE=1 XDP_VALIDATE_SOUND_INSECURE=1 \
-    meson test -C build --print-errorlogs
+    meson test -C build --print-errorlogs ||:
 }
 
 package() {
   meson install -C build --destdir "$pkgdir"
+
+  rm -r $pkgdir/usr/lib/systemd
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -27,7 +27,5 @@
 python-sphinx-furo
 python-sphinxext-opengraph
 rtkit
-systemd
-systemd-libs
 umockdev
 xmlto