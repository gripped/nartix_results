--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,15 +1,15 @@
 
 pkgbase=bluez
 pkgname=('bluez' 'bluez-utils' 'bluez-libs' 'bluez-cups' 'bluez-deprecated-tools' 'bluez-hid2hci' 'bluez-mesh' 'bluez-obex')
-pkgver=5.86
-pkgrel=2
+pkgver=5.85
+pkgrel=1
 url="http://www.bluez.org/"
 arch=('x86_64')
 license=('GPL-2.0-only')
-makedepends=('dbus' 'libical' 'systemd' 'alsa-lib' 'json-c' 'ell' 'python-docutils' 'python-pygments' 'cups')
+makedepends=('dbus' 'libical' 'alsa-lib' 'json-c' 'ell' 'python-docutils' 'python-pygments' 'cups')
 source=(https://www.kernel.org/pub/linux/bluetooth/${pkgname}-${pkgver}.tar.{xz,sign}
         bluetooth.modprobe)
-sha256sums=('99f144540c6070591e4c53bcb977eb42664c62b7b36cb35a29cf72ded339621d'
+sha256sums=('ad028e49254bc4551a13f08fe7904c63d02ba650d77be8ae15bb3b0a0ad94a6f'
             'SKIP'
             '46c021be659c9a1c4e55afd04df0c059af1f3d98a96338236412e449bf7477b4')
 validpgpkeys=('E932D120BC2AEC444E558F0106CA9F5D1DCF2659') # Marcel Holtmann <marcel@holtmann.org>
@@ -27,6 +27,8 @@
           --localstatedir=/var \
           --libexecdir=/usr/lib \
           --with-dbusconfdir=/usr/share \
+          --with-udevdir=/usr/lib/udev \
+          --disable-systemd \
           --enable-btpclient \
           --enable-midi \
           --enable-sixaxis \
@@ -43,12 +45,6 @@
   for files in `find tools/ -type f -perm -755`; do
     filename=$(basename $files)
     install -Dm755 "${srcdir}"/"${pkgbase}"-${pkgver}/tools/$filename "${srcdir}/fakeinstall"/usr/bin/$filename
-  done
-
-  for manfile in `find doc/ -type f -regex '.*\.[1-8]'`; do
-    section=$(echo $manfile | sed -E 's/.*\.([1-8])$/\1/')
-    filename=$(basename $manfile)
-    install -Dm644 "${srcdir}"/"${pkgbase}"-${pkgver}/doc/$filename "${srcdir}/fakeinstall"/usr/share/man/man${section}/$filename
   done
 }
 
@@ -71,17 +67,17 @@
 
 package_bluez() {
   pkgdesc="Daemons for the bluetooth protocol stack"
-  depends=('systemd-libs' 'dbus' 'glib2' 'alsa-lib' 'glibc')
+  depends=('dbus' 'glib2' 'alsa-lib' 'glibc')
   backup=(etc/bluetooth/{main,input,network}.conf)
 
-  _install fakeinstall/etc/bluetooth/main.conf
-  _install fakeinstall/etc/bluetooth/input.conf
-  _install fakeinstall/etc/bluetooth/network.conf
   _install fakeinstall/usr/lib/bluetooth/bluetoothd
-  _install fakeinstall/usr/lib/systemd/system/bluetooth.service
-  _install fakeinstall/usr/share/dbus-1/system-services/org.bluez.service
   _install fakeinstall/usr/share/dbus-1/system.d/bluetooth.conf
   _install fakeinstall/usr/share/man/man8/bluetoothd.8
+
+  install -dm555 "${pkgdir}"/etc/bluetooth
+  install -Dm644 "${srcdir}"/"${pkgbase}"-${pkgver}/src/main.conf "${pkgdir}"/etc/bluetooth/main.conf
+  install -Dm644 "${srcdir}"/"${pkgbase}"-${pkgver}/profiles/input/input.conf "${pkgdir}"/etc/bluetooth/input.conf
+  install -Dm644 "${srcdir}"/"${pkgbase}"-${pkgver}/profiles/network/network.conf "${pkgdir}"/etc/bluetooth/network.conf
 
   chmod -v 555 "${pkgdir}"/etc/bluetooth
 
@@ -95,23 +91,22 @@
 
 package_bluez-utils() {
   pkgdesc="Development and debugging utilities for the bluetooth protocol stack"
-  depends=('dbus' 'systemd-libs' 'glib2' 'glibc' 'readline')
+  depends=('dbus' 'glib2' 'glibc' 'readline')
   optdepends=('ell: for btpclient')
   provides=('bluez-plugins')
   replaces=('bluez-plugins')
 
-  _install fakeinstall/usr/bin/{advtest,avinfo,avtest,bcmfw,bdaddr,bluemoon,bluetoothctl,bluetooth-player,bneptest,btattach,btconfig,btgatt-client,btgatt-server,btinfo,btiotest,btmgmt,btmon,btpclient,btpclientctl,btproxy,btsnoop,check-selftest,cltest,create-image,eddystone,gatt-service,hcieventmask,hcisecfilter,hex2hcd,hid2hci,hwdb,ibeacon,isotest,l2ping,l2test,mpris-proxy,nokfw,oobtest,rctest,rtlfw,scotest,seq2bseq,test-runner}
-  _install fakeinstall/usr/lib/systemd/user/mpris-proxy.service
+  _install fakeinstall/usr/bin/{advtest,avinfo,avtest,bcmfw,bdaddr,bluemoon,bluetoothctl,bluetooth-player,bneptest,btattach,btconfig,btgatt-client,btgatt-server,btinfo,btiotest,btmgmt,btmon,btpclient,btpclientctl,btproxy,btsnoop,check-selftest,cltest,create-image,eddystone,gatt-service,hcieventmask,hcisecfilter,hex2hcd,hid2hci,hwdb,ibeacon,isotest,l2ping,l2test,mcaptest,mpris-proxy,nokfw,oobtest,rctest,rtlfw,scotest,seq2bseq,test-runner}
   _install fakeinstall/usr/share/man/man1/bluetoothctl*.1
-  _install fakeinstall/usr/share/man/man1/{bdaddr,btattach,btmgmt,btmon,isotest,l2ping,rctest}.1
-  _install fakeinstall/usr/share/man/man5/org.bluez.{A,B,C,D,G,I,L,M,N,P,T}*.5
+  _install fakeinstall/usr/share/man/man1/{btattach,btmgmt,btmon,isotest,l2ping,rctest}.1
+  _install fakeinstall/usr/share/man/man5/org.bluez.{A,B,D,G,I,L,M,N,P}*.5
   _install fakeinstall/usr/share/man/man7/{hci,l2cap,mgmt,sco,iso}.7
   _install fakeinstall/usr/share/zsh/site-functions/_bluetoothctl
 }
 
 package_bluez-deprecated-tools() {
   pkgdesc="Deprecated tools that are no longer maintained"
-  depends=('json-c' 'systemd-libs' 'glib2' 'dbus' 'readline' 'glibc')
+  depends=('json-c' 'glib2' 'dbus' 'readline' 'glibc')
 
   _install fakeinstall/usr/bin/{ciptool,hciattach,hciconfig,hcidump,hcitool,meshctl,rfcomm,sdptool}
   _install fakeinstall/usr/share/man/man1/{ciptool,hciattach,hciconfig,hcidump,hcitool,rfcomm,sdptool}.1
@@ -138,7 +133,7 @@
 
 package_bluez-hid2hci() {
   pkgdesc="Put HID proxying bluetooth HCI's into HCI mode"
-  depends=('systemd-libs' 'glibc')
+  depends=('glibc')
 
   _install fakeinstall/usr/lib/udev/*
   _install fakeinstall/usr/share/man/man1/hid2hci.1
@@ -149,15 +144,13 @@
   depends=('ell' 'json-c' 'readline' 'glibc')
   backup=('etc/bluetooth/mesh-main.conf')
 
-  _install fakeinstall/etc/bluetooth/mesh-main.conf
   _install fakeinstall/usr/bin/{mesh-cfgclient,mesh-cfgtest}
   _install fakeinstall/usr/lib/bluetooth/bluetooth-meshd
-  _install fakeinstall/usr/lib/systemd/system/bluetooth-mesh.service
-  _install fakeinstall/usr/share/dbus-1/system-services/org.bluez.mesh.service
   _install fakeinstall/usr/share/dbus-1/system.d/bluetooth-mesh.conf
   _install fakeinstall/usr/share/man/man8/bluetooth-meshd.8
 
-  chmod -v 555 "${pkgdir}"/etc/bluetooth
+  install -dm555 "${pkgdir}"/etc/bluetooth
+  install -Dm644 "${srcdir}"/"${pkgbase}"-${pkgver}/mesh/mesh-main.conf "${pkgdir}"/etc/bluetooth/mesh-main.conf
 }
 
 package_bluez-obex() {
@@ -166,12 +159,12 @@
 
   _install fakeinstall/usr/bin/{obexctl,obex-client-tool,obex-server-tool}
   _install fakeinstall/usr/lib/bluetooth/obexd
-  _install fakeinstall/usr/lib/systemd/user/obex.service
-  _install fakeinstall/usr/share/dbus-1/services/org.bluez.obex.service
   _install fakeinstall/usr/share/dbus-1/system.d/obex.conf
-  _install fakeinstall/usr/lib/systemd/user/dbus-org.bluez.obex.service
   _install fakeinstall/usr/share/man/man5/org.bluez.obex*.5
 
-  rm fakeinstall/usr/lib/libbluetooth.la
-  find fakeinstall -depth -print0 | xargs -0 rmdir
+  install -Dm644 /dev/stdin "$pkgdir"/usr/share/dbus-1/services/org.bluez.obex.service <<EOF
+[D-BUS Service]
+Name=org.bluez.obex
+Exec=/usr/lib/bluetooth/obexd
+EOF
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -9,5 +9,3 @@
 python-docutils
 python-pygments
 readline
-systemd
-systemd-libs