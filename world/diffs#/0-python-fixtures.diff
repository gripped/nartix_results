--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,6 @@
 
 pkgname=python-fixtures
-pkgver=4.2.5
-_commit=1edd6c2bc6cb48cc666eb7d9ffdd182659c2cae0
+pkgver=4.2.3
 pkgrel=1
 pkgdesc="Python fixtures for testing / resource management"
 arch=('any')
@@ -16,33 +15,31 @@
   'python-wheel'
 )
 checkdepends=('python-testtools')
-source=("$url/archive/$_commit/${pkgname#python-}-$_commit.tar.gz")
-sha512sums=('8485f2e9e755fb99d1f575941e2d960ec05a2048229c651eba0933b4aba7e41bc504cda45cc233fcd024cb2268af94dd3aa949a30215cd85446dbdc0d7e124df')
-
-pkgver() {
-  cd ${pkgname#python-}-$_commit
-  sed -n '/^CHANGES/{n;n;n;p;q;}' ChangeLog
-}
+source=(
+  "$url/archive/$pkgver/${pkgname#python-}-$pkgver.tar.gz"
+  "$pkgname-dont-package-tests.patch"
+)
+sha512sums=('9275f2089813b79f8a831ab684524b8d512ff052783f9e4c1c5ccaec6ce078a72a9b714d161ef33f825eaae6c4ebe07e05988a0bc277c219df11f6fbab11e8a6'
+            '65d1b1c5a1e5e15d2b6165c3935f75bf1350c123d30d28cb4f169d7a2d9c738f1de840c121dee5569925bab07a084387d45d48f3e6867d4f76c9324ed0a8ef07')
 
 prepare() {
-  cd ${pkgname#python-}-$_commit
-  echo '[tool.hatch.build.targets.wheel]' >> pyproject.toml
-  echo 'exclude = ["fixtures/tests*"]' >> pyproject.toml
+  cd ${pkgname#python-}-$pkgver
+  patch -Np1 < ../$pkgname-dont-package-tests.patch
 }
 
 build() {
-  cd ${pkgname#python-}-$_commit
+  cd ${pkgname#python-}-$pkgver
   export SETUPTOOLS_SCM_PRETEND_VERSION=$pkgver
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd ${pkgname#python-}-$_commit
+  cd ${pkgname#python-}-$pkgver
   python -m testtools.run fixtures.test_suite
 }
 
 package() {
-  cd ${pkgname#python-}-$_commit
+  cd ${pkgname#python-}-$pkgver
   python -m installer --destdir="$pkgdir" dist/*.whl
   install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" COPYING BSD
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,10 +1,9 @@
 prepare() {
-cd ${pkgname#python-}-$_commit
-echo '[tool.hatch.build.targets.wheel]' >> pyproject.toml
-echo 'exclude = ["fixtures/tests*"]' >> pyproject.toml
+cd ${pkgname#python-}-$pkgver
+patch -Np1 < ../$pkgname-dont-package-tests.patch
 }
 build() {
-cd ${pkgname#python-}-$_commit
+cd ${pkgname#python-}-$pkgver
 export SETUPTOOLS_SCM_PRETEND_VERSION=$pkgver
 python -m build --wheel --no-isolation
 }
