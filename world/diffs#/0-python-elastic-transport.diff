--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=python-elastic-transport
 _pkgname=elastic-transport-python
-pkgver=8.17.1
+pkgver=8.17.0
 pkgrel=1
 pkgdesc="Transport classes and utilities shared among Python Elastic client libraries"
 arch=(any)
@@ -30,8 +30,17 @@
   python-respx
   python-trustme
 )
-source=("$pkgname-$pkgver.tar.gz::$url/archive/v$pkgver.tar.gz")
-sha256sums=('b8f0785fe6462028c470de39a413916b0c8baf7a0e58e416d381d37fb2303926')
+source=(
+  "$pkgname-$pkgver.tar.gz::$url/archive/v$pkgver.tar.gz"
+  "httpx-0.28-compatibility.patch::$url/commit/f2208774c9d1c887fde9b87e5a784772f9a8826b.patch"
+)
+sha256sums=('58dd66a35cf11577e017d2ffb2d85b53523a0f3faa7f89b4b54882987afcdcb4'
+            'e8778b929f2de2e718be5c4d67d8f804d433750e55001fde242c4fd682265a99')
+
+prepare() {
+  cd $_pkgname-$pkgver
+  patch -Np1 -i ../httpx-0.28-compatibility.patch
+}
 
 build() {
   cd $_pkgname-$pkgver


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,3 +1,7 @@
+prepare() {
+cd $_pkgname-$pkgver
+patch -Np1 -i ../httpx-0.28-compatibility.patch
+}
 build() {
 cd $_pkgname-$pkgver
 python -m build --wheel --no-isolation
