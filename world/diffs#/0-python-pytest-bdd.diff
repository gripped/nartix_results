--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=python-pytest-bdd
 pkgver=8.1.0
-pkgrel=2
+pkgrel=1
 pkgdesc='BDD library for the pytest runner'
 arch=('any')
 license=('MIT')
@@ -28,21 +28,20 @@
 sha512sums=('a8b22b0b9e34469fb927c9a748214cf96b009c14a91de5afed623c7f8286f23011e2c2425a7fb98ccbc466c67eb21af21918d79d2da3bf2a7ae270410f121510')
 
 build() {
-  cd ${pkgname#python-}
+  cd pytest-bdd
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd ${pkgname#python-}
-  python -m venv --system-site-packages test-env
-  test-env/bin/python -m installer dist/*.whl
-  PATH=$PWD/test-env/bin:$PATH test-env/bin/python -m pytest \
-    --override-ini="addopts=" \
-    --deselect tests/parser/test_errors.py::test_step_outside_scenario_or_background_error
+  cd pytest-bdd
+  python -m installer --destdir=tmp_install dist/*.whl
+  local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
+  PATH="$PWD/tmp_install/usr/bin:$PATH" PYTHONPATH="$PWD/tmp_install/$site_packages" \
+    pytest --override-ini=addopts=
 }
 
 package() {
-  cd ${pkgname#python-}
+  cd pytest-bdd
   python -m installer --destdir="$pkgdir" dist/*.whl
   install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE.txt
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd ${pkgname#python-}
+cd pytest-bdd
 python -m build --wheel --no-isolation
 }
