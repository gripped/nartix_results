--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,7 +3,7 @@
 pkgname=(
   postgresql-old-upgrade
 )
-pkgver=17.9
+pkgver=17.8
 pkgrel=1
 pkgdesc="Older PostgreSQL for migrating major versions with pg_upgrade"
 url="https://www.postgresql.org/"
@@ -21,7 +21,6 @@
   lz4 liblz4.so
   openssl libcrypto.so libssl.so
   pam libpam.so
-  systemd-libs libsystemd.so
   util-linux-libs
   zlib libz.so
   zstd libzstd.so
@@ -31,17 +30,16 @@
   llvm
   perl
   python
-  systemd
   tcl
   util-linux
 )
 source=(
   https://ftp.postgresql.org/pub/source/v${pkgver}/postgresql-${pkgver}.tar.bz2
 )
-b2sums=('e5deeed82f710b38ed959a2f873e8ac0c27fc68b2ced22f70e9e89a34e473e1368231328351d300e617e61554cce68a8cec3731e6d3b31c620f93a2b2672470d')
+b2sums=('9fcae43caf765d841c03d154e4992abbacaa734e0cf7524b59acc0103fa0b3e1888d8a46e9e6b2ccf9329f49701e19cf4b69878794b24c6306388bdb489e8401')
 
-md5sums=('e443d2b4a7edb8dbcbbe7a05a712d881')
-sha256sums=('3b9a62538a8da151e807a3ddb1198e8605f2032544d78f403ae883d27ecf1ee4')
+md5sums=('c045db1c921592960ffc4aafdfc4537c')
+sha256sums=('a88d195dd93730452d0cfa1a11896720d6d1ba084bc2be7d7fc557fa4e4158a0')
 
 prepare() {
   cd postgresql-${pkgver}
@@ -49,6 +47,7 @@
 
 build() {
   local configure_options=(
+    --without-systemd
     --prefix=/opt/pgsql-${pkgver%%.*}
     --disable-rpath
     --disable-nls
@@ -66,7 +65,6 @@
     --with-python
     --without-readline
     --with-system-tzdata=/usr/share/zoneinfo
-    --with-systemd
     --with-tcl
     --with-uuid=e2fs
     --with-zstd


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -14,7 +14,6 @@
 libssl.so
 libstdc++
 libstdc++.so
-libsystemd.so
 libxml2
 libxml2.so
 libz.so
@@ -27,8 +26,6 @@
 perl
 postgresql-libs>
 python
-systemd
-systemd-libs
 tcl
 util-linux
 util-linux-libs