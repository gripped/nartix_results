--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,7 +4,7 @@
   fwupd
   fwupd-docs
 )
-pkgver=2.0.20
+pkgver=2.0.19
 pkgrel=1
 pkgdesc="Simple daemon to allow session software to update firmware"
 arch=(x86_64)
@@ -16,6 +16,7 @@
   curl
   flashrom
   fwupd-efi
+  gcc-libs
   glib2
   glibc
   gnutls
@@ -24,7 +25,6 @@
   libarchive
   libcbor
   libdrm
-  libgcc
   libjcat
   libmbim
   libmm-glib
@@ -38,7 +38,6 @@
   python
   shared-mime-info
   sqlite
-  systemd-libs
   tpm2-tss
   xz
   zlib
@@ -66,26 +65,26 @@
   "git+https://github.com/fwupd/fwupd.git#tag=${pkgver}?signed"
   fwupd.sysusers
 )
-sha512sums=('35842d686fe1186537dd89cf50246cfd586ea3ce826fb09cd5ca0659c0ffdd6148b8187f4aa2bf273b7a3753159f2c037ebcf03fcb85ade313a80ece492e7b61'
+sha512sums=('ed17418cf5f3f592c7bf3e609dd7fbbbece1752c7e26c3757b7130294108a470901d92b7c208db2923a241dded670c8d4f58b845a75da64f9b0392cd97ea5b15'
             'f9a99c60786a2b98e0de439a9288af61b2c0716f8339a4c93e2df7108d2a7f9ef8128967dcaa1e12022ffa647945bf5eb3749e38cac83e00a28cbc5b015fbee9')
-b2sums=('a1cfabba50c7287239596b7bd7ffedcb9bd848a7d1d951ba506bdb4129705e05049addbe703524d75ce59c621fb19e80d9f6cc551b19da623526565278c2e3f3'
+b2sums=('aff8c3ad405f1bad6e6866a39170ace4e079211db426078d8a51d6637ff071d9fc9709ec0aab3a48f94b2b45a39dc25c9c3ca2535e90ba0f1f7ab09bf07bd2f7'
         'c294c6dd324c0ad0d752affdc459d427d34f4bf865def099ac0e25db6b5dfbfcf645ca325e4e7732d1256e75c624ff27094d5c814726909c7e348128a9dd93f9')
 validpgpkeys=(163EB50119225DB3DF8F49EA17ACBA8DFA970E17) # Richard Hughes <richard@hughsie.com>
 
 build() {
   local meson_options=(
+    -D systemd=disabled
     -D docs=enabled
     -D efi_binary=false
     -D supported_build=enabled
-    -D systemd_unit_user=fwupd
   )
 
-  arch-meson ${pkgname} build "${meson_options[@]}"
+  artix-meson ${pkgname} build "${meson_options[@]}"
   meson compile -C build
 }
 
 check() {
-  meson test -C build --print-errorlogs
+  meson test -C build --print-errorlogs || :
 }
 
 _pick() {
@@ -128,7 +127,7 @@
   rm -r "${pkgdir}"/usr/{lib,share}/installed-tests/
   mv "${pkgdir}"/usr/bin/{,fwupd-}dbxtool
   mv "${pkgdir}"/usr/share/man/man1/{,fwupd-}dbxtool.1
-  rm "${pkgdir}"/usr/lib/modules-load.d/fwupd-msr.conf
+  rm "${pkgdir}"/usr/lib/modules-load.d/fwupd-msr.conf || :
 
   _pick docs "${pkgdir}"/usr/share/doc/{,fwupd/}{libfwupdplugin,libfwupd}
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -5,6 +5,7 @@
 curl
 flashrom
 fwupd-efi
+gcc-libs
 gi-docgen
 git
 glib2
@@ -21,7 +22,6 @@
 libcbor.so
 libcurl.so
 libdrm
-libgcc
 libjcat
 libjson-glib-1.0.so
 libmbim
@@ -49,7 +49,6 @@
 python-pillow
 shared-mime-info
 sqlite
-systemd-libs
 tpm2-tss
 umockdev
 vala