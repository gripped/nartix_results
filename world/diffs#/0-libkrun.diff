--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,20 +1,23 @@
-
 pkgname=libkrun
-pkgver=1.17.0
-pkgrel=1
+pkgver=1.16.0
+pkgrel=5
 pkgdesc="A dynamic library providing Virtualization-based process isolation capabilities"
 url='https://github.com/containers/libkrun'
 arch=('x86_64')
 license=('Apache-2.0')
 makedepends=('cargo' 'patchelf' 'clang')
 depends=('glibc' 'gcc-libs' 'libkrunfw' 'pipewire' 'virglrenderer')
-source=("https://github.com/containers/libkrun/archive/refs/tags/v$pkgver/$pkgname-$pkgver.tar.gz")
-sha256sums=('ccefe9f6a4af2152a6572d3536bb83deb7d598d6421d8b186ce2a148a6d3b8e9')
+source=("https://github.com/containers/libkrun/archive/refs/tags/v$pkgver/$pkgname-$pkgver.tar.gz"
+        libkrun-410.patch::https://patch-diff.githubusercontent.com/raw/containers/libkrun/pull/410.patch)
+sha256sums=('04b6f01f44e263d168757ebcd9bc037d7c5836c1987a547c6b2fa5837abe1ab1'
+            '26728282f3699ac3c661a7cbeb492206d0b73755fc727505432639e41bc20158')
 
 prepare() {
   cd "$pkgname-$pkgver"
 
-  cargo fetch --locked --target "$(rustc --print host-tuple)"
+  cargo fetch --locked --target "$(rustc -vV | sed -n 's/host: //p')"
+
+  patch -Np1 -i "$srcdir"/libkrun-410.patch
 }
 
 build() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,7 @@
 prepare() {
 cd "$pkgname-$pkgver"
-cargo fetch --locked --target "$(rustc --print host-tuple)"
+cargo fetch --locked --target "$(rustc -vV | sed -n 's/host: //p')"
+patch -Np1 -i "$srcdir"/libkrun-410.patch
 }
 build() {
 cd "$pkgname-$pkgver"
