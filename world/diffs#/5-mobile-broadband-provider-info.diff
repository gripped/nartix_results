--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,36 +1,40 @@
 
 pkgname=mobile-broadband-provider-info
-pkgver=20240407
+pkgver=20230416
 pkgrel=1
 pkgdesc="APN configuration presets for mobile broadband connections"
 url="https://gitlab.gnome.org/GNOME/mobile-broadband-provider-info"
 arch=(any)
-license=(CC-PDDC)
-makedepends=(
-  git
-  libxslt
-  meson
-)
-source=("git+$url.git?signed#tag=$pkgver")
-b2sums=('2c90b4caa47d9a053d466a77eb390cbb70097f4bb09b9f6d8a5e21de7a8bbb4e78770137aa4e9eca1852dc9832bddf0fb5d1713baefaa8dddaa6e3075bc757fd')
-validpgpkeys=(
-  0DB3932762F78E592F6522AFBB5A2C77584122D3 # Guido GÃ¼nther <agx@sigxcpu.org>
-)
+license=(custom)
+makedepends=(git libxslt)
+_commit=aae7c68671d225e6d35224613d5b98192b9b2ffe  # tags/20230416^0
+source=("git+https://gitlab.gnome.org/GNOME/mobile-broadband-provider-info.git#commit=$_commit")
+sha256sums=('SKIP')
+
+pkgver() {
+  cd $pkgname
+  git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd $pkgname
+  NOCONFIGURE=1 ./autogen.sh
+}
+
+check() {
+  cd $pkgname
+  make check
 }
 
 build() {
-  arch-meson $pkgname build
-  meson compile -C build
-}
-
-check() {
-  meson test -C build --print-errorlogs
+  cd $pkgname
+  ./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var
+  make
 }
 
 package() {
-  meson install -C build --destdir "$pkgdir"
+  cd $pkgname
+  make DESTDIR="$pkgdir" install
+  install -Dt "$pkgdir/usr/share/licenses/$pkgname" -m644 COPYING
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,3 +1,2 @@
 git
 libxslt
-meson

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,9 @@
 prepare() {
 cd $pkgname
+NOCONFIGURE=1 ./autogen.sh
 }
 build() {
-arch-meson $pkgname build
-meson compile -C build
+cd $pkgname
+./configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var
+make
 }
