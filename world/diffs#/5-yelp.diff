--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,22 +1,15 @@
 
 pkgname=yelp
 pkgver=42.2
-pkgrel=3
+pkgrel=2
 pkgdesc="Get help with GNOME"
-url="https://apps.gnome.org/Yelp"
-license=(GPL-2.0-or-later)
+url="https://wiki.gnome.org/Apps/Yelp"
+license=(GPL)
 arch=(x86_64)
 depends=(
   bzip2
-  dconf
-  glib2
-  glibc
-  gtk3
-  hicolor-icon-theme
   libhandy
-  libxml2
   libxslt
-  sqlite
   webkit2gtk-4.1
   xz
   yelp-xsl
@@ -25,27 +18,29 @@
   appstream-glib
   autoconf-archive
   git
-  glib2-devel
   itstool
 )
 optdepends=('man-db: View manual pages')
 provides=(libyelp.so)
 groups=(gnome)
+options=(debug)
+_commit=9fd1a84e1eae23db21939ff76c7e96d5422d3b1a  # tags/42.2^0
 source=(
-  "git+https://gitlab.gnome.org/GNOME/yelp.git#tag=$pkgver"
-  0001-Remove-gtk-doc.patch
-  0002-CVE-2025-3155.patch
+  "git+https://gitlab.gnome.org/GNOME/yelp.git#commit=$_commit"
+  no-gtk-doc.diff
 )
-b2sums=('16a45eedd3444a9817298ffd63ba0f4ed286b1a21c54bfd51fcab6e253d73b7fbf59e82e833c82e45d7a4189bea97ba7b186844073e2b9d225207aa2faeda6f6'
-        '5b530dcd424619ca17ff45f5e2ec6140fe998251c0f6bc96aebb22f2b89a076b7f2a38ff9d13cd1512e4c687d5797cead23b65324b083aabda2b4e93a2afa4cf'
-        'e36ea4c361d8968a47343a1b6455f0c036628afeca1e63edbe70337ae8867b82eadca4cf2639e5c09a72f2e5dfe519718baeb251a17b8ddf36f4d1c668c25720')
+b2sums=('SKIP'
+        'd6200723395292742105065baeab12ae308f8141069343c5ec79bcab10e4efbdea69ea9deffdcd7a2fb0c0ceeb886398b8b303ff750af1a79c38c64046664501')
+
+pkgver() {
+  cd yelp
+  git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd yelp
 
-  git apply -3 ../0001-Remove-gtk-doc.patch
-
-  git apply -3 ../0002-CVE-2025-3155.patch
+  git apply -3 ../no-gtk-doc.diff
 
   NOCONFIGURE=1 ./autogen.sh
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,18 +1,10 @@
 appstream-glib
 autoconf-archive
 bzip2
-dconf
 git
-glib2
-glib2-devel
-glibc
-gtk3
-hicolor-icon-theme
 itstool
 libhandy
-libxml2
 libxslt
-sqlite
 webkit2gtk-4.1
 xz
 yelp-xsl

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,6 @@
 prepare() {
 cd yelp
-git apply -3 ../0001-Remove-gtk-doc.patch
-git apply -3 ../0002-CVE-2025-3155.patch
+git apply -3 ../no-gtk-doc.diff
 NOCONFIGURE=1 ./autogen.sh
 }
 build() {
