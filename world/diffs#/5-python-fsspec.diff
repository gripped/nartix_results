--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,79 +1,69 @@
 
 _pkg=filesystem_spec
 pkgname=python-fsspec
-pkgver=2024.6.0
-pkgrel=1
-pkgdesc="Specification that python filesystems should adhere to"
+pkgver=2024.3.1
+pkgrel=3
+pkgdesc="Specification that python filesystems should adhere to."
 arch=(any)
 url="https://github.com/intake/filesystem_spec"
-license=(BSD-3-Clause)
+license=(BSD)
 depends=(python)
-makedepends=(
-  python-build
-  python-hatch-vcs
-  python-hatchling
-  python-installer
-  python-wheel
+makedepends=(python-setuptools)
+optdepends=(
+    'python-aiohttp: HTTP support'
+    'python-distributed: Dask support'
+    'python-libarchive-c: archives support'
+    'python-lz4: LZ4 compression support'
+    'python-paramiko: SFTP support'
+    'python-pyarrow: Arrow/Parquet support'
+    'python-pygit2: git support'
+    'python-requests: web protocols support'
+    'python-smbprotocol: SMB support'
+    'python-snappy: snappy compression support'
+    'python-zstandard: zstandard (zstd) compression support'
 )
 checkdepends=(git
-  python-pytest
-  python-pytest-asyncio
-  python-pytest-mock
-  python-pytest-vcr
-  python-aiohttp
-  python-dask
-  python-distributed
-  python-fastparquet
-  python-libarchive-c
-  python-paramiko
-  python-pyarrow
-  python-pygit2
-  python-requests
-  python-smbprotocol
-  python-cloudpickle
-  python-jinja
-  python-lz4
-  python-msgpack
-  python-numpy
-  python-pandas
-  python-pyftpdlib
-  python-snappy
-  python-tqdm
-  python-zstandard
-  jupyter-notebook
+    python-pytest
+    python-pytest-asyncio
+    python-pytest-mock
+    python-pytest-vcr
+    python-aiohttp
+    python-dask
+    python-distributed
+    python-fastparquet
+    python-libarchive-c
+    python-paramiko
+    python-pyarrow
+    python-pygit2
+    python-requests
+    python-smbprotocol
+    python-cloudpickle
+    python-jinja
+    python-lz4
+    python-msgpack
+    python-numpy
+    python-pandas
+    python-pyftpdlib
+    python-snappy
+    python-tqdm
+    python-zstandard
+    jupyter-notebook
 )
-optdepends=(
-  'python-aiohttp: HTTP support'
-  'python-distributed: Dask support'
-  'python-libarchive-c: archives support'
-  'python-lz4: LZ4 compression support'
-  'python-paramiko: SFTP support'
-  'python-pyarrow: Arrow/Parquet support'
-  'python-pygit2: git support'
-  'python-requests: web protocols support'
-  'python-smbprotocol: SMB support'
-  'python-snappy: snappy compression support'
-  'python-zstandard: zstandard (zstd) compression support'
-)
-source=("${url}/archive/${pkgver}/${pkgname}-${pkgver}.tar.gz")
-sha256sums=('c8b94712b235cc9f05c124e86dd291cfd0732a80c5edac83140d7ac952a5339b')
+source=(${url}/archive/${pkgver}/${pkgname}-${pkgver}.tar.gz)
+sha256sums=('5c5040762cf644762a5777444cd1302dbd0ea7e88cb3d8645164398e8762ec3a')
 
 build() {
-  cd "$_pkg-$pkgver"
-
-  export SETUPTOOLS_SCM_PRETEND_VERSION=$pkgver
-  python -m build --wheel --no-isolation
+  cd ${_pkg}-${pkgver}
+  python setup.py build
 }
 
 check() {
-  cd "$_pkg-$pkgver"
-
-  pytest
+  cd ${_pkg}-${pkgver}
+  pytest -vv --color=yes -x -rs --deselect fsspec/implementations/tests/test_http.py::test_processes
 }
 
 package() {
-  cd "$_pkg-$pkgver"
-
-  python -m installer --destdir="$pkgdir" dist/*.whl
-  install -Dm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE
+  cd ${_pkg}-${pkgver}
+  python setup.py install --prefix=/usr --root="${pkgdir}" --optimize=1 --skip-build
+  install -Dm644 LICENSE -t "${pkgdir}"/usr/share/licenses/${pkgname}/
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,2 @@
 python
-python-build
-python-hatch-vcs
-python-hatchling
-python-installer
-python-wheel
+python-setuptools

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,4 @@
 build() {
-cd "$_pkg-$pkgver"
-export SETUPTOOLS_SCM_PRETEND_VERSION=$pkgver
-python -m build --wheel --no-isolation
+cd ${_pkg}-${pkgver}
+python setup.py build
 }
