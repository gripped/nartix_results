--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,54 +1,33 @@
 
 pkgname=python-invoke
 pkgver=2.2.0
-pkgrel=4
+pkgrel=3
 pkgdesc="Pythonic task execution"
+url="https://github.com/pyinvoke/invoke"
+license=('BSD')
 arch=('any')
-url="https://github.com/pyinvoke/invoke"
-license=('BSD-2-Clause')
-depends=(
-  'python'
-  'python-fluidity'
-  'python-lexicon'
-  'python-yaml'
-)
-makedepends=(
-  'python-build'
-  'python-installer'
-  'python-setuptools'
-  'python-wheel'
-)
-checkdepends=(
-  'python-icecream'
-  'python-pytest'
-  'python-pytest-relaxed'
-)
-source=("$url/archive/$pkgver/${pkgname#python-}-$pkgver.tar.gz")
-sha512sums=('3d0adabec4825fb45524d3ab4f2a790d31245a89e038c08c770fc9f33c81ed182769e8f17d3d6f33a913b431cba475b975826ddfd533a945d481b52deba759a2')
+depends=('python-fluidity' 'python-lexicon' 'python-yaml')
+makedepends=('python-build' 'python-installer' 'python-setuptools' 'python-wheel')
+checkdepends=('python-pytest' 'python-pytest-relaxed' 'python-icecream')
+source=("https://pypi.io/packages/source/i/invoke/invoke-$pkgver.tar.gz")
+sha512sums=('4b208a00ecc5eb2feccd01bb3f11248327ede703ddbc0456182165cdb30bdeab603ef7021c46c383cd4caf40c539e0f5c8746bd34e0eb77fc111464ea52f01b1')
 
 prepare() {
-  cd ${pkgname#python-}-$pkgver
-  rm -r invoke/vendor
+  rm -r invoke-$pkgver/invoke/vendor
 }
 
 build() {
-  cd ${pkgname#python-}-$pkgver
+  cd invoke-$pkgver
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd ${pkgname#python-}-$pkgver
-  python -m venv --system-site-packages test-env
-  test-env/bin/python -m installer dist/*.whl
-  test-env/bin/python -m pytest -s \
-    --deselect tests/runners.py::Local_::env::uses_execve_for_pty_True \
-    --deselect tests/runners.py::Local_::pty \
-    --deselect tests/runners.py::Local_::shell::defaults_to_bash_or_cmdexe_when_pty_True \
-    --deselect tests/runners.py::Local_::shell::may_be_overridden_when_pty_True
+  cd invoke-$pkgver
+  PYTHONPATH="$PWD"/build/lib pytest -s tests -k 'not pty'
 }
 
 package() {
-  cd ${pkgname#python-}-$pkgver
+  cd invoke-$pkgver
   python -m installer --destdir="$pkgdir" dist/*.whl
-  install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE
+  install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
-python
 python-build
 python-fluidity
 python-installer

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,7 @@
 prepare() {
-cd ${pkgname#python-}-$pkgver
-rm -r invoke/vendor
+rm -r invoke-$pkgver/invoke/vendor
 }
 build() {
-cd ${pkgname#python-}-$pkgver
+cd invoke-$pkgver
 python -m build --wheel --no-isolation
 }
