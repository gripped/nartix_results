--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,31 +2,23 @@
 pkgbase=mesa-demos
 pkgname=('mesa-demos' 'mesa-utils')
 pkgver=9.0.0
-pkgrel=4
+pkgrel=3
 arch=('x86_64')
 url="https://www.mesa3d.org/"
-license=('MIT')
-makedepends=('meson' 'mesa' 'libxkbcommon-x11' 'libdecor'
-             'glu' 'freeglut'
-             'glslang' 'vulkan-headers' 'vulkan-icd-loader'
-             'wayland-protocols')
+license=('custom')
+makedepends=('meson' 'mesa' 'libxkbcommon-x11'
+             'libdecor' 'glu' 'freeglut'
+             'glslang' 'vulkan-headers' 'wayland-protocols')
 source=(https://mesa.freedesktop.org/archive/demos/mesa-demos-${pkgver}.tar.xz{,.sig}
-        'mesa-demos-system-data.patch'
         'LICENSE')
 sha512sums=('af33ef72a521416e39d93370b2b4ccb768f08084c9e4c0aa62868210d9465c858e5cb8e5d23952295a3073946f609eb8723ee60b39dd9fb6696c4e45aafbb2c1'
             'SKIP'
-            'ef76456547725db1eb5f73508be227551f718d02ec09823ad1ff1abe445f791e34e09bd96a2ae8b3c0b9470ed375d133d2ec634cfe97ec04579d130957404126'
             '25da77914dded10c1f432ebcbf29941124138824ceecaf1367b3deedafaecabc082d463abcfa3d15abff59f177491472b505bcb5ba0c4a51bb6b93b4721a23c2')
 validpgpkeys=('FF4CF638C624C3CF21ED2CF227EF763A2AA39F96') # Erik Faye-Lund <erik.faye-lund@collabora.com>
 
-prepare() {
-  cd mesa-demos-$pkgver
-  patch -p1 -i $srcdir/mesa-demos-system-data.patch
-}
-
 build() {
 
-  arch-meson mesa-demos-$pkgver build \
+  artix-meson mesa-demos-$pkgver build \
     -D gles1=disabled \
     -D with-system-data-files=true
 
@@ -41,8 +33,7 @@
 
 package_mesa-demos() {
   pkgdesc="Mesa demos"
-  depends=('libgl' 'glu' 'freeglut'
-           'libxext' 'libx11' 'glibc')
+  depends=('libgl' 'glu' 'freeglut' 'libdecor' 'libxkbcommon')
   install=mesa-demos.install
 
   DESTDIR="$pkgdir" meson install -C build
@@ -61,8 +52,7 @@
 
 package_mesa-utils() {
   pkgdesc="Essential Mesa utilities"
-  depends=('libgl' 'libdecor' 'libxkbcommon-x11' 'vulkan-icd-loader'
-           'libxcb' 'wayland' 'libdrm' 'libx11' 'libxkbcommon' 'glibc')
+  depends=('libgl' 'libdecor' 'libxkbcommon-x11')
   provides=('glxinfo' 'glxgears'
             'eglinfo' 'eglgears'
             'es2info' 'es2gears')


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,18 +1,11 @@
 freeglut
-glibc
 glslang
 glu
 libdecor
-libdrm
 libgl
-libx11
-libxcb
-libxext
 libxkbcommon
 libxkbcommon-x11
 mesa
 meson
 vulkan-headers
-vulkan-icd-loader
-wayland
 wayland-protocols

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,9 +1,5 @@
-prepare() {
-cd mesa-demos-$pkgver
-patch -p1 -i $srcdir/mesa-demos-system-data.patch
-}
 build() {
-arch-meson mesa-demos-$pkgver build \
+artix-meson mesa-demos-$pkgver build \
 -D gles1=disabled \
 -D with-system-data-files=true
 meson configure build
