--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,73 +1,46 @@
 
 pkgname=pcsclite
-pkgver=2.2.0
-pkgrel=4
+pkgver=2.1.0
+pkgrel=2
 pkgdesc="PC/SC Architecture smartcard middleware library"
 arch=('x86_64')
 url='https://pcsclite.apdu.fr/'
-license=(
-  'BSD-3-Clause'        # Most of it
-  'GPL-3.0-or-later'    # doc/example/pcsc_demo.c, src/spy/, UnitaryTests/
-  'BSD-2-Clause'        # src/auth.c, src/auth.h
-  '0BSD'                # src/simclist.c, src/simclist.h
-)
-depends=(
-  'libsystemd.so'
-  'libudev.so'
-  'libpolkit-gobject-1.so'
-)
-makedepends=(
-  'git'
-  'meson'
-  'polkit'
-  'systemd'
-)
+license=('BSD')
+depends=('libudev.so' 'libpolkit-gobject-1.so')
+makedepends=('udev' 'polkit')
 optdepends=(
   'python: API call trace logging with the pcsc-spy'
   'ccid: USB Chip/Smart Card Interface Devices driver'
 )
-provides=(
-  'libpcsclite.so'
-  'libpcsclite_real.so'
-  'libpcscspy.so'
-)
+provides=('libpcsclite.so' 'libpcsclite_real.so' 'libpcscspy.so')
 validpgpkeys=('F5E11B9FFE911146F41D953D78A1B4DFE8F9C57E') # Ludovic Rousseau <rousseau@debian.org>
-source=(
-  "git+https://github.com/LudovicRousseau/PCSC.git#tag=${pkgver}?signed"
-  meson-fixes.patch::https://github.com/LudovicRousseau/PCSC/commit/960e367edc01518b90684ffff99010ee07ae1bd4.patch
-  meson-fixes-2.patch::https://github.com/LudovicRousseau/PCSC/pull/181.patch
-)
-sha256sums=('6888231cfb24d8283f0617fa01824eacda005d38c4324bd5327a39e63ac335d2'
-            '771c4d014d8e873f512820b79804e321514c333b1ec1731d41fa3647b79b9ff8'
-            '390571449d7121c1135935ce97942d073fec2d32c073bf60148c69df10dd4849')
-
-prepare() {
-  cd PCSC
-  patch -Np1 < ../meson-fixes.patch
-  patch -Np1 < ../meson-fixes-2.patch
-}
+source=("https://pcsclite.apdu.fr/files/pcsc-lite-${pkgver}.tar.bz2"{,.asc})
+sha256sums=('85cab61cc744c81e2bc432656863293b8428d0136f079e3b12a84b335b5b35aa'
+            'SKIP')
 
 build() {
-  local meson_options=(
-    -D libsystemd=true
-    -D libudev=true
-    -D polkit=true
-    -D serial=true
-    -D systemdunit=system
-  )
-  arch-meson PCSC build "${meson_options[@]}"
-  meson compile -C build
+  cd "pcsc-lite-$pkgver"
 
-  awk '/David Corcoran/{flag=1} /GNU GPL v3/ {flag=0} flag' PCSC/COPYING > LICENSE.BSD-3-Clause
-  awk '/GNU GPL v3/    {flag=1} /auth.c/     {flag=0} flag' PCSC/COPYING > LICENSE.GPL-3.0-or-later
-  awk '/auth.c/        {flag=1} /simclist.c/ {flag=0} flag' PCSC/COPYING > LICENSE.BSD-2-Clause
-  awk '/simclist.c/    {flag=1} flag'                       PCSC/COPYING > LICENSE.0BSD
+  ./configure \
+    --prefix=/usr \
+    --sbindir=/usr/bin \
+    --sysconfdir=/etc \
+    --disable-static \
+    --enable-filter \
+    --enable-ipcdir=/run/pcscd \
+    --enable-libudev \
+    --enable-usbdropdir=/usr/lib/pcsc/drivers \
+    --enable-polkit \
+    --disable-libsystemd
+
+  make
 }
 
 package() {
-  meson install -C build --destdir "${pkgdir}"
+  cd "pcsc-lite-$pkgver"
+  make DESTDIR="$pkgdir" install
 
-  install -D -m0644 LICENSE.* -t "$pkgdir/usr/share/licenses/$pkgname"
+  install -D -m0644 "$srcdir/pcsc-lite-$pkgver/COPYING" "$pkgdir/usr/share/licenses/$pkgname/LICENSE"
   install -d "$pkgdir/usr/lib/pcsc/drivers"
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,7 +1,4 @@
-git
 libpolkit-gobject-1.so
-libsystemd.so
 libudev.so
-meson
 polkit
-systemd
+udev