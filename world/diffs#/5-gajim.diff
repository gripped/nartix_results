--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,13 +1,13 @@
 
 pkgname=gajim
-pkgver=1.9.3
-pkgrel=1
-pkgdesc="Full featured and easy to use XMPP (Jabber) client"
-url="https://gajim.org/"
+pkgver=1.8.4
+pkgrel=3
+pkgdesc='Full featured and easy to use XMPP (Jabber) client'
+url='https://gajim.org/'
 arch=('any')
-license=('GPL-3.0-only')
-depends=('gtk3' 'gtksourceview4' 'python-cairo' 'python-gobject' 'python-keyring' 'python-nbxmpp' 'python-cryptography' 'python-precis_i18n' 'python-css-parser' 'python-distro' 'hicolor-icon-theme' 'python-pillow' 'python-gssapi' 'python-netifaces' 'python-qrcode' 'python-omemo-dr' 'python-packaging' 'pango' 'sqlite' 'python-sqlalchemy' 'python-setuptools' 'python-emoji')
-makedepends=('python-build' 'python-installer' 'python-wheel')
+license=('GPL3')
+depends=('gtk3' 'gtksourceview4' 'python-cairo' 'python-gobject' 'python-keyring' 'python-nbxmpp>=4.3.0' 'python-cryptography' 'python-precis_i18n' 'python-css-parser' 'python-distro' 'hicolor-icon-theme' 'python-pillow' 'python-gssapi' 'python-netifaces' 'python-qrcode' 'python-omemo-dr' 'python-packaging' 'pango' 'sqlite')
+makedepends=('python-build' 'python-installer' 'python-wheel' 'python-setuptools')
 optdepends=('python-dbus: to have gajim-remote working'
             'python-sentry_sdk: for Sentry error reporting to dev.gajim.org (users decide whether to send reports or not)'
             'gspell: for spell checking support'
@@ -26,31 +26,32 @@
             'libxss: for idle time checking on X11'
             'python-gnupg: encrypting chat messages with OpenPGP'
             'emoji-font: for emojis support')
-source=("https://dev.gajim.org/gajim/gajim/-/archive/${pkgver}/gajim-${pkgver}.tar.gz"
+source=(https://www.gajim.org/downloads/${pkgver%.*}/gajim-${pkgver}.tar.gz
         disable-failing-test.patch)
-sha512sums=('19a4dfed6116e62b2cd692192b472f0cc2965364d6d14c053d25816bb55a03a9d552b3ef239ba19c07ca3bc3b74fd53d32cc1d075d1a3c7e6d58cf2edf74a1c4'
+sha512sums=('1a5b028c0e308eb15417c8c11584bc0e8b0218fead5155093ede4bc3961b6bee2b47bc3510f751dc70194634d6ca94d4a675f6891c8f050859fb4729020e52cb'
             '6244bf8738baf57e391140a7df7f270394b05055ebdf57acd5f30ffd0afec542ccd4348e59a7c64a1ecfb7b7d29ef21e2f823ea765a5281eba63692b9ab488f3')
-b2sums=('69366379d4c928197f6553378c28cd92e120a9006e8aa1de4c1dbd63efe688124d3e1213b801f478b8326ba5e3ef12e2562348de1340db5d3c939ee02ebd7923'
+b2sums=('e23eafe707bc482a050fcef44df9e68af552444cce173c506538ebe01557a894dc0ba8b9afe18f195fd0b00b717b1268531a960b1c8b868c22081135d14e3079'
         '4bcc5859ea58bee9fabb2888172aed80bfe240bc5888c9795e382ddc511b51b7f0f5b63e6c207370e182ed41bc08242f8f38574dddf26803c30fda465924870c')
 
 prepare() {
-	cd "${pkgname}-${pkgver}"
-	patch -p1 -i ../disable-failing-test.patch # Disable test that fails with pango
+  cd $pkgname-$pkgver
+  patch -p1 -i ../disable-failing-test.patch # Disable test that fails with pango 1.52.2
 }
 
 build() {
-	cd "${pkgname}-${pkgver}"
-	./pep517build/build_metadata.py -o dist/metadata
-	python -m build --wheel --no-isolation
+  cd ${pkgname}-${pkgver}
+  ./pep517build/build_metadata.py -o dist/metadata
+  python -m build --wheel --no-isolation
 }
 
 check() {
-	cd "${pkgname}-${pkgver}"
-	python -m unittest discover -s test
+  cd ${pkgname}-${pkgver}
+  python -m unittest discover -s test
 }
 
 package() {
-	cd "${pkgname}-${pkgver}"
-	python -m installer --destdir="${pkgdir}" dist/*.whl
-	./pep517build/install_metadata.py dist/metadata --prefix="${pkgdir}/usr"
+  cd ${pkgname}-${pkgver}
+  python -m installer --destdir="${pkgdir}" dist/*.whl
+  ./pep517build/install_metadata.py dist/metadata --prefix="${pkgdir}/usr"
 }
+


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -7,12 +7,11 @@
 python-cryptography
 python-css-parser
 python-distro
-python-emoji
 python-gobject
 python-gssapi
 python-installer
 python-keyring
-python-nbxmpp
+python-nbxmpp>
 python-netifaces
 python-omemo-dr
 python-packaging
@@ -20,6 +19,5 @@
 python-precis_i18n
 python-qrcode
 python-setuptools
-python-sqlalchemy
 python-wheel
 sqlite

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,9 +1,9 @@
 prepare() {
-cd "${pkgname}-${pkgver}"
-patch -p1 -i ../disable-failing-test.patch # Disable test that fails with pango
+cd $pkgname-$pkgver
+patch -p1 -i ../disable-failing-test.patch # Disable test that fails with pango 1.52.2
 }
 build() {
-cd "${pkgname}-${pkgver}"
+cd ${pkgname}-${pkgver}
 ./pep517build/build_metadata.py -o dist/metadata
 python -m build --wheel --no-isolation
 }
