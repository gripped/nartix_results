--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,31 +1,15 @@
 
 pkgname=apitrace
-pkgver=12.0
-pkgrel=1
+pkgver=11.1
+pkgrel=3
 pkgdesc="Graphics API Tracing"
 arch=('x86_64')
 url="https://github.com/apitrace/apitrace"
 license=('MIT')
-depends=(
-  'brotli'
-  'gcc-libs'
-  'glibc'
-  'python'
-  'python-numpy'
-  'python-pillow'
-  'libpng'
-  'libprocps'
-  'libx11'
-  'zlib'
-)
-makedepends=(
-  'cmake'
-  'git'
-  'mesa'
-  'qt5-base'
-)
+makedepends=('cmake' 'git' 'mesa' 'qt5-base')
+depends=('python' 'libgl' 'libprocps')
 optdepends=('qt5-base: GUI support')
-source=("$pkgname::git+https://github.com/apitrace/apitrace.git#tag=${pkgver}"
+source=("$pkgname-$pkgver::git+https://github.com/apitrace/apitrace.git#tag=${pkgver}"
         "git+https://github.com/apitrace/gltrim-tests.git"
         "git+https://github.com/google/brotli.git"
         "git+https://github.com/google/googletest.git"
@@ -34,18 +18,18 @@
         "git+https://github.com/google/snappy.git"
         "git+https://github.com/madler/zlib.git"
         "git+https://github.com/microsoft/DirectXMath.git")
-sha256sums=('022d88388c4b702da43aa21e7f552035ecbb6f458f24b0fb8f29683d714ebdcc'
-            'SKIP'
-            'SKIP'
-            'SKIP'
-            'SKIP'
-            'SKIP'
-            'SKIP'
-            'SKIP'
-            'SKIP')
+sha256sums=(SKIP
+            SKIP
+            SKIP
+            SKIP
+            SKIP
+            SKIP
+            SKIP
+            SKIP
+            SKIP)
 
 prepare() {
-  cd $pkgname
+  cd apitrace-${pkgver}
 
   git submodule init
   git config submodule.frametrim/tests.url "$srcdir/gltrim-tests"
@@ -60,24 +44,18 @@
 }
 
 build() {
-  local cmake_options=(
-    -B build
-    -D CMAKE_BUILD_TYPE=None
-    -D CMAKE_INSTALL_PREFIX=/usr
-    -D ENABLE_GUI=TRUE
-    -S $pkgname
-    -W no-dev
-  )
+  cd apitrace-${pkgver}
 
-  cmake "${cmake_options[@]}"
-  cmake --build build --verbose
-}
-
-check() {
-  ctest --test-dir build --output-on-failure
+  cmake . -Bbuild -DCMAKE_INSTALL_PREFIX=/usr \
+    -DENABLE_GUI=TRUE
+  make -C build
 }
 
 package() {
-  DESTDIR="$pkgdir" cmake --install build
-  install -vDm 644 $pkgname/LICENSE -t "${pkgdir}/usr/share/licenses/apitrace/"
+  cd apitrace-${pkgver}
+
+  make -C build DESTDIR="${pkgdir}/" install
+
+  install -m755 -d "${pkgdir}/usr/share/licenses/apitrace"
+  install -m644 LICENSE "${pkgdir}/usr/share/licenses/apitrace/"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,14 +1,7 @@
-brotli
 cmake
-gcc-libs
 git
-glibc
-libpng
+libgl
 libprocps
-libx11
 mesa
 python
-python-numpy
-python-pillow
 qt5-base
-zlib

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,5 @@
 prepare() {
-cd $pkgname
+cd apitrace-${pkgver}
 git submodule init
 git config submodule.frametrim/tests.url "$srcdir/gltrim-tests"
 git config submodule.thirdparty/brotli.url "$srcdir/brotli"
@@ -12,14 +12,8 @@
 git -c protocol.file.allow=always submodule update
 }
 build() {
-local cmake_options=(
--B build
--D CMAKE_BUILD_TYPE=None
--D CMAKE_INSTALL_PREFIX=/usr
--D ENABLE_GUI=TRUE
--S $pkgname
--W no-dev
-)
-cmake "${cmake_options[@]}"
-cmake --build build --verbose
+cd apitrace-${pkgver}
+cmake . -Bbuild -DCMAKE_INSTALL_PREFIX=/usr \
+-DENABLE_GUI=TRUE
+make -C build
 }
