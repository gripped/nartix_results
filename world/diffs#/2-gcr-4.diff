--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,48 +4,42 @@
   gcr-4
   gcr-4-docs
 )
-pkgver=4.3.0
-pkgrel=1
+pkgver=4.2.1
+pkgrel=2
 pkgdesc="A library for bits of crypto UI and parsing"
 url="https://gitlab.gnome.org/GNOME/gcr"
 arch=(x86_64)
 license=(LGPL-2.1-or-later)
 depends=(
   glib2
-  glibc
-  gnutls
-  libp11-kit
+  libgcrypt
   libsecret
   openssh
-  systemd-libs
+  p11-kit
 )
 makedepends=(
   gi-docgen
   git
-  glib2-devel
   gobject-introspection
   gtk4
   meson
-  systemd
   vala
 )
-source=("git+https://gitlab.gnome.org/GNOME/gcr.git?signed#tag=$pkgver")
-b2sums=('32e952b36530e18a63fb9c4d348575282adc48c2738846a40ec3a2207f1ede731c3e791bd123818e82bc628a17366fd8e68bff2ffdefcc166dd15cd18d29926c')
-validpgpkeys=(
-  EF3226243ABEFC1A828BC5B46A2AC2B52126D946 # Dhanuka Warusadura <dhanuka@gnome.org>
-  A7C626E13F9AD776776BD9CA1D8A57CF2E8D36A3 # Niels De Graef (nielsdg) <nielsdegraef@gmail.com>
-)
+_commit=7f9dfb291ac475beac911c3868bebd4561267a82  # tags/4.2.1^0
+source=("git+https://gitlab.gnome.org/GNOME/gcr.git#commit=$_commit")
+b2sums=('SKIP')
+
+pkgver() {
+  cd gcr
+  git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd gcr
 }
 
 build() {
-  local meson_options=(
-    -D crypto=gnutls
-  )
-
-  arch-meson gcr build "${meson_options[@]}"
+  artix-meson gcr build -Dsystemd=disabled
   meson compile -C build
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -2,15 +2,11 @@
 gi-docgen
 git
 glib2
-glib2-devel
-glibc
-gnutls
 gobject-introspection
 gtk4
-libp11-kit
+libgcrypt
 libsecret
 meson
 openssh
-systemd
-systemd-libs
+p11-kit
 vala