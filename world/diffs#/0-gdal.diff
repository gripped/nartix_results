--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 
 pkgbase=gdal
 pkgname=(gdal python-gdal)
-pkgver=3.9.1
-pkgrel=2
+pkgver=3.9.0
+pkgrel=4
 pkgdesc="A translator library for raster and vector geospatial data formats"
 arch=(x86_64)
 url="https://gdal.org/"
@@ -14,8 +14,17 @@
              openssl pcre2 libpng podofo poppler postgresql-libs qhull
              libspatialite sqlite swig libtiff libwebp xerces-c zlib zstd libaec)
 changelog=$pkgbase.changelog
-source=(https://download.osgeo.org/${pkgbase}/${pkgver}/${pkgbase}-${pkgver}.tar.xz)
-b2sums=('a9c5c20b1bc704a331ea54f1575f655197075dde75fa6144cff43763d57d64b9bd6e3c7a40bedb919567b45185688b206a3cc13278d0605c5be0b895b403bbab')
+source=(https://download.osgeo.org/${pkgbase}/${pkgver}/${pkgbase}-${pkgver}.tar.xz
+        https://github.com/OSGeo/gdal/commit/7b526b12.patch
+        https://github.com/OSGeo/gdal/commit/f80f32bf.patch)
+b2sums=('5b1453b889768359d36c6da435b27f6d31bb1ba95cecfd05d525d63258100705778d2675219711d0c2ab0e2392dd0eabffa1af3ffd055ebfc14840aaa1e768c0'
+        '801eb649c20ef81d7590888589d4049eab4505fac6efbe1718d8bc9e01a35390b9d8cad090c3421ff90d769fe3f5aec4d1641409ecc5a434ba68c4c5d30eec85'
+        '44efbd94544eea4c82373631d3068b61d6fa5b0f2851c4a87b16d3edb4edd98f331483be58c17e012ecc5aee140da1c6f74d5a5ea766fd1d7316e0ad9e288b0e')
+
+prepare() {
+  patch -d $pkgbase-$pkgver -p1 < 7b526b12.patch # Fix build with C++20
+  patch -d $pkgbase-$pkgver -p1 < f80f32bf.patch
+}
 
 build() {
   cmake -B build -S $pkgbase-$pkgver \


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,3 +1,7 @@
+prepare() {
+patch -d $pkgbase-$pkgver -p1 < 7b526b12.patch # Fix build with C++20
+patch -d $pkgbase-$pkgver -p1 < f80f32bf.patch
+}
 build() {
 cmake -B build -S $pkgbase-$pkgver \
 -DCMAKE_INSTALL_PREFIX=/usr \
