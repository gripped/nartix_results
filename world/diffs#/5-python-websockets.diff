--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,41 +1,39 @@
 
 pkgname=python-websockets
-pkgver=15.0.1
-pkgrel=1
+pkgver=12.0
+pkgrel=3
 pkgdesc='Python implementation of the WebSocket Protocol (RFC 6455)'
+url='https://github.com/aaugustin/websockets'
 arch=('x86_64')
-url='https://github.com/aaugustin/websockets'
 license=('BSD-3-Clause')
-depends=(
-  'glibc'
-  'python'
-)
+depends=('python')
 makedepends=(
   'python-build'
   'python-installer'
   'python-setuptools'
   'python-wheel'
 )
-checkdepends=('python-werkzeug')
-source=("$url/archive/$pkgver/$pkgname-$pkgver.tar.gz")
-sha512sums=('878a5c19e393b4f5994bbe7a4c9d1266d97eaa02e2610f307a62ee9af2386a1210387d2cb81c19b4795ab76b80de4e9e2bfcad89e0bca3f7b9db76ce0a148ebb')
-b2sums=('c3bb0fb19624dbe7d5474584b360415931677ea553170483caee142e8a78120e449902b8ccff76f37ced1959f2758480e536d196fd9488c9a54281e2d82e2820')
+source=(https://github.com/aaugustin/websockets/archive/${pkgver}/${pkgname}-${pkgver}.tar.gz)
+sha512sums=('f17943d444ce275b709cf89453b2d2cce09f5af26f0460e226c2e24cfbb425c825963352e130dcd4201587606355375b525d8e5a02eccbffbb3985a108a3ed5e')
+b2sums=('cab704e0ee44a7012ee58d515a5ea7380a97a3cbb8f55d105c00c8c2b9ed992b4c87435875474de32e5969fd92256bdec830db0571399a1d2e5fb719b23c2d83')
 
 build() {
-  cd ${pkgname#python-}-${pkgver}
+  cd websockets-${pkgver}
   python -m build --wheel --skip-dependency-check --no-isolation
 }
 
 check() {
-  cd ${pkgname#python-}-${pkgver}
-  python -m venv --system-site-packages test-env
-  test-env/bin/python -m installer dist/*.whl
-  test-env/bin/python -m unittest discover -v
+  cd websockets-${pkgver}
+  PYTHONPATH="$PWD/src" python -m unittest discover -v
 }
 
 package() {
-  cd ${pkgname#python-}-${pkgver}
-  python -m installer --destdir="$pkgdir" dist/*.whl
-  install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE
+  cd websockets-${pkgver}
+  python -m installer --destdir="${pkgdir}" dist/*.whl
+
+  local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
+  install -d "${pkgdir}/usr/share/licenses/${pkgname}"
+  ln -s "${site_packages}/websockets-${pkgver}.dist-info/LICENSE" \
+    "${pkgdir}/usr/share/licenses/${pkgname}/LICENSE"
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
-glibc
 python
 python-build
 python-installer

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd ${pkgname#python-}-${pkgver}
+cd websockets-${pkgver}
 python -m build --wheel --skip-dependency-check --no-isolation
 }
