--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,32 +1,39 @@
 
 pkgname=qrencode
 pkgver=4.1.1
-pkgrel=3
-pkgdesc="C library for encoding data in a QR Code symbol."
-arch=(x86_64)
+pkgrel=4
+pkgdesc='C library for encoding data in a QR Code symbol.'
+arch=('x86_64')
 depends=('libpng')
-makedepends=(sdl2)
-url="https://fukuchi.org/works/qrencode/"
+makedepends=('git' 'sdl2')
+url='https://fukuchi.org/works/qrencode/'
 license=('GPL')
-source=(https://fukuchi.org/works/${pkgname}/${pkgname}-${pkgver}.tar.bz2)
-sha256sums=('e455d9732f8041cf5b9c388e345a641fd15707860f928e94507b1961256a6923')
+source=("qrencode::git+https://github.com/fukuchi/libqrencode#tag=v${pkgver}")
+sha256sums=('0151f34aa6996aefb0a3d011ce050bf32c70c5644055d8c82dcaa8044332ad35')
+
+prepare() {
+  cd "${srcdir}/${pkgname}"
+
+  autoreconf -fi
+}
 
 build() {
-  cd "${srcdir}/$pkgname-$pkgver"
+  cd "${srcdir}/${pkgname}"
 
-  ./configure --prefix=/usr
+  ./configure \
+    --prefix=/usr
 
   make
 }
 
 check() {
-  cd "${srcdir}/$pkgname-$pkgver"
+  cd "${srcdir}/${pkgname}"
 
   make check
 }
 
 package() {
-  cd "${srcdir}/$pkgname-$pkgver"
+  cd "${srcdir}/${pkgname}"
 
   make prefix="$pkgdir/usr" install
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,2 +1,3 @@
+git
 libpng
 sdl2

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,10 @@
+prepare() {
+cd "${srcdir}/${pkgname}"
+autoreconf -fi
+}
 build() {
-cd "${srcdir}/$pkgname-$pkgver"
-./configure --prefix=/usr
+cd "${srcdir}/${pkgname}"
+./configure \
+--prefix=/usr
 make
 }
