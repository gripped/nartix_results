--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,8 +4,8 @@
   gnome-shell
   gnome-shell-docs
 )
-pkgver=49.1
-pkgrel=2
+pkgver=48.5
+pkgrel=1
 epoch=1
 pkgdesc="Next generation desktop shell"
 url="https://gitlab.gnome.org/GNOME/gnome-shell"
@@ -31,11 +31,11 @@
   gsettings-desktop-schemas
   gtk4
   hicolor-icon-theme
-  ibus
   json-glib
   libadwaita
   libcanberra-pulse
   libgdm
+  libgirepository
   libglvnd
   libgweather-4
   libibus
@@ -47,12 +47,10 @@
   libsecret
   libsoup3
   libx11
-  libxext
   libxfixes
   mutter
   pango
   polkit
-  systemd-libs
   unzip
   upower
   webkitgtk-6.0
@@ -74,23 +72,20 @@
   "git+https://gitlab.gnome.org/GNOME/gnome-shell.git#tag=${pkgver/[a-z]/.&}"
   "git+https://gitlab.gnome.org/GNOME/libgnome-volume-control.git#commit=5f9768a2eac29c1ed56f1fbb449a77a3523683b6"
   "git+https://github.com/ptomato/jasmine-gjs.git#commit=856465dddbd92e82e574891e1ebc79e17d7b708a"
-  "git+https://gitlab.gnome.org/GNOME/libshew.git#commit=ed782477cb5164320ae4f731d49bc5d475ab2a52"
 )
-b2sums=('50e2bb1d5b64bcb322163653364c8074072266898eefec1eded44ad3da385b63fa4d6911135882fa0ab3895592878a402048d6a87d0718dfe432156ef807b0fa'
+b2sums=('70a2662c46c14888b34cd1379e49ebe2e40efd763a343f09682f90acdcb72942baa26410b4e7453dfebb3eef33db58fecf9343345dbb505992cfa14a69a9007d'
         'e31ae379039dfc345e8032f7b9803a59ded075fc52457ba1553276d3031e7025d9304a7f2167a01be2d54c5e121bae00a2824a9c5ccbf926865d0b24520bb053'
-        'ecbbb9ce5895cc1caed2ddef39c70b4768d78ea0a929ea932d4149f923f92650973cdaefc2aacc9063f2ccf4ec965b57a9698a286f9a6561e39ce2e579ae4522'
-        'ec120324e4fe90fb8017847e5eda3c0b181b6609b78610b3a61ea106ee4d56d2b3bf243c3bc5d3ddd59fe55bb5ceed4f55b41f09626137027ed1c3e27930d082')
+        'ecbbb9ce5895cc1caed2ddef39c70b4768d78ea0a929ea932d4149f923f92650973cdaefc2aacc9063f2ccf4ec965b57a9698a286f9a6561e39ce2e579ae4522')
 
 prepare() {
   ln -s libgnome-volume-control gvc
 
   cd $pkgbase
-
-  git cherry-pick -n d6123a003afc9665e7b0067a46dc93b19ea52c07
 }
 
 build() {
   local meson_options=(
+    -D systemd=false
     -D gtk_doc=true
     -D tests=false
   )
@@ -100,12 +95,12 @@
 
   export MESON_PACKAGE_CACHE_DIR="$srcdir"
 
-  arch-meson $pkgbase build "${meson_options[@]}"
+  artix-meson $pkgbase build "${meson_options[@]}"
   meson compile -C build
 }
 
 package_gnome-shell() {
-  depends+=(libmutter-17.so)
+  depends+=(libmutter-16.so)
   optdepends=(
     'evolution-data-server: Evolution calendar integration'
     'gnome-bluetooth-3.0: Bluetooth support'
@@ -122,11 +117,6 @@
 
   meson install -C build --destdir "$pkgdir"
 
-  install -Dm644 /dev/stdin "$pkgdir/usr/share/glib-2.0/schemas/30_org.archlinux.$pkgname.gschema.override" <<END
-[org.gnome.mutter:GNOME]
-experimental-features=['scale-monitor-framebuffer', 'variable-refresh-rate', 'xwayland-native-scaling']
-END
-
   mkdir -p doc/usr/share
   mv {"$pkgdir",doc}/usr/share/doc
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -26,16 +26,16 @@
 gsettings-desktop-schemas
 gtk4
 hicolor-icon-theme
-ibus
 json-glib
 libadwaita
 libcanberra-pulse
 libgdm
+libgirepository
 libglvnd
 libgweather-4
 libibus
 libical
-libmutter-17.so
+libmutter-16.so
 libnm
 libnma-gtk4
 libpipewire
@@ -43,7 +43,6 @@
 libsecret
 libsoup3
 libx11
-libxext
 libxfixes
 meson
 mutter
@@ -51,7 +50,6 @@
 polkit
 python-docutils
 sassc
-systemd-libs
 unzip
 upower
 webkitgtk-6.0