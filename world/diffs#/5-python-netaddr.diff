--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,38 +1,29 @@
 
 pkgname=python-netaddr
 _pyname=netaddr
-pkgver=1.2.1
-pkgrel=1
+pkgver=0.8.0
+pkgrel=8
 pkgdesc='Pure Python network address representation and manipulation library'
 url='https://github.com/drkjam/netaddr'
-arch=(any)
-license=(BSD-3-Clause)
-depends=(
-  python
-)
-makedepends=(
-  python-build
-  python-installer
-  python-wheel
-  python-setuptools
-  python-sphinx
-  python-sphinx-issues
-)
-checkdepends=(
-  python-pytest
-  python-pytest-cov
-)
-optdepends=(
-  'ipython: netaddr interractive command support'
-)
+arch=('any')
+license=('BSD')
+depends=('python')
+makedepends=('python-setuptools' 'python-sphinx')
+checkdepends=('python-pytest' 'python-pytest-cov')
+optdepends=('ipython: netaddr interractive command support')
 options=('!makeflags')
 source=(https://github.com/drkjam/${_pyname}/archive/${pkgver}/${pkgname}-${pkgver}.tar.gz)
-sha512sums=('0e40e3fde2016c92e5a2fb2d8224826b77763b5ef95b8cb5014484dbf5336dfb60d9c01eadbab6cb96c0b2b06095f2ea82e99f87943d9ac60c1b3bc27e3d62ba')
-b2sums=('1c6ee0e7fb328dc31c19c881835c764b09ad192f7b95cc844bb85f4063c2ccd94fb186028d99e43969c78aa5d00c7af8a8b2a81a9415792c1212132614655a90')
+sha512sums=('0b518ef240b81af425a5aaa6f087b10dece3f352c0c67cde8553ac00daa9d1890637c05d16740e2c23b30ae068c1b4c409ca8291e02093699fafd638701b9069')
+b2sums=('c0a361c100490c17203aad14eb14a3e09c63f5a6ce2f4b7e85bc57942329ac4603a1d4b3a09a9ab964a775dfb50a8746f6dd4a05d2f9bba01674624a7d7b46c1')
+
+prepare() {
+  cd ${_pyname}-${pkgver}
+  sed -r 's|#!/usr/bin/env python||g' -i netaddr/eui/ieee.py netaddr/ip/iana.py
+}
 
 build() {
   cd ${_pyname}-${pkgver}
-  python -m build --wheel --no-isolation
+  python setup.py build
   make -C docs man text
 }
 
@@ -43,15 +34,10 @@
 
 package_python-netaddr() {
   cd ${_pyname}-${pkgver}
-
-  python -m installer --destdir="${pkgdir}" dist/*.whl
-  local _PYVERSION="$(python -c 'import sys; print(f"{sys.version_info.major}.{sys.version_info.minor}")')"
-  rm -rf "${pkgdir}/usr/lib/python${_PYVERSION}/site-packages/netaddr/tests/"
-
-  install -Dm 644 LICENSE.rst -t "${pkgdir}/usr/share/licenses/${pkgname}"
+  python setup.py install -O1 --root="${pkgdir}" --skip-build
+  install -Dm 644 LICENSE -t "${pkgdir}/usr/share/licenses/${pkgname}"
   install -Dm 644 README.rst -t "${pkgdir}/usr/share/doc/${pkgname}"
-  install -d "${pkgdir}/usr/share/doc/${pkgname}"
-  cp -r docs/build/text/* -t "${pkgdir}/usr/share/doc/${pkgname}"
+  install -Dm 644 docs/build/text/* -t "${pkgdir}/usr/share/doc/${pkgname}"
   install -Dm 644 docs/build/man/netaddr.1 "${pkgdir}/usr/share/man/man1/${pkgname}.1"
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,7 +1,3 @@
 python
-python-build
-python-installer
 python-setuptools
 python-sphinx
-python-sphinx-issues
-python-wheel

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,9 @@
+prepare() {
+cd ${_pyname}-${pkgver}
+sed -r 's|#!/usr/bin/env python||g' -i netaddr/eui/ieee.py netaddr/ip/iana.py
+}
 build() {
 cd ${_pyname}-${pkgver}
-python -m build --wheel --no-isolation
+python setup.py build
 make -C docs man text
 }
