--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,15 +1,15 @@
 
 pkgname=powerdns
-pkgver=4.9.7
+pkgver=4.9.5
 pkgrel=1
 pkgdesc='Authoritative DNS server'
 url='https://www.powerdns.com/'
 arch=('x86_64')
 license=('GPL-2.0-only')
 depends=('boost-libs' 'gnutls' 'libcurl.so' 'libsodium' 'lmdb' 'luajit'
-         'openssl' 'sqlite' 'systemd-libs')
+         'openssl' 'sqlite' 'esysusers')
 makedepends=('boost' 'geoip' 'libldap' 'mariadb-libs' 'curl' 'libmaxminddb'
-             'postgresql-libs' 'systemd' 'tinycdb' 'unixodbc' 'yaml-cpp')
+             'postgresql-libs' 'tinycdb' 'unixodbc' 'yaml-cpp')
 optdepends=('geoip: GeoIP backend'
             'mariadb-libs: MariaDB/MySQL and MyDNS backend'
             'libldap: LDAP backend'
@@ -22,16 +22,20 @@
 conflicts=('pdns')
 backup=('etc/powerdns/pdns.conf')
 source=(https://downloads.powerdns.com/releases/pdns-${pkgver}.tar.bz2{,.asc}
-        sysusers.conf)
-sha512sums=('4eece67d21e706be64b95af5023acf1fd9e4da8e044436318f6f8c0f721647aa10d7ed89f2e8c8bf51a52c002bed412096b917295dee56328b91b22d4888308f'
+        sysusers.conf
+        https://github.com/PowerDNS/pdns/commit/23dd0603.patch)
+sha512sums=('ac1682b0616391240aa3dc618ea93855899987f2baa46546e6592a55fc0a83da1f1e2c08109d847a560e1a0c3106f7749935d0b152992ce85da715bb842d8dad'
             'SKIP'
-            'c18fc317082b93d52e59526af2df0f1b45cc37622526cc727cac9e6d73dc343ab3d33ad6b5365b30e079650f1c220096f7baf2f750bf1a558d89c144fbc583ac')
+            'c18fc317082b93d52e59526af2df0f1b45cc37622526cc727cac9e6d73dc343ab3d33ad6b5365b30e079650f1c220096f7baf2f750bf1a558d89c144fbc583ac'
+            '34e320d6696950bb12b3ca46a7b1728d4f3c5b0d243fb473ae99caa5ebff078665b4d82caafb8c9582bc770bd24fff3143c0273efebcee5314eab45f9617b0af')
 validpgpkeys=('B76CD4671C0968BAA87DE61C5E50715BF2FFE1A7'   # Winkels, Erik <erik.winkels@open-xchange.com>
               '16E12866B7738C73976A57436FFC33439B0D04DF' ) # Peter van Dijk <peter.van.dijk@powerdns.com>
 
 prepare() {
   cd pdns-${pkgver}
   find . -name 'Makefile.in' -exec sed -i 's,pkglibdir = \$(libdir)/@PACKAGE@,pkglibdir = $(libdir)/powerdns,' {} \;
+
+  patch -p1 -i ../23dd0603.patch # Fix build with GCC 15
 }
 
 build() {
@@ -51,7 +55,7 @@
     --disable-silent-rules \
     --enable-reproducible \
     --enable-unit-tests \
-    --enable-systemd \
+    --disable-systemd \
     --enable-lto=thin \
     --enable-auto-var-init=zero \
     --with-service-user=powerdns \


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,7 @@
 boost
 boost-libs
 curl
+esysusers
 geoip
 gnutls
 libcurl.so
@@ -13,8 +14,6 @@
 openssl
 postgresql-libs
 sqlite
-systemd
-systemd-libs
 tinycdb
 unixodbc
 yaml-cpp