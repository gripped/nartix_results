--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,16 +1,15 @@
 
 pkgname=containers-common
-pkgver=0.64.2
+_upstream=container-libs
+pkgver=0.66.0
 pkgrel=1
 epoch=1
-_image_pkgver=5.36.2
-_podman_pkgver=5.6.1
+_podman_pkgver=5.7.0
 _shortnames_pkgver=2025.03.19
 _skopeo_pkgver=1.20.0
-_storage_pkgver=1.59.1
 pkgdesc="Configuration files and manpages for containers"
 arch=(any)
-url="https://github.com/containers"
+url="https://github.com/containers/container-libs"
 license=(Apache-2.0)
 depends=('container-network-stack>1')
 makedepends=(go-md2man)
@@ -24,39 +23,34 @@
   etc/containers/storage.conf
 )
 options=(emptydirs)
+_src_dir="$_upstream-common-v$pkgver"
 source=(
-  common-$pkgver.tar.gz::https://github.com/containers/common/archive/v$pkgver.tar.gz
-  image-$_image_pkgver.tar.gz::https://github.com/containers/image/archive/v$_image_pkgver.tar.gz
+  $_src_dir.tar.gz::https://github.com/containers/container-libs/archive/refs/tags/common/v$pkgver.tar.gz
   podman-$_podman_pkgver.tar.gz::https://github.com/containers/podman/archive/v$_podman_pkgver.tar.gz
   skopeo-$_skopeo_pkgver.tar.gz::https://github.com/containers/skopeo/archive/v$_skopeo_pkgver.tar.gz
-  storage-$_storage_pkgver.tar.gz::https://github.com/containers/storage/archive/v$_storage_pkgver.tar.gz
   shortnames-$_shortnames_pkgver.tar.gz::https://github.com/containers/shortnames/archive/refs/tags/v$_shortnames_pkgver.tar.gz
   mounts.conf
   tmpfiles.conf
   $pkgname-0.48.0-init_path.patch
 )
-sha512sums=('658044746d338de46b41577d7ae929b45b6de639dc33e671b2901527d9c069354fe586a7595ba514938fcedd9400c0ce47b10a3af92c4dc6aa29443d89a83ef5'
-            '14355b1e97d5f1f778442758c5547e0892e1c6919fd33ff604ec2065198addb89e504a29fac447816e0d8479bba9a06364887cd854db475a4a28d8562cce0777'
-            '146858b4e64c638a20c7865b294180c344a0fd7c4815a0f95c69abe04397c1aef53379e34f3f092184d663cc6f4967db2872a5aa969e1aa5a8f06c86ccbd14e1'
+sha512sums=('3bd047c9869e287a5a424252cfd3945c614b0fca1b933b88d47debd04fbbd582b4d3e3f14e228f82d4b4397046eb45a6fb3ed116ee7500f21f1c04ab7a82dce4'
+            'e53e3f6d441de7865733e085017ce1c3e0af5cb0ad0cf605f5d15e9813d38e1af22691d59498960ed7bd18e32ef003db4c151a4f4bd5bd0dbac69f4011851ff1'
             '5932ae68c01aad3ebc538dbe6c7f712604704b408da46b1731ae7352132dbc63082e78febae808a9bbabff206ebd09ee390cd0bb0700141c3b76e1f75e525439'
-            '966dfec3cbf2210a07ebbfed481d7f546fb1bd649cfe4166238986dc92772b93748b8c9083dd8b8f6c303fac15c82e369337404d5d0dd5c4caa0b670b4f59298'
             'edadadda8920ac4880f2c44f396e5d4c844bf15c964d7ef5d14c68637ac43e0df91f4efd2be747bca74bd0da959ea21cc3200ab14b2b57aba5975cff8f2fbefa'
             '11fa515bbb0686d2b49c4fd2ab35348cb19f9c6780d6eb951a33b07ed7b7c72a676627f36e8c74e1a2d15e306d4537178f0e127fd3490f6131d078e56b46d5e1'
             '2b187c119db95cda439f36509545fd0f45530c69d9139823387f9aa68ea2e9c4b3dee8ee21a517daa73a88ac63cc694e0e170061bfc1503425c21868b2ccf7dd'
             '4a6526d01f192f0eb4dcbd28c019a2b0db6dc2128af644e8e89992e5dcfa45a02c739b06ee01e22606b5cb847213c002f8ab5f87a576846ac73f73eed9b2b469')
-b2sums=('a4dc8484d9f1002c9e94a38396a767771df2260a15e371d20981db98d6ded7f563b4e25a2ff8f6912789264bfd4586826dd1821df2807f9c1d16baeab9601b8d'
-        'eefd4dbdbc8e4ccf0123e641bf38287667e7b0999672349739f8d589609652254a6a93be5ee471d43a0f7433548d7a2bea304dc2868e180f663f5354706f521d'
-        '0cc035b6a76d7613ca6f2d202e5fdf045361d9f11b6b1c32286ad406acc60eeca476814fb889acb2415ec2c4050f950ca5747ad90da765cd80cda29433a47e6c'
+b2sums=('35630ca122ae6c2fe97b624df89c6fb3222e319523907fcde2fc2b3fc72650b3602545e7352b871bb3074ecc711aa122982db575311df2acdb79c6aa243c3416'
+        'ac67654b0a5d0e0acdfb94701409aecfaaee27ce36bd5329491ab03e28abcca93f76ec22627e9213f9c776b628695845eb0bce20abd682273a8dfa556c55de09'
         '56242e2266c2df5129d438bc559480f4a8633226070c30cfaf83a76a1ce2b67069720e9f4aaecd12bdc0302b32c1403da565d8f8699e4d9aef0a177d25797ee9'
-        'a9814a21fa8937af0fcbc9f08d7ac7ee926be91014edfae4ab39df8417d0fbf6eefa910136451e23f5d8873fadcd4f92a451999bdba5bc41d3ade4715a9a0f50'
         'a72160f65aa13316c33b984173e151f0519720ec9617395980f0d7c5f25dc14b400aafbcb2fa8769eace9c1e51d4f1ddbe783e68fc0e40280743f90fbce30aa9'
         '2f4b0af3271103362a898e7fcc3ec05f06755902ad664ac3107bb8debb8b2ac0d50de311d5fc651279a817a56e3ff05864a7e77c0d8fc628ff7411bfb98c9b69'
         '1cd6884f06269c3e6cbdfa542bdf8e178574062ec11252defc48187b60a98d0193353cc8a12ba186d338ce7da6b879a1e9dc249d2f40c28fe997c433c91e8e0e'
         '89e95f468785f6ca1309b0de37921702bd4eb6fb191afc0d93454bec7b7096a1b84e19408b5a0abcdfd89ce2ebd228879cbc42a0d409425fb41caab6a8f049f5')
 
 prepare() {
-  sed -r 's/(GOMD2MAN = ).*/\1 go-md2man/' -i storage-$_storage_pkgver/docs/Makefile
-  patch -Np1 -d common-$pkgver -i ../$pkgname-0.48.0-init_path.patch
+  sed -r 's/(GOMD2MAN = ).*/\1 go-md2man/' -i $_src_dir/storage/docs/Makefile
+  patch -Np1 -d $_src_dir/common -i ../../$pkgname-0.48.0-init_path.patch
   mkdir -vp build/{man1,man5}
 }
 
@@ -64,52 +58,39 @@
 
   (
     printf "Creating common man pages...\n"
-    cd common-$pkgver
+    cd $_src_dir/common
     for _man_page in docs/*.md pkg/hooks/docs/*.md; do
-      go-md2man -in $_man_page -out ../build/man5/$(basename ${_man_page//.md})
+      go-md2man -in "$_man_page" -out ../../build/man5/"$(basename "${_man_page//.md}")"
     done
   )
 
   (
     printf "Creating image man pages...\n"
-    cd image-$_image_pkgver
+    cd $_src_dir/image
     mkdir -vp man5
     mv -v docs/*.5.md man5/
     for _man_page in docs/*.md; do
-      go-md2man -in $_man_page -out ../build/man1/$(basename ${_man_page//.md}).1
+      go-md2man -in "$_man_page" -out ../../build/man1/"$(basename "${_man_page//.md}")".1
     done
     for _man_page in man5/*.md; do
-      go-md2man -in $_man_page -out ../build/man5/$(basename ${_man_page//.md})
+      go-md2man -in "$_man_page" -out ../../build/man5/"$(basename "${_man_page//.md}")"
     done
   )
 
   (
     printf "Creating storage documentation...\n"
-    cd storage-$_storage_pkgver
-    make -C docs
+    make -C $_src_dir/storage/docs
   )
 }
 
 check() {
   local _podman_common_ver
-  _podman_common_ver="$(rg "github.com/containers/common" podman-$_podman_pkgver/go.mod | cut -d ' ' -f2 | sed 's/v//')"
-  _podman_image_ver="$(rg "github.com/containers/image" podman-$_podman_pkgver/go.mod | cut -d ' ' -f2 | sed 's/v//')"
-  _podman_storage_ver="$(rg "github.com/containers/storage" podman-$_podman_pkgver/go.mod | cut -d ' ' -f2 | sed 's/v//')"
+  _podman_common_ver="$(rg "go.podman.io/common" podman-$_podman_pkgver/go.mod | cut -d ' ' -f2 | sed 's/v//')"
 
-  printf "Common version in podman: %s\n" $_podman_common_ver
-  printf "Image version in podman: %s\n" $_podman_image_ver
-  printf "Storage version in podman: %s\n" $_podman_storage_ver
+  printf "Common version in podman: %s\n" "$_podman_common_ver"
 
   if (( $(vercmp "${_podman_common_ver%.*}" "${pkgver%.*}") != 0 )); then
-    printf "The podman package in version %s requires containers/common in version %s but we are trying to build version %s\n" $_podman_pkgver ${_podman_common_ver%.*} ${pkgver%.*}
-    exit 1
-  fi
-  if (( $(vercmp "${_podman_image_ver%.*}" "${_image_pkgver%.*}") != 0 )); then
-    printf "The podman package in version %s requires containers/image in version %s but we are trying to use version %s\n" $_podman_pkgver ${_podman_image_ver%.*} ${_image_pkgver%.*}
-    exit 1
-  fi
-  if (( $(vercmp "${_podman_storage_ver%.*}" "${_storage_pkgver%.*}") != 0 )); then
-    printf "The podman package in version %s requires containers/storage in version %s but we are trying to use version %s\n" $_podman_pkgver ${_podman_storage_ver%.*} ${_storage_pkgver%.*}
+    printf "The podman package in version %s requires container-libs/common in version %s but we are trying to build version %s\n" "$_podman_pkgver" "${_podman_common_ver%.*}" "${pkgver%.*}"
     exit 1
   fi
 }
@@ -124,15 +105,22 @@
   install -vDm 644 mounts.conf -t "$pkgdir/etc/containers/"
 
   (
-    cd common-$pkgver
+    cd $_src_dir/common
     install -vDm 644 pkg/config/containers.conf -t "$pkgdir/etc/containers/"
     install -vDm 644 pkg/config/containers.conf -t "$pkgdir/usr/share/containers/"
     install -vDm 644 pkg/seccomp/seccomp.json -t "$pkgdir/etc/containers/"
     install -vDm 644 pkg/seccomp/seccomp.json -t "$pkgdir/usr/share/containers/"
   )
   (
-    cd image-$_image_pkgver
+    cd $_src_dir/image
     install -vDm 644 registries.conf -t "$pkgdir/etc/containers/"
+  )
+  (
+    cd $_src_dir/storage
+    install -vDm 644 storage.conf -t "$pkgdir/etc/containers/"
+    install -vDm 644 storage.conf -t "$pkgdir/usr/share/containers/"
+    install -vDm 644 docs/*.1 -t "$pkgdir/usr/share/man/man1/"
+    install -vDm 644 docs/*.5 -t "$pkgdir/usr/share/man/man5/"
   )
   (
     cd shortnames-$_shortnames_pkgver
@@ -143,13 +131,6 @@
     install -vDm 644 default-policy.json "$pkgdir/etc/containers/policy.json"
     install -vDm 644 default.yaml -t "$pkgdir/etc/containers/registries.d/"
   )
-  (
-    cd storage-$_storage_pkgver
-    install -vDm 644 storage.conf -t "$pkgdir/etc/containers/"
-    install -vDm 644 storage.conf -t "$pkgdir/usr/share/containers/"
-    install -vDm 644 docs/*.1 -t "$pkgdir/usr/share/man/man1/"
-    install -vDm 644 docs/*.5 -t "$pkgdir/usr/share/man/man5/"
-  )
   install -vDm 644 build/man1/*.1 "$pkgdir/usr/share/man/man1/"
   install -vDm 644 build/man5/*.5 "$pkgdir/usr/share/man/man5/"
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,31 +1,30 @@
 prepare() {
-sed -r 's/(GOMD2MAN = ).*/\1 go-md2man/' -i storage-$_storage_pkgver/docs/Makefile
-patch -Np1 -d common-$pkgver -i ../$pkgname-0.48.0-init_path.patch
+sed -r 's/(GOMD2MAN = ).*/\1 go-md2man/' -i $_src_dir/storage/docs/Makefile
+patch -Np1 -d $_src_dir/common -i ../../$pkgname-0.48.0-init_path.patch
 mkdir -vp build/{man1,man5}
 }
 build() {
 (
 printf "Creating common man pages...\n"
-cd common-$pkgver
+cd $_src_dir/common
 for _man_page in docs/*.md pkg/hooks/docs/*.md; do
-go-md2man -in $_man_page -out ../build/man5/$(basename ${_man_page//.md})
+go-md2man -in "$_man_page" -out ../../build/man5/"$(basename "${_man_page//.md}")"
 done
 )
 (
 printf "Creating image man pages...\n"
-cd image-$_image_pkgver
+cd $_src_dir/image
 mkdir -vp man5
 mv -v docs/*.5.md man5/
 for _man_page in docs/*.md; do
-go-md2man -in $_man_page -out ../build/man1/$(basename ${_man_page//.md}).1
+go-md2man -in "$_man_page" -out ../../build/man1/"$(basename "${_man_page//.md}")".1
 done
 for _man_page in man5/*.md; do
-go-md2man -in $_man_page -out ../build/man5/$(basename ${_man_page//.md})
+go-md2man -in "$_man_page" -out ../../build/man5/"$(basename "${_man_page//.md}")"
 done
 )
 (
 printf "Creating storage documentation...\n"
-cd storage-$_storage_pkgver
-make -C docs
+make -C $_src_dir/storage/docs
 )
 }
