--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,21 +1,18 @@
 
 pkgbase=gutenprint
 pkgname=('gutenprint' 'foomatic-db-gutenprint-ppds')
-pkgver=5.3.5
-pkgrel=1
+pkgver=5.3.4
+pkgrel=3
 pkgdesc="Top quality printer drivers for POSIX systems"
 arch=('x86_64')
-license=('GPL-2.0-or-later'
-         'LGPL-2.0-or-later'
-         'MIT AND GPL-3.0-or-later'
-         'Bison-exception-2.2')
-url="https://gimp-print.sourceforge.io/"
-makedepends=('cups' 'ghostscript'
+license=('GPL')
+url="http://gimp-print.sourceforge.net/" # no https
+makedepends=('gimp' 'gtk2' 'cups' 'ghostscript'
             'dialog' 'doxygen' 'docbook-utils' 'texi2html' 'texlive-bin')
 options=('!emptydirs')
 source=(https://downloads.sourceforge.net/gimp-print/$pkgname-$pkgver.tar.xz)
-sha1sums=('65e1ad99e9a3df17d505e719a9123eaa3b50fd67')
-sha256sums=('f5a9f47de28530b1ae2069cfbc647a9a641baeeabe809bb0ef2b3ec5b9668d70')
+sha1sums=('46167d00c2a4fb07c3fd3d62c80cd3fa004629f0')
+sha256sums=('db44a701d2b8e6a8931c83cec06c91226be266d23e5c189d20a39dd175f2023b')
 
 prepare(){
   cd "${pkgbase}"-${pkgver}
@@ -37,8 +34,7 @@
     --enable-cups-ppds \
     --enable-simplified-cups-ppds=only \
     --enable-translated-cups-ppds \
-    --enable-globalized-cups-ppds \
-    --disable-libgutenprintui2 #--help
+    --enable-globalized-cups-ppds #--help
 
   sed -i -e 's,Generated at.*,Generated at REDACTED,g' \
 	 -e 's,uname -a output:.*,uname -a output: REDACTED,g' config.summary
@@ -53,7 +49,8 @@
   install=gutenprint.install
   depends=('cups' 'cups-filters'
            'glib2' 'zlib' 'glibc' 'readline')
-  optdepends=('libusb:	required for drivers that depend on gutenprint52usb backend'
+  optdepends=('gimp:	adds gutenprint plugin to gimp'
+            'libusb:	required for drivers that depend on gutenprint52usb backend'
             'foomatic-db-gutenprint-ppds: prebuilt ppd files'
             'perl:	to run cups-genppdupdate')
   replaces=('gimp-print')
@@ -67,9 +64,6 @@
 
   rm -rf "${pkgdir}"/usr/share/foomatic
   rm -rf "${pkgdir}"/etc
-
-  mkdir -p "${pkgdir}"/usr/share/licenses/${pkgname}
-  install -m644 COPYING "${pkgdir}"/usr/share/licenses/${pkgname}/
 }
 
 package_foomatic-db-gutenprint-ppds() {
@@ -79,7 +73,4 @@
   cd "${pkgbase}"-${pkgver}
   mkdir -p "${pkgdir}"/usr/share/cups
   mv "$srcdir"/tmp_foomatic-db-gutenprint-ppds/* "${pkgdir}"/usr/share/cups/
-
-  mkdir -p "${pkgdir}"/usr/share/licenses/${pkgname}
-  install -m644 COPYING "${pkgdir}"/usr/share/licenses/${pkgname}/
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -4,8 +4,10 @@
 docbook-utils
 doxygen
 ghostscript
+gimp
 glib2
 glibc
+gtk2
 readline
 texi2html
 texlive-bin

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -15,8 +15,7 @@
 --enable-cups-ppds \
 --enable-simplified-cups-ppds=only \
 --enable-translated-cups-ppds \
---enable-globalized-cups-ppds \
---disable-libgutenprintui2 #--help
+--enable-globalized-cups-ppds #--help
 sed -i -e 's,Generated at.*,Generated at REDACTED,g' \
 -e 's,uname -a output:.*,uname -a output: REDACTED,g' config.summary
 sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
