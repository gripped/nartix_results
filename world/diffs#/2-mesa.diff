--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -13,7 +13,7 @@
   'mesa-vdpau'
   'mesa'
 )
-pkgver=24.1.0
+pkgver=24.0.8
 pkgrel=1
 epoch=1
 pkgdesc="Open-source OpenGL drivers"
@@ -44,14 +44,13 @@
   'rust'
   'spirv-llvm-translator'
   'spirv-tools'
-  'systemd-libs'
+
   'vulkan-icd-loader'
   'wayland'
   'xcb-util-keysyms'
   'zlib'
   'zstd'
 
-  'cbindgen'
   'clang'
   'cmake'
   'elfutils'
@@ -87,7 +86,6 @@
 )
 
 declare -A _crates=(
-   paste          1.0.14
    proc-macro2    1.0.70
    quote          1.0.33
    syn            2.0.39
@@ -98,19 +96,17 @@
   source+=($_crate-${_crates[$_crate]}.tar.gz::https://crates.io/api/v1/crates/$_crate/${_crates[$_crate]}/download)
 done
 
-sha256sums=('b7eac8c79244806b1c276eeeacc329e4a5b31a370804c4b0c7cd16837783f78b'
+sha256sums=('d1ed86a266d5b7b8c136ae587ef5618ed1a9837a43440f3713622bf0123bf5c1'
             'SKIP'
             '39278fbbf5fb4f646ce651690877f89d1c5811a3d4acb27700c1cb3cdb78fd3b'
             '3354b9ac3fae1ff6755cb6db53683adb661634f67557942dea4facebec0fee4b'
             '5267fca4496028628a95160fc423a33e8b2e6af8a5302579e322e4b520293cae'
-            'de3145af08024dea9fa9914f381a17b8fc6034dfb00f3a84013f7ff43f29ed4c'
             '23e78b90f2fcf45d3e842032ce32e3f2d1545ba6636271dcbf24fa306d87be7a')
-b2sums=('1558d20d426162bfe8cccf96107ddbf1373c8322f87f48daec73e23b283e00f95d6efd073cad9b92065928af4b9b4a339ff2d204412070eca903f77ca366e619'
+b2sums=('1919e99e6ccbd51c8e74e55985ea9a3f47bf49c7e4260a195a609ce175eeded9fc5a56970ae35d21bc650e4bb802df484d2088b29ef3861d13942bd495891a9a'
         'SKIP'
         'fff0dec06b21e391783cc136790238acb783780eaedcf14875a350e7ceb46fdc100c8b9e3f09fb7f4c2196c25d4c6b61e574c0dad762d94533b628faab68cf5c'
         '4cede03c08758ccd6bf53a0d0057d7542dfdd0c93d342e89f3b90460be85518a9fd24958d8b1da2b5a09b5ddbee8a4263982194158e171c2bba3e394d88d6dac'
         '77c4b166f1200e1ee2ab94a5014acd334c1fe4b7d72851d73768d491c56c6779a0882a304c1f30c88732a6168351f0f786b10516ae537cff993892a749175848'
-        '35e8548611c51ee75f4d04926149e5e54870d7073d9b635d550a6fa0f85891f57f326bdbcff3dd8618cf40f8e08cf903ef87d9c034d5921d8b91e1db842cdd7c'
         '2cff6626624d03f70f1662af45a8644c28a9f92e2dfe38999bef3ba4a4c1ce825ae598277e9cb7abd5585eebfb17b239effc8d0bbf1c6ac196499f0d288e5e01')
 
 prepare() {
@@ -130,16 +126,16 @@
     -D gallium-opencl=icd
     -D gallium-rusticl=true
     -D gles1=disabled
+    -D glvnd=true
     -D glx=dri
     -D intel-clc=enabled
-    -D intel-rt=enabled
     -D libunwind=disabled
     -D microsoft-clc=disabled
     -D osmesa=true
     -D platforms=x11,wayland
     -D valgrind=enabled
     -D video-codecs=all
-    -D vulkan-drivers=amd,intel,intel_hasvk,swrast,virtio,nouveau
+    -D vulkan-drivers=amd,intel,intel_hasvk,swrast,virtio,nouveau-experimental
     -D vulkan-layers=device-select,intel-nullhw,overlay
   )
 
@@ -148,7 +144,7 @@
 
   export MESON_PACKAGE_CACHE_DIR="$srcdir"
 
-  arch-meson mesa-$pkgver build "${meson_options[@]}"
+  artix-meson mesa-$pkgver build "${meson_options[@]}"
   meson configure build --no-pager # Print config
   meson compile -C build
 
@@ -256,7 +252,7 @@
     'libx11'
     'libxcb'
     'libxshmfence'
-    'systemd-libs'
+
     'vulkan-icd-loader'
     'wayland'
     'xcb-util-keysyms'
@@ -282,7 +278,7 @@
     'libx11'
     'libxcb'
     'libxshmfence'
-    'systemd-libs'
+
     'vulkan-icd-loader'
     'wayland'
     'xcb-util-keysyms'
@@ -310,7 +306,7 @@
     'libxcb'
     'libxshmfence'
     'llvm-libs'
-    'systemd-libs'
+
     'vulkan-icd-loader'
     'wayland'
     'xcb-util-keysyms'
@@ -338,7 +334,7 @@
     'libxcb'
     'libxshmfence'
     'llvm-libs'
-    'systemd-libs'
+
     'vulkan-icd-loader'
     'wayland'
     'xcb-util-keysyms'
@@ -366,7 +362,7 @@
     'libx11'
     'libxcb'
     'libxshmfence'
-    'systemd-libs'
+
     'vulkan-icd-loader'
     'wayland'
     'xcb-util-keysyms'


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
-cbindgen
 clang
 cmake
 directx-headers
@@ -34,7 +33,6 @@
 rust-bindgen
 spirv-llvm-translator
 spirv-tools
-systemd-libs
 valgrind
 vulkan-icd-loader
 wayland