--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -12,7 +12,7 @@
   vulkan-virtio
   mesa-docs
 )
-pkgver=24.2.7
+pkgver=24.3.1
 pkgrel=1
 epoch=1
 pkgdesc="Open-source OpenGL drivers"
@@ -27,12 +27,12 @@
   libdrm
   libelf
   libglvnd
+  libpng
   libva
   libvdpau
   libx11
   libxcb
   libxext
-  libxfixes
   libxml2
   libxrandr
   libxshmfence
@@ -43,7 +43,6 @@
   rust
   spirv-llvm-translator
   spirv-tools
-  systemd-libs
   vulkan-icd-loader
   wayland
   xcb-util-keysyms
@@ -68,8 +67,6 @@
   valgrind
 
   directx-headers
-
-  libomxil-bellagio
 
   python-sphinx
   python-sphinx-hawkmoth
@@ -114,7 +111,7 @@
   )
 done
 
-b2sums=('eb1b0285e14e77c3140275b322ff084fca74a1048e6df38f4b14cb03ed7fc436897f7b33d107d1e262d9d4944229fb1e85d02e731c645ead5a7b269dec9334b7'
+b2sums=('d3efc322388e29f651b15b0396fef8a6acc0cf24881165900845e429dd6cb53d51511f174d6a4017f48962b764b9a42f069825196af9f4ca969a4b46e1108a0e'
         'SKIP'
         'a6d47c903be6094423d89b8ec3ca899d0a84df6dbd6e76632bb6c9b9f40ad9c216f8fa400310753d392f85072756b43ac3892e0a2c4d55f87ab6463002554823'
         '9c34f1ab14ad5ae124882513e0f14b1d731d06a43203bdc37fa3b202dd3ce93dbe8ebb554d01bab475689fe6ffd3ec0cbc0d5365c9b984cb83fb34ea3e9e732e'
@@ -132,7 +129,7 @@
         '7681b1a7497b5711e663773c1a7e076f333c06c10d3f289079a781c36f050c1620cc279742ea8e5b15ec48f3d6038a6079bbda7fee3ae8e1128bd916d53ed43a'
         '8bc6f68ed286bea617a2cfaf3949bb699d3a0466faeca735314a51596ce950e4ee57eda88154bd562c1728cfaff4cdb5bc1ba701b9d47a9c50d4c4f011bee975')
 
-sha256sums=('a0ce37228679647268a83b3652d859dcf23d6f6430d751489d4464f6de6459fd'
+sha256sums=('9c795900449ce5bc7c526ba0ab3532a22c3c951cab7e0dd9de5fcac41b0843af'
             'SKIP'
             'ed646292ffc8188ef8ea4d1e0e0150fb15a5c2e12ad9b8fc191ae7a8a7f3c4b9'
             'a941429fea7e08bedec25e4f6785b6ffaacc6b755da98df5ef3e7dcf4a124c4f'
@@ -163,7 +160,6 @@
     -D gallium-drivers=r300,r600,radeonsi,nouveau,virgl,svga,llvmpipe,softpipe,iris,crocus,i915,zink,d3d12
     -D gallium-extra-hud=true
     -D gallium-nine=true
-    -D gallium-omx=bellagio
     -D gallium-opencl=icd
     -D gallium-rusticl=true
     -D gles1=disabled
@@ -178,7 +174,7 @@
     -D valgrind=enabled
     -D video-codecs=all
     -D vulkan-drivers=amd,intel,intel_hasvk,nouveau,swrast,virtio
-    -D vulkan-layers=device-select,intel-nullhw,overlay
+    -D vulkan-layers=device-select,intel-nullhw,overlay,screenshot
   )
 
   CFLAGS+=" -g1"
@@ -186,7 +182,7 @@
 
   export MESON_PACKAGE_CACHE_DIR="$srcdir"
 
-  arch-meson mesa-$pkgver build "${meson_options[@]}"
+  artix-meson mesa-$pkgver build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -211,16 +207,14 @@
     libx11
     libxcb
     libxext
-    libxfixes
     libxshmfence
     libxxf86vm
     llvm-libs
     lm_sensors
-    wayland
-    zlib
-    zstd
-
-    libomxil-bellagio
+    spirv-tools
+    wayland
+    zlib
+    zstd
   )
   optdepends=("opengl-man-pages: for the OpenGL API man pages")
   provides=(
@@ -260,7 +254,7 @@
     _pick vkintel $libdir/libvulkan_intel*.so
 
     _pick vklayer $libdir/libVkLayer_*.so
-    _pick vklayer usr/bin/mesa-overlay-control.py
+    _pick vklayer usr/bin/mesa-*-control.py
     _pick vklayer usr/share/vulkan/{ex,im}plicit_layer.d
 
     _pick vknvidia $icddir/nouveau_*.json
@@ -294,12 +288,10 @@
     libdrm
     libelf
     llvm-libs
-    spirv-llvm-translator
-    spirv-tools
-    zlib
-    zstd
-
-    libclc
+    zlib
+    zstd
+
+    libclc # For /usr/share/clc/
   )
   optdepends=("opencl-headers: headers necessary for OpenCL development")
   provides=(opencl-driver)
@@ -326,7 +318,7 @@
     zlib
     zstd
 
-    libclc
+    libclc # For /usr/share/clc/
   )
   optdepends=("opencl-headers: headers necessary for OpenCL development")
   provides=(opencl-driver)
@@ -348,7 +340,7 @@
     libx11
     libxcb
     libxshmfence
-    systemd-libs
+    spirv-tools
     vulkan-icd-loader
     wayland
     xcb-util-keysyms
@@ -369,6 +361,7 @@
     gcc-libs
     glibc
     libdrm
+    libpng
     libxcb
     wayland
 
@@ -392,7 +385,7 @@
     libx11
     libxcb
     libxshmfence
-    systemd-libs
+    spirv-tools
     vulkan-icd-loader
     wayland
     xcb-util-keysyms
@@ -419,7 +412,7 @@
     libxcb
     libxshmfence
     llvm-libs
-    systemd-libs
+    spirv-tools
     vulkan-icd-loader
     wayland
     xcb-util-keysyms
@@ -445,7 +438,7 @@
     libxcb
     libxshmfence
     llvm-libs
-    systemd-libs
+    spirv-tools
     vulkan-icd-loader
     wayland
     xcb-util-keysyms
@@ -472,7 +465,6 @@
     libx11
     libxcb
     libxshmfence
-    systemd-libs
     vulkan-icd-loader
     wayland
     xcb-util-keysyms


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -11,13 +11,12 @@
 libdrm
 libelf
 libglvnd
-libomxil-bellagio
+libpng
 libva
 libvdpau
 libx11
 libxcb
 libxext
-libxfixes
 libxml2
 libxrandr
 libxshmfence
@@ -37,7 +36,6 @@
 rust-bindgen
 spirv-llvm-translator
 spirv-tools
-systemd-libs
 valgrind
 vulkan-icd-loader
 wayland