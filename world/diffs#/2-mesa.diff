--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -14,7 +14,7 @@
   vulkan-virtio
   mesa-docs
 )
-pkgver=24.2.3
+pkgver=24.2.2
 pkgrel=1
 epoch=1
 pkgdesc="Open-source OpenGL drivers"
@@ -45,7 +45,6 @@
   rust
   spirv-llvm-translator
   spirv-tools
-  systemd-libs
   vulkan-icd-loader
   wayland
   xcb-util-keysyms
@@ -81,6 +80,7 @@
 )
 source=(
   "https://mesa.freedesktop.org/archive/mesa-$pkgver.tar.xz"{,.sig}
+  0001-rusticl-do-not-use-CL-vector-types-in-bindings-and-c.patch
 )
 validpgpkeys=(
   946D09B5E4C9845E63075FF1D961C596A7203456 # Andres Gomez <tanty@igalia.com>
@@ -116,8 +116,9 @@
   )
 done
 
-b2sums=('3c480bd9f5948ae4d66a833cfc059b1b872fca989296a070deaa46aeb72298eaca6a3fa9d13574859623cec4a6af978f44d2c9562b9757be2257364c27600be6'
+b2sums=('14b29989b056c3bc76cb64babef6e93dd31af37ea72674adaad3f7ef7373c004996e375941662b1c3bbacfd707a21e2e3631a116a841130edfa1bfe3450ae5ab'
         'SKIP'
+        '251a228c47c1d91a2063defbd5dda07deff6d763a2de5ed6c01e514b0f2326f2550b6174e0e98c2161971dbb888f5028243fe9645f9dea4b54308f0ae68e4e17'
         'a6d47c903be6094423d89b8ec3ca899d0a84df6dbd6e76632bb6c9b9f40ad9c216f8fa400310753d392f85072756b43ac3892e0a2c4d55f87ab6463002554823'
         '9c34f1ab14ad5ae124882513e0f14b1d731d06a43203bdc37fa3b202dd3ce93dbe8ebb554d01bab475689fe6ffd3ec0cbc0d5365c9b984cb83fb34ea3e9e732e'
         'fac5cf6339dc3c0a40b100035a5c874cc7b2efeafeb31c51488d25156e392dc9db86a497e76eead351d2126f69d060422faa9c55d73407a0de9f5be18d234123'
@@ -134,8 +135,9 @@
         '7681b1a7497b5711e663773c1a7e076f333c06c10d3f289079a781c36f050c1620cc279742ea8e5b15ec48f3d6038a6079bbda7fee3ae8e1128bd916d53ed43a'
         '8bc6f68ed286bea617a2cfaf3949bb699d3a0466faeca735314a51596ce950e4ee57eda88154bd562c1728cfaff4cdb5bc1ba701b9d47a9c50d4c4f011bee975')
 
-sha256sums=('4ea18b1155a4544a09f7361848974768f6f73c19d88f63de2ec650be313b2d0c'
+sha256sums=('fd077d3104edbe459e2b8597d2757ec065f9bd2d620b8c0b9cc88c2bf9891d02'
             'SKIP'
+            '26402e3e1c7efed6dced9d4989d8c79e5a57ad5f802e56b77e18d394b27a8580'
             'ed646292ffc8188ef8ea4d1e0e0150fb15a5c2e12ad9b8fc191ae7a8a7f3c4b9'
             'a941429fea7e08bedec25e4f6785b6ffaacc6b755da98df5ef3e7dcf4a124c4f'
             '168fb715dda47215e360912c096649d23d58bf392ac62f73919e831745e40f26'
@@ -154,6 +156,8 @@
 
 prepare() {
   cd mesa-$pkgver
+
+  patch -Np1 -i ../0001-rusticl-do-not-use-CL-vector-types-in-bindings-and-c.patch
 
   echo "$pkgver-arch$epoch.$pkgrel" >VERSION
 }
@@ -188,7 +192,7 @@
 
   export MESON_PACKAGE_CACHE_DIR="$srcdir"
 
-  arch-meson mesa-$pkgver build "${meson_options[@]}"
+  artix-meson mesa-$pkgver build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -386,7 +390,6 @@
     libx11
     libxcb
     libxshmfence
-    systemd-libs
     vulkan-icd-loader
     wayland
     xcb-util-keysyms
@@ -430,7 +433,6 @@
     libx11
     libxcb
     libxshmfence
-    systemd-libs
     vulkan-icd-loader
     wayland
     xcb-util-keysyms
@@ -457,7 +459,6 @@
     libxcb
     libxshmfence
     llvm-libs
-    systemd-libs
     vulkan-icd-loader
     wayland
     xcb-util-keysyms
@@ -483,7 +484,6 @@
     libxcb
     libxshmfence
     llvm-libs
-    systemd-libs
     vulkan-icd-loader
     wayland
     xcb-util-keysyms
@@ -510,7 +510,6 @@
     libx11
     libxcb
     libxshmfence
-    systemd-libs
     vulkan-icd-loader
     wayland
     xcb-util-keysyms


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -37,7 +37,6 @@
 rust-bindgen
 spirv-llvm-translator
 spirv-tools
-systemd-libs
 valgrind
 vulkan-icd-loader
 wayland