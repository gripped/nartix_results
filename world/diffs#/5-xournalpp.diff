--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,44 +1,28 @@
 
 pkgname=xournalpp
-pkgver=1.3.0
+pkgver=1.2.7
 pkgrel=1
 pkgdesc='Handwriting notetaking software with PDF annotation support'
 url='https://github.com/xournalpp/xournalpp'
 license=('GPL-2.0-or-later')
 arch=('x86_64')
+optdepends=('texlive-latexextra: LaTeX package')
+makedepends=('git' 'cmake' 'doxygen' 'graphviz')
 depends=('gtk3' 'poppler-glib' 'libxml2' 'portaudio' 'libsndfile' 'lua'
-         'libzip' 'gtksourceview4' 'qpdf')
-optdepends=('texlive-latexextra: LaTeX package')
-makedepends=('git' 'cmake' 'ninja' 'help2man' 'gtest')
+         'libzip')
 source=("git+https://github.com/xournalpp/xournalpp.git#tag=v${pkgver}")
-sha256sums=('f7c801218138e7fedf04f5ca5eaaa00052aedcfba83017056050addec391e799')
+sha256sums=('0da98fb32c06704d74116c25bd265e5d34f7f537b5b4662ae9368160284751ab')
 
-
-prepare() {
-	mkdir -p "${srcdir}/${pkgname}/build"
-}
+replaces=('xournal')
 
 build() {
-	cd "${srcdir}/${pkgname}/build"
-
-	cmake \
-		-G 'Ninja' \
-		-DCMAKE_BUILD_TYPE='None' \
-		-DCMAKE_INSTALL_PREFIX='/usr/' \
-		-Wno-dev \
-		-DDOWNLOAD_GTEST=on \
-		-DENABLE_GTEST=ON ..
-
-	cmake --build .
-	cmake --build . --target test-units
-}
-
-check() {
-	cd "${srcdir}/${pkgname}/build"
-	./test/test-units
+	cd "${srcdir}/${pkgname}"
+	cmake -DCMAKE_INSTALL_PREFIX=/usr
+	make translations
+	make
 }
 
 package() {
-	cd "${srcdir}/${pkgname}/build"
-	DESTDIR="${pkgdir}/" cmake --build . --target install
+	cd "${srcdir}/${pkgname}"
+	make DESTDIR="${pkgdir}" install
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,14 +1,11 @@
 cmake
+doxygen
 git
-gtest
+graphviz
 gtk3
-gtksourceview4
-help2man
 libsndfile
 libxml2
 libzip
 lua
-ninja
 poppler-glib
 portaudio
-qpdf

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,15 +1,6 @@
-prepare() {
-mkdir -p "${srcdir}/${pkgname}/build"
+build() {
+cd "${srcdir}/${pkgname}"
+cmake -DCMAKE_INSTALL_PREFIX=/usr
+make translations
+make
 }
-build() {
-cd "${srcdir}/${pkgname}/build"
-cmake \
--G 'Ninja' \
--DCMAKE_BUILD_TYPE='None' \
--DCMAKE_INSTALL_PREFIX='/usr/' \
--Wno-dev \
--DDOWNLOAD_GTEST=on \
--DENABLE_GTEST=ON ..
-cmake --build .
-cmake --build . --target test-units
-}
