--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,31 +1,31 @@
 
 pkgname=iniparser
-pkgver=4.2.2
-pkgrel=1
+pkgver=4.2.1
+pkgrel=1.1
 pkgdesc='A free stand-alone ini file parsing library written in portable ANSI C'
 arch=('x86_64')
 url='https://github.com/ndevilla/iniparser'
 license=('MIT')
 depends=('glibc')
 provides=('libiniparser.so')
-makedepends=('cmake' 'doxygen')
+makedepends=('chrpath')
 source=("${pkgname}-${pkgver}.tar.gz::https://github.com/ndevilla/iniparser/archive/v${pkgver}.tar.gz")
-md5sums=('ece6c4f410e6eb3c0b20797c309eea68')
-sha256sums=('82983d9712e321494ee67e1d90963545b6788c198611dab094804a7b7414b233')
+md5sums=('402ca3059f3dd1f9acd664d9c9b6aa27')
+sha256sums=('9120fd13260be1dbec74b8aaf47777c434976626f3b3288c0d17b70e21cce2d2')
 
 build() {
-  mkdir build
+  cd "${pkgname}-${pkgver}"
 
-  cmake \
-    "${pkgname}-${pkgver}" \
-    -B build \
-    -DCMAKE_INSTALL_PREFIX=/usr
-  cmake --build build
+  make
 }
 
 package() {
-  cd build
-  make DESTDIR="${pkgdir}" install
+  cd "${pkgname}-${pkgver}"
 
-  install -Dm0644 "${srcdir}/${pkgname}-${pkgver}"/LICENSE "${pkgdir}"/usr/share/licenses/iniparser/LICENSE
+  install -Dm0644 src/iniparser.h "${pkgdir}"/usr/include/iniparser.h
+  install -Dm0644 src/dictionary.h "${pkgdir}"/usr/include/dictionary.h
+  install -Dm0644 libiniparser.so.1 "$pkgdir"/usr/lib/libiniparser.so.1
+  install -Dm0644 LICENSE "${pkgdir}"/usr/share/licenses/iniparser/LICENSE
+  ln -sf libiniparser.so.1 "${pkgdir}"/usr/lib/libiniparser.so
+  chrpath -d "${pkgdir}"/usr/lib/libiniparser.so
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,3 +1,2 @@
-cmake
-doxygen
+chrpath
 glibc

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,4 @@
 build() {
-mkdir build
-cmake \
-"${pkgname}-${pkgver}" \
--B build \
--DCMAKE_INSTALL_PREFIX=/usr
-cmake --build build
+cd "${pkgname}-${pkgver}"
+make
 }
