--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,66 +1,48 @@
-
 pkgbase=highlight
-pkgname=('highlight' 'highlight-perl' 'highlight-gui')
+pkgname=(highlight highlight-gui)
 pkgver=4.15
-pkgrel=5
-pkgdesc="Fast and flexible source code highlighter"
+pkgrel=1
 url="http://www.andre-simon.de/doku/highlight/highlight.html"
-license=('GPL-3.0-or-later')
+license=('GPL')
 arch=('x86_64')
-makedepends=('qt5-base' 'lua' 'boost' 'swig')
-source=("http://www.andre-simon.de/zip/${pkgbase}-${pkgver}.tar.bz2"{,.asc}
-        'use_gcc.patch'
-        'strip_gzip_timestamps.patch')
+makedepends=(qt5-base lua boost)
+source=(http://www.andre-simon.de/zip/$pkgname-$pkgver.tar.bz2{,.asc})
+md5sums=('fd16041ffc8945ef6c4c07dbf83c541c'
+         'SKIP')
 sha256sums=('68b3f8178c5c9d4b0a03f6948635cef1c8d06244f6b438eebf3a190c588337e9'
-            'SKIP'
-            '5aaacca96f1f4307bbe9cfb5b0f67a98edb0b5d653270990176e20840196ab50'
-            '8ebc7cfb1a43417ec19c3346b69817b68ac6de9caf4fd46bdeef2b2831900caf')
-validpgpkeys=('B8C55574187F49180EDC763750FE0279D805A7C7')
+            'SKIP')
+validpgpkeys=(B8C55574187F49180EDC763750FE0279D805A7C7)
 
 prepare() {
-	cd "${pkgbase}-${pkgver}"
+  cd "$srcdir/$pkgbase-$pkgver"
 
-	patch -Np1 -i "${srcdir}/use_gcc.patch"
-
-	patch -Np1 -i "${srcdir}/strip_gzip_timestamps.patch"
+  sed -i 's/QMAKE=qmake/QMAKE=qmake-qt5/' src/makefile
+  sed -i 's/QMAKE_CC = clang/QMAKE_CC = gcc/' src/gui-qt/highlight.pro
+  sed -i 's/QMAKE_CXX = clang++/QMAKE_CXX = g++/' src/gui-qt/highlight.pro
 }
 
 build() {
-	cd "${pkgbase}-${pkgver}"
+  cd "$srcdir/$pkgbase-$pkgver"
 
-	make QMAKE=qmake-qt5
-	make QMAKE=qmake-qt5 gui
-	make -C extras/swig perl
+  make QMAKE=qmake-qt5
+  make QMAKE=qmake-qt5 gui
 }
 
 package_highlight() {
-	pkgdesc="${pkgdesc} - CLI version"
-	depends=('lua')
-	backup=("etc/${pkgbase}/filetypes.conf")
+  pkgdesc="Fast and flexible source code highlighter (CLI version)"
+  depends=('lua')
+  backup=(etc/highlight/filetypes.conf)
+  cd "$srcdir/$pkgbase-$pkgver"
 
-	cd "${pkgbase}-${pkgver}"
-
-	make DESTDIR="${pkgdir}" QMAKE=qmake-qt5 install
-
-	rm -rf "${pkgdir}/usr/share/doc/${pkgbase}/extras"
+  make DESTDIR="$pkgdir" QMAKE=qmake-qt5 install
 }
 
-package_highlight-perl() {
-	pkgdesc="${pkgdesc} - perl module"
-	depends=('highlight' 'perl')
-	_perl_path=$(perl -V:vendorarch | awk -F"'" '{print $2}')
+package_highlight-gui() {
+  pkgdesc="Fast and flexible source code highlighter (Qt version)"
+  depends=('qt5-base' 'highlight')
+  cd "$srcdir/$pkgbase-$pkgver"
 
-	cd "${pkgbase}-${pkgver}"
+  install -dm755 "$pkgdir/usr/bin"
+  make DESTDIR="$pkgdir" QMAKE=qmake-qt5 install-gui
+}
 
-	install -Dm 644 "extras/swig/${pkgbase}.pm" "${pkgdir}${_perl_path}/${pkgbase}.pm"
-	install -Dm 755 "extras/swig/${pkgbase}.so" "${pkgdir}${_perl_path}/auto/${pkgbase}/${pkgbase}.so"
-}
-package_highlight-gui() {
-	pkgdesc="${pkgdesc} - QT GUI version"
-	depends=('qt5-base' 'highlight' 'hicolor-icon-theme')
-
-	cd "${pkgbase}-${pkgver}"
-
-	install -dm 755 "${pkgdir}/usr/bin"
-	make DESTDIR="${pkgdir}" QMAKE=qmake-qt5 install-gui
-}


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,7 +1,4 @@
 boost
-hicolor-icon-theme
 highlight
 lua
-perl
 qt5-base
-swig

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,11 +1,11 @@
 prepare() {
-cd "${pkgbase}-${pkgver}"
-patch -Np1 -i "${srcdir}/use_gcc.patch"
-patch -Np1 -i "${srcdir}/strip_gzip_timestamps.patch"
+cd "$srcdir/$pkgbase-$pkgver"
+sed -i 's/QMAKE=qmake/QMAKE=qmake-qt5/' src/makefile
+sed -i 's/QMAKE_CC = clang/QMAKE_CC = gcc/' src/gui-qt/highlight.pro
+sed -i 's/QMAKE_CXX = clang++/QMAKE_CXX = g++/' src/gui-qt/highlight.pro
 }
 build() {
-cd "${pkgbase}-${pkgver}"
+cd "$srcdir/$pkgbase-$pkgver"
 make QMAKE=qmake-qt5
 make QMAKE=qmake-qt5 gui
-make -C extras/swig perl
 }
