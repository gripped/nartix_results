--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,28 +2,35 @@
 pkgbase=libportal
 pkgname=(
   libportal
+  libportal-docs
   libportal-gtk3
   libportal-gtk4
   libportal-qt5
-  libportal-docs
+  libportal-qt6
 )
-pkgver=0.7.1
-pkgrel=3
+pkgver=0.8.1
+pkgrel=1
 pkgdesc="GIO-style async APIs for most Flatpak portals"
 url="https://github.com/flatpak/libportal"
 arch=(x86_64)
 license=(LGPL-3.0-only)
 makedepends=(
+  gcc-libs
   gi-docgen
   git
   gjs
+  glib2
   glib2-devel
+  glibc
   gobject-introspection
   gtk3
   gtk4
   meson
   qt5-base
+  qt5-tools
   qt5-x11extras
+  qt6-base
+  qt6-tools
   vala
 )
 checkdepends=(
@@ -31,23 +38,15 @@
   python-pytest
   xorg-server-xvfb
 )
-_commit=e9ed3a50cdde321eaf42361212480a66eb94a57a  # tags/0.7.1^0
-source=("git+https://github.com/flatpak/libportal#commit=$_commit")
-b2sums=('SKIP')
-
-pkgver() {
-  cd libportal
-  git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
-}
+source=("git+https://github.com/flatpak/libportal#tag=$pkgver")
+b2sums=('025e1423d6f6f4645bfd8dbfc911daf51c6f6d06d1989b49cbeee201eece7cb3b7f693439c36bc70c87e3dee0d64f062f5b8f574acae24bc36a7df8d90cb99f5')
 
 prepare() {
   cd libportal
-
-  git cherry-pick -n 6cd7c2ab82575b76f876ee2bd2d31f6cb77f022f
 }
 
 build() {
-  arch-meson libportal build
+  artix-meson libportal build
   meson compile -C build
 }
 
@@ -68,34 +67,50 @@
 
 package_libportal() {
   depends=(
+    gcc-libs
+    glib2
+    glibc
     libg{lib,object,io}-2.0.so
   )
-  optdepends=('xdg-desktop-portal: Portal service')
+  optdepends=(
+    'libportal-docs: API documentation'
+    'libportal-gtk3: GTK 3 backend'
+    'libportal-gtk4: GTK 4 backend'
+    'libportal-qt5: Qt 5 backend'
+    'libportal-qt6: Qt 6 backend'
+    'xdg-desktop-portal: Portal service'
+  )
   provides=(libportal.so)
 
   meson install -C build --destdir "$pkgdir"
 
   cd "$pkgdir"
 
-  _pick gtk3 usr/include/libportal-gtk3
-  _pick gtk3 usr/lib{,/pkgconfig}/libportal-gtk3.*
-  _pick gtk3 {usr/lib/girepository-1.0,usr/share/gir-1.0}/XdpGtk3-1.0.*
-  _pick gtk3 usr/share/vala/vapi/libportal-gtk3.*
+  _pick docs usr/share/doc
 
-  _pick gtk4 usr/include/libportal-gtk4
-  _pick gtk4 usr/lib{,/pkgconfig}/libportal-gtk4.*
-  _pick gtk4 {usr/lib/girepository-1.0,usr/share/gir-1.0}/XdpGtk4-1.0.*
-  _pick gtk4 usr/share/vala/vapi/libportal-gtk4.*
+  local x
+  for x in gtk3 gtk4 qt5 qt6; do
+    _pick $x usr/include/libportal-$x
+    _pick $x usr/lib{,/pkgconfig}/libportal-$x.*
 
-  _pick qt5 usr/include/libportal-qt5
-  _pick qt5 usr/lib{,/pkgconfig}/libportal-qt5.*
+    if [[ $x == gtk* ]]; then
+      _pick $x {usr/lib/girepository-1.0,usr/share/gir-1.0}/Xdp${x^}-1.0.*
+      _pick $x usr/share/vala/vapi/libportal-$x.*
+    fi
+  done
+}
 
-  _pick docs usr/share/doc
+package_libportal-docs() {
+  pkgdesc+=" - API documentation"
+
+  mv docs/* "$pkgdir"
 }
 
 package_libportal-gtk3() {
   pkgdesc+=" - GTK 3 backend"
   depends=(
+    gcc-libs
+    glib2
     libg{d,t}k-3.so
     libportal
   )
@@ -107,6 +122,8 @@
 package_libportal-gtk4() {
   pkgdesc+=" - GTK 4 backend"
   depends=(
+    gcc-libs
+    glib2
     libgtk-4.so
     libportal
   )
@@ -118,6 +135,9 @@
 package_libportal-qt5() {
   pkgdesc+=" - Qt 5 backend"
   depends=(
+    gcc-libs
+    glib2
+    glibc
     libportal
     qt5-base
     qt5-x11extras
@@ -127,9 +147,17 @@
   mv qt5/* "$pkgdir"
 }
 
-package_libportal-docs() {
-  pkgdesc+=" - documentation"
+package_libportal-qt6() {
+  pkgdesc+=" - Qt 6 backend"
+  depends=(
+    gcc-libs
+    glib2
+    glibc
+    libportal
+    qt6-base
+  )
+  provides=(libportal-qt6.so)
 
-  mv docs/* "$pkgdir"
+  mv qt6/* "$pkgdir"
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,7 +1,10 @@
+gcc-libs
 gi-docgen
 git
 gjs
+glib2
 glib2-devel
+glibc
 gobject-introspection
 gtk3
 gtk4
@@ -14,5 +17,8 @@
 libportal
 meson
 qt5-base
+qt5-tools
 qt5-x11extras
+qt6-base
+qt6-tools
 vala

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,7 @@
 prepare() {
 cd libportal
-git cherry-pick -n 6cd7c2ab82575b76f876ee2bd2d31f6cb77f022f
 }
 build() {
-arch-meson libportal build
+artix-meson libportal build
 meson compile -C build
 }
