--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,53 +1,60 @@
 
-pkgname=lxlauncher
-pkgver=0.2.8
-pkgrel=2
-pkgdesc='Clone of the Asus launcher for EeePC'
-arch=(x86_64)
-url='https://github.com/lxde/lxlauncher'
-license=(GPL-2.0-or-later)
-groups=(lxde)
-depends=(
-  cairo
-  gdk-pixbuf2
-  glib2
-  glibc
-  gtk3
-  libx11
-  lxmenu-data
-  menu-cache
-  startup-notification
-)
-makedepends=(
-  git
-  intltool
-)
-backup=(
-  etc/xdg/lxlauncher/gtk.css
-  etc/xdg/lxlauncher/gtkrc
-  etc/xdg/lxlauncher/settings.conf
-)
-conflicts=(lxlauncher-gtk3)
-replaces=(lxlauncher-gtk3)
-source=("git+https://github.com/lxde/lxlauncher.git#tag=$pkgver")
-b2sums=(260cb4ad514381bc9cb4230f98227d9f43dd4237a031604fdcf93de47d680bc2b0127833de6008b113839277fbd1a39db7239d5b42a5855bbbb8b9df6dca7847)
+pkgbase=lxlauncher
+pkgname=(lxlauncher lxlauncher-gtk3)
+pkgver=0.2.5
+pkgrel=4
+pkgdesc='Open source clone of the Asus launcher for EeePC'
+arch=('x86_64')
+license=('GPL2')
+url='https://lxde.org/'
+depends=('gtk2' 'gtk3' 'startup-notification' 'lxmenu-data' 'menu-cache')
+makedepends=('intltool')
+backup=('etc/xdg/lxlauncher/gtk.css'
+        'etc/xdg/lxlauncher/gtkrc'
+        'etc/xdg/lxlauncher/settings.conf')
+source=(https://downloads.sourceforge.net/lxde/$pkgbase-$pkgver.tar.xz
+        0001-Add-CSS-selectors-for-GTK-3.20-and-newer.patch
+        fix-invisible-icons.patch)
+sha256sums=('cd14b59cf337e7ba0d67efc95cd79859ab5f0f85af5a84c7aff771f868c3dca7'
+            '794a92dda67f055a794315af4d1a1b0d3319da836582fbc88bbaa3f737612f70'
+            '34fd1774d962965795eac8002d77a17078a967e2812ebae3e71d35533e1b3799')
 
 prepare() {
-  cd $pkgname
-  autoreconf -fi
+  cd $pkgbase-$pkgver
+
+  patch -Np1 -i ../0001-Add-CSS-selectors-for-GTK-3.20-and-newer.patch
+
+  patch -Np1 -i ../fix-invisible-icons.patch
 }
 
 build() {
-  cd $pkgname
-  ./configure \
-    --prefix=/usr \
-    --sysconfdir=/etc \
-    --localstatedir=/var \
-    --enable-gtk3
+  [ -d gtk2 ] || cp -r $pkgbase-$pkgver gtk2
+  cd gtk2
+  ./configure --sysconfdir=/etc --prefix=/usr
+  make
+
+  cd "$srcdir"
+  [ -d gtk3 ] || cp -r $pkgbase-$pkgver gtk3
+  cd gtk3
+  ./configure --sysconfdir=/etc --prefix=/usr --enable-gtk3
   make
 }
 
-package() {
-  cd $pkgname
+package_lxlauncher() {
+  groups=('lxde')
+  depends=('gtk2' 'startup-notification' 'lxmenu-data' 'menu-cache')
+
+  cd gtk2
   make DESTDIR="$pkgdir" install
 }
+
+package_lxlauncher-gtk3() {
+  groups=('lxde-gtk3')
+  pkgdesc+=' (GTK+ 3 version)'
+  depends=('gtk3' 'startup-notification' 'lxmenu-data' 'menu-cache')
+  conflicts=('lxlauncher')
+
+  cd gtk3
+  make DESTDIR="$pkgdir" install
+}
+


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,11 +1,6 @@
-cairo
-gdk-pixbuf2
-git
-glib2
-glibc
+gtk2
 gtk3
 intltool
-libx11
 lxmenu-data
 menu-cache
 startup-notification

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,13 +1,16 @@
 prepare() {
-cd $pkgname
-autoreconf -fi
+cd $pkgbase-$pkgver
+patch -Np1 -i ../0001-Add-CSS-selectors-for-GTK-3.20-and-newer.patch
+patch -Np1 -i ../fix-invisible-icons.patch
 }
 build() {
-cd $pkgname
-./configure \
---prefix=/usr \
---sysconfdir=/etc \
---localstatedir=/var \
---enable-gtk3
+[ -d gtk2 ] || cp -r $pkgbase-$pkgver gtk2
+cd gtk2
+./configure --sysconfdir=/etc --prefix=/usr
+make
+cd "$srcdir"
+[ -d gtk3 ] || cp -r $pkgbase-$pkgver gtk3
+cd gtk3
+./configure --sysconfdir=/etc --prefix=/usr --enable-gtk3
 make
 }
