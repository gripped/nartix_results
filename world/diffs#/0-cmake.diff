--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 
 pkgname=cmake
-pkgver=4.2.0
+pkgver=4.1.2
 pkgrel=1
 pkgdesc='A cross-platform open-source make system'
 arch=('x86_64')
@@ -28,11 +28,14 @@
   'ninja: for ninja generator'
   'qt6-base: cmake-gui'
 )
-source=(git+https://gitlab.kitware.com/cmake/cmake.git#tag=v$pkgver?signed)
-sha512sums=('48176de429fe3f1d683b4129748f3969fde6d269a428698b1be35f56c957b4c00716b8a3d73fc4970c0a0248651cc1339a553854c7c18490357b67ade17f6b05')
+source=(git+https://gitlab.kitware.com/cmake/cmake.git#tag=v$pkgver?signed
+        artix-cmake.patch)
+sha512sums=('c180a36f14ae074d6a94e498341b3706e38ff9400cef976b0c0a5976cbf7bceebdc3115d71e2cdec4d22b8199d91bab44ed4e6c669c586c957efe72fd280676a'
+            '56be8c1a7cd7b6520b50f38a5299032b58772758c33faf89dc772ed8cdccdce7e816a797511092867bfbf1ade1486373780c05ff1eb0d42ef3320c73aac8c9a7')
 validpgpkeys=(CBA23971357C2E6590D9EFD3EC8FEF3A7BFB4EDA) # Brad King <brad.king@kitware.com>
 
 prepare() {
+  git -C "${pkgname}" apply ../artix-cmake.patch
   cd $pkgname
   git cherry-pick -n a869b79c5921412c91fb71a761748ae5f7d3fb23 # Fix FindHDF5 for HDF5 built with cmake
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,5 @@
 prepare() {
+git -C "${pkgname}" apply ../artix-cmake.patch
 cd $pkgname
 git cherry-pick -n a869b79c5921412c91fb71a761748ae5f7d3fb23 # Fix FindHDF5 for HDF5 built with cmake
 }
