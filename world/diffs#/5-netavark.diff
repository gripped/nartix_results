--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,13 +1,12 @@
 
 pkgname=netavark
 pkgver=1.11.0
-pkgrel=2
+pkgrel=1
 pkgdesc="Container network stack"
 arch=(x86_64)
 url="https://github.com/containers/netavark"
 license=(Apache-2.0)
 depends=(
-  aardvark-dns
   gcc-libs
   glibc
 )
@@ -18,14 +17,11 @@
   mandown
   protobuf
 )
+optdepends=('aardvark-dns: for authorative DNS server')
 provides=(container-network-stack=2)
 source=(git+$url#tag=v$pkgver)
 sha256sums=('b99bc743c3e0f66425fb59e2aa122e52336b6369685d910a01ef143c1ed970f1')
 
-pkgver() {
-  cd $pkgname
-  git describe --tags | sed 's/v//g'
-}
 
 prepare() {
   cd $pkgname
@@ -38,7 +34,6 @@
 
   cd $pkgname
   mandown docs/$pkgname.1.md > $pkgname.1
-  sed "s|@@NETAVARK@@|/usr/lib/podman/netavark|" contrib/systemd/system/netavark-dhcp-proxy.service.in > contrib/systemd/system/netavark-dhcp-proxy.service
   cargo build --frozen --release --all-features
 }
 
@@ -53,6 +48,5 @@
   cd $pkgname
   install -vDm 755 target/release/$pkgname -t "$pkgdir/usr/lib/podman/"
   install -vDm 644 $pkgname.1 -t "$pkgdir/usr/share/man/man1/"
-  install -vDm 644 contrib/systemd/system/*.{service,socket} -t "$pkgdir/usr/lib/systemd/system/"
   install -vDm 644 README.md -t "$pkgdir/usr/share/doc/$pkgname/"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
-aardvark-dns
 cargo
 gcc-libs
 git

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -7,6 +7,5 @@
 export CARGO_TARGET_DIR=target
 cd $pkgname
 mandown docs/$pkgname.1.md > $pkgname.1
-sed "s|@@NETAVARK@@|/usr/lib/podman/netavark|" contrib/systemd/system/netavark-dhcp-proxy.service.in > contrib/systemd/system/netavark-dhcp-proxy.service
 cargo build --frozen --release --all-features
 }
