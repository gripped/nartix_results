--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,31 +1,32 @@
 
 pkgname=python-pytest-timeout
-pkgver=2.4.0
-pkgrel=1
+pkgver=2.3.1
+pkgrel=4
 pkgdesc='py.test plugin to abort hanging tests'
 arch=('any')
 license=('MIT')
 url='https://github.com/pytest-dev/pytest-timeout'
 depends=('python-pytest')
-makedepends=('git' 'python-build' 'python-installer' 'python-setuptools' 'python-wheel')
+makedepends=('python-build' 'python-installer' 'python-setuptools' 'python-wheel')
 checkdepends=('python-pexpect')
-source=("git+https://github.com/pytest-dev/pytest-timeout.git#tag=$pkgver")
-sha512sums=('473d800ff9d3668d4933b0db86f1785709ac4eab0204a98168952fe50850d2c873978888ba396634461fda1be9b33b2f794e16ad7051120dc779b6c97c7d2b6b')
+source=("https://github.com/pytest-dev/pytest-timeout/archive/$pkgver/$pkgname-$pkgver.tar.gz")
+sha512sums=('4209e6ae34145f1c7920ad2d7a98e55014e93145dd062ac5aab4d5ee6ab675dbceaaf8feb4a558f8648362dab75a3e76d41fffcada9685f7147ed549b2a82a9b')
 
 build() {
-  cd pytest-timeout
+  cd pytest-timeout-$pkgver
   python -m build -nw
 }
 
 check() {
-  cd pytest-timeout
-  python -m venv --system-site-packages venv
-  venv/bin/python -m installer dist/*.whl
-  venv/bin/python -m pytest
+
+  cd pytest-timeout-$pkgver
+  local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
+  python -m installer -d tmp_install dist/*.whl
+  PYTHONPATH="$PWD/tmp_install$site_packages:$PYTHONPATH" pytest
 }
 
 package() {
-  cd pytest-timeout
+  cd pytest-timeout-$pkgver
   python -m installer -d "$pkgdir" dist/*.whl
   install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
-git
 python-build
 python-installer
 python-pytest

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd pytest-timeout
+cd pytest-timeout-$pkgver
 python -m build -nw
 }
