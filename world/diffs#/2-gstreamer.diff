--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -11,7 +11,6 @@
   gst-libav
   gst-plugin-gtk
   gst-plugin-msdk
-  gst-plugin-onnx
   gst-plugin-opencv
   gst-plugin-qml6
   gst-plugin-qmlgl
@@ -26,8 +25,8 @@
   gst-python
   gstreamer-docs
 )
-pkgver=1.26.6
-pkgrel=1
+pkgver=1.26.5
+pkgrel=2
 pkgdesc="Multimedia graph framework"
 url="https://gstreamer.freedesktop.org/"
 arch=(x86_64)
@@ -138,7 +137,6 @@
   nasm
   neon
   nettle
-  onnxruntime
   openal
   opencore-amr
   opencv
@@ -178,7 +176,6 @@
   srt
   svt-av1
   svt-hevc
-  systemd-libs
   taglib
   twolame
   v4l-utils
@@ -205,11 +202,13 @@
   "git+https://gitlab.freedesktop.org/gstreamer/gstreamer.git?signed#tag=$pkgver"
   "https://gstreamer.freedesktop.org/src/gstreamer-docs/gstreamer-docs-$pkgver.tar.xz"{,.asc}
   0001-HACK-meson-Disable-broken-tests.patch
+  0002-zbar-tests-Handle-symbol-bytes-as-not-null-terminate.patch
 )
-b2sums=('b7b704d91bf0fcc3a88232fc502052d9758a682d959875256335dcec33c14c808bcff872e870f28b3aed52c956c3246bb5df131b141260cd927320c282b24b74'
-        'dd49ffe9a873e906a6df7593bc43067f83f89270e86a3f9c5f34d27632bf6af079072e40181a24192ded2fdc8fb44278b89661c2784c5c38860386f42bfd01b8'
+b2sums=('c0ef93fe00d68ded5865883e0875ab4ce0b6e67c3abbb001ee60200b579e6a104ab8f088cacff1f7b484a2265d9dea4d6f9dd5b9f59f45edea865e6ef6000b96'
+        '0609537be6446b59dfdab99a3a3517cd140f29b23e35070cee860544cf6f7d2291219c57d144f3afd77ccf90e0ff73f785548e1851257aaab38a01c30c492bf9'
         'SKIP'
-        '4380627ef81a47d6355b86edc268e550c115b8726edbc1fc13d7e20f131191e1d515b5c90737724ffc7eca562094bc2f8098a006366c743ee5870541b16ed9e8')
+        'a6d48e69e3748f38fa82eb683c59f93cae6e0a53bd7ad9cca9d07c07696b388272f07d5f3f13129148c3257acfff7027d67bd94cd0f4263d6e72b8c790d2af65'
+        'fe677cc8f73cc0f00008fea1c94626d0dcbe427402f79347deda25ac04c6f709eed6af20c05d6d4035f44392a9f9213d1183aa278b0d9b47176716cd6b7a1c53')
 validpgpkeys=(
   D637032E45B8C6585B9456565D2EEE6F6F349D7C # Tim MÃ¼ller <tim@gstreamer-foundation.org>
 )
@@ -218,10 +217,13 @@
   cd gstreamer
 
   git apply -3 ../0001-HACK-meson-Disable-broken-tests.patch
+
+  git apply -3 ../0002-zbar-tests-Handle-symbol-bytes-as-not-null-terminate.patch
 }
 
 build() {
   local meson_options=(
+    -D gst-plugins-bad:onnx=disabled
     -D benchmarks=disabled
     -D examples=disabled
     -D glib_debug=disabled
@@ -261,7 +263,7 @@
     -D gstreamer:ptp-helper-permissions=capabilities
     -D libnice=disabled
     -D orc-source=system
-    -D package-name="Arch Linux GStreamer ${epoch:+$epoch:}$pkgver-$pkgrel"
+    -D package-name="Artix Linux GStreamer ${epoch:+$epoch:}$pkgver-$pkgrel"
     -D package-origin="https://www.archlinux.org/"
     -D vaapi=enabled
   )
@@ -271,7 +273,7 @@
   export CARGO_PROFILE_RELEASE_DEBUG=2 CARGO_PROFILE_RELEASE_STRIP=false
   export CARGO_PROFILE_RELEASE_LTO=true CARGO_PROFILE_RELEASE_CODEGEN_UNITS=1
 
-  arch-meson gstreamer build "${meson_options[@]}"
+  artix-meson gstreamer build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -282,7 +284,7 @@
   export NO_AT_BRIDGE=1 GTK_A11Y=none
 
   xvfb-run -s "-nolisten local" \
-    meson test -C build --print-errorlogs -t 5
+    meson test -C build --print-errorlogs -t 5 || :
 )
 
 _install() {
@@ -921,23 +923,6 @@
   ); _install
 }
 
-package_gst-plugin-onnx() {
-  pkgdesc+=" - onnx plugin"
-  depends=(
-    "gst-plugins-bad-libs=$pkgver-$pkgrel"
-    "gst-plugins-base-libs=$pkgver-$pkgrel"
-    "gstreamer=$pkgver-$pkgrel"
-    gcc-libs
-    glib2
-    glibc
-    onnxruntime
-    openmpi
-  )
-
-  cd root; local files=(
-    usr/lib/gstreamer-1.0/libgstonnx.so
-  ); _install
-}
 
 package_gst-plugin-opencv() {
   pkgdesc+=" - opencv plugin"
@@ -1189,7 +1174,6 @@
     libva
     libx11
     libxrandr
-    systemd-libs
     wayland
   )
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -109,7 +109,6 @@
 nasm
 neon
 nettle
-onnxruntime
 openal
 opencore-amr
 opencv
@@ -149,7 +148,6 @@
 srt
 svt-av1
 svt-hevc
-systemd-libs
 taglib
 twolame
 v4l-utils