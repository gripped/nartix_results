--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,35 +1,71 @@
 
 pkgname=python-aiobotocore
-_pkgname=aiobotocore
-pkgver=2.21.1
+pkgver=2.22.0
 pkgrel=1
 pkgdesc='asyncio support for botocore library using aiohttp'
 arch=(any)
 url='https://github.com/aio-libs/aiobotocore'
 license=('Apache-2.0')
-depends=(python python-aiohttp python-aioitertools python-botocore python-dateutil
-         python-jmespath python-multidict python-wrapt)
-makedepends=(python-build python-installer python-setuptools python-wheel git)
-checkdepends=(python-moto python-pytest python-pytest-asyncio python-dill python-docutils python-pip
-              python-time-machine
-              python-docker python-openapi-spec-validator python-yaml python-flask python-flask-cors)
-source=("git+https://github.com/aio-libs/aiobotocore.git#tag=$pkgver")
-sha256sums=('2ea768545e01d39c9a35e5a657b79895f0b2e4f2cfc5d776db2167cc42ba5f24')
+depends=(
+  python
+  python-aiohttp
+  python-aioitertools
+  python-botocore
+  python-dateutil
+  python-jmespath
+  python-multidict
+  python-wrapt
+)
+makedepends=(
+  git
+  python-build
+  python-installer
+  python-setuptools
+  python-wheel
+)
+checkdepends=(
+  python-dill
+  python-docker
+  python-docutils
+  python-flask
+  python-flask-cors
+  python-moto
+  python-openapi-spec-validator
+  python-pip
+  python-pytest
+  python-pytest-asyncio
+  python-time-machine
+  python-yaml
+)
+source=("git+$url.git#tag=$pkgver")
+sha256sums=('df7ff2ded659e8000ef2fca289d484ac29a58afbc33c405b030f285b4b1d66a8')
 
 build() {
-  cd $_pkgname
+  cd ${pkgname#python-}
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd $_pkgname
+  cd ${pkgname#python-}
+  local pytest_args=(
+    -m='not localonly'
 
-  export PYTHONPATH="$PWD"
-  pytest -m "not localonly" tests \
-      --ignore=tests/test_lambda.py
+    --ignore=tests/test_lambda.py
+
+    --deselect='tests/test_patches.py::test_patches[BaseClient._make_api_call-digests12]'
+    --deselect='tests/test_patches.py::test_patches[Config-digests21]'
+    --deselect='tests/test_patches.py::test_patches[EndpointRulesetResolver._get_provider_params-digests117]'
+    --deselect='tests/test_patches.py::test_patches[Session.create_client-digests123]'
+    --deselect='tests/test_patches.py::test_patches[Waiter.wait-digests191]'
+
+    --deselect tests/test_basic_s3.py::test_fail_proxy_request
+  )
+  python -m venv --system-site-packages test-env
+  test-env/bin/python -m installer dist/*.whl
+  test-env/bin/python -m pytest "${pytest_args[@]}"
 }
 
 package() {
-  cd $_pkgname
+  cd ${pkgname#python-}
   python -m installer --destdir="$pkgdir" dist/*.whl
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd $_pkgname
+cd ${pkgname#python-}
 python -m build --wheel --no-isolation
 }
