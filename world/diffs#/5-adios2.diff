--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,77 +1,27 @@
 
 pkgname=adios2
-pkgver=2.10.2
-pkgrel=4
+pkgver=2.10.1
+pkgrel=3
 pkgdesc="The Adaptable Input/Output System version 2"
 arch=(x86_64)
 url="https://adios2.readthedocs.io/en/latest/"
-license=(Apache-2.0)
-depends=(
-  blosc2
-  bzip2 libbz2.so
-  gcc-libs
-  glibc
-  hdf5
-  libfabric
-  libpng libpng16.so
-  libsodium libsodium.so
-  mgard
-  openmpi libmpi.so
-  openucx libucp.so libucs.so
-  paraview-catalyst
-  pugixml
-  python
-  python-yaml
-  sqlite libsqlite3.so
-  sz
-  yaml-cpp libyaml-cpp.so
-  zeromq libzmq.so
-  zfp
-  zlib libz.so
-)
-makedepends=(
-  cmake
-  cuda
-  gcc-fortran
-  gtest
-  ninja
-  nlohmann-json
-  pybind11
-  python-mpi4py
-  python-numpy
-)
-optdepends=(
-  'python-numpy: for Python bindings'
-)
-source=(https://github.com/ornladios/ADIOS2/archive/v${pkgver}/${pkgname}-${pkgver}.tar.gz
-        fix-destdir-installation.patch)
-sha256sums=('14cf0bcd94772194bce0f2c0e74dba187965d1cffd12d45f801c32929158579e'
-            '601dccc582f957b19bbe5e980ed37fcaeec85b66f63fbb357735345ac0a16d60')
-
-prepare() {
-  patch --directory=${pkgname^^}-${pkgver} -Np1 < fix-destdir-installation.patch
-}
+license=(Apache)
+depends=(blosc bzip2 glibc gcc-libs hdf5 libfabric libpng nlohmann-json
+         openmpi pugixml pybind11 sz yaml-cpp zeromq zfp zlib)
+makedepends=(cmake gcc-fortran gtest python python-mpi4py python-numpy)
+source=(https://github.com/ornladios/ADIOS2/archive/v${pkgver}/${pkgname}-${pkgver}.tar.gz)
+sha256sums=('ce776f3a451994f4979c6bd6d946917a749290a37b7433c0254759b02695ad85')
 
 build() {
-  local cuda_archs="50;52;53;60;61;62;70;72;75;80;86;87;89;90;90a;90a-virtual"
-
-  local cmake_flags=(
-    -B build -S ${pkgname^^}-${pkgver} -G Ninja
-    -DCMAKE_INSTALL_PREFIX=/usr
-    -DCMAKE_CUDA_ARCHITECTURES="$cuda_archs"
-    -DCMAKE_CUDA_FLAGS="--threads $(nproc)"
-    -DADIOS2_USE_CUDA=ON
-    -DADIOS2_USE_EXTERNAL_DEPENDENCIES=ON
-    -DADIOS2_HAVE_HDF5_VOL=OFF
-    -DADIOS2_BUILD_EXAMPLES=OFF
-    -DADIOS2_USE_Derived_Variables=ON
-    -Wno-dev
-  )
-  cmake "${cmake_flags[@]}"
-  cmake --build build
+  cmake -B build -S ${pkgname^^}-${pkgver} \
+    -DCMAKE_INSTALL_PREFIX=/usr \
+    -DADIOS2_USE_EXTERNAL_DEPENDENCIES=ON \
+    -DADIOS2_HAVE_HDF5_VOL=OFF \
+    -DADIOS2_BUILD_EXAMPLES=OFF #\
+  make VERBOSE=1 -C build
 }
 
 package() {
   CMAKE_PREFIX_PATH="$pkgdir"/usr/lib/cmake \
-  DESTDIR="$pkgdir" cmake --install build
+  make -C build DESTDIR="${pkgdir}" install
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,38 +1,20 @@
-blosc2
+blosc
 bzip2
 cmake
-cuda
 gcc-fortran
 gcc-libs
 glibc
 gtest
 hdf5
-libbz2.so
 libfabric
-libmpi.so
 libpng
-libpng16.so
-libsodium
-libsodium.so
-libsqlite3.so
-libucp.so
-libucs.so
-libyaml-cpp.so
-libz.so
-libzmq.so
-mgard
-ninja
 nlohmann-json
 openmpi
-openucx
-paraview-catalyst
 pugixml
 pybind11
 python
 python-mpi4py
 python-numpy
-python-yaml
-sqlite
 sz
 yaml-cpp
 zeromq

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,20 +1,8 @@
-prepare() {
-patch --directory=${pkgname^^}-${pkgver} -Np1 < fix-destdir-installation.patch
+build() {
+cmake -B build -S ${pkgname^^}-${pkgver} \
+-DCMAKE_INSTALL_PREFIX=/usr \
+-DADIOS2_USE_EXTERNAL_DEPENDENCIES=ON \
+-DADIOS2_HAVE_HDF5_VOL=OFF \
+-DADIOS2_BUILD_EXAMPLES=OFF #\
+make VERBOSE=1 -C build
 }
-build() {
-local cuda_archs="50;52;53;60;61;62;70;72;75;80;86;87;89;90;90a;90a-virtual"
-local cmake_flags=(
--B build -S ${pkgname^^}-${pkgver} -G Ninja
--DCMAKE_INSTALL_PREFIX=/usr
--DCMAKE_CUDA_ARCHITECTURES="$cuda_archs"
--DCMAKE_CUDA_FLAGS="--threads $(nproc)"
--DADIOS2_USE_CUDA=ON
--DADIOS2_USE_EXTERNAL_DEPENDENCIES=ON
--DADIOS2_HAVE_HDF5_VOL=OFF
--DADIOS2_BUILD_EXAMPLES=OFF
--DADIOS2_USE_Derived_Variables=ON
--Wno-dev
-)
-cmake "${cmake_flags[@]}"
-cmake --build build
-}
