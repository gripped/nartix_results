--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=unbound
 pkgver=1.21.0
-pkgrel=2
+pkgrel=1
 pkgdesc="Validating, recursive, and caching DNS resolver"
 arch=(x86_64)
 url="https://unbound.net/"
@@ -23,7 +23,6 @@
   protobuf-c
   python
   swig
-  systemd
 )
 optdepends=(
   'expat: for unbound-anchor'
@@ -54,7 +53,6 @@
 prepare() {
   patch -p1 -d $pkgname -i ../$pkgname-1.14.0-trust_anchor_file.patch
   cd $pkgname
-  git cherry-pick -n b7c61d7cc256d6a174e6179622c7fa968272c259
   autoreconf -fiv
 }
 
@@ -70,7 +68,7 @@
     --enable-pie
     --enable-relro-now
     --enable-subnet
-    --enable-systemd
+    --disable-systemd
     --enable-tfo-client
     --enable-tfo-server
     --enable-cachedb
@@ -98,11 +96,9 @@
     libevent libevent-2.1.so
     openssl libcrypto.so libssl.so
     protobuf-c libprotobuf-c.so
-    systemd-libs libsystemd.so
   )
 
   make DESTDIR="$pkgdir" install -C $pkgname
-  install -vDm 644 $pkgname/contrib/$pkgname.service -t "$pkgdir/usr/lib/systemd/system/"
   install -vDm 644 $pkgname/LICENSE -t "$pkgdir/usr/share/licenses/$pkgname/"
   install -vDm 644 $pkgname-sysusers.conf "$pkgdir/usr/lib/sysusers.d/$pkgname.conf"
   install -vDm 644 $pkgname-tmpfiles.conf "$pkgdir/usr/lib/tmpfiles.d/$pkgname.conf"


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -12,10 +12,7 @@
 libprotobuf-c.so
 libsodium
 libssl.so
-libsystemd.so
 openssl
 protobuf-c
 python
 swig
-systemd
-systemd-libs