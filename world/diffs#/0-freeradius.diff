--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=freeradius
-pkgver=3.2.8
-pkgrel=1
+pkgver=3.2.7
+pkgrel=4
 pkgdesc='The premier open source RADIUS server'
 arch=('x86_64')
 url='https://freeradius.org/'
@@ -23,14 +23,20 @@
 options=('!makeflags')
 validpgpkeys=('BF2384EC6938B9744B03E2A620E37C25995B4F85') # FreeRADIUS - Package Signing [...] <packages@freeradius.org>
 source=("https://github.com/FreeRADIUS/freeradius-server/releases/download/release_${pkgver//./_}/freeradius-server-${pkgver}.tar.bz2"{,.sig}
-        'freeradius.service'
+        '0001-change-fips-no-to--fips.patch'
         'freeradius.sysusers'
         'freeradius.tmpfiles')
-sha256sums=('2c6483baeba65f939734473fafa31c4f727e8e139dd884563121412b6aba681b'
+sha256sums=('8a865766c5c0a1637d7a515cf913c4630771e55345a19d88b4b2c372877dae83'
             'SKIP'
-            'ff9e31232122d2982fae5466969f45f9f46396c307754aa10b582e5cab19758f'
+            '1d59b93c0dff4f953ee796a72fdee1f25cfde03615beca627e9485ea2c898e5a'
             '717e0cbf090d023dde5f8aba6850ce9b25da29aa28dd6b5b4f98535b5872f14f'
             'f536a9aa972e3e42a6b1a6d8ee17166eb721c7cba2e80f60473811497c7bd8bc')
+
+prepare() {
+  cd "$srcdir"/freeradius-server-$pkgver
+
+  patch -Np1 < ../0001-change-fips-no-to--fips.patch
+}
 
 build() {
   cd "$srcdir"/freeradius-server-$pkgver
@@ -60,7 +66,6 @@
   mv "$pkgdir"/etc/raddb "$pkgdir"/etc/raddb.default
   rm -rf "$pkgdir"/var/run
 
-  install -D -m0644 "$srcdir"/$pkgname.service "$pkgdir"/usr/lib/systemd/system/$pkgname.service
   install -D -m0644 "$srcdir"/$pkgname.sysusers "$pkgdir"/usr/lib/sysusers.d/$pkgname.conf
   install -D -m0644 "$srcdir"/$pkgname.tmpfiles "$pkgdir"/usr/lib/tmpfiles.d/$pkgname.conf
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,3 +1,7 @@
+prepare() {
+cd "$srcdir"/freeradius-server-$pkgver
+patch -Np1 < ../0001-change-fips-no-to--fips.patch
+}
 build() {
 cd "$srcdir"/freeradius-server-$pkgver
 ./configure \
