--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,66 +1,44 @@
 
-pkgname=lxappearance
-pkgver=0.6.4
-pkgrel=3
-pkgdesc='Feature-rich GTK theme switcher of the LXDE Desktop'
-arch=(x86_64)
-url='https://github.com/lxde/lxappearance'
-license=(GPL-2.0-or-later)
-depends=(
-  gdk-pixbuf2
-  glib2
-  glibc
-  gtk3
-  libx11
-)
-makedepends=(
-  git
-  intltool
-)
-groups=(lxde)
-conflicts=(lxappearance-gtk3)
-replaces=(lxappearance-gtk3)
-source=(
-  "git+https://github.com/lxde/lxappearance.git#tag=$pkgver"
-  lxappearance-theme-name.patch
-  lxappearance-builtin-themes.patch
-  lxappearance-transient-dialog.patch
-  lxappearance-notshowin.patch
-)
-b2sums=(
-  6fa7d9f2193c2a2dbfa1e91f75541f4a2facc6f052aacf9d9ad7d703b3f638c7bc13d4d24d945241b714c21898ff12f661ac078eb752ed17611bc03a1bb4bef7
-  161ded535844ccf9c116c4197c174416c338fe2837c984b89bba52f1c7813778d5ccf7df0889ec62355199fa2fe667bef5fddbdebb40cb11c62da3ec17432791
-  940ea3c526872b9b123746ebe2faa43339ffe60f9d5e0a81883c4abb2fb06d3c7536d9bf58a85cea3378ec20e0b82249d665333991a6dd823e2c0955ac4c3d40
-  49da625e9c18b42bb5d0e36b4bae8250ac657765ae529d0a761cf4243b4fdc5671015999bbd0ed028722c6fc1566ecbcc4f43210bcb27dc577d581eee899e317
-  1ba260b9ac4c55aad468393463accfa4e73b00429db09fdcbbfd04e4b80d3f5cb63e2ca4b625f8a81c277c152f5b01726c19b3e1c69eba7f249b8dd5ba751f68
-)
-
-prepare() {
-  cd $pkgname
-
-  git apply -3 ../lxappearance-theme-name.patch
-
-  git apply -3 ../lxappearance-builtin-themes.patch
-
-  git apply -3 ../lxappearance-transient-dialog.patch
-
-  git apply -3 ../lxappearance-notshowin.patch
-
-  autoreconf -fi
-}
+pkgbase=lxappearance
+pkgname=(lxappearance lxappearance-gtk3)
+pkgver=0.6.3
+pkgrel=4
+pkgdesc='Feature-rich GTK+ theme switcher of the LXDE Desktop'
+arch=('x86_64')
+license=('GPL2')
+url='https://wiki.lxde.org/en/LXAppearance'
+depends=('gtk2' 'gtk3')
+makedepends=('intltool' 'dbus-glib')
+source=(https://downloads.sourceforge.net/lxde/$pkgbase-$pkgver.tar.xz)
+sha256sums=('7222d858b8fef4b7967c42142d61e82ded6dd42dc5ef1d59caad775795928b38')
 
 build() {
-  cd $pkgname
-  ./configure \
-    --prefix=/usr \
-    --sysconfdir=/etc \
-    --localstatedir=/var \
-    --enable-dbus \
-    --enable-gtk3
+  [ -d gtk2 ] || cp -r $pkgbase-$pkgver gtk2
+  cd gtk2
+  ./configure --sysconfdir=/etc --prefix=/usr --enable-dbus
+  make
+
+  cd "$srcdir"
+  [ -d gtk3 ] || cp -r $pkgbase-$pkgver gtk3
+  cd gtk3
+  ./configure --sysconfdir=/etc --prefix=/usr --enable-dbus --enable-gtk3
   make
 }
 
-package() {
-  cd $pkgname
+package_lxappearance() {
+  groups=('lxde')
+  depends=('gtk2')
+
+  cd gtk2
   make DESTDIR="$pkgdir" install
 }
+
+package_lxappearance-gtk3() {
+  groups=('lxde-gtk3')
+  pkgdesc+=' (GTK+ 3 version)'
+  depends=('gtk3')
+  conflicts=('lxappearance')
+
+  cd gtk3
+  make DESTDIR="$pkgdir" install
+}


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,7 +1,4 @@
-gdk-pixbuf2
-git
-glib2
-glibc
+dbus-glib
+gtk2
 gtk3
 intltool
-libx11

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,18 +1,11 @@
-prepare() {
-cd $pkgname
-git apply -3 ../lxappearance-theme-name.patch
-git apply -3 ../lxappearance-builtin-themes.patch
-git apply -3 ../lxappearance-transient-dialog.patch
-git apply -3 ../lxappearance-notshowin.patch
-autoreconf -fi
-}
 build() {
-cd $pkgname
-./configure \
---prefix=/usr \
---sysconfdir=/etc \
---localstatedir=/var \
---enable-dbus \
---enable-gtk3
+[ -d gtk2 ] || cp -r $pkgbase-$pkgver gtk2
+cd gtk2
+./configure --sysconfdir=/etc --prefix=/usr --enable-dbus
+make
+cd "$srcdir"
+[ -d gtk3 ] || cp -r $pkgbase-$pkgver gtk3
+cd gtk3
+./configure --sysconfdir=/etc --prefix=/usr --enable-dbus --enable-gtk3
 make
 }
