--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,22 +1,26 @@
 
-pkgname=libvorbis
+pkgbase=libvorbis
+pkgname=(
+  libvorbis
+  libvorbis-docs
+)
 pkgver=1.3.7
-pkgrel=3
+pkgrel=4
 pkgdesc='Reference implementation of the Ogg Vorbis audio format'
 arch=(x86_64)
 url=https://www.xiph.org/vorbis/
-license=(BSD)
-depends=(libogg.so)
+license=(BSD-3-Clause)
+depends=(
+  glibc
+  libogg
+)
 makedepends=(git)
-provides=(
-  libvorbis.so
-  libvorbisenc.so
-  libvorbisfile.so
-)
 _tag=0c55fa38933fd4bdb7db7c298b27e7bf2f2c5e98
 source=(git+https://github.com/xiph/vorbis.git?signed#tag=${_tag})
-validpgpkeys=(B7B00AEE1F960EEA0FED66FB9259A8F2D2D44C84) # Ralph Giles <giles@thaumas.net>
-sha256sums=(SKIP)
+sha256sums=('f58777e598c5ef1c9f21698e581f6e62729f3d343ec4aa270051fb304a56fe26')
+validpgpkeys=(
+  B7B00AEE1F960EEA0FED66FB9259A8F2D2D44C84 # Ralph Giles <giles@thaumas.net>
+)
 
 pkgver() {
   cd vorbis
@@ -37,15 +41,36 @@
     --prefix=/usr \
     --disable-static \
     --enable-shared
+  sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
   make
 }
 
 check() {
-  make -C vorbis check
+  make -C vorbis check -j1
 }
 
-package() {
+package_libvorbis() {
+  depends+=(libogg.so)
+  provides=(
+    libvorbis.so
+    libvorbisenc.so
+    libvorbisfile.so
+  )
+
   make DESTDIR="${pkgdir}" -C vorbis install
-  install -Dm 644 vorbis/COPYING -t "${pkgdir}"/usr/share/licenses/libvorbis
+
+  mkdir -p doc/usr/share
+  mv {"$pkgdir",doc}/usr/share/doc
+
+  install -Dm 644 vorbis/COPYING -t "${pkgdir}/usr/share/licenses/${pkgname}"
 }
 
+package_libvorbis-docs() {
+  pkgdesc+=" (documentation)"
+  depends=()
+
+  mv doc/* "$pkgdir"
+
+  install -Dm 644 vorbis/COPYING -t "${pkgdir}/usr/share/licenses/${pkgname}"
+}
+


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,2 +1,5 @@
+
 git
+glibc
+libogg
 libogg.so

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -8,5 +8,6 @@
 --prefix=/usr \
 --disable-static \
 --enable-shared
+sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
 make
 }
