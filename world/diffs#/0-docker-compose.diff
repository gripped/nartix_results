--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 
 pkgname=docker-compose
-pkgver=2.40.3
+pkgver=2.40.2
 pkgrel=1
 pkgdesc="Fast, isolated development environments using Docker"
 arch=('x86_64')
@@ -8,8 +8,15 @@
 license=("Apache-2.0")
 makedepends=('go')
 checkdepends=('docker')
-source=("$pkgname-$pkgver.tar.gz::https://github.com/docker/compose/archive/v$pkgver.tar.gz")
-b2sums=('a4272a1b65a372adb25caf1363c76c4104a3e20f0cd3013df8d4da7a34099483fdc8322b07dff3006c9c991e4b63c69f20511aeb62604d196c9a60b064e56121')
+source=("$pkgname-$pkgver.tar.gz::https://github.com/docker/compose/archive/v$pkgver.tar.gz"
+        https://github.com/docker/compose/commit/6a90742ef29c392b6626b0ff3f50c6f28f944321.patch)
+b2sums=('af20677a45461ad97f800322df5c002eebc0a81ee1077ee6ad2518b7455804a91536c099dbb5a27a8d6fc98e1d23381917987978dfb3ce4372c2b5efc709486f'
+        '6f99d165455eb8f50932697e18804372468b099ff8685b73326a8b2edbb5315acfef49a06d2e6626cd57cefac612c9f2fa688c50122e8ee1921ad690b037698e')
+
+prepare() {
+  cd "compose-$pkgver"
+  patch -Np1 -i ../6a90742ef29c392b6626b0ff3f50c6f28f944321.patch
+}
 
 build() {
   cd "compose-$pkgver"


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,3 +1,7 @@
+prepare() {
+cd "compose-$pkgver"
+patch -Np1 -i ../6a90742ef29c392b6626b0ff3f50c6f28f944321.patch
+}
 build() {
 cd "compose-$pkgver"
 export CGO_CPPFLAGS="${CPPFLAGS}"
