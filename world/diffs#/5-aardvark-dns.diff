--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 
 pkgname=aardvark-dns
-pkgver=1.16.0
+pkgver=1.15.0
 pkgrel=1
 pkgdesc="Authoritative dns server for A/AAAA container records"
 arch=(x86_64)
@@ -13,9 +13,10 @@
 makedepends=(
   cargo
   git
+  libgit2
 )
 source=(git+$url#tag=v$pkgver)
-sha256sums=('4913f48d17baa4a97bb9ba2d63da57a883cf4554cc7b1ee75b6accffd59eb89f')
+sha256sums=('4c08528b7a81f7c6c87fcdc3d49dc084b5985752fbd1eb66319db4d6cfa7e6c4')
 
 prepare() {
   cd $pkgname
@@ -23,11 +24,16 @@
 }
 
 build() {
+  export RUSTUP_TOOLCHAIN=stable
+  export CARGO_TARGET_DIR=target
+
   cd $pkgname
   cargo build --frozen --release --all-features
 }
 
 check() {
+  export RUSTUP_TOOLCHAIN=stable
+
   cd $pkgname
   cargo test --frozen --all-features
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -2,3 +2,4 @@
 gcc-libs
 git
 glibc
+libgit2

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,6 +3,8 @@
 cargo fetch --locked --target "$(rustc -vV | sed -n 's/host: //p')"
 }
 build() {
+export RUSTUP_TOOLCHAIN=stable
+export CARGO_TARGET_DIR=target
 cd $pkgname
 cargo build --frozen --release --all-features
 }
