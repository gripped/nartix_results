--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=python-prometheus_client
-pkgver=0.24.0
-pkgrel=1
+pkgver=0.23.1
+pkgrel=2
 
 pkgdesc="Prometheus instrumentation library for Python applications"
 url="https://github.com/prometheus/client_python"
@@ -10,20 +10,11 @@
 
 depends=('python')
 makedepends=('python-setuptools' 'python-build' 'python-installer' 'python-wheel')
-checkdepends=('python-twisted' 'python-pytest' 'python-aiohttp' 'python-snappy' 'python-asgiref' 'python-django')
-optdepends=('python-snappy: snappy compression support'
-	    'python-aiohttp: aiohttp server support'
-	    'python-django: django exporter support')
+checkdepends=('python-twisted' 'python-pytest')
 
-source=(client_python-$pkgver.tar.gz::https://github.com/prometheus/client_python/archive/v${pkgver}.tar.gz fix-test.patch)
+source=(client_python-$pkgver.tar.gz::https://github.com/prometheus/client_python/archive/v${pkgver}.tar.gz)
 
-sha512sums=('3e4d5c2fd3263eacfd79c52c0e7b86d301fb053539cd99de5940cae4166d720495c399c45ba417c2602fac6ad283f52c9bc85028a0802f0e289bda5a6adb87bb'
-            '4442ff79fc7dc57e500634156ebffbb81b3ac58ae5d1cfaa4e487c85bfcb3e1b73dfa2d9b29c9fd7a5ed4dcae48e79c4fe7139a0b94bf8b72f9691b368a2e57e')
-
-prepare() {
-  cd client_python-$pkgver
-  patch -Np1 -i ${srcdir}/fix-test.patch
-}
+sha512sums=('475fa17b7f97c57ca0f062b6c5790245987ade455e02f090282273460002b38ca3327357d59b25d522e43436af7656e7b1806125d2bb5c382d3a29422561b7b0')
 
 build() {
   cd client_python-$pkgver
@@ -32,7 +23,7 @@
 
 check() {
   cd client_python-$pkgver
-  PYTHONDONTWRITEBYTECODE=1 PYTHONPATH=. python -m unittest discover -vs .
+  PYTHONDONTWRITEBYTECODE=1 python -m unittest discover -vs .
 }
 
 package() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,3 @@
-prepare() {
-cd client_python-$pkgver
-patch -Np1 -i ${srcdir}/fix-test.patch
-}
 build() {
 cd client_python-$pkgver
 python -m build --wheel --no-isolation
