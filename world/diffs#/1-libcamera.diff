--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -8,7 +8,7 @@
   gst-plugin-libcamera
   python-libcamera
 )
-pkgver=0.5.1
+pkgver=0.5.0
 pkgrel=2
 pkgdesc="A complex camera support library for Linux, Android, and ChromeOS"
 arch=(x86_64)
@@ -36,14 +36,14 @@
   qt6-base
   qt6-tools
   sdl2
-  systemd
+  udev
   texlive-core
 )
 source=(
   "git+$_url#tag=v$pkgver"
 )
-sha512sums=('12a3e04860b24fdc34526431f2c4d5c941cb87754b0ed09dab6390c37eaaefa54de85c4ef1eae2e1daf79be5fb8e6dd00626f505884a047d751d8d8e44d622ca')
-b2sums=('4cb0c84f7e051468a1e36aa9ab6b82b89dd0fcdf02145a45647cb9189b4eabd6f1660c79acba0e28c28825cff7e298f9e2f115e555ce7ee987327cf339505dda')
+sha512sums=('403f3bd855bd783b8a943d5aaf9516f33271c447774b148734be30e31f8c63e812d032c7f43ae3dbd135244de518b4f6c420ad50153b582fe5e86315440da639')
+b2sums=('5b4b6c17371ebd8c5c897481e53c572846dfb5f8282ec4c90eebe1800ad181e137f5b7acf8bc669605797e97ee09005cdb1071e576680f71209ee1a0aae02383')
 
 _pick() {
   local p="$1" f d; shift
@@ -70,23 +70,17 @@
 
 build() {
   local meson_options=(
-    -D v4l2=enabled
+    -D v4l2=true
     -D tracing=disabled
     -D test=true
   )
 
-  arch-meson $pkgbase build "${meson_options[@]}"
+  artix-meson $pkgbase build "${meson_options[@]}"
   meson compile -C build
 }
 
 check() {
-  local tests=$(
-    meson test -C build --list | awk '{print $3}' \
-      | grep -v single_stream_test \
-      | grep -v multi_stream_test \
-      | grep -v memory_lifetime_test \
-  )
-  meson test -C build ${tests[@]}
+  meson test -C build || echo "Tests require CLONE_NEWUSER/ CLONE_NEWNET."
 }
 
 package_libcamera() {
@@ -109,7 +103,7 @@
     libyaml
     libyuv
     sh
-    systemd-libs libudev.so
+    libudev libudev.so
   )
   optdepends=(
     'gst-plugin-libcamera: GStreamer plugin'


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -25,6 +25,7 @@
 libjpeg.so
 libtiff
 libtiff.so
+libudev
 libudev.so
 libunwind
 libyaml
@@ -40,6 +41,5 @@
 qt6-tools
 sdl2
 sh
-systemd
-systemd-libs
 texlive-core
+udev