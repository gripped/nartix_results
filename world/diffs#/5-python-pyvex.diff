--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,32 +1,18 @@
 
 _pyname=pyvex
 pkgname=python-${_pyname}
-pkgver=9.2.197
-pkgrel=1
+pkgver=9.2.160
+pkgrel=2
 pkgdesc="Python bindings for Valgrind's VEX IR"
 url='https://github.com/angr/pyvex'
-license=('BSD-2-Clause AND GPL-2.0-only')
-arch=(x86_64)
-depends=(
-  glibc
-  python
-  python-bitstring
-  python-cffi
-)
-makedepends=(
-  git
-  python-build
-  python-installer
-  python-scikit-build-core
-  python-wheel
-)
-checkdepends=(
-  python-pytest
-  python-pytest-xdist
-)
+license=('BSD')
+arch=('x86_64')
+depends=('python' 'python-archinfo' 'python-bitstring' 'python-cffi' 'python-setuptools')
+makedepends=('git' 'python-build' 'python-installer' 'python-wheel')
+checkdepends=('python-pytest')
 source=("git+${url}.git#commit=v${pkgver}"
         git+https://github.com/angr/vex.git)
-sha512sums=('3ab2e6da31f0a6bbf09f0b2cc8ce752ddb6993a3f2c06274559b1c7fe033c57368b7071267def991f8b5b852448b5641abbe3cc35272e7e84777e891be9ad92b'
+sha512sums=('785021aa203a0226ea579dfd96d71f98534c57bd7425b45b45307e6ed9fa029874ad826740575b9587694358821a2b17d6b0cd9e48c1735a4e12bd27efd37f1f'
             'SKIP')
 
 prepare() {
@@ -35,20 +21,20 @@
   git config submodule."vex".url "${srcdir}/vex"
   git -c protocol.file.allow=always submodule update --recursive
 
+  sed 's/FLAGS=/FLAGS+=/g' -i pyvex_c/Makefile
   sed 's/-shared/$(LDFLAGS) -shared/' -i "${srcdir}"/vex/Makefile-gcc
 }
 
 build() {
   cd ${_pyname}
   export EXTRA_CFLAGS="${CFLAGS} ${CPPFLAGS}"
-  export CMAKE_BUILD_PARALLEL_LEVEL=1
-  python -m build --wheel --no-isolation -C install.strip=false -C cmake.build-type=None
+  python -m build --wheel --no-isolation
 }
 
 check() {
   cd ${_pyname}
-  python -m venv --system-site-packages .venv
-  .venv/bin/python -m pytest tests
+  rm tests/test_spotter.py
+  PYTHONPATH=build/lib pytest
 }
 
 package() {


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,9 +1,9 @@
 git
-glibc
 python
+python-archinfo
 python-bitstring
 python-build
 python-cffi
 python-installer
-python-scikit-build-core
+python-setuptools
 python-wheel

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,11 +3,11 @@
 git submodule init
 git config submodule."vex".url "${srcdir}/vex"
 git -c protocol.file.allow=always submodule update --recursive
+sed 's/FLAGS=/FLAGS+=/g' -i pyvex_c/Makefile
 sed 's/-shared/$(LDFLAGS) -shared/' -i "${srcdir}"/vex/Makefile-gcc
 }
 build() {
 cd ${_pyname}
 export EXTRA_CFLAGS="${CFLAGS} ${CPPFLAGS}"
-export CMAKE_BUILD_PARALLEL_LEVEL=1
-python -m build --wheel --no-isolation -C install.strip=false -C cmake.build-type=None
+python -m build --wheel --no-isolation
 }
