--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -10,7 +10,7 @@
          nemo-seahorse
          nemo-share
          nemo-terminal)
-pkgver=6.6.0
+pkgver=6.0.1
 pkgrel=1
 pkgdesc="Various extensions for Nemo"
 arch=(x86_64)
@@ -20,21 +20,27 @@
 _preview_deps=(cjs clutter-gtk clutter-gst libmusicbrainz5 gtksourceview4 xreader webkit2gtk-4.1)
 _python_deps=(python-gobject python-setuptools)
 _seahorse_deps=(libcryptui)
-makedepends=(git intltool gobject-introspection meson glib2-devel)
+makedepends=(intltool gobject-introspection meson samurai)
 makedepends+=("${_preview_deps[@]}" "${_python_deps[@]}" "${_seahorse_deps[@]}")
 options=(!emptydirs)
-source=(git+${url}#tag=$pkgver)
-sha256sums=('9477bf5a298c03a5e83ff382665c1c7edcaf051757ca3b56449cf636a4494249')
-b2sums=('e3803f0d9254a663576c532e0dbdc08e29eac625ee18274725acdf37f73a1757f557b1bb6452a1f2578ac4c48017e919123ae9c36c117e5e917a81538b4f2d84')
+source=("${url}/archive/${pkgver}/${pkgbase}-${pkgver}.tar.gz")
+sha256sums=('d7d0e78df10dc4240623a1daa7cd457cc4c31969c8a6ff1cdeca4b3ce66b5cdb')
+b2sums=('b4cf28839e9feecdc6716327e432c862c962c5a12bce79317096054a2be7beb2b932e5efd3f31241afed58bead533a085580999da8da3a08b97d76445fee0f8e')
+
+prepare() {
+  cd $pkgbase-$pkgver
+  rm -r ./*/debian # Fix build with newer setuptools
+}
 
 build() {
-  cd ${pkgbase}
+  cd ${pkgbase}-${pkgver}
 
   for _dir in "${pkgname[@]}"; do
     if [[ -f ${_dir}/meson.build ]]; then
-      pushd ${_dir}
-      arch-meson --libexecdir=lib/${_dir} . build
-      meson compile -C build
+      mkdir -p ${_dir}/build
+      pushd ${_dir}/build
+      artix-meson --libexecdir=lib/${_dir} ..
+      samu
       popd
     fi
   done
@@ -57,7 +63,7 @@
   depends+=(nemo-python python-mutagen)
   optdepends=('cinnamon-translations: i18n')
 
-  cd ${pkgbase}/${pkgname}
+  cd ${pkgbase}-${pkgver}/${pkgname}
   python setup.py install --prefix=/usr --root="${pkgdir}" --skip-build --optimize=1
 }
 
@@ -66,7 +72,7 @@
   depends+=(nemo-python)
   optdepends=('cinnamon-translations: i18n')
 
-  cd ${pkgbase}/${pkgname}
+  cd ${pkgbase}-${pkgver}/${pkgname}
   python setup.py install --prefix=/usr --root="${pkgdir}" --skip-build --optimize=1
 }
 
@@ -75,8 +81,8 @@
   depends+=(file-roller)
   optdepends=('cinnamon-translations: i18n')
 
-  cd ${pkgbase}/${pkgname}
-  meson install -C build --destdir="$pkgdir"
+  cd ${pkgbase}-${pkgver}/${pkgname}/build
+  DESTDIR="${pkgdir}" samu install
 }
 
 package_nemo-image-converter(){
@@ -84,8 +90,8 @@
   depends+=(imagemagick)
   optdepends=('cinnamon-translations: i18n')
 
-  cd ${pkgbase}/${pkgname}
-  meson install -C build --destdir="$pkgdir"
+  cd ${pkgbase}-${pkgver}/${pkgname}/build
+  DESTDIR="${pkgdir}" samu install
 }
 
 package_nemo-preview(){
@@ -93,8 +99,8 @@
   depends+=("${_preview_deps[@]}")
   optdepends=('cinnamon-translations: i18n')
 
-  cd ${pkgbase}/${pkgname}
-  meson install -C build --destdir="$pkgdir"
+  cd ${pkgbase}-${pkgver}/${pkgname}/build
+  DESTDIR="${pkgdir}" samu install
 }
 
 package_nemo-pastebin(){
@@ -102,7 +108,7 @@
   depends+=(nemo-python pastebinit)
   optdepends=('cinnamon-translations: i18n')
 
-  cd ${pkgbase}/${pkgname}
+  cd ${pkgbase}-${pkgver}/${pkgname}
   python setup.py install --prefix=/usr --root="${pkgdir}" --skip-build --optimize=1
 }
 
@@ -110,8 +116,8 @@
   pkgdesc="Python3 binding for Nemo components"
   depends+=("${_python_deps[@]}")
 
-  cd ${pkgbase}/${pkgname}
-  meson install -C build --destdir="$pkgdir"
+  cd ${pkgbase}-${pkgver}/${pkgname}/build
+  DESTDIR="${pkgdir}" samu install
 }
 
 package_nemo-seahorse(){
@@ -119,8 +125,8 @@
   depends+=("${_seahorse_deps[@]}")
   optdepends=('cinnamon-translations: i18n')
 
-  cd ${pkgbase}/${pkgname}
-  meson install -C build --destdir="$pkgdir"
+  cd ${pkgbase}-${pkgver}/${pkgname}/build
+  DESTDIR="${pkgdir}" samu install
 }
 
 package_nemo-share(){
@@ -128,15 +134,15 @@
   depends+=(samba)
   optdepends=('cinnamon-translations: i18n')
 
-  cd ${pkgbase}/${pkgname}
-  meson install -C build --destdir="$pkgdir"
+  cd ${pkgbase}-${pkgver}/${pkgname}/build
+  DESTDIR="${pkgdir}" samu install
 }
 
 package_nemo-terminal(){
   pkgdesc="Embedded terminal window for Nemo"
   depends=(nemo-python vte3)
 
-  cd ${pkgbase}/${pkgname}
+  cd ${pkgbase}-${pkgver}/${pkgname}
   install -Dm644 src/nemo_terminal.py -t "${pkgdir}"/usr/share/nemo-python/extensions/
   install -Dm755 src/nemo-terminal-prefs.py "${pkgdir}"/usr/bin/nemo-terminal-prefs
   install -Dm644 src/org.nemo.extensions.nemo-terminal.gschema.xml -t "${pkgdir}"/usr/share/glib-2.0/schemas/


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -2,8 +2,6 @@
 clutter-gst
 clutter-gtk
 file-roller
-git
-glib2-devel
 gobject-introspection
 gtksourceview4
 imagemagick
@@ -18,6 +16,7 @@
 python-mutagen
 python-setuptools
 samba
+samurai
 vte3
 webkit2gtk-4.1
 xreader

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,10 +1,15 @@
+prepare() {
+cd $pkgbase-$pkgver
+rm -r ./*/debian # Fix build with newer setuptools
+}
 build() {
-cd ${pkgbase}
+cd ${pkgbase}-${pkgver}
 for _dir in "${pkgname[@]}"; do
 if [[ -f ${_dir}/meson.build ]]; then
-pushd ${_dir}
-arch-meson --libexecdir=lib/${_dir} . build
-meson compile -C build
+mkdir -p ${_dir}/build
+pushd ${_dir}/build
+artix-meson --libexecdir=lib/${_dir} ..
+samu
 popd
 fi
 done
