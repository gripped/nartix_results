--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,56 +1,47 @@
 
-pkgname=lxrandr
-pkgver=0.3.3
-pkgrel=2
+pkgbase=lxrandr
+pkgname=(lxrandr lxrandr-gtk3)
+pkgver=0.3.2
+pkgrel=3
 pkgdesc="Monitor configuration tool (part of LXDE)"
-arch=(x86_64)
-url='https://github.com/lxde/lxrandr'
-license=(GPL-2.0-or-later)
-groups=(lxde)
-depends=(
-  glib2
-  glibc
-  gtk3
-  xorg-xrandr
-)
-makedepends=(
-  git
-  intltool
-)
-conflicts=(lxrandr-gtk3)
-replaces=(lxrandr-gtk3)
-source=(
-  "git+https://github.com/lxde/lxrandr.git#tag=$pkgver"
-  lxrandr-notshowin.patch
-  lxrandr-x11-only.patch
-)
-b2sums=(
-  2a38a2c41f1e45e6bd0cee2e648c477222ec853a091ff410a358788440fa4ea4efe3fafa08aefc9e78e19dc725c1452694b18deb6704b04b05ace82f000c4524
-  3cdd9ad9503892f27bdfd8a7eff39617b1880b5dd57d66e3d9e831104388506789d6273658d629de8a6d09bd6d6aa83b8211ca4f52c1de1884df55d985e604ac
-  0b4e6e7c0960ce5b258c0c84372803da1e81f53edc6986d33d1013aabcf687d5f3f105ac0f1f9a6675ef9eb58995c9212ffe0ba3ae74d6062413bad3a2e1d39b
-)
-
-prepare() {
-  cd $pkgname
-
-  git apply -3 ../lxrandr-notshowin.patch
-
-  git apply -3 ../lxrandr-x11-only.patch
-
-  autoreconf -fi
-}
+arch=('x86_64')
+license=('GPL2')
+url="https://lxde.org/"
+depends=('gtk2' 'gtk3' 'xorg-xrandr')
+makedepends=('intltool')
+source=("https://downloads.sourceforge.net/lxde/$pkgbase-$pkgver.tar.xz")
+md5sums=('5101ab29d87fb2b56a5ec5bc8bc3f258')
+sha256sums=('8b5edfc9718061bc161fe51d388697cbaa819d6f8013ed24ba22f438e0dbc312')
 
 build() {
-  cd $pkgname
-  ./configure \
-    --prefix=/usr \
-    --sysconfdir=/etc \
-    --localstatedir=/var \
-    --enable-gtk3
+  [ -d gtk2 ] || cp -r $pkgbase-$pkgver gtk2
+  cd gtk2
+  ./configure --sysconfdir=/etc --prefix=/usr
+  make
+
+  cd "$srcdir"
+  [ -d gtk3 ] || cp -r $pkgbase-$pkgver gtk3
+  cd gtk3
+  ./configure --sysconfdir=/etc --prefix=/usr --enable-gtk3
   make
 }
 
-package() {
-  cd $pkgname
+package_lxrandr() {
+  groups=('lxde')
+  depends=('gtk2' 'xorg-xrandr')
+
+  cd gtk2
   make DESTDIR="$pkgdir" install
 }
+
+package_lxrandr-gtk3() {
+  groups=('lxde-gtk3')
+  pkgdesc+=' (GTK+ 3 version)'
+  depends=('gtk3' 'xorg-xrandr')
+  conflicts=('lxrandr')
+
+  cd gtk3
+  make DESTDIR="$pkgdir" install
+
+  echo 'X-AppStream-Ignore=true' >> "$pkgdir/usr/share/applications/$pkgbase.desktop"
+}


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,4 @@
-git
-glib2
-glibc
+gtk2
 gtk3
 intltool
 xorg-xrandr

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,15 +1,11 @@
-prepare() {
-cd $pkgname
-git apply -3 ../lxrandr-notshowin.patch
-git apply -3 ../lxrandr-x11-only.patch
-autoreconf -fi
-}
 build() {
-cd $pkgname
-./configure \
---prefix=/usr \
---sysconfdir=/etc \
---localstatedir=/var \
---enable-gtk3
+[ -d gtk2 ] || cp -r $pkgbase-$pkgver gtk2
+cd gtk2
+./configure --sysconfdir=/etc --prefix=/usr
+make
+cd "$srcdir"
+[ -d gtk3 ] || cp -r $pkgbase-$pkgver gtk3
+cd gtk3
+./configure --sysconfdir=/etc --prefix=/usr --enable-gtk3
 make
 }
