--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,26 +1,28 @@
 
 pkgname=puppet
-pkgver=7.30.0
-pkgrel=0
+pkgver=7.27.0
+pkgrel=3
 pkgdesc='Server automation framework and application'
 arch=('any')
 url='https://www.puppet.com/community/open-source'
-license=('Apache-2.0')
-depends=(ruby facter ruby-semantic_puppet ruby-augeas ruby-shadow ruby-concurrent ruby-multi_json ruby-puppet-resource_api ruby-deep_merge ruby-fast_gettext hiera ruby-locale ruby-scanf ruby-msgpack)
+license=('Apache')
+depends=(ruby facter ruby-semantic_puppet ruby-augeas ruby-shadow ruby-concurrent ruby-multi_json ruby-puppet-resource_api ruby-deep_merge ruby-fast_gettext hiera ruby-locale ruby-scanf  ruby-msgpack)
 makedepends=('git' 'rake' 'ruby-rdoc')
 checkdepends=('ruby-rspec' 'ruby-yard' 'ruby-rspec-its' 'ruby-webmock')
-backup=('etc/puppetlabs/puppet/puppet.conf' 'etc/puppetlabs/puppet/hiera.yaml')
+backup=('etc/puppetlabs/puppet/auth.conf'
+        'etc/puppetlabs/puppet/puppet.conf'
+        'etc/puppetlabs/puppet/hiera.yaml')
 install="$pkgname.install"
 
-_augeas_commit=245508727cdf301ea1efa5bc9214f55b90fb2b30 # v1.5.0
-_cron_commit=19eb78319c9ea3389b3601fef69faafcc250ab43 # v1.3.0
-_host_commit=d1ab552a1dd84e7c50821878a34f4110f9f67dac # v1.3.0
-_mount_commit=5f82312986e5e026c046d9f7c7f08c553553ae4a # v1.3.0
-_selinux_commit=4bdb318acb4a85521f2e5b2b9ffa9ca238e6885c # v1.4.0
-_sshkeys_commit=c7d5955e4d3cc2437195b2c9888ffe0fa7b6b02d # v2.5.0
-_yumrepo_commit=394ca00538994e4cedb479767527ce50a8d1a4ca # v2.1.0
-_zfs_commit=393b74c2817597015d4b9a0803f1df84dd0136aa # v1.5.0
-_zone_commit=1f0be5d14778af89b1adcdfbecda2be51f5aa01a # v1.2.0
+_augeas_commit=76e9ee2238036658286fca8c80b34a947214635d
+_cron_commit=1d605e813f62a45dcf7881e07f25ba05fef816a6
+_host_commit=d6b6393d559f889438fad1570883b0d6d5a381ab
+_mount_commit=404da7fa334c29aa387a14e12bdf4691504498ea
+_selinux_commit=4ad08a07350283766d32266c15617237a2562e1f
+_sshkeys_commit=bf6cf14c4dc27e2b1b4a7b1f32d57ff7ff3aeb8f
+_yumrepo_commit=fdda12d4b9475a6c3ba49d629c290ab6897b481e
+_zfs_commit=0af39efa1d812c926dd3dbd0ca63ef7ee8538583
+_zone_commit=1d227dcccaf34435fe5c8a7abf25c319e7d96e21
 
 source=("https://github.com/puppetlabs/puppet/archive/${pkgver}/puppet-${pkgver}.tar.gz"
         "augeas_core::git+https://github.com/puppetlabs/puppetlabs-augeas_core#commit=${_augeas_commit}"
@@ -32,17 +34,19 @@
         "yumrepo_core::git+https://github.com/puppetlabs/puppetlabs-yumrepo_core#commit=${_yumrepo_commit}"
         "zfs_core::git+https://github.com/puppetlabs/puppetlabs-zfs_core#commit=${_zfs_commit}"
         "zone_core::git+https://github.com/puppetlabs/puppetlabs-zone_core#commit=${_zone_commit}"
+        "artix.patch::https://github.com/puppetlabs/puppet/commit/b31d40b687c05ef6f6350b29f727144285b7aaab.patch"
         )
-sha512sums=('44dc5c790dafcbbf29a1f07845215f601247307b6134217ef90abd4e14a7ee917b6f554f1db7b327c3a68e04449f5d87d37ae72497d00c24560bc41219b2eb93'
-            '6ebc4603db2e702623070f1703d3e82a25c689b8c149c3328660ab43d74bfa49c5853aa14d267b48c9f91d12bd4a96579bcf3184f8881a57748763484892bf90'
-            '584093f64216becfeeb45514c9308c7df6819b39b93489790656f6e206c52abb7ed7077a9630c3f0aa2a6b9a6e57502f84cb1a862c03df325f2d97772773c4ce'
-            '2bcb93ea1d9d6312205aa1975b1e233414d7bd9c713fb2e59a04f2f3ca436b89dde5b3070b3899fc0a3b5259866c6f3039c06517041d56d73dba08926e7afbec'
-            '46e23741f1fcc141fcea45b07da95588eed14762b7f96794447d7f00f8f5e83750f6d23f9d9a80797e711783d30f79375578d91f4ea146d12ca2dee396073593'
-            'f3a2b4f1b40ab78ff8c8772be1b94b4a41465dfdad7e44c4cc4158d5852cca732ea7ca08c8d795c97eabc40c43e8145a509ea3aeced99485e6066b2f64555d68'
-            '9d458354a95206b998a148bf9b459c8a792051ddaf03672f0ea4c161721ac405c00523ecc065e6acfa610cb9b61e7940a1611b08bb2395c8d3d5a620c6c3662a'
-            '6203781a13142747827ee658db3e428ed97732abf356f88224a7f780bfa046ddafcdd69f1e551b3dbe1ad5b00d9a78248a1ba7e97c58fbac636500a95c5e3b7e'
-            '60ba6875d868b5bc2b0cc1f5bd1980508e8f6aa9dfed0053d75d78bcc45857e8801afcd608e7a1c13a56d86a2397f6c71feada3d878a7f34bbbde33ad3a19a3b'
-            '47fafc95cc9aba258cfd8919707366072a50f8a99b59f540c2531e1a367e8c9230070f8b9e7ae5c9ed4f536e05116234ed02ea431b6e48f61c82ce6dd92ebd9b')
+sha512sums=('f28b8ebb61a951a4e6176269e5fcf6066cc853b61a1f8c0dff974ab42914b34197a200800c37b71f5ab4d4b5e70929931d464c7a8abb1682e316d1150312f330'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            '2e12f6155acb3e065372cde456add7abf8335341a70d89ac3c3e28c370a4eecb1a062f7751cb4f05bf49225b31e70c882deb8fa3b7e31bd5d669a7e471242276')
 conflicts=('puppet5' 'puppet6')
 provides=('puppet')
 
@@ -50,6 +54,7 @@
   cd "${pkgname}-${pkgver}"
 
   sed -i 's_/opt/puppetlabs/puppet_/usr_' ext/systemd/puppet.service
+  patch --strip=1 --input=../artix.patch
 }
 
 check() {
@@ -71,7 +76,6 @@
   echo 'u puppet 52 "Puppet" /var/lib/puppet' > "$pkgdir"/usr/lib/sysusers.d/$pkgname.conf
   echo "d /run/puppetlabs 0755 $pkgname $pkgname -" > "$pkgdir"/usr/lib/tmpfiles.d/$pkgname.conf
 
-  install -Dm644 "${srcdir}/$pkgname-${pkgver}/ext/systemd/${pkgname}.service" "${pkgdir}/usr/lib/systemd/system/${pkgname}.service"
 
   install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
 


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,5 @@
 prepare() {
 cd "${pkgname}-${pkgver}"
 sed -i 's_/opt/puppetlabs/puppet_/usr_' ext/systemd/puppet.service
+patch --strip=1 --input=../artix.patch
 }
