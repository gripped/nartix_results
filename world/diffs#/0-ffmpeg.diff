--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=ffmpeg
-pkgver=8.0
-pkgrel=2
+pkgver=7.1.1
+pkgrel=5
 epoch=2
 pkgdesc='Complete solution to record, convert and stream audio and video'
 arch=(x86_64)
@@ -106,22 +106,34 @@
   libavfilter.so
   libavformat.so
   libavutil.so
+  libpostproc.so
   libswresample.so
   libswscale.so
 )
-_tag=a4044e04486d1136022498891088a90baf5b2775
+_tag=a1328e68877e12ab5a6e5d92a84aefa566783ea5
 source=(
   git+https://git.ffmpeg.org/ffmpeg.git?signed#tag=${_tag}
   0001-Add-av_stream_get_first_dts-for-Chromium.patch
-)
-b2sums=('7c71ec5f098e248b584fd3e28e7f648e5929ff7c5a6cfc5dcce8300a8a0b91de804cd92ef72963ef86dc57a73d15ab03aeab61d99d1872baad1163462730d7d6'
-        'e5f7b79f7731be9ee5a7280a9221fb531ac5a2d9820fc5870b68b0eabea667dfbe8f39f41c1e1763a4c84982896afaa54c81ff57847d203b70afafd726689e5d')
+  0002-avcodec-libsvtav1-unbreak-build-with-latest-svtav1.patch
+  fix_build_with_v4l2_1.30.patch
+)
+b2sums=('c7b1a56593f123de8e18b3b93c81dca4aff439f5701935cc1fe6316543e8c3256acd7f95b4a533eb7ba30e346fa13bf0ad5bff54b7822c088ef3939882416a7c'
+        'e5f7b79f7731be9ee5a7280a9221fb531ac5a2d9820fc5870b68b0eabea667dfbe8f39f41c1e1763a4c84982896afaa54c81ff57847d203b70afafd726689e5d'
+        'a32aeff68032a78d661011654bbdba138002833f7d17d23bba6f95479ca22bef5697eb9e7e4cb9e0b5140fc23eab3aab16fc60962d62809c3c02f890599a8332'
+        'a713b3a4243cc5de3867f7c210172c094f50bd614c0c8be2c99d6161b06d43d9183ae9c442ac3056bfe06c28419e276d129b1235471466eedd340bf0c4780acb')
 validpgpkeys=(DD1EC9E8DE085C629B3E1846B18E8928B3948D64) # Michael Niedermayer <michael@niedermayer.cc>
 
 prepare() {
   cd ffmpeg
 
+  patch -Np1 -i "${srcdir}/fix_build_with_v4l2_1.30.patch"
+
   git apply -3 ../0001-Add-av_stream_get_first_dts-for-Chromium.patch
+
+  git apply -3 ../0002-avcodec-libsvtav1-unbreak-build-with-latest-svtav1.patch
+
+  git cherry-pick -n bcfbf2bac8f9eeeedc407b40596f5c7aaa0d5b47
+  git cherry-pick -n d0facac679faf45d3356dff2e2cb382580d7a521
 }
 
 pkgver() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,10 @@
 prepare() {
 cd ffmpeg
+patch -Np1 -i "${srcdir}/fix_build_with_v4l2_1.30.patch"
 git apply -3 ../0001-Add-av_stream_get_first_dts-for-Chromium.patch
+git apply -3 ../0002-avcodec-libsvtav1-unbreak-build-with-latest-svtav1.patch
+git cherry-pick -n bcfbf2bac8f9eeeedc407b40596f5c7aaa0d5b47
+git cherry-pick -n d0facac679faf45d3356dff2e2cb382580d7a521
 }
 build() {
 export PKG_CONFIG_PATH='/usr/lib/mbedtls2/pkgconfig'
