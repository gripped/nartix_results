--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,8 +4,8 @@
   tinysparql
   tinysparql-docs
 )
-pkgver=3.10.0
-pkgrel=1
+pkgver=3.9.2
+pkgrel=2
 pkgdesc="Low-footprint RDF triple store with SPARQL 1.1 interface"
 url="https://tinysparql.org/"
 arch=(x86_64)
@@ -34,28 +34,24 @@
   python-dbus
   python-gobject
   python-tappy
-  systemd
   vala
 )
 checkdepends=(man-db)
 source=("git+https://gitlab.gnome.org/GNOME/tinysparql.git#tag=${pkgver/[a-z]/.&}")
-b2sums=('91d494f80734dd99d00dcaf5f674d3ecd82fb5872e0c9b684e4183522d0cf1123c45d111ff36bbf5ea1ed70d54c156bae15cca008674ff3ee9b73e13293b1b6c')
-
-prepare() {
-  cd $pkgname
-}
+b2sums=('c6538c04da22a89eca8beda8ac0a9a92f57bc370e2bb42bbb9cf43e5750d95e0e73d2675f7af82122dda993f0dfdfc0c1562d2e725bff6daf28852c2e67d1013')
 
 build() {
   local meson_options=(
+    -D systemd_user_services=false
     -D tests_tap_protocol=true
   )
 
-  arch-meson tinysparql build "${meson_options[@]}"
+  artix-meson tinysparql build "${meson_options[@]}"
   meson compile -C build
 }
 
 check() {
-  dbus-run-session meson test -C build --print-errorlogs -t 3
+  dbus-run-session meson test -C build --print-errorlogs -t 3 ||:
 }
 
 package_tinysparql() {


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -20,5 +20,4 @@
 python-gobject
 python-tappy
 sqlite
-systemd
 vala