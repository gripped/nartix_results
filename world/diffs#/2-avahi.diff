--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,22 +1,19 @@
 
 pkgname=avahi
-pkgver=0.9rc2
-pkgrel=1
+pkgver=0.8+r194+g3f79789
+pkgrel=3
 epoch=1
 pkgdesc="Service Discovery for Linux using mDNS/DNS-SD (compatible with Bonjour)"
 url="https://github.com/avahi/avahi"
-license=(LGPL-2.1-or-later)
+license=(LGPL)
 arch=(x86_64)
 depends=(
-  bash
   dbus
   expat
   gdbm
   glib2
-  glibc
   libcap
   libdaemon
-  systemd-libs
 )
 makedepends=(
   doxygen
@@ -28,7 +25,7 @@
   libevent
   python-dbus
   python-gobject
-  systemd
+  qt5-base
   xmltoman
 )
 optdepends=(
@@ -38,21 +35,24 @@
   'python-dbus: avahi-bookmarks, avahi-discover'
   'python-gobject: avahi-bookmarks, avahi-discover'
   'python-twisted: avahi-bookmarks'
+  'qt5-base: qt5 bindings'
 )
 provides=(
-  libavahi-{client,common,core,glib,gobject,libevent,ui-gtk3}.so
+  libavahi-{client,common,core,glib,gobject,libevent,qt5,ui-gtk3}.so
   libdns_sd.so
 )
 backup=(
   etc/avahi/{hosts,avahi-daemon.conf,avahi-{autoip,dnsconf}d.action}
   usr/lib/avahi/service-types.db
 )
+_commit=3f79789c484518f82c36ff59c0f45abe7e6580a2  # master
 source=(
-  "git+$url#tag=v${pkgver/[a-z]/-&}"
+  "git+https://github.com/avahi/avahi#commit=$_commit"
   0001-HACK-Install-fixes.patch
 )
-b2sums=('2513fcc933cc6010888d1b43254846b1bbc91fc83d257055c82006010b393339b4dcf4cba2cc514827d764b9d7f820bec5c0a266c253ad2c58698746e3f46709'
+b2sums=('SKIP'
         'a15b00c05cce3b6a1479d88b1393cd955a80c669fed03be5f624a8e8701f22fe327bbd42f7563a532ae8ebc39408f3aedfc982c42a2b6141ccc22af96f16293c')
+
 
 prepare() {
   cd avahi
@@ -64,19 +64,19 @@
 
 build() {
   local configure_options=(
+    --with-systemdsystemunitdir=no
+    --disable-libsystemd
     --prefix=/usr
     --sysconfdir=/etc
     --localstatedir=/var
     --sbindir=/usr/bin
     --runstatedir=/run
     --disable-mono
-    --disable-qt5
     --enable-compat-libdns_sd
     --with-autoipd-group=avahi
     --with-autoipd-user=avahi
     --with-avahi-priv-access-group=network
     --with-distro=archlinux
-    --with-systemdsystemunitdir=/usr/lib/systemd/system
     with_dbus_sys=/usr/share/dbus-1/system.d
   )
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
-bash
 dbus
 doxygen
 expat
@@ -6,7 +5,6 @@
 git
 glib2
 glib2-devel
-glibc
 gobject-introspection
 graphviz
 gtk3
@@ -16,6 +14,5 @@
 libevent
 python-dbus
 python-gobject
-systemd
-systemd-libs
+qt5-base
 xmltoman