--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,40 +1,33 @@
 
 pkgname=tinyproxy
 pkgver=1.11.2
-pkgrel=4
+pkgrel=3
 pkgdesc='A light-weight HTTP proxy daemon for POSIX operating systems'
 arch=('x86_64')
 url='https://tinyproxy.github.io/'
 license=('GPL-2.0-only')
-depends=('glibc')
+depends=('esysusers' 'etmpfiles' 'glibc')
 makedepends=('gperf')
 backup=('etc/tinyproxy/tinyproxy.conf')
 source=(
   "https://github.com/$pkgname/$pkgname/releases/download/$pkgver/$pkgname-$pkgver.tar.xz"
-  "https://github.com/$pkgname/$pkgname/commit/3c0fde94981b025271ffa1788ae425257841bf5a.patch"
-  'tinyproxy.sysusers'
-  'tinyproxy.tmpfiles'
-  'systemd.service'
+  'sysusers.conf'
+  'tmpfiles.conf'
   'config.patch'
 )
 sha512sums=('008e43b770f946965d5a3fbad1881859e30b66a3a4a97cf9982e63d81139da7a8f23937601b72f32276166cd170008cafec9231b616fc840f05cae3c1329be35'
-            '882853ef709ba27e6f7dc9dd796c95bebfb87675b77d82f8d985dc0b8dddd58fc2b7ec558339bbbadb1bb66f8144b93d64a3567d3a1c0ca92cab36408bda2127'
             'b9897dfd70fbf253928a8aad9f3aac8bbb27bdef153ca676019e80aa26dfebacf9f9e2c4ba31154d45fbc93208e03ba508cdd3b1aa23b9e9c560fff65948f510'
             '59d1efcc996e94ae684708ef06263c61f17680a776938a90ce145cf6f0243ed253d402cd886dab7c2c287f47dbc6f02f0e34904433e7b6756cfaa18a1b766b4e'
-            '615efd47f9484b1dde6f261be459bfcb40b531c439e0d9dfda4174c85bb36a93927762ac59d9063a4d3743c28970848ab5eb59d9b81a98dc5dd7f7277d92b4b0'
             'd291cdc3eddbab8de0aa69aa7fb2945f5ef683390533dda212e362dcb582900069b262361f46afe07b432536e8aa875b081a1c87451db3ef094b5229e3325252')
 b2sums=('ae8f1cc0fcfa3f2a6b239ad1f0f34bf21843cbf85613643b221359904e672d5c28c69bcb6b61f0244c5a3e6fd901b0c24488c3b80a0aa1f95b87ff90b175dc62'
-        '389dea87677683472c8d6e03fa566f725ec520b4f1a1596e3cc43d77eb7eeeab1cc98a2c6b531647e36db8b824454d840c63faa08616f7a2d6d84fb6d3f9b5d6'
         '40d0caea1da15f36348c8238704e5758dc3f307288d9de7bc7854980129053fbb0d93509b754d14aaf31fdddf4f8e16478c4f07574db46483c6c1fbd86c8d5d2'
         'a4e1cf0c8cbd78360175b8260c7d83885dfc9560a78faa6fc111f8611b6dd43c3cbf9fa62e60f8333cac4d0bededbe048c626d8a85d4f3c6c1bfa1ae249c599e'
-        '2aa2441d5e21a17eb05a52530b720c6cf2deabd31f45987262d71844a9c47abb1e07e7d4d26b942dff56868eb0354cf802e9996d4b29734e9da1ce1685616d22'
         '3e3181a5c626c6138307512d9817cc71d54bcb5f708ba5d38d07e956d898220350ee5442e7d3fbfbce70d2a54fdff04589c7b66aeb61ef353dc810e8d213d8f7')
 
 prepare() {
   cd "$pkgname-$pkgver"
 
   patch -p1 -i "$srcdir/config.patch"
-  patch -p1 -i "$srcdir/3c0fde94981b025271ffa1788ae425257841bf5a.patch"  # fixes CVE-2025-63938
 }
 
 build() {
@@ -51,9 +44,8 @@
 }
 
 package() {
-  install -vDm644 systemd.service "$pkgdir/usr/lib/systemd/system/$pkgname.service"
-  install -vDm644 tinyproxy.sysusers "$pkgdir/usr/lib/sysusers.d/$pkgname.conf"
-  install -vDm644 tinyproxy.tmpfiles "$pkgdir/usr/lib/tmpfiles.d/$pkgname.conf"
+  install -vDm644 sysusers.conf "$pkgdir/usr/lib/sysusers.d/$pkgname.conf"
+  install -vDm644 tmpfiles.conf "$pkgdir/usr/lib/tmpfiles.d/$pkgname.conf"
 
   cd "$pkgname-$pkgver"
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,2 +1,4 @@
+esysusers
+etmpfiles
 glibc
 gperf

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,6 @@
 prepare() {
 cd "$pkgname-$pkgver"
 patch -p1 -i "$srcdir/config.patch"
-patch -p1 -i "$srcdir/3c0fde94981b025271ffa1788ae425257841bf5a.patch"  # fixes CVE-2025-63938
 }
 build() {
 cd "$pkgname-$pkgver"
