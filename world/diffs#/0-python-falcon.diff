--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 
 _name=falcon
 pkgname=python-falcon
-pkgver=4.0.2
-pkgrel=1
+pkgver=3.1.3
+pkgrel=6
 pkgdesc="Web API framework for fast and reliable microservices, proxies, and app backends"
 arch=(x86_64)
 url="https://falconframework.org/"
@@ -51,12 +51,16 @@
   'python-pecan: for falcon-bench'
   'python-pprofile: for falcon-bench'
 )
-source=($_name-$pkgver.tar.gz::$_url/archive/refs/tags/$pkgver.tar.gz)
-sha512sums=('48f13834f9ba5829aa7050a6c86839533332c47282f12dc96d3d2f82a67f7a53878bf5f96b249bd79f5985eb1e2bde94ad246c2d0f3e1deebb4c04f364a23ac4')
-b2sums=('d4e8c353a340508404117a5ba18bb3ddbf383eadfd22bafbdd82b6515521103c4c33abe65a4c1f6c6eb9b506473ba238ff0526f91c825737b61b0d43fd672d35')
+source=($_name-$pkgver.tar.gz::$_url/archive/refs/tags/$pkgver.tar.gz
+        python-3.12.patch)
+sha512sums=('66c5f563b373eb2bc2576d64d2225fa98f4d9d80dc1c93f6831f17287738797ac1f08a1ba71f4a70e6bafad7a51f70fa6fbbee99ef521419ceedcf2d892108ee'
+            'c9b7eb3058df517e7880584292b9a46415f437c9cddff8ddab8d1bcb7cf0e2cc5ef8ebd6e4c5ad2dd243aefc02e4664a91a885cc15b7c97e75ba430bfa669e95')
+b2sums=('1013ec1faac8029f2bfd1182643f0a528ad363eccde26d97abeb907054377a3f08054a812db7349bbf6364304c81a3922de7241bfa5f85c9d3dc6ec7bbfb17ca'
+        '03514194c94db05976bb073eeb91286235cac28b6c6aeb2a67c05df48c076fad288011c9102ed68287341d053f32888f044ee0c85cb8f52c776c8776bce44697')
 
 prepare() {
   cd $_name-$pkgver
+  patch -p1 -i ../python-3.12.patch # Fix tests with python 3.12
 }
 
 build() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,6 @@
 prepare() {
 cd $_name-$pkgver
+patch -p1 -i ../python-3.12.patch # Fix tests with python 3.12
 }
 build() {
 cd $_name-$pkgver
