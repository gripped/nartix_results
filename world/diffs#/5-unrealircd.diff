--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,37 +1,24 @@
 
 pkgname=unrealircd
 pkgver=6.1.8.1
-pkgrel=2
+pkgrel=1
 pkgdesc="Open Source IRC Server"
 arch=('x86_64')
 url="https://www.unrealircd.org"
-license=('GPL-2.0-only')
-depends=('openssl' 'curl' 'c-ares' 'tre' 'pcre2' 'libnsl' 'argon2' 'libsodium' 'jansson')
-makedepends=('chrpath')
+license=('GPL2')
+depends=('openssl' 'curl' 'c-ares' 'tre' 'pcre2' 'libnsl' 'argon2' 'libsodium')
 conflicts=('ircd')
 provides=('ircd')
 backup=('etc/unrealircd/unrealircd.conf')
 install=unrealircd.install
 validpgpkeys=('1D2D2B03A0B68ED11D68A24BA7A21B0A108FF4A9')
 source=(https://www.unrealircd.org/unrealircd4/unrealircd-$pkgver.tar.gz{,.asc}
-	unrealircd.service
 	unrealircd.tmpfiles.d
 	unrealircd.sysusers.d)
 sha256sums=('f8f7a0b738614a527e2420ca3970bc735c6c5346dfa8dd9e2d5bd2eeaf992e93'
             'SKIP'
-            '5bb6016c379e6f040d8c625e3339c096ff66c4450aa024ca5b13ad3dec47c38e'
             '91b5e1d623b51ffd4734d73e35cead09be596460c41b9440406f92c9e2b4b9b1'
             '9e595176e63b301476982b1456d6ed065c479ff913b6743417ab8a9efdda0e3a')
-
-prepare() {
-  cd unrealircd-$pkgver
-  sed -i \
-    -e 's|$(INSTALL) -m 0700|$(INSTALL) -m 0755|g' \
-    -e 's|$(INSTALL) -m 0600|$(INSTALL) -m 0644|g' \
-    Makefile.in
-  find -type d -exec chmod ugo+rx {} \;
-  find -type f -exec chmod ugo+r {} \;
-}
 
 build() {
   cd unrealircd-$pkgver
@@ -50,9 +37,7 @@
     --with-scriptdir=/usr \
     --with-nick-history=2000 \
     --with-permissions=0644 \
-    --enable-dynamic-linking \
-    --enable-hardening \
-    ac_cv_pic="-fPIC -DPIC -shared -Wl,-z,relro -Wl,-z,now"
+    --enable-dynamic-linking
   make
 }
 
@@ -63,11 +48,7 @@
   mv "$pkgdir"/usr/unrealircd "$pkgdir"/etc/unrealircd/unrealircd
   cp "$pkgdir"/etc/unrealircd/examples/example.conf "$pkgdir"/etc/unrealircd/unrealircd.conf
   rm -rf "$pkgdir"/tmp
-  rm "$pkgdir"/usr/source
 
-  chrpath -d "$pkgdir"/usr/bin/{unrealircd,unrealircdctl}
-
-  install -Dm0644 "$srcdir"/unrealircd.service "$pkgdir"/usr/lib/systemd/system/unrealircd.service
   install -Dm0644 "$srcdir"/unrealircd.tmpfiles.d "$pkgdir"/usr/lib/tmpfiles.d/unrealircd.conf
   install -Dm0644 "$srcdir"/unrealircd.sysusers.d "$pkgdir"/usr/lib/sysusers.d/unrealircd.conf
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,8 +1,6 @@
 argon2
 c-ares
-chrpath
 curl
-jansson
 libnsl
 libsodium
 openssl

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,12 +1,3 @@
-prepare() {
-cd unrealircd-$pkgver
-sed -i \
--e 's|$(INSTALL) -m 0700|$(INSTALL) -m 0755|g' \
--e 's|$(INSTALL) -m 0600|$(INSTALL) -m 0644|g' \
-Makefile.in
-find -type d -exec chmod ugo+rx {} \;
-find -type f -exec chmod ugo+r {} \;
-}
 build() {
 cd unrealircd-$pkgver
 ./configure \
@@ -24,8 +15,6 @@
 --with-scriptdir=/usr \
 --with-nick-history=2000 \
 --with-permissions=0644 \
---enable-dynamic-linking \
---enable-hardening \
-ac_cv_pic="-fPIC -DPIC -shared -Wl,-z,relro -Wl,-z,now"
+--enable-dynamic-linking
 make
 }
