--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,8 @@
 
 pkgname=ruby-markly
-pkgver=0.13.1
-pkgrel=1
+pkgver=0.13.0
+_cmark_gfm_commit=766f161ef6d61019acf3a69f5099489e7d14cd49
+pkgrel=3
 pkgdesc='CommonMark parser and renderer. Written in C, wrapped in Ruby.'
 arch=(x86_64)
 url='https://github.com/ioquatix/markly'
@@ -10,7 +11,6 @@
   ruby
 )
 makedepends=(
-  git
   ruby-rdoc
 )
 checkdepends=(
@@ -23,16 +23,16 @@
   ruby-sus
 )
 options=(!emptydirs)
-source=(git+https://github.com/ioquatix/markly.git#tag=v$pkgver
-        git+https://github.com/github/cmark-gfm.git)
-sha256sums=('da50ba4e3f1e453bec6166467e7c9ca7f381bbc521aa3129d7921d0c6d327615'
-            'SKIP')
+source=(https://github.com/ioquatix/markly/archive/v$pkgver/$pkgname-$pkgver.tar.gz
+        https://github.com/github/cmark-gfm/archive/$_cmark_gfm_commit/cmark-gfm-$_cmark_gfm_commit.tar.gz)
+sha256sums=('46ebe03fe49eed65f2b63ddde9e056f0b7fc49cdf56e15e69bb13d5d4c4a787d'
+            'e95a1300cfe4c5b5ad68af6a77855df823b5d813334910a41991af0f70575d66')
 
 prepare() {
-  cd markly
-  git submodule init
-  git submodule set-url cmark-gfm ../cmark-gfm
-  git -c protocol.file.allow=always submodule update
+  cd markly-$pkgver
+
+  rmdir cmark-gfm
+  ln -s ../cmark-gfm-$_cmark_gfm_commit cmark-gfm
 
   sed --in-place --regexp-extended \
     --expression 's|~>|>=|g' \
@@ -47,7 +47,7 @@
 
 build() {
   local _gemdir="$(gem env gemdir)"
-  cd markly
+  cd markly-$pkgver
   gem build markly.gemspec
   gem install \
     --local \
@@ -86,11 +86,11 @@
 
 check() {
   local _gemdir="$(gem env gemdir)"
-  cd markly
+  cd markly-$pkgver
   GEM_HOME="tmp_install/$_gemdir" sus
 }
 
 package() {
-  cd markly
+  cd markly-$pkgver
   cp -a tmp_install/* "$pkgdir"/
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,3 +1,2 @@
-git
 ruby
 ruby-rdoc

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,7 @@
 prepare() {
-cd markly
-git submodule init
-git submodule set-url cmark-gfm ../cmark-gfm
-git -c protocol.file.allow=always submodule update
+cd markly-$pkgver
+rmdir cmark-gfm
+ln -s ../cmark-gfm-$_cmark_gfm_commit cmark-gfm
 sed --in-place --regexp-extended \
 --expression 's|~>|>=|g' \
 --expression '/signing_key/d' \
@@ -14,7 +13,7 @@
 }
 build() {
 local _gemdir="$(gem env gemdir)"
-cd markly
+cd markly-$pkgver
 gem build markly.gemspec
 gem install \
 --local \
