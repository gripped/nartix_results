--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=wine-staging
-pkgver=10.18
-pkgrel=1
+pkgver=10.17
+pkgrel=2
 
 _pkgbasever=${pkgver/rc/-rc}
 _winever=$_pkgbasever
@@ -10,12 +10,14 @@
         "git+https://gitlab.winehq.org/wine/wine-staging.git#tag=v$_pkgbasever"
         30-win32-aliases.conf
         wine-binfmt.conf
-        ntsync.conf)
-sha512sums=('e79fd61a4ebc7166fcfec5da5485e545dad2cf94d5985124f6b0ce154261ef47d40a0207e34e02b28c1fddf7e819c34cae5fb3c150f2574e78c9213436386c4c'
-            '7dfc1c77e7a9fdd0008279825449601f8e0c6014c314f97ac4b13a7d5a4e79213033845628e46c9c96aa77099267e3962e24d0086a9e2d531d961b09e5f7ce32'
+        ntsync.conf
+        0001-ntdll-Call-cache_inproc_sync-inside-the-lock.patch)
+sha512sums=('5454ec119dbd12eab8308e96df1289ec34eaa0febb43cf0042eba6c30ece1e60303b5905b70a63bb84a969239e270fd91dead606842c4256a5afa2441ceba5ec'
+            'd0e3bab13d1e8c86dd1ba45cc3a011880408ce5e22c4c14675d2510487ec6592fd9597836012c369ab3bb0993d2deb29d5ec4b0c90e8126e9eac7f3ae1b768d1'
             '6e54ece7ec7022b3c9d94ad64bdf1017338da16c618966e8baf398e6f18f80f7b0576edf1d1da47ed77b96d577e4cbb2bb0156b0b11c183a0accf22654b0a2bb'
             'bdde7ae015d8a98ba55e84b86dc05aca1d4f8de85be7e4bd6187054bfe4ac83b5a20538945b63fb073caab78022141e9545685e4e3698c97ff173cf30859e285'
-            'ac2bd634838ffe6b90f2637e229013f0993fc1013271dbeefd216dc262a8bb79e4a5ce15a75cbfcb0c3b521d32f4ebe1ed25a6b066b99cc327b60bd6d7212e6f')
+            'ac2bd634838ffe6b90f2637e229013f0993fc1013271dbeefd216dc262a8bb79e4a5ce15a75cbfcb0c3b521d32f4ebe1ed25a6b066b99cc327b60bd6d7212e6f'
+            'a0c53fb04e9dcc3b1b73789a7fcb0ead87bd21c39c366988d3de2e816a972aabdb58f7998397d5c12c62282a3d2c570d1088a2996432d4f8c0bf294434872ca7')
 validpgpkeys=(5AC1A08B03BD7A313E0A955AF5E6E9EEB9461DD7
               DA23579A74D4AD9AF9D3F945CEFAC8EAAF17519D)
 
@@ -24,6 +26,7 @@
 arch=(x86_64)
 options=(!lto)
 license=(LGPL-2.1-or-later)
+CFLAGS+=" -Wno-error=incompatible-pointer-types -fPIC"
 depends=(
   attr
   desktop-file-utils
@@ -39,6 +42,7 @@
   libxrandr
   wayland
 )
+CFLAGS+=" -Wno-error=incompatible-pointer-types -fPIC"
 makedepends=(
   alsa-lib
   ffmpeg
@@ -67,6 +71,7 @@
   vulkan-headers
   vulkan-icd-loader
 )
+CFLAGS+=" -Wno-error=incompatible-pointer-types -fPIC"
 optdepends=(
   alsa-lib
   alsa-plugins
@@ -106,6 +111,8 @@
 
   cd wine
   ../wine-staging/staging/patchinstall.py --backend=git-apply --all
+
+  patch -Np1 < ${srcdir}/0001-ntdll-Call-cache_inproc_sync-inside-the-lock.patch
 }
 
 build() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,6 +3,7 @@
 mkdir $pkgname-64-build
 cd wine
 ../wine-staging/staging/patchinstall.py --backend=git-apply --all
+patch -Np1 < ${srcdir}/0001-ntdll-Call-cache_inproc_sync-inside-the-lock.patch
 }
 build() {
 export CROSSCFLAGS="-O2 -pipe -g"
