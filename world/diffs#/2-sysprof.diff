--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,8 +4,8 @@
   sysprof
   libsysprof-capture
 )
-pkgver=48.1
-pkgrel=1
+pkgver=48.0
+pkgrel=7
 pkgdesc="Kernel based performance profiler"
 url="https://apps.gnome.org/Sysprof/"
 license=(GPL-3.0-or-later)
@@ -26,7 +26,6 @@
   libunwind
   pango
   polkit
-  systemd-libs
 )
 makedepends=(
   git
@@ -36,10 +35,8 @@
 )
 source=(
   "git+https://gitlab.gnome.org/GNOME/sysprof.git#tag=${pkgver/[a-z]/.&}"
-  0001-libsysprof-capture-Disallow-unloading-the-capture-li.patch
 )
-b2sums=('725decd5bfc4c5313040308b7ea3f18d4f34ae347b793d7af00644464520db1481fc6f348ad291d1a8e51f6a1d4ff994a6dc5ad2c430ccfd4eb27c24bcdac512'
-        '5f3b9e5524dd898b3c42683f1785845f7eab23e64ef0870a756dd501b202112884f2c92b82c9c166b4c300445fe76ae1ce7f9a242671236942439e0f0094d3ee')
+b2sums=('87dd3a47350b0e2d2d15072fcaef53578e4614b9c14a1f4ac3ff83233538adbc3486b5550500231b91ce267e99c0f0a96820878dadf280909fe0bfc8e311a3a8')
 
 prepare() {
   cd sysprof
@@ -53,14 +50,12 @@
   git cherry-pick -n 660953d3d77825c2e68881a9bb409e267f4c13f7
 
   git cherry-pick -n 300bf1a13b1ab13330152307454cdbcb52c7178d
-
-  git apply -3 ../0001-libsysprof-capture-Disallow-unloading-the-capture-li.patch
 }
 
 build() {
   CFLAGS+=" -ffat-lto-objects"
 
-  arch-meson sysprof build
+  artix-meson sysprof build -Dsystemdunitdir=/usr/lib/systemd
   meson compile -C build
 }
 
@@ -91,6 +86,8 @@
   _pick capture usr/include/sysprof-*/sysprof-{address,capture,clock,collector,macros}.h
   _pick capture usr/include/sysprof-*/sysprof-{platform,version,version-macros}.h
   _pick capture usr/include/sysprof-*/sysprof-capture-{condition,cursor,reader,types,writer}.h
+
+  rm -r $pkgdir/usr/lib/systemd
 }
 
 package_libsysprof-capture() {


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -18,5 +18,4 @@
 meson
 pango
 polkit
-systemd-libs
 yelp-tools