--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,32 +1,22 @@
 
 pkgname=zxing-cpp
-pkgver=3.0.1
-pkgrel=1
+pkgver=2.3.0
+pkgrel=5
 pkgdesc='An open-source, multi-format linear/matrix barcode image processing library implemented in C++'
 arch=(x86_64)
 url='https://github.com/zxing-cpp/zxing-cpp'
 license=(Apache-2.0)
 depends=(gcc-libs
-         glibc
-         zint)
+         glibc)
 makedepends=(cmake
-             git
-             libpng
-             opencv
-             qt6-base
-             qt6-declarative
-             qt6-multimedia
-             stb)
+             git)
 checkdepends=(gtest)
-optdepends=('qt6-multimedia: for ZXingQtCamReader')
-source=(git+https://github.com/zxing-cpp/zxing-cpp#tag=v$pkgver
-        system-stb.patch)
-sha256sums=('84c9513e0fb8127b172ddb85c4c15e5556e6facc2eeed7ebf36346f77214ee79'
-            'cc83c917902c3551ff0a4b7752baf895044d40901eba74678aeef19e236266f1')
+source=(git+https://github.com/zxing-cpp/zxing-cpp#tag=v$pkgver)
+sha256sums=('1042010b960c29e6d7c5cd99e8c2a887cf84febb918abeb0405bcf12aaf8543c')
 
 prepare() {
   cd $pkgname
-  patch -p1 -i ../system-stb.patch # Do not download stb at build time
+  git cherry-pick -n 82806f5f92173b8cb4e1e9bee13a2d07a33fb69f # Fix improper use of NDEBUG
 }
 
 build() {
@@ -34,11 +24,8 @@
     -DCMAKE_INSTALL_PREFIX=/usr \
     -DCMAKE_BUILD_TYPE=None \
     -DZXING_EXAMPLES=ON \
-    -DZXING_EXAMPLES_QT=ON \
     -DZXING_UNIT_TESTS=ON \
-    -DZXING_C_API=ON \
-    -DZXING_USE_BUNDLED_ZINT=OFF \
-    -DZXING_WRITERS=BOTH
+    -DZXING_C_API=ON
   cmake --build build
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -2,10 +2,3 @@
 gcc-libs
 git
 glibc
-libpng
-opencv
-qt6-base
-qt6-declarative
-qt6-multimedia
-stb
-zint

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,16 +1,13 @@
 prepare() {
 cd $pkgname
-patch -p1 -i ../system-stb.patch # Do not download stb at build time
+git cherry-pick -n 82806f5f92173b8cb4e1e9bee13a2d07a33fb69f # Fix improper use of NDEBUG
 }
 build() {
 cmake -B build -S $pkgname \
 -DCMAKE_INSTALL_PREFIX=/usr \
 -DCMAKE_BUILD_TYPE=None \
 -DZXING_EXAMPLES=ON \
--DZXING_EXAMPLES_QT=ON \
 -DZXING_UNIT_TESTS=ON \
--DZXING_C_API=ON \
--DZXING_USE_BUNDLED_ZINT=OFF \
--DZXING_WRITERS=BOTH
+-DZXING_C_API=ON
 cmake --build build
 }
