--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,9 +2,9 @@
 pkgbase=wxwidgets
 pkgname=(wxwidgets-common
          wxwidgets-gtk3
-         wxwidgets-qt5)
-pkgver=3.2.8.1
-pkgrel=2
+         wxwidgets-qt)
+pkgver=3.3.0
+pkgrel=1
 arch=(x86_64)
 url='https://wxwidgets.org'
 license=(custom:wxWindows)
@@ -12,21 +12,38 @@
              git
              glu
              gst-plugins-base
+             gtk4
              libmspack
              libnotify
              nanosvg
-             qt5-base
+             qt6-base
              sdl2
              webkit2gtk-4.1)
-source=(git+https://github.com/wxWidgets/wxWidgets#tag=v$pkgver)
-sha256sums=('11bfcbbbb10515d9fd31f52477166bc37725e704dc7f3baf6cad30b92e1defe8')
+source=(git+https://github.com/wxWidgets/wxWidgets#tag=v$pkgver
+        git+https://github.com/wxWidgets/scintilla
+        git+https://github.com/wxWidgets/lexilla
+        qt-6.9.patch)
+sha256sums=('3826b01bddf3fc80bcb6b4b942968f6c028d0699a661e86c14dd06d320998e44'
+            'SKIP'
+            'SKIP'
+            '9b2af48ed8beee7de1d2c1fc697e6442ad9347b4b1c81da6c7ff629f3dbe8f39')
+
+prepare() {
+  cd wxWidgets
+  git submodule init
+  git submodule set-url src/stc/scintilla "$srcdir"/scintilla
+  git submodule set-url src/stc/lexilla "$srcdir"/lexilla
+  git -c protocol.file.allow=always submodule update src/stc/scintilla src/stc/lexilla
+
+  patch -p1 -i ../qt-6.9.patch
+}
 
 build() {
   cmake -B build-base -S wxWidgets \
     -DCMAKE_INSTALL_PREFIX=/usr \
     -DCMAKE_BUILD_TYPE=None \
     -DwxUSE_GUI=OFF \
-    -DwxUSE_REGEX=sys \
+    -DwxUSE_REGEX=sys\
     -DwxUSE_ZLIB=sys \
     -DwxUSE_EXPAT=sys \
     -DwxUSE_LIBJPEG=sys \
@@ -43,7 +60,7 @@
     -DCMAKE_BUILD_TYPE=None \
     -DwxBUILD_TOOLKIT=gtk3 \
     -DwxUSE_OPENGL=ON \
-    -DwxUSE_REGEX=sys \
+    -DwxUSE_REGEX=sys\
     -DwxUSE_ZLIB=sys \
     -DwxUSE_EXPAT=sys \
     -DwxUSE_LIBJPEG=sys \
@@ -57,7 +74,7 @@
   cmake --build build-gtk3
 
 
-  cmake -B build-qt5 -S wxWidgets \
+  cmake -B build-qt -S wxWidgets \
     -DCMAKE_INSTALL_PREFIX=/usr \
     -DCMAKE_BUILD_TYPE=None \
     -DwxBUILD_TOOLKIT=qt \
@@ -72,24 +89,28 @@
     -DwxUSE_NANOSVG=sys \
     -DwxUSE_LIBMSPACK=ON \
     -DwxUSE_PRIVATE_FONTS=ON
-  cmake --build build-qt5
+  cmake --build build-qt
+
+  cd wxWidgets
+  ./configure --prefix=/usr --disable-tests
+  make -C locale allmo
 }
 
 package_wxwidgets-common() {
   pkgdesc='Common libraries and headers for wxwidgets'
-  depends=(curl
+  depends=(bash
+           curl
            gcc-libs
            glib2
            glibc
            expat
-           libsecret
            pcre2
            xz
            zlib)
   conflicts=(wxgtk-common)
   replaces=(wxgtk-common)
 
-  DESTDIR="$pkgdir" cmake --install build-qt5
+  DESTDIR="$pkgdir" cmake --install build-qt
   DESTDIR="$pkgdir" cmake --install build-gtk3
   DESTDIR="$pkgdir" cmake --install build-base
   rm -r "$pkgdir"/usr/lib/{cmake,wx/{3*,include,config/{gtk*,qt*}},libwx_{gtk,qt}*}
@@ -101,8 +122,7 @@
 
 package_wxwidgets-gtk3() {
   pkgdesc='GTK+3 implementation of wxWidgets API for GUI'
-  depends=(bash
-           cairo
+  depends=(cairo
            fontconfig
            gcc-libs
            gdk-pixbuf2
@@ -116,8 +136,8 @@
            libnotify
            libmspack
            libpng
-           libsm # cmake target
            libtiff
+           libwebp
            libx11
            libxkbcommon
            libxtst
@@ -134,8 +154,8 @@
 }
 
 
-package_wxwidgets-qt5() {
-  pkgdesc='Qt5 implementation of wxWidgets API for GUI'
+package_wxwidgets-qt() {
+  pkgdesc='Qt6 implementation of wxWidgets API for GUI'
   depends=(bash
            gcc-libs
            glibc
@@ -144,12 +164,12 @@
            libmspack
            libpng
            libtiff
-           qt5-base
+           libwebp
+           qt6-base
            sdl2
            wxwidgets-common)
-  provides=(wxwidgets)
 
-  DESTDIR="$pkgdir" cmake --install build-qt5
+  DESTDIR="$pkgdir" cmake --install build-qt
   rm -r "$pkgdir"/usr/{include,lib/libwx_base*,bin/wxrc*,share}
   mv "$pkgdir"/usr/bin/wx-config{,-qt} # Conflicts with wx-gtk3
   mv "$pkgdir"/usr/lib/cmake/wxWidgets{,Qt}


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -14,21 +14,21 @@
 gst-plugins-base
 gstreamer
 gtk3
+gtk4
 libglvnd
 libjpeg-turbo
 libmspack
 libnotify
 libpng
-libsecret
-libsm
 libtiff
+libwebp
 libx11
 libxkbcommon
 libxtst
 nanosvg
 pango
 pcre2
-qt5-base
+qt6-base
 sdl2
 wayland
 webkit2gtk-4.1

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,9 +1,17 @@
+prepare() {
+cd wxWidgets
+git submodule init
+git submodule set-url src/stc/scintilla "$srcdir"/scintilla
+git submodule set-url src/stc/lexilla "$srcdir"/lexilla
+git -c protocol.file.allow=always submodule update src/stc/scintilla src/stc/lexilla
+patch -p1 -i ../qt-6.9.patch
+}
 build() {
 cmake -B build-base -S wxWidgets \
 -DCMAKE_INSTALL_PREFIX=/usr \
 -DCMAKE_BUILD_TYPE=None \
 -DwxUSE_GUI=OFF \
--DwxUSE_REGEX=sys \
+-DwxUSE_REGEX=sys\
 -DwxUSE_ZLIB=sys \
 -DwxUSE_EXPAT=sys \
 -DwxUSE_LIBJPEG=sys \
@@ -19,7 +27,7 @@
 -DCMAKE_BUILD_TYPE=None \
 -DwxBUILD_TOOLKIT=gtk3 \
 -DwxUSE_OPENGL=ON \
--DwxUSE_REGEX=sys \
+-DwxUSE_REGEX=sys\
 -DwxUSE_ZLIB=sys \
 -DwxUSE_EXPAT=sys \
 -DwxUSE_LIBJPEG=sys \
@@ -31,7 +39,7 @@
 -DwxUSE_PRIVATE_FONTS=ON \
 -DwxUSE_GTKPRINT=ON
 cmake --build build-gtk3
-cmake -B build-qt5 -S wxWidgets \
+cmake -B build-qt -S wxWidgets \
 -DCMAKE_INSTALL_PREFIX=/usr \
 -DCMAKE_BUILD_TYPE=None \
 -DwxBUILD_TOOLKIT=qt \
@@ -46,5 +54,8 @@
 -DwxUSE_NANOSVG=sys \
 -DwxUSE_LIBMSPACK=ON \
 -DwxUSE_PRIVATE_FONTS=ON
-cmake --build build-qt5
+cmake --build build-qt
+cd wxWidgets
+./configure --prefix=/usr --disable-tests
+make -C locale allmo
 }
