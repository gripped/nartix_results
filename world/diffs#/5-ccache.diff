--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,29 +1,13 @@
 
 pkgname=ccache
 pkgver=4.10.2
-pkgrel=3
+pkgrel=2.1
 pkgdesc='Compiler cache that speeds up recompilation by caching previous compilations'
 url='https://ccache.dev/'
 arch=('x86_64')
 license=('GPL-3.0-or-later')
-depends=(
-  'fmt'
-  'gcc-libs'
-  'glibc'
-  'hiredis'
-  'libblake3'
-  'libxxhash.so'
-  'libzstd.so'
-  'xxhash'
-  'zstd'
-)
-makedepends=(
-  'asciidoctor'
-  'cmake'
-  'perl'
-  'tl-expected'
-)
-checkdepends=('doctest')
+depends=('fmt' 'glibc' 'gcc-libs' 'hiredis' 'zstd' 'libzstd.so')
+makedepends=('cmake' 'asciidoctor' 'perl')
 source=(https://github.com/ccache/ccache/releases/download/v${pkgver}/ccache-${pkgver}.tar.xz{,.asc})
 sha512sums=('3815c71d7266c32839acb306763268018acc58b3bbbd9ec79fc101e4217c1720d2ad2f01645bf69168c1c61d27700b6f3bb755cfa82689cca69824f015653f3c'
             'SKIP')
@@ -39,13 +23,12 @@
     -Wno-dev \
     -B build \
     -S .
-  cmake --build build
-  cmake --build build --target doc
+  make VERBOSE=1 -C build
 }
 
 check() {
   cd ${pkgname}-${pkgver}
-  ctest --test-dir build --output-on-failure
+  make VERBOSE=1 check -C build
 }
 
 package() {
@@ -54,16 +37,16 @@
   make DESTDIR="${pkgdir}" install -C build
   make DESTDIR="${pkgdir}" install -C build/doc
 
-  install -vDm 644 doc/*.md doc/*.adoc -t "${pkgdir}/usr/share/doc/${pkgname}"
+  install -Dm 644 doc/*.md doc/*.adoc -t "${pkgdir}/usr/share/doc/${pkgname}"
 
-  install -vd "${pkgdir}/usr/lib/ccache/bin"
+  install -d "${pkgdir}/usr/lib/ccache/bin"
   local _prog
   for _prog in gcc g++ c++; do
-    ln -vs /usr/bin/ccache "${pkgdir}/usr/lib/ccache/bin/$_prog"
-    ln -vs /usr/bin/ccache "${pkgdir}/usr/lib/ccache/bin/${CHOST}-$_prog"
+    ln -s /usr/bin/ccache "${pkgdir}/usr/lib/ccache/bin/$_prog"
+    ln -s /usr/bin/ccache "${pkgdir}/usr/lib/ccache/bin/${CHOST}-$_prog"
   done
   for _prog in cc clang clang++; do
-    ln -vs /usr/bin/ccache "${pkgdir}/usr/lib/ccache/bin/$_prog"
+    ln -s /usr/bin/ccache "${pkgdir}/usr/lib/ccache/bin/$_prog"
   done
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -4,10 +4,6 @@
 gcc-libs
 glibc
 hiredis
-libblake3
-libxxhash.so
 libzstd.so
 perl
-tl-expected
-xxhash
 zstd

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -6,6 +6,5 @@
 -Wno-dev \
 -B build \
 -S .
-cmake --build build
-cmake --build build --target doc
+make VERBOSE=1 -C build
 }
