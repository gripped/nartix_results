--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,43 +1,42 @@
 
 pkgname=python-mediafile
-pkgver=0.14.0
+pkgver=0.13.0
 pkgrel=1
 pkgdesc='Elegant audio file tagging'
 arch=(any)
-url='https://github.com/beetbox/mediafile'
+url=https://github.com/beetbox/mediafile
 license=(MIT)
 depends=(
-  python
   python-mutagen
   python-filetype
 )
 makedepends=(
   git
   python-build
-  python-poetry-core
+  python-flit-core
   python-installer
 )
-source=("$pkgname::git+https://github.com/beetbox/mediafile#tag=v$pkgver")
-sha512sums=('5c6e2f462b121eee241ca5883e245c90c44777c1362271b18a03460e76f3ff7ce460aeb85f2ab7919aa69be09fb133a61cd043e1cdcc925b1804668f3bfb6b6e')
-b2sums=('a72e18cc94dd393b245c2bb966d7e2f370a091575920027949a7f4973b189deb036032b19dee6027fde7a28e66ab7e183e248ed7a8da91c26544a9e8b19da8fb')
+_tag=e1de3640e253ff88f00e8495d3b7626ff6b3e2b8
+source=(git+https://github.com/beetbox/mediafile.git#tag=${_tag})
+sha256sums=('8b9a86f0ca50f95dda715f475b03cfe081db48648fe58faaff0e65de429370e8')
+
+pkgver() {
+  cd mediafile
+  git describe --tags | sed 's/^v//'
+}
 
 build() {
-  cd "$pkgname"
-
+  cd mediafile
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd "$pkgname"
-
+  cd mediafile
   python -m unittest discover -vs .
 }
 
 package() {
-  cd "$pkgname"
-
-  python -m installer --destdir="$pkgdir" dist/*.whl
-
-  install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE
+  python -m installer --destdir="${pkgdir}" mediafile/dist/*.whl
+  install -Dm 644 mediafile/LICENSE -t "${pkgdir}"/usr/share/licenses/python-mediafile
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,7 +1,6 @@
 git
-python
 python-build
 python-filetype
+python-flit-core
 python-installer
 python-mutagen
-python-poetry-core

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd "$pkgname"
+cd mediafile
 python -m build --wheel --no-isolation
 }
