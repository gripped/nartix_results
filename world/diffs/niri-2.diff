--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=niri
 pkgver=25.11
-pkgrel=1
+pkgrel=1.1
 pkgdesc="A scrollable-tiling Wayland compositor"
 arch=(x86_64)
 url="https://github.com/YaLTeR/niri"
@@ -19,7 +19,6 @@
   pango
   pixman
   seatd
-  systemd-libs
   xdg-desktop-portal-impl
 )
 makedepends=(
@@ -54,7 +53,8 @@
   cd $pkgname-$pkgver
   export NIRI_BUILD_COMMIT="$(zcat ../$pkgname-$pkgver.tar.gz | git get-tar-commit-id | cut -c1-7)"
   CFLAGS+=(' -ffat-lto-objects')
-  cargo build --frozen --release --features default
+  cargo build --frozen --release --no-default-features --features "dbus xdp-gnome-screencast"
+  sed -i "s/niri-session/dbus-launch --exit-with-session niri --session/" resources/$pkgname.desktop
 
   for shell in bash fish zsh; do
     cargo run --frozen --release --bin niri -- \
@@ -72,7 +72,6 @@
 package() {
   cd $pkgname-$pkgver
   install -vDm 755 {target/release/$pkgname,resources/$pkgname-session} -t "$pkgdir/usr/bin/"
-  install -vDm 644 resources/$pkgname{.service,-shutdown.target} -t "$pkgdir/usr/lib/systemd/user/"
   install -vDm 644 resources/$pkgname.desktop -t "$pkgdir/usr/share/wayland-sessions/"
   install -vDm 644 resources/$pkgname-portals.conf -t "$pkgdir/usr/share/xdg-desktop-portal/"
   install -vDm 644 resources/default-config.kdl README.md -t "$pkgdir/usr/share/doc/$pkgname/"


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -13,5 +13,4 @@
 pixman
 rust
 seatd
-systemd-libs
 xdg-desktop-portal-impl