--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,28 +1,37 @@
 
 pkgname=python-os-client-config
-pkgver=2.3.0
-pkgrel=1
+pkgver=2.1.0
+pkgrel=10
 arch=('any')
 pkgdesc='OpenStack Client Configuation Library'
 url='https://github.com/openstack/os-client-config'
 license=('Apache')
-depends=('python-pbr' 'python-openstacksdk')
-makedepends=('git' 'python-build' 'python-installer')
-checkdepends=('python-stestr' 'python-oslotest' 'python-jsonschema' 'python-glanceclient')
-source=("git+https://github.com/openstack/os-client-config.git#tag=$pkgver")
-sha512sums=('4e2ab21bf10661d6d0969ff82c4ba7be0318387ae6e143e8c023a84614047ffd8f1322de1f8fcf0976179f7dcb4553e96a126e8b323de19875178fb72817906f')
+depends=('python-openstacksdk')
+makedepends=('python-setuptools')
+checkdepends=('python-stestr' 'python-oslotest' 'python-jsonschema'
+              'python-glanceclient')
+source=("$pkgname-$pkgver.tar.gz::https://github.com/openstack/os-client-config/archive/$pkgver.tar.gz")
+sha512sums=('f019b5fa44a587bf853a931c9ee86a7e83c5f0d0319f2d5f75cfd34ce947f9961a7905e80df0c06f8234c9e36dc13bfcf039264243b57dd76874bfb3fd55d7bd')
+
+export PBR_VERSION=$pkgver
+
+prepare() {
+  sed -i "/^packages =/i package_data = os_client_config = *.json */*.json" os-client-config-$pkgver/setup.cfg
+
+  sed -i 's/assertItemsEqual/assertCountEqual/' os-client-config-$pkgver/os_client_config/tests/test_config.py
+}
 
 build() {
-  cd os-client-config
-  python -m build --wheel --no-isolation
+  cd os-client-config-$pkgver
+  python setup.py build
 }
 
 check() {
-  cd os-client-config
+  cd os-client-config-$pkgver
   stestr run
 }
 
 package() {
-  cd os-client-config
-  python -m installer --destdir "$pkgdir" dist/*.whl
+  cd os-client-config-$pkgver
+  python setup.py install --root "$pkgdir" --optimize=1
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,5 +1,2 @@
-git
-python-build
-python-installer
 python-openstacksdk
-python-pbr
+python-setuptools

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,8 @@
+prepare() {
+sed -i "/^packages =/i package_data = os_client_config = *.json */*.json" os-client-config-$pkgver/setup.cfg
+sed -i 's/assertItemsEqual/assertCountEqual/' os-client-config-$pkgver/os_client_config/tests/test_config.py
+}
 build() {
-cd os-client-config
-python -m build --wheel --no-isolation
+cd os-client-config-$pkgver
+python setup.py build
 }
