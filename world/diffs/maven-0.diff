--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,16 +1,16 @@
 
 pkgname=maven
-pkgver=3.9.6
-pkgrel=2
+pkgver=3.8.7
+pkgrel=1
 pkgdesc='Java project management and project comprehension tool'
 url='https://maven.apache.org'
 arch=('any')
-license=('Apache-2.0')
+license=('APACHE')
 depends=('java-environment>=8' 'bash' 'procps-ng')
-makedepends=('maven' 'java-environment=21')
-backup=('usr/share/java/maven/conf/settings.xml')
-source=(https://downloads.apache.org/maven/maven-3/${pkgver}/source/apache-maven-${pkgver}-src.tar.gz{,.asc}
-        https://downloads.apache.org/maven/maven-3/${pkgver}/binaries/apache-maven-${pkgver}-bin.tar.gz{,.asc,.sha512}
+makedepends=('maven' 'java-environment=8')
+backup=('opt/maven/conf/settings.xml')
+source=(https://downloads.apache.org/maven/maven-3/${pkgver}/source/apache-maven-${pkgver}-src.tar.gz
+        https://downloads.apache.org/maven/maven-3/${pkgver}/binaries/apache-maven-${pkgver}-bin.tar.gz{,.sha512}
         maven.sh)
 noextract=(apache-maven-${pkgver}-bin.tar.gz)
 validpgpkeys=(
@@ -19,14 +19,11 @@
   'BBE7232D7991050B54C8EA0ADC08637CA615D22C' # Enrico Olivelli <eolivelli@apache.org>
   'B02137D875D833D9B23392ECAE5A7FB608A0221C' # Robert Scholte <rfscholte@apache.org>
   '6A814B1F869C2BBEAB7CB7271A2A1C94BDE89688' # Michael Osipov (Java developer) <1983-01-06@gmx.net>
-  '29BEA2A645F2D6CED7FB12E02B172E3E156466E8' # Tamas Cservenak (ASF) (Release key) <cstamas@apache.org>
 )
-sha256sums=('817d8fbfc1f4d91712bfb1ff839a603f9873c4125e89151ae52b56f72ee8043e'
-            'SKIP'
-            '6eedd2cae3626d6ad3a5c9ee324bd265853d64297f07f033430755bd0e0c3a4b'
-            'SKIP'
-            '8d564cbd85ebf41a9a3f32f8e8be9af5238655431c90892da826cb8fd1df7b47'
-            '15557fc169d83396238df69b5c1d5551cb9c570629decedd6b484d3b4e422546')
+sha256sums=('fe13478988307e3160624e2f672fc3d63c7e528e78085885ee57342d693372e5'
+            '628b49352130d1d25d5519b1c724f0efe58b86bad55f37a694ca8f73f11e3604'
+            'ea9877cc10162f7503fc1ef29c6d81174c3eb0aa9de7d0b4381c9a40949b4213'
+            '17d9b8efa6a922907110026273443bcc8d83e061e14ac82cb5052b483acc9b76')
 
 _buildnumber() {
   bsdtar xOf <(bsdtar xOf "${srcdir}/apache-maven-${pkgver}-bin.tar.gz" apache-maven-${pkgver}/lib/maven-core-${pkgver}.jar) \
@@ -36,11 +33,10 @@
 build() {
   cd apache-maven-${pkgver}
 
-  export JAVA_HOME="/usr/lib/jvm/java-21-openjdk"
-  export PATH="/usr/lib/jvm/java-21-openjdk/bin:$PATH"
+  export PATH="/usr/lib/jvm/java-8-openjdk/bin:${PATH}"
   mvn package \
     -DbuildNumber="$(_buildnumber)" \
-    -Dline.separator=$'\n' \
+    -Dline.separator=$'\r\n' \
     -Dproject.build.sourceEncoding=UTF-8 -e \
     -Dmaven.repo.local="${srcdir}/repo" \
     -DskipTests
@@ -52,8 +48,7 @@
 check() {
   cd apache-maven-${pkgver}
 
-  export JAVA_HOME="/usr/lib/jvm/java-21-openjdk"
-  export PATH="/usr/lib/jvm/java-21-openjdk/bin:$PATH"
+  export PATH="/usr/lib/jvm/java-8-openjdk/bin:${PATH}"
   mvn test \
     -Dmaven.repo.local="${srcdir}/repo"
 }
@@ -63,13 +58,13 @@
 
   install -Dm 755 ../maven.sh -t "${pkgdir}/etc/profile.d"
 
-  install -d "${pkgdir}/usr/share/java/${pkgname}"
+  install -d "${pkgdir}/opt/maven"
   bsdtar xf apache-maven/target/apache-maven-${pkgver}-bin.tar.gz \
     --strip-components=1 \
-    -C "${pkgdir}/usr/share/java/${pkgname}"
+    -C "${pkgdir}/opt/maven"
 
   install -d "${pkgdir}/usr/bin"
-  ln -s "/usr/share/java/${pkgname}/bin/mvn" "${pkgdir}/usr/bin/mvn"
-  ln -s "/usr/share/java/${pkgname}/bin/mvnDebug" "${pkgdir}/usr/bin/mvnDebug"
+  ln -s /opt/maven/bin/mvn "${pkgdir}/usr/bin/mvn"
+  ln -s /opt/maven/bin/mvnDebug "${pkgdir}/usr/bin/mvnDebug"
 }
 


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,10 +1,9 @@
 build() {
 cd apache-maven-${pkgver}
-export JAVA_HOME="/usr/lib/jvm/java-21-openjdk"
-export PATH="/usr/lib/jvm/java-21-openjdk/bin:$PATH"
+export PATH="/usr/lib/jvm/java-8-openjdk/bin:${PATH}"
 mvn package \
 -DbuildNumber="$(_buildnumber)" \
--Dline.separator=$'\n' \
+-Dline.separator=$'\r\n' \
 -Dproject.build.sourceEncoding=UTF-8 -e \
 -Dmaven.repo.local="${srcdir}/repo" \
 -DskipTests
