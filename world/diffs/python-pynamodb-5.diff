--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,23 +1,30 @@
 
 pkgname=python-pynamodb
-pkgver=6.0.1
-pkgrel=1
+pkgver=5.5.1
+pkgrel=2
 pkgdesc="A pythonic interface to Amazon's DynamoDB"
 arch=(any)
 url='https://pynamodb.readthedocs.io/'
 license=(MIT)
-makedepends=(python-build python-installer python-setuptools python-wheel)
+makedepends=(python-setuptools)
 depends=(python python-botocore)
-checkdepends=(python-blinker python-pytest-env python-pytest-mock python-freezegun)
+checkdepends=(python-blinker python-pytest-env python-pytest-mock)
 optdepends=(
   'python-blinker: for signals'
 )
-source=("https://github.com/pynamodb/PynamoDB/archive/$pkgver/PynamoDB-$pkgver.tar.gz")
-sha256sums=('61dedc9b84835ec7a30bd8ada2d3dcae3f0ef8e91b6a0036c3a99d7f51968d67')
+source=("https://github.com/pynamodb/PynamoDB/archive/$pkgver/PynamoDB-$pkgver.tar.gz"
+        "pytest-7.2.patch")
+sha256sums=('fdd9d7fec4874e998e3a7148a147ce4a59bc03123c08b048d944a191e5ea605a'
+            '9b9950dadcc236ac259afeeaf19f7386a77542c5db75658218b6958ddf7bb4c4')
+
+prepare() {
+  cd PynamoDB-$pkgver
+  patch -Np1 -i ../pytest-7.2.patch
+}
 
 build() {
   cd PynamoDB-$pkgver
-  python -m build --wheel --no-isolation
+  python setup.py build
 }
 
 check() {
@@ -27,7 +34,7 @@
 
 package() {
   cd PynamoDB-$pkgver
-  python -m installer --destdir="$pkgdir" dist/*.whl
+  python setup.py install --root="$pkgdir" --optimize=1 --skip-build
 
   install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,3 @@
 python
 python-botocore
-python-build
-python-installer
 python-setuptools
-python-wheel

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,8 @@
+prepare() {
+cd PynamoDB-$pkgver
+patch -Np1 -i ../pytest-7.2.patch
+}
 build() {
 cd PynamoDB-$pkgver
-python -m build --wheel --no-isolation
+python setup.py build
 }
