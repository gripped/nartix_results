--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,39 +1,26 @@
 
 pkgname=python-typogrify
-pkgver=2.1.0
-pkgrel=1
+_pyname=typogrify
+pkgver=2.0.7
+pkgrel=16
 pkgdesc='filters to make caring about typography on the web a bit easier'
 arch=('any')
-url='https://github.com/justinmayer/typogrify'
-license=('BSD-3-Clause')
-depends=(
-  'python'
-  'python-smartypants'
-)
-makedepends=(
-  'python-build'
-  'python-hatchling'
-  'python-installer'
-  'python-wheel'
-)
-checkdepends=('python-pytest')
-source=("$url/archive/$pkgver/${pkgname#python-}-$pkgver.tar.gz")
-sha256sums=('212603210fb5a55fd5bed4c34cd9043b96ab605b190d4e17e27396330147e523')
+url='https://github.com/mintchaos/typogrify'
+license=('BSD')
+depends=('python' 'python-smartypants')
+makedepends=('python-setuptools')
+source=("https://pypi.python.org/packages/source/${_pyname:0:1}/${_pyname}/${_pyname}-${pkgver}.tar.gz"
+        jinja-3.1.patch)
+sha256sums=('8be4668cda434163ce229d87ca273a11922cb1614cb359970b7dc96eed13cb38'
+            'bda1b57207e46d3d399b830e603493505bcbc1414342b823d81345a4ac8a4cfb')
 
-build() {
-  cd ${pkgname#python-}-$pkgver
-  python -m build --wheel --no-isolation
-}
-
-check() {
-  cd ${pkgname#python-}-$pkgver
-  pytest --doctest-modules \
-    typogrify/filters.py \
-    typogrify/packages/titlecase/tests.py
+prepare() {
+  cd "${srcdir}/${_pyname}-${pkgver}"
+  patch -Np1 -i ../jinja-3.1.patch
 }
 
 package() {
-  cd ${pkgname#python-}-$pkgver
-  python -m installer --destdir="$pkgdir" dist/*.whl
-  install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE.txt
+  cd "${srcdir}/${_pyname}-${pkgver}"
+  python3 setup.py install --root="${pkgdir}/" --optimize=1
+  install -D -m644 LICENSE.txt "${pkgdir}/usr/share/licenses/${pkgbase}/LICENSE"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,3 @@
 python
-python-build
-python-hatchling
-python-installer
+python-setuptools
 python-smartypants
-python-wheel

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
-build() {
-cd ${pkgname#python-}-$pkgver
-python -m build --wheel --no-isolation
+prepare() {
+cd "${srcdir}/${_pyname}-${pkgver}"
+patch -Np1 -i ../jinja-3.1.patch
 }
