--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 
 _name=starlette
 pkgname=python-$_name
-pkgver=0.45.0
-pkgrel=1
+pkgver=0.42.0
+pkgrel=2
 pkgdesc='The little ASGI framework that shines'
 arch=(any)
 url="https://github.com/encode/starlette"
@@ -38,13 +38,17 @@
   'python-pyyaml: for schema generator'
   'python-httpx: for test client'
 )
-source=($_name-$pkgver.tar.gz::$url/archive/$pkgver.tar.gz)
-sha512sums=('9b949d110c2a83f29245ac442d83e7f7b856e6f95f5c0d4f0e8691c9976158c650bac05ccbebc3738e6735cbb1b54d6acabd5d1848d920a0ca91905f2ddcfc14')
-b2sums=('5f482b255d0bfe88e0c8c882d4f49a792d14c6cef9237a28708cadab3880d0b77363827cec6aa371044974997ba44ba2eec4b3488775bb596ecfb58032a35e90')
+source=($_name-$pkgver.tar.gz::$url/archive/$pkgver.tar.gz
+        fix_tests_with_httpx_0.27.patch)
+sha512sums=('d7b0da5333930d6ce9315387cc7e23fd22b4ed379d37c8f143cf6e6a07b5cb2d207d4c349616788633387fa54c6fc377feb28df6ccd1216b824e66a47c950f2b'
+            '673f1e3f714b2d7c962111e279d9086ee2868fab93e537f6363749c2043c92711db403460d5adfc8520cc8253417a47f55a2da4a1df4aa4abc0e662dad25875a')
+b2sums=('8c8d85288ad7a42b9771431377e5b6ecd98f6c6088fa913bddf496db2de1c7c1e471d1b9a0a6a17885acfe96e503391e066d1b8c6f612329afe69d8ca8743935'
+        'c3a2a1f340c912940a78ada3925729ee635ee58dde3b79391dc87cb266c72434fdcb67f04d1b3f77f7f2388dbcd9f1bf323bf819dcc3b7f5b3ff50fa0265f533')
 
 prepare() {
   cd $_name-$pkgver
   sed -i '/"error"/d' pyproject.toml
+  patch -Np1 < $srcdir/fix_tests_with_httpx_0.27.patch
 }
 
 build() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,7 @@
 prepare() {
 cd $_name-$pkgver
 sed -i '/"error"/d' pyproject.toml
+patch -Np1 < $srcdir/fix_tests_with_httpx_0.27.patch
 }
 build() {
 cd $_name-$pkgver
