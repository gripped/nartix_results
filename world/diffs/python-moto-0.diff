--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=python-moto
-pkgver=5.1.12
-pkgrel=2
+pkgver=5.1.10
+pkgrel=1
 pkgdesc='Moto is a library to mock out the boto library.'
 arch=(any)
 url='https://github.com/spulec/moto'
@@ -67,11 +67,17 @@
   'python-jsonpath-ng: for events, stepfunctions'
   'python-jsonschema: for quicksight'
 )
-source=("git+https://github.com/getmoto/moto#tag=$pkgver")
-sha256sums=('cfa3e48d2501508b4f4fa32f144e5efa0233d2dae5265a5dcec5d2bf8c8b587a')
+source=(
+  "git+https://github.com/getmoto/moto#tag=$pkgver"
+  "fix-tests.diff"
+)
+sha256sums=('e29795a90ec60392f4d20fd568b7706de78f4a2f3cd8da785edad41cf043e138'
+            '21305cdf3d650ced1acb1d0f7dde8760b26e32a94c56a5571e798d6b6976cf5a')
 
 prepare() {
   cd ${pkgname#python-}
+  patch -Np1 -i ../fix-tests.diff
+
   python update_version_from_git.py $pkgver
 }
 
@@ -84,6 +90,9 @@
   cd ${pkgname#python-}
   local pytest_args=(
     --ignore tests/test_cognitoidp/test_cognitoidp.py
+    --deselect tests/test_s3/test_multiple_accounts_server.py::TestAccountIdResolution::test_with_custom_request_header
+    --deselect tests/test_s3/test_server.py::test_s3_server_post_cors_multiple_origins
+    --deselect tests/test_s3/test_s3_select.py
     -m 'not requires_docker'
   )
   TZ=UTC pytest tests "${pytest_args[@]}"


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,6 @@
 prepare() {
 cd ${pkgname#python-}
+patch -Np1 -i ../fix-tests.diff
 python update_version_from_git.py $pkgver
 }
 build() {
