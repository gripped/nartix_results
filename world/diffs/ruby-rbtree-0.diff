--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -9,7 +9,6 @@
 license=('MIT')
 depends=('ruby')
 makedepends=('git')
-checkdepends=('ruby-bundler' 'ruby-rake' 'ruby-test-unit')
 options=('!emptydirs')
 source=("$pkgname::git+$url#tag=v$pkgver")
 sha512sums=('3c99b3e3b111f437308ae65edfbd6c156e16ad989f380317093d56852a9c1daa31c870ad9d3645ec350e1330895b0b7d61e74fe3c48edf1bbb649baf741ebffa')
@@ -18,41 +17,31 @@
 build() {
   cd "$pkgname"
 
+  gem build "$_pkgname.gemspec"
+}
+
+package() {
+  cd "$pkgname"
+
   local _gemdir="$(gem env gemdir)"
-
-  gem build "$_pkgname.gemspec"
 
   gem install \
     --local \
     --verbose \
     --ignore-dependencies \
     --no-user-install \
-    --install-dir "tmp_install/$_gemdir" \
-    --bindir "$tmp_install/usr/bin" \
+    --install-dir "$pkgdir/$_gemdir" \
+    --bindir "$pkgdir/usr/bin" \
     "$_pkgname-$pkgver.gem"
 
-  rm -rf "tmp_install/$_gemdir/cache"
-  find "tmp_install" \
+  rm -rf "$pkgdir/$_gemdir/cache"
+  find "$pkgdir" \
     -type f \
     -name '*.o' -delete -o \
     -name 'gem_make.out' -delete -o \
     -name 'mkmf.log' -delete
-  rm -rf "tmp_install/$_gemdir/gems/$_pkgname-$pkgver/$_pkgname.so"
+  rm -rf "$pkgdir/$_gemdir/gems/$_pkgname-$pkgver/$_pkgname.so"
 
-  install -vd "tmp_install/usr/share/licenses/$pkgname"
-  ln -sf "$_gemdir/gems/$_pkgname-$pkgver/LICENSE" "tmp_install/usr/share/licenses/$pkgname"
+  install -vd "$pkgdir/usr/share/licenses/$pkgname"
+  ln -sf "$_gemdir/gems/$_pkgname-$pkgver/LICENSE" "$pkgdir/usr/share/licenses/$pkgname"
 }
-
-check() {
-  cd "$pkgname"
-
-  local _gemdir="$(ruby -e'puts Gem.default_dir')"
-
-  GEM_HOME="tmp_install${_gemdir}" rake test
-}
-
-package() {
-  cd "$pkgname"
-
-  cp --archive --verbose tmp_install/* "${pkgdir}"
-}


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,22 +1,4 @@
 build() {
 cd "$pkgname"
-local _gemdir="$(gem env gemdir)"
 gem build "$_pkgname.gemspec"
-gem install \
---local \
---verbose \
---ignore-dependencies \
---no-user-install \
---install-dir "tmp_install/$_gemdir" \
---bindir "$tmp_install/usr/bin" \
-"$_pkgname-$pkgver.gem"
-rm -rf "tmp_install/$_gemdir/cache"
-find "tmp_install" \
--type f \
--name '*.o' -delete -o \
--name 'gem_make.out' -delete -o \
--name 'mkmf.log' -delete
-rm -rf "tmp_install/$_gemdir/gems/$_pkgname-$pkgver/$_pkgname.so"
-install -vd "tmp_install/usr/share/licenses/$pkgname"
-ln -sf "$_gemdir/gems/$_pkgname-$pkgver/LICENSE" "tmp_install/usr/share/licenses/$pkgname"
 }
