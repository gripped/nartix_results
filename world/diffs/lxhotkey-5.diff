--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,47 +1,49 @@
 
-pkgname=lxhotkey
-pkgver=0.1.2
+pkgbase=lxhotkey
+pkgname=(lxhotkey lxhotkey-gtk3)
+pkgver=0.1.1
 pkgrel=2
 pkgdesc='Keyboard shortcuts configurator (part of LXDE)'
-arch=(x86_64)
-license=(GPL-2.0-or-later)
-url='https://github.com/lxde/lxhotkey'
-depends=(
-  glib2
-  glibc
-  gtk3
-  libfm
-  libfm-extra
-  libunistring
-  libx11
-)
-makedepends=(
-  git
-  intltool
-)
-conflicts=(lxhotkey-gtk3)
-replaces=(lxhotkey-gtk3)
-groups=(lxde)
-source=("git+https://github.com/lxde/lxhotkey.git#tag=$pkgver")
-b2sums=(aea9a58096f46bd24eeae1e9cf592d37e929d36fac7b61a7aecaf47be3f7934e008d7b9ad467c5dc74c46593f64add84eb84774f8729f3a5e6252e849b1d303e)
+arch=('x86_64')
+license=('GPL2')
+url='https://lxde.org/'
+depends=('gtk2' 'gtk3' 'libfm')
+makedepends=('intltool')
+source=(https://downloads.sourceforge.net/lxde/$pkgbase-$pkgver.tar.xz)
+sha1sums=('2f41397a07dc3ae19607be23f61f09cdb93c8a3d')
 
 prepare() {
-  cd $pkgname
-  autoreconf -fi
+  cd $pkgbase-$pkgver
+  ./autogen.sh
 }
 
 build() {
-  cd $pkgname
-  ./configure \
-    --prefix=/usr \
-    --sysconfdir=/etc \
-    --localstatedir=/var \
-    --with-gtk=3
-  sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
+  [ -d gtk2 ] || cp -r $pkgbase-$pkgver gtk2
+  cd gtk2
+  ./configure --sysconfdir=/etc --prefix=/usr --with-gtk=2
+  make
+
+  cd "$srcdir"
+  [ -d gtk3 ] || cp -r $pkgbase-$pkgver gtk3
+  cd gtk3
+  ./configure --sysconfdir=/etc --prefix=/usr --with-gtk=3
   make
 }
 
 package_lxhotkey() {
-  cd $pkgname
+  groups=('lxde')
+  depends=('gtk2' 'libfm')
+
+  cd gtk2
   make DESTDIR="$pkgdir" install
 }
+
+package_lxhotkey-gtk3() {
+  groups=('lxde-gtk3')
+  pkgdesc+=' (GTK+ 3 version)'
+  depends=('gtk3' 'libfm' 'libunistring')
+  conflicts=('lxhotkey')
+
+  cd gtk3
+  make DESTDIR="$pkgdir" install
+}


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,9 +1,5 @@
-git
-glib2
-glibc
+gtk2
 gtk3
 intltool
 libfm
-libfm-extra
 libunistring
-libx11

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,14 +1,15 @@
 prepare() {
-cd $pkgname
-autoreconf -fi
+cd $pkgbase-$pkgver
+./autogen.sh
 }
 build() {
-cd $pkgname
-./configure \
---prefix=/usr \
---sysconfdir=/etc \
---localstatedir=/var \
---with-gtk=3
-sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
+[ -d gtk2 ] || cp -r $pkgbase-$pkgver gtk2
+cd gtk2
+./configure --sysconfdir=/etc --prefix=/usr --with-gtk=2
+make
+cd "$srcdir"
+[ -d gtk3 ] || cp -r $pkgbase-$pkgver gtk3
+cd gtk3
+./configure --sysconfdir=/etc --prefix=/usr --with-gtk=3
 make
 }
