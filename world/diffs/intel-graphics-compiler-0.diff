--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,12 +1,12 @@
 
 pkgname=intel-graphics-compiler
-pkgver=1.0.16695.4
+pkgver=1.0.16510.2
 _llvmmaj=14
 _llvmver="${_llvmmaj}.0.5"
 _vciver=0.18.0
 _spirv_tools_tag=v2023.6.rc1
 _spirv_headers_commit=1c6bb2743599e6eb6f37b2969acc0aef812e32e3
-_spirv_llvm_commit=f6fb55cd7b539ee6a70e3909c963f968cc40c1cd
+_spirv_llvm_commit=927efdc07bc18302559acdce1715c3f9507f3acf
 _opencl_clang_commit=cf95b338d14685e4f3402ab1828bef31d48f1fd6
 pkgrel=1
 epoch=1
@@ -27,9 +27,9 @@
         "git+https://github.com/KhronosGroup/SPIRV-Headers.git#commit=${_spirv_headers_commit}"
         "git+https://github.com/intel/opencl-clang.git#commit=${_opencl_clang_commit}"
         "git+https://github.com/llvm/llvm-project.git#tag=llvmorg-${_llvmver}")
-sha256sums=('8f00c317a4b58c75f9d7f3d77cd4024586b837ebf2da870e5232b8aa804a4e6b'
+sha256sums=('b8edfbdccf0bf5d333e162df16805d878f08493b7b9288e889258420800ba332'
             '82062143cf2d7538a04b9e53be6312be8e54da6bc0c65c7b1c4465d7aeb54f7f'
-            'c9b3229d4107919aec70aea28b5a35c6949e068c1de9804909040d3fd5451c3a'
+            'd8008cd52eb86eca7427cca5fd01cd9f07dc794710e3413173e723a9385ce581'
             'ad11e234110902f42c9e54d2f4bb014b64e280ac9428f4c03a04b8b4571112b8'
             '86b7a82e8169097bb84741dff6003da85c841f9d3514034b213896c498ae294c'
             '06648bff406785c2f9d28c4f38ace010ef699f30e8d70531137bff13adff7bd6'
@@ -41,12 +41,12 @@
 }
 
 build() {
+    export CFLAGS="${CFLAGS/_FORTIFY_SOURCE=3/_FORTIFY_SOURCE=2}"
+    export CXXFLAGS="${CXXFLAGS/_FORTIFY_SOURCE=3/_FORTIFY_SOURCE=2}"
+
     CFLAGS+=" -fno-semantic-interposition"
     CXXFLAGS+=" -fno-semantic-interposition"
     LDFLAGS+=" -Wl,-Bsymbolic"
-
-    export CFLAGS="${CFLAGS/-Wp,-D_FORTIFY_SOURCE=?/}"
-    export CXXFLAGS="${CXXFLAGS/-Wp,-D_FORTIFY_SOURCE=?/}"
 
     CXXFLAGS+=" -I ${srcdir}/SPIRV-LLVM-Translator/include"
 


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,11 +3,11 @@
 ln -s "${srcdir}/opencl-clang" "${srcdir}/llvm-project/llvm/projects/opencl-clang"
 }
 build() {
+export CFLAGS="${CFLAGS/_FORTIFY_SOURCE=3/_FORTIFY_SOURCE=2}"
+export CXXFLAGS="${CXXFLAGS/_FORTIFY_SOURCE=3/_FORTIFY_SOURCE=2}"
 CFLAGS+=" -fno-semantic-interposition"
 CXXFLAGS+=" -fno-semantic-interposition"
 LDFLAGS+=" -Wl,-Bsymbolic"
-export CFLAGS="${CFLAGS/-Wp,-D_FORTIFY_SOURCE=?/}"
-export CXXFLAGS="${CXXFLAGS/-Wp,-D_FORTIFY_SOURCE=?/}"
 CXXFLAGS+=" -I ${srcdir}/SPIRV-LLVM-Translator/include"
 EMAIL='builduser@archlinux.org' \
 cmake -B build -S "${pkgname}-igc-${pkgver}" \
