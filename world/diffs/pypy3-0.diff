--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=pypy3
-_pyversion=3.10
-pkgver=7.3.17
+_pyversion=3.11
+pkgver=7.3.18
 pkgrel=1
 pkgdesc="A Python3 implementation written in Python, JIT enabled"
 url="https://pypy.org"
@@ -10,18 +10,18 @@
 makedepends=('pypy' 'sqlite' 'tk')
 optdepends=('sqlite: sqlite module'
             'tk: tk module')
-options=(!buildflags)
 license=('MIT')
-source=("https://downloads.python.org/pypy/pypy${_pyversion}-v${pkgver}-src.zip")
-sha512sums=('ed718d9a2f842f0793bf94797ba3f47b7a8adee569bbe90b4d82a779178925fe97462fff37889e30d250e2931a50ffcaa73864a5a4232b7cd07b1dbbb8e854ad')
+source=("https://downloads.python.org/pypy/pypy${_pyversion}-v${pkgver}-src.tar.bz2")
+sha512sums=('d4337a69c46c86594ae3eae09b8ab83db073eb4955f4e04bb8168ac412e8e55698938c2045f3e5d3c6a459a19cdf45a08af63e7587922a5d879fba373c6c9faf')
 
 build() {
   cd pypy${_pyversion}-v${pkgver}-src/pypy/goal
 
-  sed -i "s/, 'linux', 'linux2'//" targetpypystandalone.py
+  export CFLAGS+=" -Wno-error=incompatible-pointer-types"
+
   pypy ../../rpython/bin/rpython -Ojit --shared targetpypystandalone
 
-  PYTHONPATH=../.. ./pypy3.10-c ../../lib_pypy/pypy_tools/build_cffi_imports.py
+  PYTHONPATH=../.. ./pypy${_pyversion}-c ../../lib_pypy/pypy_tools/build_cffi_imports.py
 }
 
 package() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 build() {
 cd pypy${_pyversion}-v${pkgver}-src/pypy/goal
-sed -i "s/, 'linux', 'linux2'//" targetpypystandalone.py
+export CFLAGS+=" -Wno-error=incompatible-pointer-types"
 pypy ../../rpython/bin/rpython -Ojit --shared targetpypystandalone
-PYTHONPATH=../.. ./pypy3.10-c ../../lib_pypy/pypy_tools/build_cffi_imports.py
+PYTHONPATH=../.. ./pypy${_pyversion}-c ../../lib_pypy/pypy_tools/build_cffi_imports.py
 }
