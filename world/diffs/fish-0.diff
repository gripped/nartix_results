--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,19 +1,14 @@
 
 pkgname=fish
 pkgver=4.0.1
-pkgrel=2
+pkgrel=1
 pkgdesc='Smart and user friendly shell intended mostly for interactive use'
 url='https://fishshell.com/'
 arch=('x86_64')
 license=('GPL-2.0-only AND BSD-3-Clause AND ISC AND MIT AND PSF-2.0')
 depends=('glibc' 'gcc-libs' 'ncurses' 'pcre2')
 optdepends=('python: man page completion parser / web config tool'
-            'pkgfile: command-not-found hook'
-            'nroff: --help for built-in commmands'
-            'mandoc: --help for built-in commmands (alternative)'
-            'xsel: X11 clipboard integration'
-            'xclip: X11 clipboard integration (alternative)'
-            'wl-clipboard: Wayland clipboard integration')
+            'pkgfile: command-not-found hook')
 makedepends=('cmake' 'git' 'jq' 'rust' 'python-sphinx')
 checkdepends=('expect' 'procps-ng')
 options=(!lto)
@@ -26,21 +21,14 @@
 
 build() {
   cd ${pkgname}
-
   export CXXFLAGS+=" ${CPPFLAGS}"
-
-  local cmake_options=(
-    -B build
-    -DCMAKE_INSTALL_PREFIX=/usr
-    -DCMAKE_INSTALL_SYSCONFDIR=/etc
-    -DCMAKE_BUILD_TYPE=Release
-    -DBUILD_DOCS=True
-    -DFISH_USE_SYSTEM_PCRE2=ON
-    -DWITH_GETTEXT=ON
-    -Wno-dev
-  )
-  cmake "${cmake_options[@]}"
-
+  cmake \
+    -B build \
+    -D CMAKE_INSTALL_PREFIX=/usr \
+    -D CMAKE_INSTALL_SYSCONFDIR=/etc \
+    -D CMAKE_BUILD_TYPE=Release \
+    -D BUILD_DOCS=True \
+    -W no-dev
   make -C build VERBOSE=1
 }
 
@@ -51,7 +39,6 @@
 
 package() {
   cd ${pkgname}
-
-  DESTDIR="$pkgdir" cmake --install build
+  make -C build DESTDIR="${pkgdir}" install
 }
 


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,16 +1,12 @@
 build() {
 cd ${pkgname}
 export CXXFLAGS+=" ${CPPFLAGS}"
-local cmake_options=(
--B build
--DCMAKE_INSTALL_PREFIX=/usr
--DCMAKE_INSTALL_SYSCONFDIR=/etc
--DCMAKE_BUILD_TYPE=Release
--DBUILD_DOCS=True
--DFISH_USE_SYSTEM_PCRE2=ON
--DWITH_GETTEXT=ON
--Wno-dev
-)
-cmake "${cmake_options[@]}"
+cmake \
+-B build \
+-D CMAKE_INSTALL_PREFIX=/usr \
+-D CMAKE_INSTALL_SYSCONFDIR=/etc \
+-D CMAKE_BUILD_TYPE=Release \
+-D BUILD_DOCS=True \
+-W no-dev
 make -C build VERBOSE=1
 }
