--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -9,7 +9,6 @@
   gst-plugins-bad
   gst-plugin-gtk
   gst-plugin-msdk
-  gst-plugin-onnx
   gst-plugin-opencv
   gst-plugin-qml6
   gst-plugin-qmlgl
@@ -26,7 +25,7 @@
   gst-python
   gstreamer-docs
 )
-pkgver=1.24.8
+pkgver=1.24.7
 pkgrel=1
 pkgdesc="Multimedia graph framework"
 url="https://gstreamer.freedesktop.org/"
@@ -125,7 +124,6 @@
   nasm
   neon
   nettle
-  onnxruntime
   openal
   opencore-amr
   opencv
@@ -158,7 +156,6 @@
   speex
   svt-av1
   svt-hevc
-  systemd-libs
   taglib
   twolame
   v4l-utils
@@ -183,13 +180,11 @@
   "git+https://gitlab.freedesktop.org/gstreamer/gstreamer.git?signed#tag=$pkgver"
   "https://gstreamer.freedesktop.org/src/gstreamer-docs/gstreamer-docs-$pkgver.tar.xz"{,.asc}
   0001-HACK-meson-Disable-broken-tests.patch
-  0002-ges-Fix-name-of-GESFrameCompositionMeta-API-type.patch
 )
-b2sums=('ecdcf29ad346dc4aff966b34b4c68ac9e742b29bac86a33b289f06f213d563ac3c9264768a409c70c032694ccbfd246f772b67097456647c96c869aecd56ff96'
-        '5330ad9313cfcfbdd0514f8f8164440c4eb3605a1e17dda8b7a024f3c986a97042575fedd3e54d4c1b0a1476918cdbb1d1d1ee46b173d235f5e3ed34d40bf39a'
+b2sums=('9b51eb240356ad3cfc229505cd6e7eab1508411cd12fea7db1ecc613f36c4f17de106b667ed37366b04d6be8788ba1e9902ba5ce115824822b72fb6da66cc8e3'
+        'b41545f687156eb14b5199736dc39b6c80903a2e85cf2935b27ac680d04ac68c18a11acf2420af34801b6a0d21677b4b18a10aa66910ac1c87dcb2dc767da8d1'
         'SKIP'
-        '9e277b0373c024d9ec0175e7a036f85152ce145b40d62105e660ca4f466ee0a2d70c68c11c4e6929e46117380482c70957e08e3bf6b5aca1ea0e2c7d4360f317'
-        'ac31a75ad3086e26045d02d917fd1c0f155b9e1a6ea82aa8aaf9687500a129b80be82947f6a07928399570920bdbc829d6ff1b79d0b30538606d056a76aaab05')
+        '05be85b333b83a9ffb3ba7e1554027a0398a44adeef2ab7f088ae93d9301291d6d19b4033d236edefdc95e79a27da7c1f5d29b32c565a932661e43e07518e276')
 validpgpkeys=(
   D637032E45B8C6585B9456565D2EEE6F6F349D7C # Tim MÃ¼ller <tim@gstreamer-foundation.org>
 )
@@ -198,12 +193,11 @@
   cd gstreamer
 
   git apply -3 ../0001-HACK-meson-Disable-broken-tests.patch
-
-  git apply -3 ../0002-ges-Fix-name-of-GESFrameCompositionMeta-API-type.patch
 }
 
 build() {
   local meson_options=(
+    -D gst-plugins-bad:onnx=disabled
     -D examples=disabled
     -D gobject-cast-checks=disabled
     -D gpl=enabled
@@ -239,14 +233,14 @@
     -D gstreamer:ptp-helper-permissions=capabilities
     -D libnice=disabled
     -D orc-source=system
-    -D package-name="Arch Linux GStreamer ${epoch:+$epoch:}$pkgver-$pkgrel"
-    -D package-origin="https://www.archlinux.org/"
+    -D package-name="Artix Linux GStreamer ${epoch:+$epoch:}$pkgver-$pkgrel"
+    -D package-origin="https://www.artixlinux.org/"
     -D vaapi=enabled
   )
 
   export GI_SCANNER_DISABLE_CACHE=1
 
-  arch-meson gstreamer build "${meson_options[@]}"
+  artix-meson gstreamer build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -257,7 +251,7 @@
   export NO_AT_BRIDGE=1 GTK_A11Y=none
 
   xvfb-run -s "-nolisten local" \
-    meson test -C build --print-errorlogs -t 5
+    meson test -C build --print-errorlogs -t 5 || :
 )
 
 _install() {
@@ -864,22 +858,6 @@
   ); _install
 }
 
-package_gst-plugin-onnx() {
-  pkgdesc+=" - onnx plugin"
-  depends=(
-    "gst-plugins-bad-libs=$pkgver-$pkgrel"
-    "gst-plugins-base-libs=$pkgver-$pkgrel"
-    "gstreamer=$pkgver-$pkgrel"
-    gcc-libs
-    glib2
-    glibc
-    onnxruntime
-  )
-
-  cd root; local files=(
-    usr/lib/gstreamer-1.0/libgstonnx.so
-  ); _install
-}
 
 package_gst-plugin-qml6() {
   pkgdesc+=" - qml6 plugin"
@@ -1158,7 +1136,6 @@
     libva
     libx11
     libxrandr
-    systemd-libs
     wayland
   )
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -109,7 +109,6 @@
 nasm
 neon
 nettle
-onnxruntime
 openal
 opencore-amr
 opencv
@@ -147,7 +146,6 @@
 srt
 svt-av1
 svt-hevc
-systemd-libs
 taglib
 twolame
 v4l-utils