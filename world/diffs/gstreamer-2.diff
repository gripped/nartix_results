--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -11,7 +11,6 @@
   gst-libav
   gst-plugin-gtk
   gst-plugin-msdk
-  gst-plugin-onnx
   gst-plugin-opencv
   gst-plugin-qml6
   gst-plugin-qmlgl
@@ -26,8 +25,8 @@
   gst-python
   gstreamer-docs
 )
-pkgver=1.26.0
-pkgrel=1
+pkgver=1.24.12
+pkgrel=4
 pkgdesc="Multimedia graph framework"
 url="https://gstreamer.freedesktop.org/"
 arch=(x86_64)
@@ -138,7 +137,6 @@
   nasm
   neon
   nettle
-  onnxruntime
   openal
   opencore-amr
   opencv
@@ -178,7 +176,6 @@
   srt
   svt-av1
   svt-hevc
-  systemd-libs
   taglib
   twolame
   v4l-utils
@@ -206,12 +203,14 @@
   "https://gstreamer.freedesktop.org/src/gstreamer-docs/gstreamer-docs-$pkgver.tar.xz"{,.asc}
   0001-HACK-meson-Disable-broken-tests.patch
   0002-x265enc-Unbreak-build-with-x265-4.0.patch
+  0003-svtav1enc-update-to-use-SVT-AV1-3.0.0-API-changes.patch
 )
-b2sums=('8c90fe57ae67c5097cf427bca73cb687bc5087256444ec9227f4a294b2889d2042643ed4230414c151ecbae8490984e2b8c52cfea494e4f10f79866a26326029'
-        '5ee163d6f0dd14457740cbc2e131bdc3499517b0c6d57153a6ff3ef5af4ab2f5502e3131c7045f1d0829d0f6d5d1ed599b803d7396155e34a3ad99c0f2f3974a'
+b2sums=('e11c560e33db0292075a8c3043eef959c6b68c2c54e55a62d41acbfce544b198ff0a948682ff2e9d90ec2773674e614378399b1411588eae7757176ce157dd4e'
+        '21a0c3fd42af3870efb38fdd595298d0596d8c90801dc27bd693aaa8436e7f2e2cffd2019dba6188f89cafda1ac3e42958f152e945a9102020bd55f1f66ccfb7'
         'SKIP'
-        '6b4e34286318ca591077779e713ec9a94cb2e5b73a9dd6df35afdefcc709c0f9d1ee4cae6c99d2bbf2e075eda03e94cacb57bfc202fdb8c263b4b0d335541b23'
-        '94250c1317ce1e3444c2e0effc190ab544eca21c177e43143c3f3a8690c541cbe068604c6ff6401072a6b09f54683eac03128c918a2a16c7013622c24da11348')
+        '693a30c7af517ee8c149ec58214e3ac891ff82c9f1bddcbd34949854deb46207a995ff123848a7121f64b41aed8ae4ffada1329bb5c987a542710466770a2935'
+        '94250c1317ce1e3444c2e0effc190ab544eca21c177e43143c3f3a8690c541cbe068604c6ff6401072a6b09f54683eac03128c918a2a16c7013622c24da11348'
+        '97189387749cbcbf66bb378c49dea3bedd2bbd9c181c489f466e61e8d3981d99d578e38e7bc8303d941180ed96bbeefeb01782a6068b89d7030a2234cdd1bdb5')
 validpgpkeys=(
   D637032E45B8C6585B9456565D2EEE6F6F349D7C # Tim MÃ¼ller <tim@gstreamer-foundation.org>
 )
@@ -222,41 +221,39 @@
   git apply -3 ../0001-HACK-meson-Disable-broken-tests.patch
 
   git apply -3 ../0002-x265enc-Unbreak-build-with-x265-4.0.patch
+
+  git apply -3 ../0003-svtav1enc-update-to-use-SVT-AV1-3.0.0-API-changes.patch
 }
 
 build() {
   local meson_options=(
-    -D benchmarks=disabled
+    -D gst-plugins-bad:onnx=disabled
     -D examples=disabled
-    -D glib_debug=disabled
+    -D gobject-cast-checks=disabled
     -D gpl=enabled
     -D gst-devtools:debug_viewer=enabled
     -D gst-examples=disabled
     -D gst-plugins-bad:aja=disabled
     -D gst-plugins-bad:amfcodec=disabled
-    -D gst-plugins-bad:androidmedia=disabled
-    -D gst-plugins-bad:cuda-nvmm=disabled
     -D gst-plugins-bad:directfb=disabled
     -D gst-plugins-bad:directshow=disabled
+    -D gst-plugins-bad:directsound=disabled
     -D gst-plugins-bad:flite=disabled
     -D gst-plugins-bad:gs=disabled
     -D gst-plugins-bad:iqa=disabled
     -D gst-plugins-bad:isac=disabled
-    -D gst-plugins-bad:lcevcdecoder=disabled
-    -D gst-plugins-bad:lcevcencoder=disabled
     -D gst-plugins-bad:magicleap=disabled
     -D gst-plugins-bad:mfx_api=oneVPL
-    -D gst-plugins-bad:nvcomp=disabled
-    -D gst-plugins-bad:nvdswrapper=disabled
     -D gst-plugins-bad:openni2=disabled
     -D gst-plugins-bad:opensles=disabled
     -D gst-plugins-bad:qt6d3d11=disabled
-    -D gst-plugins-bad:svtjpegxs=disabled
     -D gst-plugins-bad:tinyalsa=disabled
     -D gst-plugins-bad:voaacenc=disabled
     -D gst-plugins-bad:voamrwbenc=disabled
     -D gst-plugins-bad:wasapi2=disabled
     -D gst-plugins-bad:wasapi=disabled
+    -D gst-plugins-bad:wic=disabled
+    -D gst-plugins-bad:win32ipc=disabled
     -D gst-plugins-base:libvisual=disabled
     -D gst-plugins-base:tremor=disabled
     -D gst-plugins-good:rpicamsrc=disabled
@@ -265,17 +262,14 @@
     -D gstreamer:ptp-helper-permissions=capabilities
     -D libnice=disabled
     -D orc-source=system
-    -D package-name="Arch Linux GStreamer ${epoch:+$epoch:}$pkgver-$pkgrel"
+    -D package-name="Artix Linux GStreamer ${epoch:+$epoch:}$pkgver-$pkgrel"
     -D package-origin="https://www.archlinux.org/"
     -D vaapi=enabled
   )
 
   export GI_SCANNER_DISABLE_CACHE=1
 
-  export CARGO_PROFILE_RELEASE_DEBUG=2
-  export CARGO_PROFILE_RELEASE_LTO=true CARGO_PROFILE_RELEASE_CODEGEN_UNITS=1
-
-  arch-meson gstreamer build "${meson_options[@]}"
+  artix-meson gstreamer build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -286,7 +280,7 @@
   export NO_AT_BRIDGE=1 GTK_A11Y=none
 
   xvfb-run -s "-nolisten local" \
-    meson test -C build --print-errorlogs -t 5
+    meson test -C build --print-errorlogs -t 5 || :
 )
 
 _install() {
@@ -339,7 +333,6 @@
     usr/share/gstreamer-1.0/gdb/gst_gdb.py
 
     usr/share/aclocal/gst-element-check-1.0.m4
-    usr/share/cmake/FindGStreamer.cmake
   ); _install
 }
 
@@ -447,7 +440,6 @@
     usr/lib/gstreamer-1.0/libgstspeed.so
     usr/lib/gstreamer-1.0/libgstsubenc.so
     usr/lib/gstreamer-1.0/libgstswitchbin.so
-    usr/lib/gstreamer-1.0/libgsttensordecoders.so
     usr/lib/gstreamer-1.0/libgsttranscode.so
     usr/lib/gstreamer-1.0/libgstunixfd.so
     usr/lib/gstreamer-1.0/libgstuvcgadget.so
@@ -926,23 +918,6 @@
   ); _install
 }
 
-package_gst-plugin-onnx() {
-  pkgdesc+=" - onnx plugin"
-  depends=(
-    "gst-plugins-bad-libs=$pkgver-$pkgrel"
-    "gst-plugins-base-libs=$pkgver-$pkgrel"
-    "gstreamer=$pkgver-$pkgrel"
-    gcc-libs
-    glib2
-    glibc
-    onnxruntime
-    openmpi
-  )
-
-  cd root; local files=(
-    usr/lib/gstreamer-1.0/libgstonnx.so
-  ); _install
-}
 
 package_gst-plugin-opencv() {
   pkgdesc+=" - opencv plugin"
@@ -1115,8 +1090,6 @@
     usr/share/gst-debug-viewer
     usr/share/icons/hicolor/*/apps/gst-debug-viewer.*
     usr/share/metainfo/org.freedesktop.GstDebugViewer.appdata.xml
-
-    usr/bin/gst-dots-viewer
   ); _install
 }
 
@@ -1194,7 +1167,6 @@
     libva
     libx11
     libxrandr
-    systemd-libs
     wayland
   )
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -109,7 +109,6 @@
 nasm
 neon
 nettle
-onnxruntime
 openal
 opencore-amr
 opencv
@@ -149,7 +148,6 @@
 srt
 svt-av1
 svt-hevc
-systemd-libs
 taglib
 twolame
 v4l-utils