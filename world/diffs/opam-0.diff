--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,25 +1,23 @@
 
 pkgname=opam
-pkgver=2.1.6
+pkgver=2.2.0
 pkgrel=1
 pkgdesc='OCaml package manager'
 arch=(x86_64)
 url='https://opam.ocaml.org/'
-license=(GPL)
+license=(LGPL-2.1-only)
 depends=(bubblewrap ocaml-compiler-libs unzip)
 optdepends=('darcs: For downloading packages with darcs'
             'git: For downloading packages with git'
             'mercurial: For downloading packages with mercurial'
             'rsync: For downloading packages with rsync')
 source=("https://github.com/ocaml/opam/releases/download/$pkgver/opam-full-$pkgver.tar.gz")
-b2sums=('20e74551760cadf1d911e72c34502e1e7e62003f8ebc83f3b9cb46c712e13fb5f85f41421cc74b051c2e348e0c0a17f4ea34bf655f7ec48cfcdab1e0d8a57a11')
+b2sums=('0ee3e4d96319a2e722362abd5d149838fb931bfdb22f4a85f5681142519afa1508c9fac1d0391de1d7c81ed5b2f3e2f3c402c8e3fc82e8ffbf61fb5b3596f8d9')
 
 build() {
   cd opam-full-$pkgver
-  ./configure --prefix=/usr
-  make lib-ext all -j1 \
-    OCAMLC='ocamlc -unsafe-string' \
-    OCAMLOPT='ocamlopt -unsafe-string'
+  ./configure --prefix=/usr --with-vendored-deps
+  make all OCAMLC='ocamlc -unsafe-string -w -a' OCAMLOPT='ocamlopt -unsafe-string -w -a'
 }
 
 package() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,5 @@
 build() {
 cd opam-full-$pkgver
-./configure --prefix=/usr
-make lib-ext all -j1 \
-OCAMLC='ocamlc -unsafe-string' \
-OCAMLOPT='ocamlopt -unsafe-string'
+./configure --prefix=/usr --with-vendored-deps
+make all OCAMLC='ocamlc -unsafe-string -w -a' OCAMLOPT='ocamlopt -unsafe-string -w -a'
 }
