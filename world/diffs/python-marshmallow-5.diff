--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,31 +1,29 @@
 
 pkgname=python-marshmallow
-pkgver=3.21.0
-pkgrel=1
+pkgver=3.20.2
+pkgrel=5
 pkgdesc="A lightweight library for converting complex datatypes to and from native Python datatypes."
 url="https://github.com/marshmallow-code/marshmallow"
 license=('MIT')
 arch=('any')
 depends=('python-packaging')
-makedepends=('git' 'python-build' 'python-installer' 'python-flit-core')
-checkdepends=('python-pytest' 'python-simplejson' 'python-pytz')
-source=("git+https://github.com/marshmallow-code/marshmallow.git#tag=$pkgver")
-sha512sums=('bb6629f6473280f152fe2a2a194765326a011df3b8a76035c668387f51a54fe84700c13cb66852662020107a7dd4a49ef9ec69f9dfd57bb406e1f16e58511944')
+makedepends=('python-setuptools' 'python-build' 'python-installer' 'python-wheel')
+checkdepends=('python-pytest' 'python-simplejson' 'python-pytz' 'python-dateutil')
+source=("$pkgname-$pkgver.tar.gz::$url/archive/$pkgver.tar.gz")
+sha512sums=('8305693405a976c53333b0c6ef074a12af4736f9620ca37c7c2ec6318fac2b19086426344ce8c2f515e95becdba8b2bb1c20aca5a9dffb4145cb27fee00dc080')
 
 build() {
-  cd marshmallow
+  cd marshmallow-$pkgver
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd marshmallow
-  python -m venv --system-site-packages .testenv
-  .testenv/bin/python -m installer dist/*.whl
-  .testenv/bin/python -m pytest
+  cd marshmallow-$pkgver
+  PYTHONPATH=src pytest
 }
 
 package() {
-  cd marshmallow
+  cd marshmallow-$pkgver
   python -m installer --destdir="$pkgdir" dist/*.whl
-  install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
+  install -Dm644 LICENSE "$pkgdir"/usr/share/licenses/$pkgname/LICENSE
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,5 +1,5 @@
-git
 python-build
-python-flit-core
 python-installer
 python-packaging
+python-setuptools
+python-wheel

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd marshmallow
+cd marshmallow-$pkgver
 python -m build --wheel --no-isolation
 }
