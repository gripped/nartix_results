--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,39 +1,27 @@
 
 pkgname=audiofile
 pkgver=0.3.6
-pkgrel=11
+pkgrel=10
 pkgdesc="Silicon Graphics Audio File Library"
-arch=(x86_64)
+arch=('x86_64')
 url="https://audiofile.68k.org/"
-license=(
-  Apache-2.0
-  GPL-2.0-or-later
-  LGPL-2.1-or-later
-)
-depends=(
-  flac
-  gcc-libs
-  glibc
-)
-makedepends=(alsa-lib)
-provides=(libaudiofile.so)
-source=(
-  https://audiofile.68k.org/$pkgname-$pkgver.tar.gz
-  01_gcc6.patch
-  02_hurd.patch
-  03_CVE-2015-7747.patch
-  04_clamp-index-values-to-fix-index-overflow-in-IMA.cpp.patch
-  05_Always-check-the-number-of-coefficients.patch  # fixes CVE-2020-18781
-  06_Check-for-multiplication-overflow-in-MSADPCM-decodeSam.patch
-  07_Check-for-multiplication-overflow-in-sfconvert.patch
-  08_Fix-signature-of-multiplyCheckOverflow.-It-returns-a-b.patch
-  09_Actually-fail-when-error-occurs-in-parseFormat.patch
-  10_Check-for-division-by-zero-in-BlockCodec-runPull.patch
-  11_CVE-2018-13440.patch
-  12_CVE-2018-17095.patch
-  13_CVE-2019-13147.patch
-  14_CVE-2022-24599.patch
-)
+license=('GPL2' 'LGPL2.1')
+depends=('gcc-libs' 'flac')
+makedepends=('alsa-lib')
+provides=('libaudiofile.so')
+source=("https://audiofile.68k.org/$pkgname-$pkgver.tar.gz"
+        01_gcc6.patch
+        02_hurd.patch
+        03_CVE-2015-7747.patch
+        04_clamp-index-values-to-fix-index-overflow-in-IMA.cpp.patch
+        05_Always-check-the-number-of-coefficients.patch
+        06_Check-for-multiplication-overflow-in-MSADPCM-decodeSam.patch
+        07_Check-for-multiplication-overflow-in-sfconvert.patch
+        08_Fix-signature-of-multiplyCheckOverflow.-It-returns-a-b.patch
+        09_Actually-fail-when-error-occurs-in-parseFormat.patch
+        10_Check-for-division-by-zero-in-BlockCodec-runPull.patch
+        11_CVE-2018-13440.patch
+        12_CVE-2018-17095.patch)
 sha512sums=('f9a1182d93e405c21eba79c5cc40962347bff13f1b3b732d9a396e3d1675297515188bd6eb43033aaa00e9bde74ff4628c1614462456529cabba464f03c1d5fa'
             'ae11735970eaddb664251614743cb46ae029b4073f4f8ea7cd4570d50c0f4b7f7b426399901b011d1ea799bb99d4ac648e76be97f13a51e32d7a63f97b38a89f'
             '76ce5a29beaa394f3a24e7db7c40864f26119857e78087b6780853d06d4f44e80656c418b2c99d95224d29b69c23c51c54a4c8edac5dbaa4038a9d6c1ef7be06'
@@ -46,35 +34,34 @@
             '51c92ce66e987ae1d4bda65247134097705ef45cf7670401af7943bf6bbfc674089bcfafa49983046b10573ea72900adb96c296739c234d5e98539098eebe022'
             '234b0b520eebccc8e7782735615ad8fb2f7c03937da2b7dec0b091ca35b8a542d4e5c7ad22ed6715f019cdb36992838d7458ef58980bfb4fa80062e764d18ae2'
             'e29ab46b2edcbbeb048a7d9e6210d0faac8b75d9a48a663f62b37881e03d34fa97ffaa05d61da53b49404f60f0cadfcbbbb58438ae82af40dd37d0117bf8c631'
-            'ace83995606f900543f65ce6199fe1a69c757b7b37e92561be1c49c2f827676f888e36132ab3fedf3b9f77d4382ea933480fe326859c092aa95ba2c24e777363'
-            'bb60d5c90fcadd1790e873aaee10bfef458242c2767b242aefff64687ae00c3b82350284f7b327c296aba7770c78623ab1bffe06e4b289ca47cba99c809fa372'
-            '4c5a341e1d8e49a43041574be6f572d2352b2397a61a71259f64d20d49a61f8a3fef04149b13e2744982f3e86841a847dfc3e6eda6cc06eca3f5d6851038663f')
+            'ace83995606f900543f65ce6199fe1a69c757b7b37e92561be1c49c2f827676f888e36132ab3fedf3b9f77d4382ea933480fe326859c092aa95ba2c24e777363')
 
 prepare() {
-  cd $pkgname-$pkgver
+  cd "$pkgname-$pkgver"
   local filename
   for filename in "${source[@]}"; do
     if [[ "$filename" =~ \.patch$ ]]; then
       echo "Applying patch ${filename##*/}"
-      patch -p1 -N -i "../${filename##*/}"
+      patch -p1 -N -i "$srcdir/${filename##*/}"
     fi
   done
   autoreconf -vfi
 }
 
 build() {
-  cd $pkgname-$pkgver
+  cd "$pkgname-$pkgver"
   ./configure --prefix=/usr
   make
 }
 
 check() {
-  cd $pkgname-$pkgver
+  cd "$pkgname-$pkgver"
   make -k check
 }
 
 package() {
-  cd $pkgname-$pkgver
+  cd "$pkgname-$pkgver"
   make DESTDIR="$pkgdir" install
-  install -vDm 644 {AUTHORS,ChangeLog,NEWS,NOTES,README,TODO} -t "$pkgdir/usr/share/doc/$pkgname/"
+  install -vDm 644 {AUTHORS,ChangeLog,NEWS,NOTES,README,TODO} \
+    -t "${pkgdir}/usr/share/doc/${pkgname}"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
 alsa-lib
 flac
 gcc-libs
-glibc

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,16 +1,16 @@
 prepare() {
-cd $pkgname-$pkgver
+cd "$pkgname-$pkgver"
 local filename
 for filename in "${source[@]}"; do
 if [[ "$filename" =~ \.patch$ ]]; then
 echo "Applying patch ${filename##*/}"
-patch -p1 -N -i "../${filename##*/}"
+patch -p1 -N -i "$srcdir/${filename##*/}"
 fi
 done
 autoreconf -vfi
 }
 build() {
-cd $pkgname-$pkgver
+cd "$pkgname-$pkgver"
 ./configure --prefix=/usr
 make
 }
