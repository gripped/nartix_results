--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,13 +3,13 @@
 pkgbase=mariadb
 pkgname=('mariadb-libs' 'mariadb-clients' 'mariadb' 'mytop')
 pkgdesc='Fast SQL database server, derived from MySQL'
-pkgver=11.7.2
-pkgrel=1
+pkgver=11.6.2
+pkgrel=2
 arch=('x86_64')
 license=('GPL-2.0-only')
 url='https://mariadb.org/'
 makedepends=('git' 'boost' 'bzip2' 'cmake' 'cracklib' 'curl' 'jemalloc' 'judy' 'krb5' 'liburing'
-             'libxcrypt' 'libxml2' 'lz4' 'openssl' 'pcre2' 'systemd' 'zlib' 'zstd' 'xz')
+             'libxcrypt' 'libxml2' 'lz4' 'openssl' 'pcre2' 'zlib' 'zstd' 'xz')
 validpgpkeys=('177F4010FE56CA3336300305F1656F24C74CD1D8') # MariaDB Signing Key <signing-key@mariadb.org>
 source=("mariadb::git+https://github.com/MariaDB/server.git#tag=mariadb-${pkgver}?signed"
         'git+https://github.com/MariaDB/mariadb-connector-c.git'
@@ -18,15 +18,18 @@
         'git+https://github.com/wolfSSL/wolfssl.git'
         'git+https://github.com/mariadb-corporation/libmarias3.git'
         'git+https://github.com/mariadb-corporation/mariadb-columnstore-engine.git'
-        '0001-arch-specific.patch')
-sha256sums=('11f4af52c4ae42bc03f62b69ed3a2cba8f4959083ca4b47484c7e445a5e6c2a8'
-            'SKIP'
-            'SKIP'
-            'SKIP'
-            'SKIP'
-            'SKIP'
-            'SKIP'
-            'cb22088c50f6deea0b3858180514cad905304794e4f1e5752f03702eae10c353')
+        '0001-arch-specific.patch'
+'mariadb.sysusers.conf' 'mariadb.tmpfiles.conf')
+sha256sums=('41c74391ad5bbbcb131632d70c7d0dbe3acc48e87eaa8718e153b023b69a73ee'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            'SKIP'
+            '08c2c661159f4a7c54a764bb13459e37cbccdf98a93c2cf151d53f600f1fa35d'
+            'd21fa98b57b3f44d1731551ac441bf24b75662fb26393757aa22f9cb92d470cd'
+            '65dfade5bfa2338ec201e3fdcddd819ee87a94a27e1c7c293e890927f4ac7555')
 
 prepare() {
   cd mariadb/
@@ -40,12 +43,15 @@
   git submodule init
   git -c protocol.file.allow=always submodule update
 
+  git cherry-pick -n \
+    866a8ea6736d2edc0f6be552d1cdd6810c10d5ab
+
   patch -Np1 < ../0001-arch-specific.patch
 }
 
 build() {
   local _cmake_options=(
-    -DCOMPILATION_COMMENT="Arch Linux"
+    -DCOMPILATION_COMMENT="Artix Linux"
     -DCMAKE_BUILD_TYPE=RelWithDebInfo
     -Wno-dev
 
@@ -56,7 +62,7 @@
     -DINSTALL_SCRIPTDIR=bin
     -DINSTALL_INCLUDEDIR=include/mysql
     -DINSTALL_PLUGINDIR=lib/mysql/plugin
-    -DINSTALL_SYSTEMD_UNITDIR=lib/systemd/system/
+    -DINSTALL_SYSTEMD_UNITDIR=no
     -DINSTALL_SYSTEMD_SYSUSERSDIR=lib/sysusers.d/
     -DINSTALL_SYSTEMD_TMPFILESDIR=lib/tmpfiles.d/
     -DINSTALL_SHAREDIR=share
@@ -81,7 +87,7 @@
     -DWITH_PCRE2=system
     -DWITH_READLINE=ON
     -DWITH_SSL=system
-    -DWITH_SYSTEMD=yes
+    -DWITH_SYSTEMD=no
     -DWITH_UNIT_TESTS=OFF
     -DWITH_ZLIB=system
   )
@@ -160,7 +166,7 @@
           'etc/security/user_map.conf')
   install=mariadb.install
   depends=("mariadb-clients=${pkgver}" 'bzip2' 'coreutils' 'libxml2' 'lz4'
-           'systemd-libs' 'zstd')
+           'zstd')
   optdepends=('cracklib: for cracklib plugin'
               'curl: for ha_s3 plugin'
               'galera: for MariaDB cluster with Galera WSREP'
@@ -191,8 +197,8 @@
   mv usr/share/user_map.conf etc/security/
   mv usr/share/pam_user_map.so usr/lib/security/
 
-  rm -r usr/share/mysql/systemd/
-  rm -r usr/lib/systemd/system/mariadb@bootstrap.service.d
+  install -Dm644 $srcdir/mariadb.sysusers.conf usr/lib/sysusers.d/mariadb.conf
+  install -Dm644 $srcdir/mariadb.tmpfiles.conf usr/lib/tmpfiles.d/mariadb.conf
 
   rm usr/bin/{mariadb{_,-},mysql_}config
   rm -r usr/include/


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -21,8 +21,6 @@
 perl
 perl-dbd-mariadb
 perl-term-readkey
-systemd
-systemd-libs
 xz
 zlib
 zstd