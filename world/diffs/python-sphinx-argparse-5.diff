--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,44 +1,33 @@
 
 _name=sphinx-argparse
+_pypi_name=sphinx_argparse
 pkgname=python-sphinx-argparse
-pkgver=0.5.2
-pkgrel=1
+pkgver=0.4.0
+pkgrel=4
 pkgdesc="Sphinx extension that automatically documents argparse commands and options"
 arch=(any)
 url="https://github.com/ashb/sphinx-argparse"
 license=(MIT)
-depends=(
-  python
-  python-docutils
-  python-sphinx
-)
-makedepends=(
-  python-build
-  python-flit-core
-  python-installer
-  python-wheel
-)
-checkdepends=(
-  python-lxml
-  python-pytest
-)
+depends=(python-sphinx)
+makedepends=(python-build python-installer python-poetry-core python-wheel)
+checkdepends=(python-pytest)
 optdepends=('python-commonmark: markdown support')
-source=($pkgname-$pkgver.tar.gz::https://github.com/sphinx-doc/sphinx-argparse/archive/refs/tags/v$pkgver.tar.gz)
-sha512sums=('dbf6c5e87a3c864d16eab5ecf644754b71e240ae823ffb82a17950e17b2a916188fbe44c4b0551a1c31763accd4eec7e9ce8fc99f8b47a22a7ae4e69133a75ee')
-b2sums=('d4af0a872f3036f6bee071524beab2ad312eaf3464ff0b604d06c60dac8e4135b9c7a2a28fbe8c5dbd2b3a4dcf8458b26b77a70fabdde5d739358d0ee2f626c7')
+source=(https://files.pythonhosted.org/packages/source/${_name::1}/$_name/$_pypi_name-$pkgver.tar.gz)
+sha512sums=('b96050da6c02f87c54f9dc9146bed955e99258df740b467575a2b3e9919fa8c4c6d30a736dab24360086bfc0d7d09c4bc7a818700af2c7846eed3a3b99053d65')
+b2sums=('73118f56ff82d52f04066b9d500aebc77eb5a0fecd03fa69f382c0f2afc0cbffdd395da707cf37b59f039e93935f8d5c3fe0e0f7a2820d3b6509dd78b37b0d74')
 
 build() {
-  cd $_name-$pkgver
+  cd $_pypi_name-$pkgver
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd $_name-$pkgver
+  cd $_pypi_name-$pkgver
   pytest -vv
 }
 
 package() {
-  cd $_name-$pkgver
+  cd $_pypi_name-$pkgver
   python -m installer --destdir="$pkgdir" dist/*.whl
-  install -vDm 644 LICENCE.rst -t "$pkgdir/usr/share/licenses/$pkgname/"
+  install -vDm 644 LICENSE -t "$pkgdir/usr/share/licenses/$pkgname/"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,7 +1,5 @@
-python
 python-build
-python-docutils
-python-flit-core
 python-installer
+python-poetry-core
 python-sphinx
 python-wheel

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd $_name-$pkgver
+cd $_pypi_name-$pkgver
 python -m build --wheel --no-isolation
 }
