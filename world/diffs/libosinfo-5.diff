--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,25 +1,25 @@
 
 pkgname=libosinfo
 pkgver=1.11.0
-pkgrel=3
+pkgrel=2
 pkgdesc='GObject based library API for managing information about operating systems, hypervisors and the (virtual) hardware devices they can support'
 arch=('x86_64')
 url='https://libosinfo.org/'
 license=('GPL-2.0-or-later AND LGPL-2.1-or-later')
 depends=('gcc-libs' 'glib2' 'glibc' 'hwdata' 'libsoup3' 'libxml2' 'libxslt' 'osinfo-db')
-makedepends=('git' 'glib2-devel' 'gobject-introspection' 'meson' 'vala')
-source=("git+https://gitlab.com/libosinfo/$pkgname.git?signed#tag=v$pkgver")
-b2sums=('db8f3bd42b2b165c0d46e58fc4e6f15159381e5499130ea692374a9951ca316702b31a44a7d38304f1f76de06a5fa92b4fec68fd479b18706d03e29e509f9c11')
+makedepends=('gobject-introspection' 'meson' 'vala')
+source=("https://releases.pagure.org/libosinfo/$pkgname-$pkgver.tar.xz"{,.asc}
+        'libosinfo-Make-xmlError-struct-constant.patch')
 validpgpkeys=('DAF3A6FDB26B62912D0E8E3FBE86EBB415104FDF'  # Daniel P. Berrange
               '09B9C8FF223EF113AFA06A39EE926C2BDACC177B'  # Fabiano FidÃªncio
               '206D3B352F566F3B0E6572E997D9123DE37A484F') # Victor Toso de Carvalho <me@victortoso.com>
+sha256sums=('1bf96eec9e1460f3d1a713163cca1ff0d480a3490b50899292f14548b3a96b60'
+            'SKIP'
+            '1b4a5d69750a660d63b4408ffc9e6cc247e4ae6a4d52c033c6bdc3c918a41a65')
+
 
 prepare() {
-  cd $pkgname
-
-  git cherry-pick -n 5bbdd06503456784c5ffa22409e8bab50470d673
-
-  sed -i 's/-Werror//' meson.build
+  patch -d $pkgname-$pkgver -Np1 -i ../libosinfo-Make-xmlError-struct-constant.patch
 }
 
 build() {
@@ -28,7 +28,7 @@
     -D with-pci-ids-path=/usr/share/hwdata/pci.ids
   )
 
-  arch-meson $pkgname build "${meson_options[@]}"
+  artix-meson $pkgname-$pkgver build "${meson_options[@]}"
   meson compile -C build
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,7 +1,5 @@
 gcc-libs
-git
 glib2
-glib2-devel
 glibc
 gobject-introspection
 hwdata

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,13 +1,11 @@
 prepare() {
-cd $pkgname
-git cherry-pick -n 5bbdd06503456784c5ffa22409e8bab50470d673
-sed -i 's/-Werror//' meson.build
+patch -d $pkgname-$pkgver -Np1 -i ../libosinfo-Make-xmlError-struct-constant.patch
 }
 build() {
 local meson_options=(
 -D with-usb-ids-path=/usr/share/hwdata/usb.ids
 -D with-pci-ids-path=/usr/share/hwdata/pci.ids
 )
-arch-meson $pkgname build "${meson_options[@]}"
+artix-meson $pkgname-$pkgver build "${meson_options[@]}"
 meson compile -C build
 }
