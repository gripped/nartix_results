--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -5,40 +5,34 @@
   gcr-docs
 )
 pkgver=3.41.2
-pkgrel=2
+pkgrel=1
 pkgdesc="A library for bits of crypto UI and parsing"
 url="https://gitlab.gnome.org/GNOME/gcr"
 arch=(x86_64)
 license=(LGPL-2.1-or-later)
 depends=(
-  cairo
-  dconf
-  gdk-pixbuf2
-  glib2
-  glibc
   gtk3
-  hicolor-icon-theme
   libgcrypt
-  libp11-kit
   libsecret
   openssh
-  pango
+  p11-kit
 )
 makedepends=(
   gi-docgen
   git
-  glib2-devel
   gobject-introspection
   libxslt
   meson
   vala
 )
-source=("git+https://gitlab.gnome.org/GNOME/gcr.git?signed#tag=$pkgver")
-b2sums=('8fee923174d0b350a924994d6fada63c2deac46859f62b09cd7adca971ab47ae4c5f82b69a03e203254da695f46f05457c9a081923010e1437dec035d28f07ed')
-validpgpkeys=(
-  EF3226243ABEFC1A828BC5B46A2AC2B52126D946 # Dhanuka Warusadura <dhanuka@gnome.org>
-  A7C626E13F9AD776776BD9CA1D8A57CF2E8D36A3 # Niels De Graef (nielsdg) <nielsdegraef@gmail.com>
-)
+_commit=cd63e8a0378e13ba0aa15c2a68d1070fa62e6532  # tags/3.41.2^0
+source=("git+https://gitlab.gnome.org/GNOME/gcr.git#commit=$_commit")
+b2sums=('SKIP')
+
+pkgver() {
+  cd gcr
+  git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd gcr
@@ -47,9 +41,10 @@
 build() {
   local meson_options=(
     -D ssh_agent=false
+    -D systemd=disabled
   )
 
-  arch-meson gcr build "${meson_options[@]}"
+  artix-meson gcr build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -62,7 +57,6 @@
     libgck-1.so
     libgcr-{base,ui}-3.so
   )
-  install=gcr.install
 
   meson install -C build --destdir "$pkgdir"
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,20 +1,12 @@
 
-cairo
-dconf
-gdk-pixbuf2
 gi-docgen
 git
-glib2
-glib2-devel
-glibc
 gobject-introspection
 gtk3
-hicolor-icon-theme
 libgcrypt
-libp11-kit
 libsecret
 libxslt
 meson
 openssh
-pango
+p11-kit
 vala

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,7 +4,8 @@
 build() {
 local meson_options=(
 -D ssh_agent=false
+-D systemd=disabled
 )
-arch-meson gcr build "${meson_options[@]}"
+artix-meson gcr build "${meson_options[@]}"
 meson compile -C build
 }
