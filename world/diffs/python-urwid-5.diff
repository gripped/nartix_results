--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=python-urwid
 pkgver=3.0.4
-pkgrel=4
+pkgrel=1
 pkgdesc='Curses-based user interface library'
 arch=('any')
 url='https://urwid.org/'
@@ -12,7 +12,6 @@
   'python-wcwidth'
 )
 makedepends=(
-  'git'
   'python-build'
   'python-installer'
   'python-setuptools'
@@ -35,28 +34,23 @@
   'python-trio: for trio integration'
   'python-twisted: for twisted integration'
 )
-source=("git+https://github.com/urwid/urwid.git#tag=$pkgver")
-sha512sums=('1b6df1946fb69d6c2aaff8117ca32b03687aca63e068d732953c87931cf2388b80638b27eb6c9b528bbfe5df1822df534e27101f58b46585b476c60dca22eea1')
-b2sums=('1e4e7557a6beb5a7f9b1b0cb5bf9a2268a453e53f6962b19f4f9ed51b9be5c9aec88a70c0c0d75fe14cbbe7c5d1bb7ef70007715fbb742cbcc48cc8bec9d25c1')
-
-prepare() {
-  cd ${pkgname#python-}
-  git revert -n eaddcd279f59a0f68f00ad06019aea69f91a809b
-}
+source=("https://github.com/urwid/urwid/archive/$pkgver/${pkgname#python-}-$pkgver.tar.gz")
+sha512sums=('33dfc74ffbce8cc59334c3fcadf3924b2fd3065ba1711d72f917c6061aa54295abde3bce05ab3e3881d071812dad5017377fcb60d96a0469da30c8156d9dda3c')
+b2sums=('0cfdee5fa29303452d03565179c41ba865b5252d48b299013c8bac4b0a96180aca2a4e6616d1f7cecd5e8369662f0dd6a34a8f0ca4bc7e9b885b2a1ed80e9427')
 
 build() {
-  cd ${pkgname#python-}
+  cd ${pkgname#python-}-$pkgver
   export SETUPTOOLS_SCM_PRETEND_VERSION=$pkgver
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd ${pkgname#python-}
+  cd ${pkgname#python-}-$pkgver
   pytest --override-ini="addopts=-vv --doctest-modules -s" tests
 }
 
 package() {
-  cd ${pkgname#python-}
+  cd ${pkgname#python-}-$pkgver
   python -m installer --destdir="$pkgdir" dist/*.whl
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
-git
 glib2
 python
 python-build

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,9 +1,5 @@
-prepare() {
-cd ${pkgname#python-}
-git revert -n eaddcd279f59a0f68f00ad06019aea69f91a809b
-}
 build() {
-cd ${pkgname#python-}
+cd ${pkgname#python-}-$pkgver
 export SETUPTOOLS_SCM_PRETEND_VERSION=$pkgver
 python -m build --wheel --no-isolation
 }
