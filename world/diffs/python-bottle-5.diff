--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,13 +1,13 @@
 
 pkgname=python-bottle
-pkgver=0.13.1
-pkgrel=1
+pkgver=0.12.25
+pkgrel=6
 pkgdesc="A fast and simple micro-framework for small web-applications"
 arch=(any)
 url="https://bottlepy.org"
 license=('MIT')
 options=(!emptydirs)
-depends=('python')
+depends=('python' 'python-cgi') # TODO: remove cgi dependency when upgrading bottle to 0.13
 makedepends=('git' 'python-build' 'python-installer' 'python-setuptools'
              'python-wheel')
 checkdepends=('python-mako' 'python-jinja' 'python-cherrypy' 'python-twisted'
@@ -16,21 +16,28 @@
 optdepends=('python-waitress: Waitress WSGI server'
             'python-cherrypy: Cherrypy WSGI server'
             'python-eventlet: Eventlet server support')
-source=("git+https://github.com/defnull/bottle.git#tag=$pkgver")
-sha512sums=('24d0ae314dc884aa656be81b85618f7cfe2af2da665af5c52fe3f1ca4bbe011128633d9792f73ffadc0a2f9899c363d009cff1b5f2f0b18b092c1abdf8a35aa5')
+source=("$pkgname-$pkgver.tar.gz::https://github.com/defnull/bottle/archive/$pkgver.tar.gz"
+         python-3.12.patch)
+sha512sums=('b4b163d0225cc2be0f009427ac903dfbddc6f4bda89d3d7da2b201ccd2edbee97c2c08e7b210ffaa95077fe8ab6c1ff79ac5ffb212e8fdfed6268bfcfd6749bd'
+            'e1cef59f6ff005e78049c468942aef30ca1901a50466cf25d433f9aadbc3508a18e6b31bc302d02ee4f3d6d4801da5414762d6085166e40ad4568dea363cef6e')
+
+prepare() {
+  cd bottle-$pkgver
+  patch -p1 -i ../python-3.12.patch # Python 3.12 support (Fedora)
+}
 
 build() {
-  cd bottle
+  cd bottle-$pkgver
   python -m build --wheel --skip-dependency-check --no-isolation
 }
 
 check() {
-  cd bottle
+  cd bottle-$pkgver
   python -m unittest discover
 }
 
 package() {
-  cd bottle
+  cd bottle-$pkgver
   python -m installer --destdir="$pkgdir" dist/*.whl
 
   local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,7 @@
 git
 python
 python-build
+python-cgi
 python-installer
 python-setuptools
 python-wheel

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,8 @@
+prepare() {
+cd bottle-$pkgver
+patch -p1 -i ../python-3.12.patch # Python 3.12 support (Fedora)
+}
 build() {
-cd bottle
+cd bottle-$pkgver
 python -m build --wheel --skip-dependency-check --no-isolation
 }
