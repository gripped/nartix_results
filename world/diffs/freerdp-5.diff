--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 
 pkgname=freerdp
-pkgver=3.19.1
+pkgver=3.17.2
 _libver=${pkgver/.*/}
-pkgrel=1
+pkgrel=6
 epoch=2
 pkgdesc="Free implementation of the Remote Desktop Protocol (RDP)"
 arch=(x86_64)
@@ -12,7 +12,6 @@
   fuse3
   gcc-libs
   glibc
-  jansson
   libcups
   libx11
   libxcursor
@@ -36,6 +35,7 @@
   ffmpeg
   git
   icu
+  json-c
   krb5
   libjpeg-turbo
   libp11
@@ -61,10 +61,13 @@
   libwinpr$_libver.so
 )
 source=(
-  "git+https://github.com/$pkgname/$pkgname#tag=$pkgver"
+  "git+https://github.com/$pkgname/$pkgname?signed#tag=$pkgver"
 )
-sha512sums=('987d9337ccb8db11ab2308165b8deb56086795a17a042371983584e50f4846f3a7daf0435f94881c447d9fa3afb44f99c8d0112eaf76d2296265d600ebc0b450')
-b2sums=('dce17e6838a7bd7064deba9a0845eabe6c6a881db3fb7447c22ef4b85e82ff3e37d1f69adba56f0059b8d23a71bf2e26aa33c208e4756acb837e10cbe73b9409')
+sha512sums=('598bb7bb424ebd85c46780019a7264dc979a02f3189d314ffab967c9478e7f04c64c60aeeb1a6938e2796950b97d8a547236109f2539a411d0f828b719ee9436')
+b2sums=('5e83fda70de09191a8bf4300019793fe3b299cc06c8d0baca8393f847e95840dca5bb024c02bde8c2cec21c023703c6fd48dfce671936c1dcad86b061c00b42b')
+validpgpkeys=(
+  7703B333420E0AEF995EB4B3A49454A3FC909FD5 # akallabeth <akallabeth@posteo.net>
+)
 
 prepare() {
   git -C $pkgname cherry-pick -n 74a3a7695cdd09cf020acdeb09480ac8ee92ccbe
@@ -105,7 +108,7 @@
     -D WITH_SERVER=ON
     -D WITH_SERVER_CHANNELS=ON
     -D WITH_SWSCALE=ON
-    -D WITH_SYSTEMD=ON
+    -D WITH_SYSTEMD=OFF
     -D WITH_VAAPI=ON
     -D WITH_VERBOSE_WINPR_ASSERT=OFF
     -D WITH_WAYLAND=ON
@@ -129,6 +132,7 @@
     alsa-lib libasound.so
     ffmpeg libavcodec.so libavutil.so libswresample.so libswscale.so
     icu libicuuc.so
+    json-c libjson-c.so
     krb5 libk5crypto.so libkrb5.so
     libjpeg-turbo libjpeg.so
     libpng libpng16.so


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -6,7 +6,7 @@
 git
 glibc
 icu
-jansson
+json-c
 krb5
 libasound.so
 libavcodec.so
@@ -16,6 +16,7 @@
 libicuuc.so
 libjpeg-turbo
 libjpeg.so
+libjson-c.so
 libk5crypto.so
 libkrb5.so
 libp11

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -35,7 +35,7 @@
 -D WITH_SERVER=ON
 -D WITH_SERVER_CHANNELS=ON
 -D WITH_SWSCALE=ON
--D WITH_SYSTEMD=ON
+-D WITH_SYSTEMD=OFF
 -D WITH_VAAPI=ON
 -D WITH_VERBOSE_WINPR_ASSERT=OFF
 -D WITH_WAYLAND=ON
