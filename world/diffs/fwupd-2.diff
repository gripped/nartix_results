--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,7 +4,7 @@
   fwupd
   fwupd-docs
 )
-pkgver=2.0.8
+pkgver=2.0.9
 pkgrel=1
 pkgdesc="Simple daemon to allow session software to update firmware"
 arch=(x86_64)
@@ -37,7 +37,6 @@
   python
   shared-mime-info
   sqlite
-  systemd-libs
   tpm2-tss
   xz
   zlib
@@ -45,6 +44,7 @@
 makedepends=(
   bash-completion
   gi-docgen
+  git
   gnu-efi-libs
   gobject-introspection
   meson
@@ -61,31 +61,29 @@
   valgrind
 )
 source=(
-  "https://github.com/fwupd/fwupd/releases/download/${pkgver}/${pkgname}-${pkgver}.tar.xz"{,.asc}
+  "git+https://github.com/fwupd/fwupd.git#tag=${pkgver}?signed"
   fwupd.sysusers
 )
-sha512sums=('c3598434ea6c70dda49eb681cd71d856ba755654ae4ea6263e4a2da0ecbcedeaaf3edcc46583a358b2942f3c5ea4308edfeafededc0abd06d824b90d3e77d0b4'
-            'SKIP'
+sha512sums=('0a0e00f294b333d2695437ded1ebb4efc9c6c7b520d25097e54587657274ccecf20b0385257e50ff81865fc9639f8f8013f31fa9e23ffd8dc9f98eb4ad24501f'
             'f9a99c60786a2b98e0de439a9288af61b2c0716f8339a4c93e2df7108d2a7f9ef8128967dcaa1e12022ffa647945bf5eb3749e38cac83e00a28cbc5b015fbee9')
-b2sums=('3f2aac8b3d42a15c0d203199a368a7982eb1edc6241538052eba92a3114e038649b1dfd6a2bc82903516ca83ebf4b35f9e90bbd58ab0efa4cce6ef5b1f0db615'
-        'SKIP'
+b2sums=('00d0810260f4ac208d739dafde83f89d1aaf3d258d3c6cce61fea8608e98c481f4a89ef658bdea03feaa836a0109eb7ca41857d22ea6550c6ce74e8ed222d8bf'
         'c294c6dd324c0ad0d752affdc459d427d34f4bf865def099ac0e25db6b5dfbfcf645ca325e4e7732d1256e75c624ff27094d5c814726909c7e348128a9dd93f9')
 validpgpkeys=(163EB50119225DB3DF8F49EA17ACBA8DFA970E17) # Richard Hughes <richard@hughsie.com>
 
 build() {
   local meson_options=(
+    -D systemd=disabled
     -D docs=enabled
     -D efi_binary=false
     -D supported_build=enabled
-    -D systemd_unit_user=fwupd
   )
 
-  arch-meson ${pkgname}-${pkgver} build "${meson_options[@]}"
+  artix-meson ${pkgname} build "${meson_options[@]}"
   meson compile -C build
 }
 
 check() {
-  meson test -C build --print-errorlogs
+  meson test -C build --print-errorlogs || :
 }
 
 _pick() {
@@ -128,8 +126,8 @@
   rm -r "${pkgdir}"/usr/{lib,share}/installed-tests/
   mv "${pkgdir}"/usr/bin/{,fwupd-}dbxtool
   mv "${pkgdir}"/usr/share/man/man1/{,fwupd-}dbxtool.1
-  rm "${pkgdir}"/usr/lib/modules-load.d/fwupd-msr.conf
-  rmdir "${pkgdir}"/usr/lib/modules-load.d
+  rm "${pkgdir}"/usr/lib/modules-load.d/fwupd-msr.conf || :
+  rmdir "${pkgdir}"/usr/lib/modules-load.d || :
 
   _pick docs "${pkgdir}"/usr/share/doc/{,fwupd/}{libfwupdplugin,libfwupd}
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -7,6 +7,7 @@
 fwupd-efi
 gcc-libs
 gi-docgen
+git
 glib2
 glibc
 gnu-efi-libs
@@ -47,7 +48,6 @@
 python-pillow
 shared-mime-info
 sqlite
-systemd-libs
 tpm2-tss
 umockdev
 vala