--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,133 +1,135 @@
 
 pkgbase=wireplumber
 pkgname=(
-  wireplumber
-  libwireplumber
-  wireplumber-docs
+	wireplumber
+	libwireplumber
+	wireplumber-docs
 )
-pkgver=0.5.1
-pkgrel=1
+_commit=59d190a2bd400f3b093f99b16fc0fb06f6cb2cfe # tags/0.5.0
+pkgver=0.5.0
+pkgrel=2
 pkgdesc="Session / policy manager implementation for PipeWire"
 url="https://pipewire.pages.freedesktop.org/wireplumber/"
 arch=(x86_64)
 license=(MIT)
 makedepends=(
-  doxygen
-  gcc-libs
-  git
-  glib2
-  glibc
-  gobject-introspection
-  graphviz
-  libpipewire
-  lua
-  meson
-  pipewire
-  python-breathe
-  python-lxml
-  python-sphinx
-  python-sphinx_rtd_theme
-  systemd
-  systemd-libs
+	doxygen
+	gcc-libs
+	git
+	glib2
+	glibc
+	gobject-introspection
+	graphviz
+	libpipewire
+	lua
+	meson
+	pipewire
+	python-breathe
+	python-lxml
+	python-sphinx
+	python-sphinx_rtd_theme
 )
 checkdepends=(pipewire-audio)
-source=("git+https://gitlab.freedesktop.org/pipewire/$pkgbase.git#tag=$pkgver")
-b2sums=('df10e5be79c85c8b2979ddac32f78633dceaeb1764dc64040cd3d6206570bed9141d9edfd5dc401f59e0d585eae5a88739db85b6199df7a735805dd94d97f3d6')
+source=("git+https://gitlab.freedesktop.org/pipewire/$pkgbase.git#commit=$_commit")
+b2sums=('9e3f574cef389749ec5c9364846f7172f8e562ea6cdb6c3919ce4ae9bfba68436a52097c3a4fd064770c6b6e8d78b502a86e762e133bdea30f1a9b99ed53a21d')
 
 pkgver() {
-  cd $pkgbase
-  git describe --tags | sed 's/\([^-]*-g\)/r\1/;s/-/./g'
+	cd $pkgbase
+	git describe --tags | sed 's/\([^-]*-g\)/r\1/;s/-/./g'
 }
 
 prepare() {
-  cd $pkgbase
+	cd $pkgbase
 
+	git cherry-pick -n 428462ddf3f812a1da63d0b499e105c6391abbf4
 }
 
 build() {
-  local meson_options=(
-    -D elogind=disabled
-    -D system-lua=true
-  )
+	local meson_options=(
+		-D system-lua=true
+		-D systemd=disabled
+		-D elogind=enabled
+	)
 
-  arch-meson $pkgbase build "${meson_options[@]}"
-  meson compile -C build
+	artix-meson $pkgbase build "${meson_options[@]}"
+	meson compile -C build
+
+	artix-meson $pkgbase build "${meson_options[@]}"
+	meson compile -C build
 }
 
 check() {
-  meson test -C build --print-errorlogs
+	meson test -C build --print-errorlogs
 }
 
 _pick() {
-  local p="$1" f d; shift
-  for f; do
-    d="$srcdir/$p/${f#$pkgdir/}"
-    mkdir -p "$(dirname "$d")"
-    mv "$f" "$d"
-    rmdir -p --ignore-fail-on-non-empty "$(dirname "$f")"
-  done
+	local p="$1" f d
+	shift
+	for f; do
+		d="$srcdir/$p/${f#$pkgdir/}"
+		mkdir -p "$(dirname "$d")"
+		mv "$f" "$d"
+		rmdir -p --ignore-fail-on-non-empty "$(dirname "$f")"
+	done
 }
 
 _ver=${pkgver:0:3}
 
 package_wireplumber() {
-  depends=(
-    "libwireplumber=$pkgver-$pkgrel"
-    gcc-libs
-    glibc
-    libg{lib,object,io}-2.0.so
-    libpipewire
-    libpipewire-0.3.so
-    libsystemd.so
-    lua
-    pipewire
-    systemd-libs
-  )
-  optdepends=(
-    'wireplumber-docs: Documentation'
-  )
-  provides=(pipewire-session-manager)
-  conflicts=(pipewire-media-session)
-  install=wireplumber.install
+	depends=(
+		"libwireplumber=$pkgver-$pkgrel"
+		gcc-libs
+		glibc
+		libg{lib,object,io}-2.0.so
+		libpipewire
+		libpipewire-0.3.so
+		lua
+		pipewire
+	)
+	optdepends=(
+		'wireplumber-docs: Documentation'
+	)
+	provides=(pipewire-session-manager)
+	conflicts=(pipewire-media-session)
 
-  meson install -C build --destdir "$pkgdir"
+	meson install -C build --destdir "$pkgdir"
 
-  (
-    cd "$pkgdir"
+	(
+		cd "$pkgdir"
 
-    _pick libw usr/lib/libwireplumber-$_ver.so*
-    _pick libw usr/lib/girepository-1.0
-    _pick libw usr/lib/pkgconfig
-    _pick libw usr/include
-    _pick libw usr/share/gir-1.0
+		_pick libw usr/lib/libwireplumber-$_ver.so*
+		_pick libw usr/lib/girepository-1.0
+		_pick libw usr/lib/pkgconfig
+		_pick libw usr/include
+		_pick libw usr/share/gir-1.0
 
-    _pick docs usr/share/doc
-  )
+		_pick docs usr/share/doc
+	)
 
-  install -Dt "$pkgdir/usr/share/doc/$pkgname" -m644 $pkgbase/{NEWS,README}*
-  install -Dt "$pkgdir/usr/share/licenses/$pkgname" -m644 $pkgbase/LICENSE
+	install -Dt "$pkgdir/usr/share/doc/$pkgname" -m644 $pkgbase/{NEWS,README}*
+	install -Dt "$pkgdir/usr/share/licenses/$pkgname" -m644 $pkgbase/LICENSE
 }
 
 package_libwireplumber() {
-  pkgdesc+=" - client library"
-  depends=(
-    gcc-libs
-    glibc
-    libg{lib,module,object,io}-2.0.so
-    libpipewire-0.3.so
-  )
-  provides=(libwireplumber-$_ver.so)
+	pkgdesc+=" - client library"
+	depends=(
+		gcc-libs
+		glibc
+		libg{lib,module,object,io}-2.0.so
+		libpipewire-0.3.so
+	)
+	provides=(libwireplumber-$_ver.so)
 
-  mv libw/* "$pkgdir"
+	mv libw/* "$pkgdir"
 
-  install -Dt "$pkgdir/usr/share/licenses/$pkgname" -m644 $pkgbase/LICENSE
+	install -Dt "$pkgdir/usr/share/licenses/$pkgname" -m644 $pkgbase/LICENSE
 }
 
 package_wireplumber-docs() {
-  pkgdesc+=" - documentation"
+	pkgdesc+=" - documentation"
 
-  mv docs/* "$pkgdir"
+	mv docs/* "$pkgdir"
 
-  install -Dt "$pkgdir/usr/share/licenses/$pkgname" -m644 $pkgbase/LICENSE
+	install -Dt "$pkgdir/usr/share/licenses/$pkgname" -m644 $pkgbase/LICENSE
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -11,7 +11,6 @@
 libgobject-2.0.so
 libpipewire
 libpipewire-0.3.so
-libsystemd.so
 libwireplumber
 lua
 meson
@@ -20,5 +19,3 @@
 python-lxml
 python-sphinx
 python-sphinx_rtd_theme
-systemd
-systemd-libs