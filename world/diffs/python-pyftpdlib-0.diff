--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,8 @@
 
 pkgname=python-pyftpdlib
-pkgver=2.1.0
-pkgrel=1
+_pkgname=${pkgname#python-}
+pkgver=2.0.1
+pkgrel=3
 pkgdesc="Extremely fast and scalable Python FTP server library"
 arch=(any)
 url="https://github.com/giampaolo/pyftpdlib"
@@ -26,24 +27,22 @@
   'python-pyopenssl: FTPS support'
   'python-psutil: to keep track of FTP server memory usage'
 )
-source=("$url/archive/release-$pkgver/$pkgname-release-$pkgver.tar.gz")
-sha256sums=('22ef6dc8fa4a8ca66c4de413721239ed0dfb4d7b7a8ee26f40ebf084bbfd1532')
+source=("$pkgname-$pkgver.tar.gz::$url/archive/release-$pkgver.tar.gz")
+sha256sums=('962b58f5affa7fca06f121c8922311f7b7fb71e651e859d3de97995d0bec00d9')
 
 build() {
-  cd "${pkgname#python-}-release-$pkgver"
+  cd "$_pkgname-release-$pkgver"
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd "${pkgname#python-}-release-$pkgver"
-  pytest --override-ini="addopts=" \
-    --deselect=tests/test_functional_ssl.py::TestFtpListingCmdsTLSMixin::test_nlst \
-    --deselect=tests/test_functional_ssl.py::TestFtpListingCmdsTLSMixin::test_nlst \
-    --deselect=tests/test_functional_ssl.py::TestFtpListingCmdsTLSMixin::test_stat
+  cd "$_pkgname-release-$pkgver"
+  pytest \
+    --deselect pyftpdlib/test/test_functional_ssl.py::TestFtpRetrieveDataTLSMixin::test_restore_on_retr
 }
 
 package() {
-  cd "${pkgname#python-}-release-$pkgver"
+  cd "$_pkgname-release-$pkgver"
   python -m installer --destdir="$pkgdir" dist/*.whl
   install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd "${pkgname#python-}-release-$pkgver"
+cd "$_pkgname-release-$pkgver"
 python -m build --wheel --no-isolation
 }
