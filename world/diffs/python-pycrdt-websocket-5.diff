--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,44 +1,40 @@
 
-_pyname=pycrdt-websocket
-pkgname=python-$_pyname
-pkgver=0.13.0
+_pyname=pycrdt_websocket
+pkgname=python-${_pyname/_/-}
+pkgver=0.12.7
 pkgrel=1
 pkgdesc='CRDTs based on Yrs'
 arch=(any)
 url='https://github.com/jupyter-server/pycrdt-websocket'
 license=(MIT)
 depends=(python
+         python-aiosqlite
          python-anyio
-         python-pycrdt
-         python-sqlite-anyio)
-makedepends=(git
-             python-build
+         python-pycrdt)
+makedepends=(python-build
              python-hatchling
              python-installer)
-checkdepends=(hypercorn
-              python-httpx-ws
-              python-pytest
+checkdepends=(python-pytest
               python-pytest-asyncio
-              python-trio
               python-websockets
               uvicorn)
-source=(git+https://github.com/jupyter-server/pycrdt-websocket#tag=v$pkgver)
-sha256sums=('3fbad7dcadf4f63efc8aa4a5c62bf5da294894140b770cf38a6186f1713ff061')
+source=(https://pypi.python.org/packages/source/${_pyname:0:1}/$_pyname/$_pyname-$pkgver.tar.gz)
+sha256sums=('5ce1d3ad8ba5d3407400f3dcf5d96c9b9d9836fb421928ac5698dd094ed18cfa')
 
 build() {
-  cd $_pyname
+  cd $_pyname-$pkgver
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd $_pyname
+  cd $_pyname-$pkgver
   python -m venv --system-site-packages test-env
   test-env/bin/python -m installer dist/*.whl
   test-env/bin/python -m pytest -v -k 'not test_pycrdt_yjs.py'
 }
 
 package() {
-  cd $_pyname
+  cd $_pyname-$pkgver
   python -m installer --destdir="$pkgdir" dist/*.whl
   install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,8 +1,7 @@
-git
 python
+python-aiosqlite
 python-anyio
 python-build
 python-hatchling
 python-installer
 python-pycrdt
-python-sqlite-anyio

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd $_pyname
+cd $_pyname-$pkgver
 python -m build --wheel --no-isolation
 }
