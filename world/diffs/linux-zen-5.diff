--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,13 +1,11 @@
 
 pkgbase=linux-zen
-pkgver=6.18.13.zen1
+pkgver=6.7.6.zen1
 pkgrel=1
 pkgdesc='Linux ZEN'
 url='https://github.com/zen-kernel/zen-kernel'
-arch=(
-  x86_64
-)
-license=(GPL-2.0-only)
+arch=(x86_64)
+license=(GPL2)
 makedepends=(
   bc
   cpio
@@ -16,46 +14,39 @@
   pahole
   perl
   python
-  rust
-  rust-bindgen
-  rust-src
   tar
   xz
 
   graphviz
   imagemagick
   python-sphinx
-  python-yaml
   texlive-latexextra
 )
-options=(
-  !debug
-  !strip
-)
+options=('!strip')
 _srcname=linux-${pkgver%.*}
 _srctag=v${pkgver%.*}-${pkgver##*.}
 source=(
   https://cdn.kernel.org/pub/linux/kernel/v${pkgver%%.*}.x/${_srcname}.tar.{xz,sign}
   $url/releases/download/$_srctag/linux-$_srctag.patch.zst{,.sig}
-)
-source_x86_64=(config.x86_64)
+  config  # the main kernel config file
+)
 validpgpkeys=(
   ABAF11C65A2970B130ABE3C479BE3E4300411886  # Linus Torvalds
   647F28654894E3BD457199BE38DBBDC86092693E  # Greg Kroah-Hartman
   83BC8889351B5DEBBB68416EB8AC08600F108CDF  # Jan Alexander Steffens (heftig)
 )
-b2sums=('1b97badce04dcc6a9e674a646e1eec5b2fa31a442856af748de730946113b2549d31ccf24417d0702142bdbde6636d874db7dd6f274f513f973c97e0866a3c34'
+sha256sums=('e489ec0e1370d089b446d565aded7a698093d2b7c4122a18f21edb6ef93d37d3'
+            'SKIP'
+            'c6bc98b4ca0839519bc3b497d3094df4094ab346cea90dea5d6189e2439eedb1'
+            'SKIP'
+            '08174d06259be49e66d548aebfc4c464c30495202385f6d975f4f4338645f830')
+b2sums=('51d6e2304e7a9188a0fec5714276589cb46948157c76a2f4ed3f5e0bf634d94a89ea75251229a86e018767a3367328c16b610d631c78d82663dcd1d904b73385'
         'SKIP'
-        '6e2b9aee38752e3db223d83a0dee333392cfba83d07d5deb826170caa532330005ba92047689853eb15153aef8216715d506a609c65a0b9b42ebd98194459cb5'
-        'SKIP')
-b2sums_x86_64=('9ea5218c1711bdf368564231c7e8f0ac34a284e2bdc4c8bf89f5cad0f88ae9392bf970b64b70184906b48e96bd1d57207f9dac075abd101d0b7622e8f53b33ee')
-
-sha256sums=('ed2c3c55fd38e6836c094fce356f2567f9516130b73354a29857960368c5687f'
-            'SKIP'
-            'd8562fbc8a1fa8742ad2e8f756657921919ef30b1dfb240f293a9c2d734c3ce2'
-            'SKIP')
-
-export KBUILD_BUILD_HOST=archlinux
+        '804a6bfbd65c834da19bfc0e763c0c51a5bb56db27afa025f6122ca429cfa63b55ca384c45d70fe0601cd16001daf75981a55be86d71b471b005363229213c3e'
+        'SKIP'
+        '25a0316b066956e07d8eb3461b7d71dafc2c2aca37157ddef4db779d59668fb1540422d26c76c91313c82fa75b539316bb35abda29571351a9ffc8f9ba62dc24')
+
+export KBUILD_BUILD_HOST=artixlinux
 export KBUILD_BUILD_USER=$pkgbase
 export KBUILD_BUILD_TIMESTAMP="$(date -Ru${SOURCE_DATE_EPOCH:+d @$SOURCE_DATE_EPOCH})"
 
@@ -77,9 +68,9 @@
   done
 
   echo "Setting config..."
-  cp ../config.$CARCH .config
+  cp ../config .config
   make olddefconfig
-  diff -u ../config.$CARCH .config || :
+  diff -u ../config .config || :
 
   make -s kernelrelease > version
   echo "Prepared $pkgbase version $(<version)"
@@ -89,7 +80,7 @@
   cd $_srcname
   make all
   make -C tools/bpf/bpftool vmlinux.h feature-clang-bpf-co-re=1
-  make htmldocs SPHINXOPTS=-QT
+  make htmldocs
 }
 
 _package() {
@@ -100,14 +91,12 @@
     kmod
   )
   optdepends=(
-    "$pkgbase-headers: headers and scripts for building modules"
+    'wireless-regdb: to set the correct wireless channels of your country'
     'linux-firmware: firmware images needed for some devices'
-    'scx-scheds: to use sched-ext schedulers'
-    'wireless-regdb: to set the correct wireless channels of your country'
   )
   provides=(
     KSMBD-MODULE
-    NTSYNC-MODULE
+    UKSMD-BUILTIN
     VHBA-MODULE
     VIRTUALBOX-GUEST-MODULES
     WIREGUARD-MODULE
@@ -133,37 +122,25 @@
 _package-headers() {
   pkgdesc="Headers and scripts for building modules for the $pkgdesc kernel"
   depends=(pahole)
-  provides=(LINUX-HEADERS)
 
   cd $_srcname
   local builddir="$pkgdir/usr/lib/modules/$(<version)/build"
-
-  local karch
-  case $CARCH in
-    x86_64) karch=x86 ;;
-    *) echo "Unknown CARCH $CARCH"; exit 1 ;;
-  esac
 
   echo "Installing build files..."
   install -Dt "$builddir" -m644 .config Makefile Module.symvers System.map \
     localversion.* version vmlinux tools/bpf/bpftool/vmlinux.h
   install -Dt "$builddir/kernel" -m644 kernel/Makefile
-  install -Dt "$builddir/arch/$karch" -m644 arch/$karch/Makefile
+  install -Dt "$builddir/arch/x86" -m644 arch/x86/Makefile
   cp -t "$builddir" -a scripts
-  ln -srt "$builddir" "$builddir/scripts/gdb/vmlinux-gdb.py"
-
-  if [[ $(scripts/config -s CONFIG_HAVE_STACK_VALIDATION) = y ]]; then
-    install -Dt "$builddir/tools/objtool" tools/objtool/objtool
-  fi
-
-  if [[ $(scripts/config -s CONFIG_DEBUG_INFO_BTF_MODULES) = y ]]; then
-    install -Dt "$builddir/tools/bpf/resolve_btfids" tools/bpf/resolve_btfids/resolve_btfids
-  fi
+
+  install -Dt "$builddir/tools/objtool" tools/objtool/objtool
+
+  install -Dt "$builddir/tools/bpf/resolve_btfids" tools/bpf/resolve_btfids/resolve_btfids
 
   echo "Installing headers..."
   cp -t "$builddir" -a include
-  cp -t "$builddir/arch/$karch" -a arch/$karch/include
-  install -Dt "$builddir/arch/$karch/kernel" -m644 arch/$karch/kernel/asm-offsets.s
+  cp -t "$builddir/arch/x86" -a arch/x86/include
+  install -Dt "$builddir/arch/x86/kernel" -m644 arch/x86/kernel/asm-offsets.s
 
   install -Dt "$builddir/drivers/md" -m644 drivers/md/*.h
   install -Dt "$builddir/net/mac80211" -m644 net/mac80211/*.h
@@ -179,20 +156,10 @@
   echo "Installing KConfig files..."
   find . -name 'Kconfig*' -exec install -Dm644 {} "$builddir/{}" \;
 
-  echo "Installing Rust files..."
-  if [[ $(scripts/config -s CONFIG_RUST) = y ]]; then
-    install -Dt "$builddir/rust" -m644 rust/*.rmeta
-    install -Dt "$builddir/rust" rust/*.so
-  fi
-
-  echo "Installing unstripped VDSO..."
-  make INSTALL_MOD_PATH="$pkgdir/usr" vdso_install \
-    link=  # Suppress build-id symlinks
-
   echo "Removing unneeded architectures..."
   local arch
   for arch in "$builddir"/arch/*/; do
-    [[ $arch = */$karch/ ]] && continue
+    [[ $arch = */x86/ ]] && continue
     echo "Removing $(basename "$arch")"
     rm -r "$arch"
   done


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -11,10 +11,6 @@
 perl
 python
 python-sphinx
-python-yaml
-rust
-rust-bindgen
-rust-src
 tar
 texlive-latexextra
 xz

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -13,9 +13,9 @@
 patch -Np1 < "../$src"
 done
 echo "Setting config..."
-cp ../config.$CARCH .config
+cp ../config .config
 make olddefconfig
-diff -u ../config.$CARCH .config || :
+diff -u ../config .config || :
 make -s kernelrelease > version
 echo "Prepared $pkgbase version $(<version)"
 }
@@ -23,5 +23,5 @@
 cd $_srcname
 make all
 make -C tools/bpf/bpftool vmlinux.h feature-clang-bpf-co-re=1
-make htmldocs SPHINXOPTS=-QT
+make htmldocs
 }
