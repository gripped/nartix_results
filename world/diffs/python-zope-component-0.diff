--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,7 @@
 
 pkgname=python-zope-component
-_pkgname=zope.component
-pkgver=7.0
-pkgrel=1
+pkgver=6.0
+pkgrel=3
 pkgdesc="Represents the core of the Zope Component Architecture"
 arch=('any')
 url="https://github.com/zopefoundation/zope.component"
@@ -38,22 +37,30 @@
   'python-zope-security: for security'
 )
 source=("$url/archive/$pkgver/$pkgname-$pkgver.tar.gz")
-sha512sums=('1bdd8715c928e3bbb6fe29e7e74368f5146ea5e8496f383427809a9c2f95b2d2db1960abdc2e89037b903a870ae19772b78b76a30b968d936e702bc65f6cad2a')
-b2sums=('8ac389513d5891d13b50e0a0374ea46dfe9cdcd4a4c6ce533603236e587f193d7bdcc143106a7fc04605ef250ee6c6a6657351350bcca507ce665de42f5a3738')
+sha512sums=('0f27ce6a901d780d0ff35718698b140d8f4763fed14f95a483ce984e55e25b54a35c5dfde9205dbf8436e96b6f3ecb4b560a46cf5bc8ccd3875b859796b0c1e9')
+b2sums=('b5c0e1f6326c74e28b9534b50d7fba65215ad6786679e4dc2a340a22b7ab45c45e8f692141c1d48d100f407fcdb4dd4a3e8a120890dbed5f77a5fbd2d2243c96')
 
 build() {
-  cd $_pkgname-$pkgver
-  python -m build --wheel --no-isolation --skip-dependency-check
+  cd zope.component-$pkgver
+  python -m build --wheel --no-isolation
 }
 
 check() {
-  cd $_pkgname-$pkgver
-  python -m venv --system-site-packages test-env
-  test-env/bin/python -m installer dist/*.whl
-  test-env/bin/python -m zope.testrunner -vc --test-path src/
+  cd zope.component-$pkgver
+
+  local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
+  local pytest_options=(
+    -vv
+    --ignore "$(pwd)/test_dir/$site_packages/zope/component/tests/test_interface.py"
+  )
+
+  python -m installer --destdir=test_dir dist/*.whl
+  export PYTHONPATH="$(pwd)/test_dir/$site_packages:$PYTHONPATH"
+  pytest "${pytest_options[@]}" "$(pwd)/test_dir/$site_packages"
 }
 
 package() {
-  cd $_pkgname-$pkgver
+  cd zope.component-$pkgver
   python -m installer --destdir="$pkgdir" dist/*.whl
 }
+


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd $_pkgname-$pkgver
-python -m build --wheel --no-isolation --skip-dependency-check
+cd zope.component-$pkgver
+python -m build --wheel --no-isolation
 }
