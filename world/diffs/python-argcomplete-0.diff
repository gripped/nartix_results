--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=python-argcomplete
 _pyname=argcomplete
-pkgver=3.4.0
+pkgver=3.1.2
 pkgrel=1
 pkgdesc='Easy, extensible command line tab completion of arguments for your Python script'
 url='https://github.com/kislyuk/argcomplete'
@@ -10,9 +10,19 @@
 depends=('python')
 makedepends=('git' 'python-build' 'python-installer' 'python-setuptools-scm' 'python-wheel')
 checkdepends=('fish' 'python-pexpect' 'python-pip' 'tcsh' 'zsh')
-source=(${_pyname}::"git+$url#tag=v$pkgver")
-sha512sums=('99a3b9f6c0572b309f2da8846cceb89e6a8f03eb3bd17b5695a8a4a34a2d71e4e68ac283ec5a0e90eb50df3b4c095417faccec2fd607a5ac81219190cb489e58')
+source=(${_pyname}::"git+$url?signed#tag=v$pkgver")
+sha512sums=('4dfbc2b3542d791948602b05fb7939b22509f8a81d7870be92ef37af045132198ef28add76c3e4485f431ebb6cf52b489a443a48e6a0580e72be642b68770d15')
 validpgpkeys=('29BCBADB4ECAAAC2382699388AFAFCD242818A52') # Andrey Kislyuk <kislyuk@gmail.com>
+
+pkgver() {
+  cd ${_pyname}
+  git describe --tags --match 'v*' | sed 's/^v//;s/\([^-]*-g\)/r\1/;s/-/./g'
+}
+
+prepare() {
+  cd ${_pyname}
+  git cherry-pick -n 54a4846b3a774cd9037167898f3cce38ba9d58e8
+}
 
 build() {
   cd ${_pyname}
@@ -21,7 +31,8 @@
 
 check() {
   cd ${_pyname}
-  python test/test.py -v
+  echo "set enable-bracketed-paste off" > .inputrc
+  INPUTRC=$PWD/.inputrc python test/test.py -v
 }
 
 package() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,3 +1,7 @@
+prepare() {
+cd ${_pyname}
+git cherry-pick -n 54a4846b3a774cd9037167898f3cce38ba9d58e8
+}
 build() {
 cd ${_pyname}
 python -m build --wheel --no-isolation
