--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,7 +2,7 @@
 pkgbase=lib3mf
 pkgname=({,python-}lib3mf)
 pkgver=2.4.1
-pkgrel=2
+pkgrel=1
 pkgdesc='Implementation of the 3D Manufacturing Format file standard'
 arch=(x86_64)
 url='https://github.com/3MFConsortium/lib3mf'
@@ -26,23 +26,18 @@
   "$pkgbase::git+$url#tag=v$pkgver"
   __init__.py
   fix-missing-header.patch
-  fix-install.patch
 )
 sha512sums=('c34e768ef4c1f63c2910d245036ebf9b74040ebc98c13c3456f261303d5ecf6c3a516ed17bbf7098f857a254213e24af4d15573e826c4801d20a8c62d99cc0f1'
             '56cbdd17b95bb98c0d40c294d6a1691594da9630ee0d7ba1e5f0cc4c8be8276edf51af30509b32ba8336a1f24a5b45e3e7436792afa246f3c54d6d8adae47d7c'
-            '576f146007b2831f819f4f2b5cbfc130aed88750b1ec91965ab2cb5a125b4e8bca489eaa11dcde88762755b7fadbd847b52729463923b6724149dc5fe8507f8c'
-            '03461ce00fd64125e0cef7ed62d98d4216b1bc9a202eab7844aaeccfca4ac39408abc8501b495ecb2c3ab8b956078f85ee35029f505e433b276c0078776ac44a')
+            '576f146007b2831f819f4f2b5cbfc130aed88750b1ec91965ab2cb5a125b4e8bca489eaa11dcde88762755b7fadbd847b52729463923b6724149dc5fe8507f8c')
 b2sums=('e5b8ea1060b99d800fd23bec0e55163cbe4757e1298ae13c851410e54f4eb153ad62e29da8fd6effe50358fd240635fa1f852e7a8b19a3fe7655379d8737c5da'
         'cf8f3e695861af2fdacb0d82bce0dc9c9424d8d671ffd37cf59250d3def01f957b57a80b4eb84b7ce0a1ddc339ce0b3a1da5c2bb2e7f2852f9602706b89f9ada'
-        '21668c04fe6bcb632dc7ed5a9cee8a5fbef71d8a14d110403fba23396aa1718d65920c10eb823187cef41bd7fd3d52a94345561f496ea0ab166f4dfae3cd091a'
-        '3bca01a0504624900aee18fabc9e8e1d4182fdb8ae7db0e6310836ea2029bbda0b9cd4bb6c65d46fd414fc25dfe3a549b0b6e6cf94ee7e0dc8ee3f28d2565df3')
+        '21668c04fe6bcb632dc7ed5a9cee8a5fbef71d8a14d110403fba23396aa1718d65920c10eb823187cef41bd7fd3d52a94345561f496ea0ab166f4dfae3cd091a')
 
 prepare() {
   cd "$pkgbase"
 
-  git apply -3 "$srcdir/fix-missing-header.patch"
-
-  git apply -3 "$srcdir/fix-install.patch"
+  patch -p1 -i "$srcdir/fix-missing-header.patch"
 }
 
 build() {
@@ -72,6 +67,15 @@
 
   DESTDIR="$pkgdir" cmake --install build
 
+  install -vd "$pkgdir/usr"
+  mv "$pkgdir$srcdir"/* "$pkgdir/usr"
+  _wrongdir="$srcdir"
+  while test "$_wrongdir" != "/"; do
+    rmdir "$pkgdir$_wrongdir"
+    _wrongdir=$(dirname "$_wrongdir")
+  done
+  sed -i -e "s|$srcdir/||" "$pkgdir/usr/lib/pkgconfig/lib3mf.pc"
+
   ln -s lib3mf.pc "$pkgdir"/usr/lib/pkgconfig/lib3MF.pc
 
   install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" "$pkgbase/LICENSE"


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,6 @@
 prepare() {
 cd "$pkgbase"
-git apply -3 "$srcdir/fix-missing-header.patch"
-git apply -3 "$srcdir/fix-install.patch"
+patch -p1 -i "$srcdir/fix-missing-header.patch"
 }
 build() {
 local cmake_options=(
