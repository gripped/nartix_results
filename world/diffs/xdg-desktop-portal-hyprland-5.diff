--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,7 +2,7 @@
 pkgname=xdg-desktop-portal-hyprland
 pkgver=1.3.2
 _protocolver=4d29e48433270a2af06b8bc711ca1fe5109746cd
-pkgrel=1
+pkgrel=2
 pkgdesc='xdg-desktop-portal backend for hyprland'
 url="https://github.com/hyprwm/$pkgname"
 arch=(x86_64)
@@ -17,7 +17,7 @@
          qt6-wayland
          sdbus-cpp libsdbus-c++.so
          util-linux-libs libuuid.so
-         wlroots
+         wlroots0.17
          xdg-desktop-portal)
 makedepends=(cmake
              wayland
@@ -27,18 +27,24 @@
 _archive="$pkgname-$pkgver"
 source=("$url/archive/v$pkgver/$_archive.tar.gz"
         "https://github.com/hyprwm/hyprland-protocols/archive/$_protocolver.tar.gz"
+        pw1.1.82.patch::https://github.com/hyprwm/xdg-desktop-portal-hyprland/commit/c5b30938710d6c599f3f5cd99a3ffac35381fb0f.patch
         hyprland-portals.conf) # TODO move this to hyprland where it belongs
 sha256sums=('8f77a11c4d3df1b6d963f408ea1159d093e3b14ea0cb8c64094fca9821af2e26'
             '5f6be4d870e94314f05ec7ff9c9c1f028748230ff80a7f89aeaf66c08e5c70e0'
+            'b62a1734b6ecae48b030183c3952ecb21eb65e5d9702f88b41382d691a4800a6'
             '20bc215211f16a361086d59fa051df7337d95f91c695a29d8c5d23d40407fad5')
 
 prepare() {
 	cd "$_archive/subprojects"
 	rm -rf hyprland-protocols sdbus-cpp
 	ln -sfT "$srcdir/hyprland-protocols-$_protocolver" hyprland-protocols
+
+	cd ..
+	patch -Np1 < ../pw1.1.82.patch
 }
 
 build() {
+    export PKG_CONFIG_PATH='/usr/lib/wlroots0.17/pkgconfig'
 	cd "$_archive"
 	cmake -B build \
 		-D CMAKE_INSTALL_PREFIX=/usr \


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -13,5 +13,5 @@
 util-linux-libs
 wayland
 wayland-protocols
-wlroots
+wlroots0.17
 xdg-desktop-portal

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,8 +2,11 @@
 cd "$_archive/subprojects"
 rm -rf hyprland-protocols sdbus-cpp
 ln -sfT "$srcdir/hyprland-protocols-$_protocolver" hyprland-protocols
+cd ..
+patch -Np1 < ../pw1.1.82.patch
 }
 build() {
+export PKG_CONFIG_PATH='/usr/lib/wlroots0.17/pkgconfig'
 cd "$_archive"
 cmake -B build \
 -D CMAKE_INSTALL_PREFIX=/usr \
