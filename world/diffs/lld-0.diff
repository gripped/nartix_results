--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,27 +1,30 @@
 
 pkgname=lld
-pkgver=18.1.8
+pkgver=17.0.6
 pkgrel=1
 pkgdesc="Linker from the LLVM project"
 arch=('x86_64')
 url="https://lld.llvm.org/"
-license=('Apache-2.0 WITH LLVM-exception')
+license=('custom:Apache 2.0 with LLVM Exception')
 depends=('llvm-libs' 'gcc-libs' 'zlib' 'zstd')
 makedepends=('llvm' 'cmake' 'ninja' 'python-sphinx')
 _source_base=https://github.com/llvm/llvm-project/releases/download/llvmorg-$pkgver
 source=($_source_base/lld-$pkgver.src.tar.xz{,.sig}
         $_source_base/llvm-$pkgver.src.tar.xz{,.sig}
         $_source_base/libunwind-$pkgver.src.tar.xz{,.sig}
-        $_source_base/cmake-$pkgver.src.tar.xz{,.sig})
-sha256sums=('800e6805fb613eb8428f7a199f6d06c4c19f78f2db69157a129bb04fc1c99769'
+        $_source_base/cmake-$pkgver.src.tar.xz{,.sig}
+        $pkgname-internalize-enum.patch::https://github.com/llvmbot/llvm-project/commit/939ee549a2c4.patch)
+sha256sums=('4ac13125616dc44905b85820aa403d27ec1226329b7f674daeb5f5584c6f0b22'
             'SKIP'
-            'f68cf90f369bc7d0158ba70d860b0cb34dbc163d6ff0ebc6cfa5e515b9b2e28d'
+            'b638167da139126ca11917b6880207cc6e8f9d1cbb1a48d87d017f697ef78188'
             'SKIP'
-            'c31577d16978b0da0e472ef751f74893a5b459a7ea4a383b75f7ab93cf1e6877'
+            '9e7535a353aa862730b4ba38df42e06f6856b40c4cc51b57f27b5046dc21d70d'
             'SKIP'
-            '59badef592dd34893cd319d42b323aaa990b452d05c7180ff20f23ab1b41e837'
-            'SKIP')
-validpgpkeys=('474E22316ABF4785A88C6E8EA2C794A986419D8A') # Tom Stellard <tstellar@redhat.com>
+            '807f069c54dc20cb47b21c1f6acafdd9c649f3ae015609040d6182cab01140f4'
+            'SKIP'
+            '76f0625c86638d0fa06b54f1b151a47d8c71d72466da49557d288e33de89c288')
+validpgpkeys=('474E22316ABF4785A88C6E8EA2C794A986419D8A'  # Tom Stellard <tstellar@redhat.com>
+              'D574BD5D1D0E98895E3BF90044F2485E45D59042') # Tobias Hieta <tobias@hieta.se>
 
 prepare() {
   mv libunwind{-$pkgver.src,}
@@ -29,6 +32,8 @@
   mv cmake{-$pkgver.src,}
   cd lld-$pkgver.src
   mkdir build
+
+  patch -Np2 -i ../$pkgname-internalize-enum.patch
 }
 
 build() {
@@ -48,6 +53,7 @@
     -DLLVM_LINK_LLVM_DYLIB=ON
     -DLLVM_MAIN_SRC_DIR="$srcdir/llvm-$pkgver.src"
     -DSPHINX_WARNINGS_AS_ERRORS=OFF
+    -DCMAKE_PREFIX_PATH=/usr
   )
   cmake .. "${cmake_args[@]}"
   ninja


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,6 +3,7 @@
 mv cmake{-$pkgver.src,}
 cd lld-$pkgver.src
 mkdir build
+patch -Np2 -i ../$pkgname-internalize-enum.patch
 }
 build() {
 cd lld-$pkgver.src/build
@@ -20,6 +21,7 @@
 -DLLVM_LINK_LLVM_DYLIB=ON
 -DLLVM_MAIN_SRC_DIR="$srcdir/llvm-$pkgver.src"
 -DSPHINX_WARNINGS_AS_ERRORS=OFF
+-DCMAKE_PREFIX_PATH=/usr
 )
 cmake .. "${cmake_args[@]}"
 ninja
