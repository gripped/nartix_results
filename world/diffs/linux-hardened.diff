--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 
 pkgbase=linux-hardened
-pkgver=6.7.9.hardened1
+pkgver=6.4.14.hardened1
 pkgrel=1
 pkgdesc='Security-Hardened Linux'
 url='https://github.com/anthraxx/linux-hardened'
@@ -10,24 +10,20 @@
   bc
   cpio
   gettext
+  git
   libelf
   pahole
   perl
   python
   tar
   xz
-
-  graphviz
-  imagemagick
-  python-sphinx
-  texlive-latexextra
 )
 options=('!strip')
 _srcname=linux-${pkgver%.*}
 _srctag=${pkgver%.*}-${pkgver##*.}
 source=(
-  https://cdn.kernel.org/pub/linux/kernel/v${pkgver%%.*}.x/${_srcname}.tar.{xz,sign}
-  ${url}/releases/download/${_srctag}/${pkgbase}-${_srctag}.patch{,.sig}
+  https://www.kernel.org/pub/linux/kernel/v${pkgver%%.*}.x/${_srcname}.tar.{xz,sign}
+  https://github.com/anthraxx/${pkgbase}/releases/download/${_srctag}/${pkgbase}-${_srctag}.patch{,.sig}
   config  # the main kernel config file
 )
 validpgpkeys=(
@@ -35,18 +31,13 @@
   647F28654894E3BD457199BE38DBBDC86092693E  # Greg Kroah-Hartman
   E240B57E2C4630BA768E2F26FC1B547C8D8172C8  # Levente Polyak
 )
-sha256sums=('0fd733fc0778f8da1fdf66df1698d394248807de71eef83a4d1218bcb3dfd346'
-            'SKIP'
-            '149c8346aaadc8a90a5d6228ad02aaf66dd14aecba6a80fb55d33fe9ba638e9b'
-            'SKIP'
-            '573ca1370d548c1a965a4efef8a0c6ae004234dc7ce66c05bfebd7f7cbd74b18')
-b2sums=('2a5990e067439dcb3a6e7647832c85a2ce7faf28c48f414ebcb4d33ea37f870204c4b6bf98fca1faaf61bb59f579d6b597d8b2b29bd8cd2cc3b25afba3fe1fd8'
+b2sums=('f81dabaef7e31b743aeb75d0dbb0a337e747d1d743fb0b38cb314498200d8d459d82f5f8bb34d6ad688842f3617fd53fd35b1b518654c845a6781580531ab1b2'
         'SKIP'
-        'f6e9d233aafab8769c6b77884b3045743f7f75b69b3d6bccc7c46587949fef56f7b03971bcf0f00fc05d29cc8919308bb67bca79bc45e3d1f5df504294d0f306'
+        'd12ff8cbb4dc171167050a198a783e8341df51aa1c3579d3c3f20b9d28025847e6cae9575fc2a37dda2e0f96a10d0306ec4293edaa53ebdfe15a21892c6d2a5f'
         'SKIP'
-        '9c76b90213b3ed55e47e7ecaa8085244f68010fad770b99875f0edf04143d8293dc3c4cdc49b65ba58670e7e4e09903dc89ae0fa79bf4ea21b8a1413cdda765d')
-
-export KBUILD_BUILD_HOST=archlinux
+        'f60be61e60a36d8c8fd186ddb2ac7514a6439c413a0a563d8c3d13593aaa5e34e20a3ddeba2d0b868fffdd515678320ddda1fe843e24f90369c1d4d0c4019306')
+
+export KBUILD_BUILD_HOST=artixlinux
 export KBUILD_BUILD_USER=$pkgbase
 export KBUILD_BUILD_TIMESTAMP="$(date -Ru${SOURCE_DATE_EPOCH:+d @$SOURCE_DATE_EPOCH})"
 
@@ -61,7 +52,6 @@
   for src in "${source[@]}"; do
     src="${src%%::*}"
     src="${src##*/}"
-    src="${src%.zst}"
     [[ $src = *.patch ]] || continue
     echo "Applying patch $src..."
     patch -Np1 < "../$src"
@@ -78,12 +68,7 @@
 
 build() {
   cd $_srcname
-
-  make htmldocs &
-  local pid_docs=$!
-
   make all
-  wait "${pid_docs}"
 }
 
 _package() {
@@ -103,8 +88,6 @@
     VIRTUALBOX-GUEST-MODULES
     WIREGUARD-MODULE
   )
-  replaces=(
-  )
 
   cd $_srcname
   local modulesdir="$pkgdir/usr/lib/modules/$(<version)"
@@ -118,7 +101,7 @@
   ZSTD_CLEVEL=19 make INSTALL_MOD_PATH="$pkgdir/usr" INSTALL_MOD_STRIP=1 \
     DEPMOD=/doesnt/exist modules_install  # Suppress depmod
 
-  rm "$modulesdir"/build
+  rm "$modulesdir"/{source,build}
 }
 
 _package-headers() {


############# Stripped diff below #################

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,7 +2,7 @@
 options=('!strip')
 _srcname=linux-${pkgver%.*}
 _srctag=${pkgver%.*}-${pkgver##*.}
-export KBUILD_BUILD_HOST=archlinux
+export KBUILD_BUILD_HOST=artixlinux
 export KBUILD_BUILD_USER=$pkgbase
 export KBUILD_BUILD_TIMESTAMP="$(date -Ru${SOURCE_DATE_EPOCH:+d @$SOURCE_DATE_EPOCH})"
 prepare() {
@@ -14,7 +14,6 @@
 for src in "${source[@]}"; do
 src="${src%%::*}"
 src="${src##*/}"
-src="${src%.zst}"
 [[ $src = *.patch ]] || continue
 echo "Applying patch $src..."
 patch -Np1 < "../$src"
@@ -28,10 +27,7 @@
 }
 build() {
 cd $_srcname
-make htmldocs &
-local pid_docs=$!
 make all
-wait "${pid_docs}"
 }
 _package() {
 depends=(
@@ -44,8 +40,6 @@
 VIRTUALBOX-GUEST-MODULES
 WIREGUARD-MODULE
 )
-replaces=(
-)
 cd $_srcname
 local modulesdir="$pkgdir/usr/lib/modules/$(<version)"
 echo "Installing boot image..."
@@ -54,7 +48,7 @@
 echo "Installing modules..."
 ZSTD_CLEVEL=19 make INSTALL_MOD_PATH="$pkgdir/usr" INSTALL_MOD_STRIP=1 \
 DEPMOD=/doesnt/exist modules_install  # Suppress depmod
-rm "$modulesdir"/build
+rm "$modulesdir"/{source,build}
 }
 _package-headers() {
 depends=(pahole)
