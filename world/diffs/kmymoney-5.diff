--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,35 +1,39 @@
 
 pkgname=kmymoney
-pkgver=5.2.0
-pkgrel=1
+pkgver=5.1.3
+pkgrel=26
 pkgdesc="Personal finance manager for KDE which operates similarly to MS-Money or Quicken"
 arch=('x86_64')
 url="https://kmymoney.org/"
 license=('GPL')
-depends=('aqbanking' 'gwenhywfar' 'libalkimia' 'sqlcipher' 'qt6-base' 'gpgmepp' 'karchive'
-         'kcoreaddons' 'kconfig' 'kwidgetsaddons' 'ki18n' 'kcompletion' 'kcmutils' 'kitemmodels'
-         'kitemviews' 'kxmlgui' 'ktextwidgets' 'kio' 'kholidays'
-         'kdiagram' 'libical' 'shared-mime-info' 'libofx' 'qtkeychain-qt6')
-makedepends=('extra-cmake-modules' 'kdoctools' 'doxygen')
+depends=('aqbanking' 'gwenhywfar' 'libalkimia' 'sqlcipher' 'qt5-base' 'qt5-webengine' 'gpgmepp' 'karchive5'
+         'kcoreaddons5' 'kconfig5' 'kwidgetsaddons5' 'ki18n5' 'kcompletion5' 'kcmutils5' 'kitemmodels5'
+         'kitemviews5' 'kservice5' 'kwallet5' 'kxmlgui5'
+         'ktextwidgets5' 'knotifications5' 'kio5' 'kholidays5' 'kactivities5'
+         'kqtquickcharts' 'kdiagram5' 'libical' 'shared-mime-info' 'libofx')
+makedepends=('extra-cmake-modules' 'kdoctools5' 'doxygen')
 optdepends=('perl: for financequote.pl')
 changelog=$pkgname.changelog
-source=(https://download.kde.org/stable/$pkgname/$pkgver/$pkgname-$pkgver.tar.xz{,.sig})
+source=(https://download.kde.org/stable/$pkgname/$pkgver/src/$pkgname-$pkgver.tar.xz{,.sig})
 validpgpkeys=('D69A745A55331F44F404D8258D4DE062AA2EB01C')
-sha256sums=('c99d83c0a33efcebcb81196890b5c6e4366fc285840d136e13e622fbad4e9876'
+sha256sums=('3938b8078b7391ba32e12bb4239762fae134683a0c2ec1a75105c302ca3e5e3f'
             'SKIP')
 
-prepare() {
-  rm -r $pkgname-$pkgver/po/it/docs
-}
+build() {
+  cd "${srcdir}"/$pkgname-$pkgver
 
-build() {
-  cmake -B build -S $pkgname-$pkgver \
-    -DBUILD_WITH_QT6=ON \
+  mkdir build
+  cd build
+
+  cmake ../ \
+    -DENABLE_WEBENGINE=ON \
     -DCMAKE_SKIP_RPATH=YES \
     -Wno-dev
-  cmake --build build
+  make
 }
 
 package() {
-  DESTDIR="${pkgdir}" cmake --install build
+  cd "${srcdir}"/$pkgname-$pkgver/build
+
+  make DESTDIR="${pkgdir}" install
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -3,25 +3,30 @@
 extra-cmake-modules
 gpgmepp
 gwenhywfar
-karchive
-kcmutils
-kcompletion
-kconfig
-kcoreaddons
-kdiagram
-kdoctools
-kholidays
-ki18n
-kio
-kitemmodels
-kitemviews
-ktextwidgets
-kwidgetsaddons
-kxmlgui
+kactivities5
+karchive5
+kcmutils5
+kcompletion5
+kconfig5
+kcoreaddons5
+kdiagram5
+kdoctools5
+kholidays5
+ki18n5
+kio5
+kitemmodels5
+kitemviews5
+knotifications5
+kqtquickcharts
+kservice5
+ktextwidgets5
+kwallet5
+kwidgetsaddons5
+kxmlgui5
 libalkimia
 libical
 libofx
-qt6-base
-qtkeychain-qt6
+qt5-base
+qt5-webengine
 shared-mime-info
 sqlcipher

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,10 +1,10 @@
-prepare() {
-rm -r $pkgname-$pkgver/po/it/docs
-}
 build() {
-cmake -B build -S $pkgname-$pkgver \
--DBUILD_WITH_QT6=ON \
+cd "${srcdir}"/$pkgname-$pkgver
+mkdir build
+cd build
+cmake ../ \
+-DENABLE_WEBENGINE=ON \
 -DCMAKE_SKIP_RPATH=YES \
 -Wno-dev
-cmake --build build
+make
 }
