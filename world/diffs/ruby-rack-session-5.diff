--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=ruby-rack-session
-pkgver=2.1.1
-pkgrel=1
+pkgver=2.1.0
+pkgrel=2
 pkgdesc='Session management implementation for Rack.'
 url="https://github.com/rack/rack-session"
 arch=('any')
@@ -12,7 +12,6 @@
   ruby-base64
 )
 makedepends=(
-  git
   ruby-rdoc
 )
 checkdepends=(
@@ -23,17 +22,17 @@
   ruby-minitest-sprint
 )
 options=('!emptydirs')
-source=("git+https://github.com/rack/rack-session.git#tag=v$pkgver")
-sha256sums=('eb88020fd322a7a83d606d5cd0cc8d7c527358f2d11973337da25e060eeb7e9b')
-sha512sums=('565362db7f88e37adbb331862f412fb182c815cc4d0400390cd6c5a6b82142ce6f721ea321c78c6506b502b15e50289e99ae26106975071e36c5bace56a29eaf')
+source=("${pkgname}-v${pkgver}.tar.gz::$url/archive/refs/tags/v${pkgver}.tar.gz")
+sha256sums=('0350a45e47d87a872411eb583e37fc9948059a089cc8622f3e98e14b6106306f')
+sha512sums=('e9f9fa6d5fe0e0f39ecb130c96d98010b03f9d89301424dfda671beaf14e9f3e07f480fa8e638501a53861033f1cce060ecc79548d90bde8ad7d734d1f008a9e')
 
 prepare() {
-  cd rack-session
+  cd rack-session-${pkgver}
   sed -r 's|~>|>=|g' -i rack-session.gemspec
 }
 
 build() {
-  cd rack-session
+  cd rack-session-${pkgver}
 
   local _gemdir="$(gem env gemdir)"
 
@@ -52,7 +51,7 @@
 }
 
 check() {
-  cd rack-session
+  cd rack-session-${pkgver}
 
   local _gemdir="$(gem env gemdir)"
 
@@ -60,7 +59,7 @@
 }
 
 package() {
-  cd rack-session
+  cd rack-session-${pkgver}
 
   cp -a tmp_install/* "${pkgdir}"
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
-git
 ruby
 ruby-base64
 ruby-rack

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,9 +1,9 @@
 prepare() {
-cd rack-session
+cd rack-session-${pkgver}
 sed -r 's|~>|>=|g' -i rack-session.gemspec
 }
 build() {
-cd rack-session
+cd rack-session-${pkgver}
 local _gemdir="$(gem env gemdir)"
 gem build rack-session.gemspec
 gem install \
