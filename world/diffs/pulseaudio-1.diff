--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -10,7 +10,7 @@
   pulseaudio-equalizer
   pulseaudio-rtp
 )
-pkgver=17.0+r88+geee0e8f22
+pkgver=17.0+r43+g3e2bb8a1e
 pkgrel=1
 pkgdesc="A featureful, general-purpose sound server"
 url="https://www.freedesktop.org/wiki/Software/PulseAudio/"
@@ -57,19 +57,18 @@
   rtkit
   sbc
   speexdsp
-  systemd
-  systemd-libs
+  elogind
   tdb
   valgrind
   webrtc-audio-processing-1
   xmltoman
 )
-_commit=eee0e8f22fdcb2fd4fbfa4311df7e5070239d435  # master
+_commit=3e2bb8a1ece02ae4e2c217273c9c0929cb9f5cae  # master
 source=(
   "git+https://gitlab.freedesktop.org/pulseaudio/pulseaudio.git#commit=$_commit"
   0001-alsa-ucm-Fix-segfault-from-recursion-due-to-too-many.patch
 )
-b2sums=('17981ec59730676b45fc1a0b36ee7d19fe099428e13a71ea904c4b3691a274d47846d71238bd29f8090e478ce59ef48b0b1ee2b1ab02ac67aa7b12a94b5c035d'
+b2sums=('1eea3f798a56ea7d51ebc49de20160b8ef2eeae00e4a139786dab02b7a2f0fb459a744a8960d1a6573d7f5591f54a391d943096260edc6dfc5b0f04773b9b311'
         '73f93801069b2c5b09646870269c0f42cefc2183a73b47c78fd160c978a841c11c5146b98351a11be24d4785181f361a455534e6f6ca2d977cf585044836f8ed')
 
 pkgver() {
@@ -88,14 +87,15 @@
 build() {
   local meson_options=(
     -D consolekit=disabled
-    -D elogind=disabled
+    -D elogind=enabled
+    -D systemd=disabled
     -D pulsedsp-location='/usr/\$LIB/pulseaudio'
     -D stream-restore-clear-old-devices=true
     -D tcpwrap=disabled
     -D udevrulesdir=/usr/lib/udev/rules.d
   )
 
-  arch-meson pulseaudio build "${meson_options[@]}"
+  artix-meson pulseaudio build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -136,8 +136,7 @@
     orc
     rtkit
     speexdsp
-    systemd
-    systemd-libs
+    elogind
     tdb
     webrtc-audio-processing-1
   )
@@ -157,7 +156,6 @@
     etc/pulse/default.pa
     etc/pulse/system.pa
   )
-  install=pulseaudio.install
   replaces=(
     'pulseaudio-gconf<=11.1'
     'pulseaudio-xen<=9.0'
@@ -167,7 +165,7 @@
 
   cd "$pkgdir"
 
-  sed -e '/autospawn/iautospawn = no' \
+  sed -e '/autospawn/iautospawn = yes' \
       -i etc/pulse/client.conf
 
   sed -e 's|/usr/bin/pactl load-module module-x11-cork-request|#&|' \
@@ -224,7 +222,6 @@
     libasyncns
     libsndfile
     libxcb
-    systemd-libs
   )
   optdepends=('pulse-native-provider: PulseAudio backend')
   provides=(


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -7,6 +7,7 @@
 check
 dbus
 doxygen
+elogind
 fftw
 gcc-libs
 git
@@ -41,8 +42,6 @@
 rtkit
 sbc
 speexdsp
-systemd
-systemd-libs
 tdb
 valgrind
 webrtc-audio-processing-1