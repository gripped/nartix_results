--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -10,7 +10,7 @@
   pulseaudio-equalizer
   pulseaudio-rtp
 )
-pkgver=17.0+r98+gb096704c0
+pkgver=17.0+r93+gbe2efb69b
 pkgrel=1
 pkgdesc="A featureful, general-purpose sound server"
 url="https://www.freedesktop.org/wiki/Software/PulseAudio/"
@@ -57,19 +57,18 @@
   rtkit
   sbc
   speexdsp
-  systemd
-  systemd-libs
+  elogind
   tdb
   valgrind
   webrtc-audio-processing-1
   xmltoman
 )
-_commit=b096704c0d42c5e784deb781a07b23cfb5286a82  # master
+_commit=be2efb69b97ee49ba81094d49a1b8d7be0c588c2  # master
 source=(
   "git+https://gitlab.freedesktop.org/pulseaudio/pulseaudio.git#commit=$_commit"
   0001-alsa-ucm-Fix-segfault-from-recursion-due-to-too-many.patch
 )
-b2sums=('3b800dc84b1ccb0f1252e9c55390842d0d63c004393f3271daa7dcdcaa6b2351ca129d2a268855c57ec6c03e14bf1a571deac6c4bb89ac1e08a83cf910834490'
+b2sums=('a8925757686c824fef914b7ee99f867f019c7cc194382edc3f7ecef98341eb1d0cf76d58223c7eb3622032e21ef8669a866a9172b64c1d0813dcb67ee8ed1468'
         '73f93801069b2c5b09646870269c0f42cefc2183a73b47c78fd160c978a841c11c5146b98351a11be24d4785181f361a455534e6f6ca2d977cf585044836f8ed')
 
 pkgver() {
@@ -88,14 +87,15 @@
 build() {
   local meson_options=(
     -D consolekit=disabled
-    -D elogind=disabled
+    -D elogind=enabled
+    -D systemd=disabled
     -D pulsedsp-location='/usr/\$LIB/pulseaudio'
     -D stream-restore-clear-old-devices=true
     -D tcpwrap=disabled
     -D udevrulesdir=/usr/lib/udev/rules.d
   )
 
-  arch-meson pulseaudio build "${meson_options[@]}"
+  artix-meson pulseaudio build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -136,8 +136,7 @@
     orc
     rtkit
     speexdsp
-    systemd
-    systemd-libs
+    elogind
     tdb
     webrtc-audio-processing-1
   )
@@ -157,7 +156,6 @@
     etc/pulse/default.pa
     etc/pulse/system.pa
   )
-  install=pulseaudio.install
   replaces=(
     'pulseaudio-gconf<=11.1'
     'pulseaudio-xen<=9.0'
@@ -167,7 +165,7 @@
 
   cd "$pkgdir"
 
-  sed -e '/autospawn/iautospawn = no' \
+  sed -e '/autospawn/iautospawn = yes' \
       -i etc/pulse/client.conf
 
   sed -e 's|/usr/bin/pactl load-module module-x11-cork-request|#&|' \
@@ -224,7 +222,6 @@
     libasyncns
     libsndfile
     libxcb
-    systemd-libs
   )
   optdepends=('pulse-native-provider: PulseAudio backend')
   provides=(


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -7,6 +7,7 @@
 check
 dbus
 doxygen
+elogind
 fftw
 gcc-libs
 git
@@ -41,8 +42,6 @@
 rtkit
 sbc
 speexdsp
-systemd
-systemd-libs
 tdb
 valgrind
 webrtc-audio-processing-1