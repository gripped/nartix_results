--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,27 +1,33 @@
 
 pkgname=vnstat
 pkgver=2.12
-pkgrel=3
+pkgrel=2
 pkgdesc="A console-based network traffic monitor"
 arch=('x86_64')
 url="https://humdi.net/vnstat/"
 license=('GPL')
 depends=('bash' 'sqlite')
-makedepends=('gd' 'git')
+makedepends=('gd')
 optdepends=('gd: image output')
 backup=(etc/vnstat.conf)
-source=(git+https://github.com/vergoh/vnstat.git#tag=v${pkgver})
-sha256sums=('515ef3f47745b37961e563ac7ef2387e03003e738da091943690183d341baf96')
+source=(https://humdi.net/vnstat/$pkgname-$pkgver.tar.gz{,.asc}
+vnstatd.tmpfile vnstatd.sysusers)
+sha256sums=('b7386b12fc1fc6f47fab31f208b12eda61862e63e229e84e95a6fa80406d2852'
+            'SKIP'
+'91c9577f36c7f7ec32bb2963035a6ac49e7556ac6adc41564c033db8889b669e'
+'b9c3af7c6e8dc42aa6be0b52988aba8d64646116c211a1d055a17262c1d32edf')
+validpgpkeys=(23EF1DD76E65248FB055201ADAFE84E63D140114) # Teemu Toivola
 
 build() {
-  cd $pkgname
+  cd $pkgname-$pkgver
   ./configure --prefix=/usr --sbindir=/usr/bin --sysconfdir=/etc
   make
 }
 
 package() {
-  cd $pkgname
+  cd $pkgname-$pkgver
   make DESTDIR="$pkgdir" install
   install -Dm0755 examples/vnstat.cgi -t "$pkgdir"/usr/share/doc/vnstat/examples
-  install -Dm0644 examples/systemd/vnstat.service -t "$pkgdir"/usr/lib/systemd/system
+  install -Dm644 "$srcdir"/vnstatd.tmpfile "$pkgdir"/usr/lib/tmpfiles.d/vnstatd.conf
+  install -Dm644 "$srcdir"/vnstatd.sysusers "$pkgdir"/usr/lib/sysusers.d/vnstatd.conf
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
 bash
 gd
-git
 sqlite

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,5 @@
 build() {
-cd $pkgname
+cd $pkgname-$pkgver
 ./configure --prefix=/usr --sbindir=/usr/bin --sysconfdir=/etc
 make
 }
