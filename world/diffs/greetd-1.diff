--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,29 +1,28 @@
 
 pkgbase=greetd
 pkgname=($pkgbase $pkgbase-agreety)
-pkgver=0.10.1
-pkgrel=2
+pkgver=0.10.0
+pkgrel=1
 pkgdesc='Generic greeter daemon'
 arch=(x86_64)
 url="https://git.sr.ht/~kennylevinsen/$pkgbase"
-license=(GPL-3.0-only)
+license=(GPL3)
 depends=(gcc-libs
          glibc
-         systemd)
+         elogind)
 makedepends=(cargo
              scdoc)
 _archive="$pkgbase-$pkgver"
 source=("$_archive.tar.gz::$url/archive/$pkgver.tar.gz"
         "$pkgbase.sysusers"
         "$pkgbase.pam")
-sha256sums=('03098623b248c9c9b8d8bdbb1605117871df0ea2b9299574516f983a6a49db6d'
+sha256sums=('d6151a8683f386c53a010b6dfe37cf4c842bc03313bed7a917be96309372d1df'
             '896b7c9b5ec9c9c5795842db9b0f0d792b9d0ceda35891c5c169a9150795b8d1'
             '993a3096c2b113e6800f2abbd5d4233ebf1a97eef423990d3187d665d3490b92')
 
 prepare() {
 	cd "$_archive"
-	sed -i -e '/feature.doc_cfg/d' greetd_ipc/src/lib.rs
-	cargo fetch --locked --target "$(rustc -vV | sed -n 's/host: //p')"
+	cargo fetch --locked --target "$CARCH-unknown-linux-gnu"
 }
 
 build() {
@@ -45,7 +44,6 @@
 	        "etc/pam.d/$pkgbase")
 	cd "$_archive"
 	install -Dm0755 -t "$pkgdir/usr/bin/" "target/release/$pkgname"
-	install -Dm0644 -t "$pkgdir/usr/lib/systemd/system/" "$pkgname.service"
 	install -Dm0644 -t "$pkgdir/etc/$pkgname/" config.toml
 	install -Dm0644 "../$pkgname.pam" "$pkgdir/etc/pam.d/$pkgname"
 	install -Dm0644 "../$pkgname.sysusers" "$pkgdir/usr/lib/sysusers.d/$pkgname.conf"


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,5 @@
 cargo
+elogind
 gcc-libs
 glibc
 greetd
@@ -6,4 +7,3 @@
 greetd-greeter
 pam
 scdoc
-systemd