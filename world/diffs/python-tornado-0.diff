--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=python-tornado
-pkgver=6.4.1
-pkgrel=1
+pkgver=6.4.0
+pkgrel=2
 pkgdesc='open source version of the scalable, non-blocking web server and tools'
 arch=('x86_64')
 url='https://www.tornadoweb.org/'
@@ -12,10 +12,17 @@
             'python-twisted: for tornado.platform.twisted')
 makedepends=('python-build' 'python-installer' 'python-setuptools' 'python-wheel')
 checkdepends=('python-pycares' 'python-pycurl' 'python-twisted')
-source=("$pkgname-$pkgver.tar.gz::https://github.com/tornadoweb/tornado/archive/v$pkgver.tar.gz")
-sha512sums=('57ad42b78a6216fc69fb12035258e02ff80fd5fe494f9d7dc758a1e6e285f755ca3f29fe558e22a82673e0773fd5f2662034376f13d1978f1f466ff2966f3de4')
+source=("$pkgname-$pkgver.tar.gz::https://github.com/tornadoweb/tornado/archive/v$pkgver.tar.gz"
+         https://github.com/tornadoweb/tornado/commit/c851aa8a.patch)
+sha512sums=('dc584acc14d93c7109e4744b690641ae318ee9ad2c42a4c3560c315fa8654de3a64574c7187f5afdbde2906b7cccf5725f45462e710effb6f025e5ec1a3810d4'
+            'a252f8276b503f5f96f0059f3a75ca480b9f99542cf88066aff4ec020f091acb7826222441538f010a7a2ac1c0a9b423630eb8fcff54be89ef30f998d11e7e3a')
 
 export TORNADO_EXTENSION=1
+
+prepare() {
+  cd tornado-$pkgver
+  patch -p1 -i ../c851aa8a.patch # Compatibility with pytest 8.2
+}
 
 build() {
   cd tornado-$pkgver


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,3 +1,7 @@
+prepare() {
+cd tornado-$pkgver
+patch -p1 -i ../c851aa8a.patch # Compatibility with pytest 8.2
+}
 build() {
 cd tornado-$pkgver
 python -m build --wheel --no-isolation
