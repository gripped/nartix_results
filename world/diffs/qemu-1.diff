--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -9,6 +9,7 @@
   qemu-guest-agent
   qemu-hw-display-{qxl,virtio-{gpu{,-{gl,pci,pci-gl}},vga{,-gl}}}
   qemu-hw-s390x-virtio-gpu-ccw
+  qemu-hw-uefi-vars
   qemu-hw-usb-{host,redirect,smartcard}
   qemu-img
   qemu-pr-helper
@@ -22,7 +23,7 @@
   qemu-vmsr-helper
   qemu-{base,desktop,emulators-full,full}
 )
-pkgver=9.2.3
+pkgver=10.0.0
 pkgrel=1
 pkgdesc="A generic and open source machine emulator and virtualizer"
 arch=(x86_64)
@@ -107,7 +108,7 @@
   snappy
   spice-protocol
   spice
-  systemd
+  udev
   usbredir
   vde2
   virglrenderer
@@ -125,7 +126,7 @@
   $pkgbase-8.1.1-static_regression.patch
   $pkgbase-9.2.2-libnfs6.patch
 )
-sha512sums=('941a4337a115c65de2fca042932efb31886114f4300226fcf55f04c2c5471bd2b5ce220c4b17e01c3679bd55ba08a1aa7ce399de15e3e5f28c17da52030b139e'
+sha512sums=('2215458ed8be3ab0b0032fe2a96e79183f5fc2da323d927018412ea3d980b022a07ba87d4f446229eaaa7d1b19a577d438dbcaa3af3bd537c7720b56734a2d8b'
             'SKIP'
             '7b412ffa5dcda47b0a4ec9e2c5e5e1d9eaaaf0a087b7ea3ead3e706ba4c9cafb919beadd088a0299b6f7aab753b81a5eafb545b4842ee5f26646d16544dd02a7'
             '6e838773d63ae0ffdffe2b891bf611d8f5f3c67a9bc4cbbedf8363c150c2c9971c8e44d92270bc581af40eb0ece02192760bcdd6aee229fff55635f3a4825afa'
@@ -134,7 +135,7 @@
             '93b905046fcea8a0a89513b9259c222494ab3b91319dde23baebcb40dc17376a56661b159b99785d6e816831974a0f3cbd7b2f7d89e5fc3c258f88f4492f3839'
             'c7d086a951e9a378434ea95a843a4b01f0eb2ae430135a81365147cf6806a7ba1b49014a3aa66904970853ba84a4a28dbaded7bccb99a0bc3730572c80fb8b12'
             '7949b1435ed979836c59149b4b06b80fe14fa89ef12d1e027860df392e2ffdaf4a0f881021f80b4ee56e8657068bf7f2c6415c9891f34c32228b9d35e9359c8f')
-b2sums=('cdc7300288d2efc50262c605707caab64638fbf1d7528576a0bce71efc1403ccd6aa647a984c84a5ab8ebca28ea9ee7cd8682b4098ca2e63a2f76d2de577c181'
+b2sums=('3408c7b2a38ace7f0b2e0912411a26cab96cb23bcb03d7095f7b081cb88db55f36b004ff6458281d73190b9cc9006da85dde2a0b4b068c80662a8de205c29fda'
         'SKIP'
         'b1eca364aa60f130ff5e649f5d004d3fcb75356d3421a4542efdfc410d39b40d9434d15e1dd7bbdbd315cb72b5290d3ea5f77f9c41961a5601cd28ef7bbe72e8'
         '2102e4a34e11e406e9606c97e026e7b92e887e296a7f77b9cede1b37119d0df33735f3588628167b2b8e32244c196c491bfab623e2caddac9014d445aa2a6d98'
@@ -236,6 +237,7 @@
   'qemu-hw-display-virtio-gpu-gl: for the virtio-gpu-gl display device'
   'qemu-hw-display-virtio-gpu-pci: for the virtio-gpu-pci display device'
   'qemu-hw-display-virtio-gpu-pci-gl: for the virtio-gpu-pci-gl display device'
+  'qemu-hw-uefi-vars: for UEFI variable support'
   'qemu-hw-usb-host: for host USB support'
   'qemu-hw-usb-redirect: for USB redirect support'
   'qemu-hw-usb-smartcard: for USB smartcard support'
@@ -280,7 +282,6 @@
 
   sed -n '3,33p' $pkgbase-$pkgver/include/standard-headers/linux/fuse.h > fuse.LICENSE.BSD-2-Clause.txt
 
-  sed -e 's/multi-user.target/sockets.target/g' -i $pkgbase-$pkgver/contrib/systemd/*.socket
 
   mkdir -vp build
   mkdir -vp build-static
@@ -461,6 +462,8 @@
     _pick qemu-hw-usb-redirect usr/lib/qemu/hw-usb-redirect.so
     _pick qemu-hw-usb-smartcard usr/lib/qemu/hw-usb-smartcard.so
 
+    _pick qemu-hw-uefi-vars usr/lib/qemu/hw-uefi-vars.so
+
     _pick qemu-img usr/bin/qemu-{img,io,nbd,storage-daemon}
     _pick qemu-img usr/share/man/man1/qemu-{img,storage-daemon}.1*
     _pick qemu-img usr/share/man/man7/qemu-storage-daemon-qmp-ref.7*
@@ -482,7 +485,7 @@
     _pick qemu-system-arm usr/bin/qemu-system-arm
     _pick qemu-system-arm usr/share/man/man1/qemu-system-arm.1*
 
-    _pick qemu-system-arm-firmware usr/share/qemu/npcm7xx_bootrom.bin
+    _pick qemu-system-arm-firmware usr/share/qemu/npcm{7,8}xx_bootrom.bin
 
     _pick qemu-system-avr usr/bin/qemu-system-avr
     _pick qemu-system-avr usr/share/man/man1/qemu-system-avr.1*
@@ -514,6 +517,7 @@
 
     _pick qemu-system-ppc-firmware usr/share/qemu/{bamboo,canyonlands}.dtb
     _pick qemu-system-ppc-firmware usr/share/qemu/openbios-ppc
+    _pick qemu-system-ppc-firmware usr/share/qemu/pnv-pnor.bin
     _pick qemu-system-ppc-firmware usr/share/qemu/qemu_vga.ndrv
     _pick qemu-system-ppc-firmware usr/share/qemu/skiboot.lid
     _pick qemu-system-ppc-firmware usr/share/qemu/slof.bin
@@ -546,7 +550,6 @@
     _pick qemu-system-tricore usr/share/man/man1/qemu-system-tricore.1*
 
     _pick qemu-system-x86 usr/bin/qemu-system-{i386,x86_64}
-    _pick qemu-system-x86 usr/lib/qemu/accel-tcg-{i386,x86_64}.so
     _pick qemu-system-x86 usr/share/man/man1/qemu-system-{i386,x86_64}.1*
 
     _pick qemu-system-x86-firmware usr/share/qemu/{kvmvapic,linuxboot,multiboot{,_dma},pvh}.bin
@@ -702,14 +705,13 @@
 
 package_qemu-guest-agent() {
   pkgdesc="QEMU Guest Agent"
-  depends=(gcc-libs glib2 libglib-2.0.so libgmodule-2.0.so glibc liburing liburing.so numactl libnuma.so sh systemd-libs libudev.so)
+  depends=(gcc-libs glib2 libglib-2.0.so libgmodule-2.0.so glibc liburing liburing.so numactl libnuma.so sh libudev libudev.so)
   backup=(
     etc/$pkgbase/$pkgbase-ga.conf
     etc/$pkgbase/fsfreeze-hook
   )
   install=$pkgname.install
   mv -v $pkgname/* "$pkgdir"
-  install -vDm 644 $pkgbase-$pkgver/contrib/systemd/$pkgname.service -t "$pkgdir/usr/lib/systemd/system/"
   install -vDm 644 99-$pkgname.rules -t "$pkgdir/usr/lib/udev/rules.d/"
   install -vDm 644 $pkgbase-ga.conf -t "$pkgdir/etc/$pkgbase/"
   install -vDm 755 $pkgbase-$pkgver/scripts/$pkgname/fsfreeze-hook -t "$pkgdir/etc/$pkgbase/"
@@ -775,14 +777,14 @@
 
 package_qemu-system-aarch64() {
   pkgdesc="QEMU system emulator for AARCH64"
-  depends=("${_qemu_system_deps[@]}" dtc edk2-aarch64 systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" dtc libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
 
 package_qemu-system-alpha() {
   pkgdesc="QEMU system emulator for Alpha"
-  depends=("${_qemu_system_deps[@]}" qemu-system-alpha-firmware=$pkgver-$pkgrel systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" qemu-system-alpha-firmware=$pkgver-$pkgrel libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
@@ -796,7 +798,7 @@
 
 package_qemu-system-arm() {
   pkgdesc="QEMU system emulator for ARM"
-  depends=("${_qemu_system_deps[@]}" dtc edk2-arm qemu-system-arm-firmware=$pkgver-$pkgrel systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" dtc qemu-system-arm-firmware=$pkgver-$pkgrel libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
@@ -817,7 +819,7 @@
 
 package_qemu-system-hppa() {
   pkgdesc="QEMU system emulator for HPPA"
-  depends=("${_qemu_system_deps[@]}" qemu-system-hppa-firmware=$pkgver-$pkgrel systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" qemu-system-hppa-firmware=$pkgver-$pkgrel libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
@@ -831,7 +833,7 @@
 
 package_qemu-system-loongarch64() {
   pkgdesc="QEMU system emulator for LoongArch64"
-  depends=("${_qemu_system_deps[@]}" dtc systemd-libs)
+  depends=("${_qemu_system_deps[@]}" dtc libudev)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
@@ -859,21 +861,21 @@
 
 package_qemu-system-mips() {
   pkgdesc="QEMU system emulator for MIPS"
-  depends=("${_qemu_system_deps[@]}" dtc systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" dtc libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
 
 package_qemu-system-or1k() {
   pkgdesc="QEMU system emulator for OpenRisc32"
-  depends=("${_qemu_system_deps[@]}" dtc systemd-libs)
+  depends=("${_qemu_system_deps[@]}" dtc libudev)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
 
 package_qemu-system-ppc() {
   pkgdesc="QEMU system emulator for PPC"
-  depends=("${_qemu_system_deps[@]}" dtc qemu-system-ppc-firmware=$pkgver-$pkgrel systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" dtc qemu-system-ppc-firmware=$pkgver-$pkgrel libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
@@ -887,7 +889,7 @@
 
 package_qemu-system-riscv() {
   pkgdesc="QEMU system emulator for RISC-V"
-  depends=("${_qemu_system_deps[@]}" dtc qemu-system-riscv-firmware=$pkgver-$pkgrel systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" dtc qemu-system-riscv-firmware=$pkgver-$pkgrel libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
@@ -908,7 +910,7 @@
 
 package_qemu-system-s390x() {
   pkgdesc="QEMU system emulator for S390"
-  depends=("${_qemu_system_deps[@]}" qemu-system-s390x-firmware=$pkgver-$pkgrel systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" qemu-system-s390x-firmware=$pkgver-$pkgrel libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
@@ -922,14 +924,14 @@
 
 package_qemu-system-sh4() {
   pkgdesc="QEMU system emulator for SH4"
-  depends=("${_qemu_system_deps[@]}" systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
 
 package_qemu-system-sparc() {
   pkgdesc="QEMU system emulator for SPARC"
-  depends=("${_qemu_system_deps[@]}" qemu-system-sparc-firmware=$pkgver-$pkgrel systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" qemu-system-sparc-firmware=$pkgver-$pkgrel libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
@@ -950,7 +952,7 @@
 
 package_qemu-system-x86() {
   pkgdesc="QEMU system emulator for x86"
-  depends=("${_qemu_system_deps[@]}" dtc edk2-ovmf libcbor libcbor.so qemu-system-x86-firmware=$pkgver-$pkgrel seabios systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" dtc edk2-ovmf libcbor libcbor.so qemu-system-x86-firmware=$pkgver-$pkgrel seabios libudev libudev.so)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
@@ -964,7 +966,14 @@
 
 package_qemu-system-xtensa() {
   pkgdesc="QEMU system emulator for Xtensa"
-  depends=("${_qemu_system_deps[@]}" dtc systemd-libs libudev.so)
+  depends=("${_qemu_system_deps[@]}" dtc libudev libudev.so)
+  mv -v $pkgname/* "$pkgdir"
+  _install_licenses
+}
+
+package_qemu-hw-uefi-vars() {
+  pkgdesc="QEMU UEFI vars handling"
+  depends=(gcc-libs glibc gnutls qemu-common=$pkgver-$pkgrel)
   mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
@@ -999,9 +1008,8 @@
 
 package_qemu-pr-helper() {
   pkgdesc="QEMU persistent reservation utility"
-  depends=(gcc-libs glib2 libglib-2.0.so libgmodule-2.0.so glibc gnutls libcap-ng libcap-ng.so liburing liburing.so multipath-tools numactl libnuma.so pam libpam.so qemu-common=$pkgver-$pkgrel systemd-libs)
-  mv -v $pkgname/* "$pkgdir"
-  install -vDm 644 $pkgbase-$pkgver/contrib/systemd/$pkgname.{service,socket} -t "$pkgdir/usr/lib/systemd/system/"
+  depends=(gcc-libs glib2 libglib-2.0.so libgmodule-2.0.so glibc gnutls libcap-ng libcap-ng.so liburing liburing.so multipath-tools numactl libnuma.so pam libpam.so qemu-common=$pkgver-$pkgrel libudev)
+  mv -v $pkgname/* "$pkgdir"
   _install_licenses
 }
 
@@ -1136,7 +1144,6 @@
   pkgdesc="QEMU persistent reservation utility"
   depends=(gcc-libs glib2 libglib-2.0.so libgmodule-2.0.so glibc gnutls libcap-ng libcap-ng.so liburing liburing.so numactl libnuma.so pam libpam.so qemu-common=$pkgver-$pkgrel)
   mv -v $pkgname/* "$pkgdir"
-  install -vDm 644 $pkgbase-$pkgver/contrib/systemd/$pkgname.{service,socket} -t "$pkgdir/usr/lib/systemd/system/"
   _install_licenses
 }
 
@@ -1162,6 +1169,7 @@
     qemu-chardev-spice=$pkgver-$pkgrel
     qemu-hw-display-{qxl,virtio-gpu{,-{gl,pci,pci-gl}}}=$pkgver-$pkgrel
     qemu-hw-display-virtio-vga{,-gl}=$pkgver-$pkgrel
+    qemu-hw-uefi-vars=$pkgver-$pkgrel
     qemu-hw-usb-{host,redirect,smartcard}=$pkgver-$pkgrel
     qemu-ui-{curses,dbus,egl-headless,gtk,opengl,sdl,spice-{app,core}}=$pkgver-$pkgrel
     qemu-vhost-user-gpu=$pkgver-$pkgrel


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -5,8 +5,6 @@
 capstone
 curl
 dtc
-edk2-aarch64
-edk2-arm
 edk2-ovmf
 fuse3
 gcc-libs
@@ -63,6 +61,7 @@
 libspice-server.so
 libssh
 libssh.so
+libudev
 libudev.so
 liburing
 liburing.so
@@ -121,6 +120,7 @@
 qemu-hw-display-virtio-vga
 qemu-hw-display-virtio-vga-gl
 qemu-hw-s390x-virtio-gpu-ccw
+qemu-hw-uefi-vars
 qemu-hw-usb-host
 qemu-hw-usb-redirect
 qemu-hw-usb-smartcard
@@ -175,8 +175,7 @@
 snappy
 spice
 spice-protocol
-systemd
-systemd-libs
+udev
 usbredir
 vde2
 virglrenderer