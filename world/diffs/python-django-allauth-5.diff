--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,7 +2,7 @@
 pkgname=python-django-allauth
 _name=${pkgname#python-}
 pkgver=65.10.0
-pkgrel=2
+pkgrel=1
 pkgdesc="Authentication, registration, account management and 3rd party account authentication"
 arch=(any)
 url="https://codeberg.org/allauth/django-allauth"
@@ -14,11 +14,9 @@
   python-pyyaml  # implicitly required but not specified
 )
 makedepends=(
-  git
   python-build
   python-installer
   python-setuptools
-  python-setuptools-scm
   python-wheel
 )
 checkdepends=(
@@ -50,22 +48,22 @@
   'python-requests-oauthlib: for social account support'
   'python-saml: for SAML support'
 )
-source=("$pkgname::git+https://codeberg.org/allauth/django-allauth.git#tag=${pkgver}")
-sha512sums=('61008336584991c450a181027af3c6bbd5093b3a86e3765cca1f44a1e89b324a3e1e96589f50c763d58cee3dde0b9de1557be6bf7eaa6bbf9c35fcd61aedc412')
-b2sums=('f6d56f13bfc2feda22bfbad9041bdea6a37158d67371a650db92a0aab6718b1984f3c397f5a3763c5fe40b5a09e14e3456a97c79f544e5e75a6a05b18a516f5f')
+source=($pkgname-$pkgver.tar.gz::$url/archive/$pkgver.tar.gz)
+sha512sums=('0d3d1e5643165f9bac4b9e54dcc28698c46f94c56bea50536129d7c1f99e1249f65a7d34e72608137b3b1707739de1e357498ea9cbd91e2d1b9d8683640e1c14')
+b2sums=('1d0accbb0780c8591be3090432300d6612b6347052ce3146676bf430c8945484f666f164e40827d1075a58df4f1b929446ca999ae57afd07ac543a017f44ca17')
 
 build() {
-  cd $pkgname
+  cd $_name
   python -m build --wheel --skip-dependency-check --no-isolation
 }
 
 check() {
-  cd $pkgname
+  cd $_name
   pytest -vv
 }
 
 package() {
-  cd $pkgname
+  cd $_name
   python -m installer --destdir="$pkgdir" dist/*.whl
   install -vDm 644 README.rst -t "$pkgdir/usr/share/doc/$pkgname"
   install -vDm 644 LICENSE -t "$pkgdir/usr/share/licenses/$pkgname"


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
-git
 python
 python-asgiref
 python-build
@@ -6,5 +5,4 @@
 python-installer
 python-pyyaml
 python-setuptools
-python-setuptools-scm
 python-wheel

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd $pkgname
+cd $_name
 python -m build --wheel --skip-dependency-check --no-isolation
 }
