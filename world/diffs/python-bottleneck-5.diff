--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,16 +1,21 @@
 
 pkgname=python-bottleneck
-pkgver=1.6.0
+pkgver=1.4.2
 pkgrel=1
 pkgdesc="Fast NumPy array functions written in Cython"
 arch=(x86_64)
 url="https://github.com/kwgoodman/bottleneck"
 license=(BSD-2-Clause)
-depends=(glibc python python-numpy)
+depends=(python-numpy)
 makedepends=(python-setuptools python-build python-installer python-wheel python-versioneer)
 checkdepends=(python-pytest)
-source=($pkgname-$pkgver.tar.gz::${url}/archive/refs/tags/v${pkgver}.tar.gz)
-sha256sums=('f3ebfd2342f25e04dab7fac3db4190595fa9c47a2357eff6e18ce2e74a0dcc97')
+source=($pkgname-$pkgver.tar.gz::${url}/archive/refs/tags/v${pkgver}.tar.gz) # https://bugs.archlinux.org/task/77683
+sha256sums=('17296943478bdf9b4f9ff46a98713e80419525acfe96aca09fb28cac31aa18fc')
+
+prepare() {
+  cd bottleneck-${pkgver}
+  sed -i '/oldest-supported-numpy/d' pyproject.toml
+}
 
 build() {
   cd bottleneck-${pkgver}
@@ -18,9 +23,10 @@
 }
 
 check() {
+  cd bottleneck-${pkgver}
   python -m venv --system-site-packages test-env
-  test-env/bin/python -m installer bottleneck-$pkgver/dist/*.whl
-  test-env/bin/python -m pytest -vv --color=yes --pyargs bottleneck
+  test-env/bin/python setup.py install --skip-build
+  test-env/bin/python /usr/bin/pytest -vv --color=yes --pyargs bottleneck
 }
 
 package() {


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,5 +1,3 @@
-glibc
-python
 python-build
 python-installer
 python-numpy

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,3 +1,7 @@
+prepare() {
+cd bottleneck-${pkgver}
+sed -i '/oldest-supported-numpy/d' pyproject.toml
+}
 build() {
 cd bottleneck-${pkgver}
 python -m build --wheel --no-isolation
