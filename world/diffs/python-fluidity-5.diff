--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,24 +2,24 @@
 pkgname=python-fluidity
 pkgver=0.2.1
 _commit=468627ea13ed4c3043dc67ccc1ff16089fdb7b25
-pkgrel=8
+pkgrel=7
 pkgdesc="Fluidity: state machine implementation for Python objects"
 url="https://github.com/nsi-iff/fluidity"
 license=('MIT')
 arch=('any')
 depends=('python')
-makedepends=('git' 'python-build' 'python-installer' 'python-setuptools' 'python-wheel')
+makedepends=('python-setuptools')
 checkdepends=('python-should-dsl')
-source=("git+https://github.com/nsi-iff/fluidity.git#commit=$_commit")
-sha512sums=('2ff7c490c0503fd9019afe176e97524b2644d5d6b05be4a0dc49c3455212e4bf3f1bd4caa6206b4bf068fedabe7f83514d3baedcb0189449dee77074315792ef')
+source=("https://github.com/nsi-iff/fluidity/archive/$_commit/$pkgname-$_commit.tar.gz")
+sha512sums=('9c80fb3480fe4167247374f4fb8f1d8d8b77cb7d485d26518485b06b628d70f7bf0d538c4b6a08bf071bccff3082c7266e446d1682984a60e447c0d090b0f899')
 
 build() {
-  cd fluidity
-  python -m build --wheel --no-isolation
+  cd fluidity-$_commit
+  python setup.py build
 }
 
 check() {
-  cd fluidity
+  cd fluidity-$_commit
   (
     export PYTHONPATH="$PWD"
     python spec/callable_support_spec.py
@@ -38,7 +38,8 @@
 }
 
 package() {
-  cd fluidity
-  python -m installer --destdir="$pkgdir" dist/*.whl
+  cd fluidity-$_commit
+  python setup.py install --root="$pkgdir" --optimize=1
+
   install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,2 @@
-git
 python
-python-build
-python-installer
 python-setuptools
-python-wheel

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd fluidity
-python -m build --wheel --no-isolation
+cd fluidity-$_commit
+python setup.py build
 }
