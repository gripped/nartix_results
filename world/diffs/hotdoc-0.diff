--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 
 pkgname=hotdoc
-pkgver=0.17
-pkgrel=2
-pkgdesc="The tastiest API documentation system"
+pkgver=0.16
+pkgrel=3
+pkgdesc="The Tastiest Documentation Tool"
 url="https://github.com/hotdoc/hotdoc"
 arch=(x86_64)
 license=(LGPL-2.1-or-later)
@@ -21,6 +21,7 @@
   python-networkx
   python-pkgconfig
   python-schema
+  python-setuptools
   python-toposort
   python-wheezy-template
   python-yaml
@@ -31,7 +32,6 @@
   npm
   python-build
   python-installer
-  python-setuptools
   python-wheel
 )
 optdepends=(
@@ -40,42 +40,37 @@
 )
 source=(
   "git+https://github.com/hotdoc/hotdoc#tag=$pkgver"
-  "git+https://github.com/MathieuDuponchelle/cmark"
-  "git+https://github.com/PrismJS/prism"
+  "mathieu-cmark::git+https://github.com/MathieuDuponchelle/cmark"
+  "prismjs::git+https://github.com/PrismJS/prism"
   "git+https://github.com/hotdoc/hotdoc_bootstrap_theme"
-  "0001-Simplify-deps-for-Python-3.11.patch"
 )
-sha256sums=('4ffeb856513360ff024b6777711d87f269de47b1a9193e68433e8549a389dc2c'
-            'SKIP'
-            'SKIP'
-            'SKIP'
-            '865812a0c5a66822ece814e898b4b3ca46553ba51190adc944bb4f01c0db6cf0')
+b2sums=('4395067a40bb5e2d93d9037a51576c6a68ce69eeffb15871297d9d8eb6f938e1a3383e3ff7466118bc8cde401dcdca861e943784325a19d7be8619301f3ace19'
+        'SKIP'
+        'SKIP'
+        'SKIP')
 
 prepare() {
-  cd $pkgname
-
-  patch -Np1 -i "$srcdir/0001-Simplify-deps-for-Python-3.11.patch"
+  cd hotdoc
 
   git submodule init
-  git config submodule.cmark.url "$srcdir/cmark"
-  git config submodule.hotdoc/extensions/syntax_highlighting/prism.url "$srcdir/prism"
-  git config submodule.hotdoc/hotdoc_bootstrap_theme.url "$srcdir/hotdoc_bootstrap_theme"
-  git -c protocol.file.allow=always submodule update
+  git submodule set-url cmark "$srcdir/mathieu-cmark"
+  git submodule set-url hotdoc/extensions/syntax_highlighting/prism "$srcdir/prismjs"
+  git submodule set-url hotdoc/hotdoc_bootstrap_theme "$srcdir/hotdoc_bootstrap_theme"
+  git -c protocol.file.allow=always -c protocol.allow=never submodule update
 }
 
 build() {
-  cd $pkgname
+  cd hotdoc
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd $pkgname
-  python -m installer -d tmp_install dist/*.whl
-  local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
-  python -m unittest discover "$PWD/tmp_install/$site_packages"
+  cd hotdoc/build/lib.linux-$CARCH-cpython-*
+  python -m unittest
 }
 
 package() {
-  cd $pkgname
+  cd hotdoc
   python -m installer --destdir="$pkgdir" dist/*.whl
 }
+


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,13 +1,12 @@
 prepare() {
-cd $pkgname
-patch -Np1 -i "$srcdir/0001-Simplify-deps-for-Python-3.11.patch"
+cd hotdoc
 git submodule init
-git config submodule.cmark.url "$srcdir/cmark"
-git config submodule.hotdoc/extensions/syntax_highlighting/prism.url "$srcdir/prism"
-git config submodule.hotdoc/hotdoc_bootstrap_theme.url "$srcdir/hotdoc_bootstrap_theme"
-git -c protocol.file.allow=always submodule update
+git submodule set-url cmark "$srcdir/mathieu-cmark"
+git submodule set-url hotdoc/extensions/syntax_highlighting/prism "$srcdir/prismjs"
+git submodule set-url hotdoc/hotdoc_bootstrap_theme "$srcdir/hotdoc_bootstrap_theme"
+git -c protocol.file.allow=always -c protocol.allow=never submodule update
 }
 build() {
-cd $pkgname
+cd hotdoc
 python -m build --wheel --no-isolation
 }
