--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,22 +1,28 @@
 
 pkgname=xf86-video-nouveau
-pkgver=1.0.18
-pkgrel=1
+pkgver=1.0.17
+pkgrel=3
 pkgdesc="Open Source 3D acceleration driver for nVidia cards"
 arch=('x86_64')
 url="https://nouveau.freedesktop.org/"
 license=('MIT')
-depends=('systemd-libs' 'mesa' 'libdrm' 'glibc')
-makedepends=('xorg-server-devel' 'X-ABI-VIDEODRV_VERSION=25.2' 'systemd')
+depends=('libudev' 'mesa' 'libdrm' 'glibc')
+makedepends=('xorg-server-devel' 'X-ABI-VIDEODRV_VERSION=25.2' 'udev')
 conflicts=('xorg-server<21.1.1' 'X-ABI-VIDEODRV_VERSION<25' 'X-ABI-VIDEODRV_VERSION>=26')
 groups=('xorg-drivers')
-source=(https://xorg.freedesktop.org/archive/individual/driver/$pkgname-$pkgver.tar.xz{,.sig})
-sha512sums=('1330fa72f76a6fdc13e7bfa932627091d2735ddb277f6a24d4fefa79fad5f354c6bb661093f26b33770275deca435c3b018f451a6e6254fe35892c59c13e28dc'
-            'SKIP')
+source=(https://xorg.freedesktop.org/archive/individual/driver/$pkgname-$pkgver.tar.bz2{,.sig}
+        xorg-server-21.1.diff)
+sha512sums=('adba58ba5298d1a5b3f9f8540f9ef2cb2e10e47bba8e374103ec2e1f92e915f5f4393ed0021168cd649646e12315135a1efcdf77e8fb1648e1295914d87279b2'
+            'SKIP'
+            '6c1bc0a2197a0fdaa3f669ce96ab2bc0167642168da01a86c712e1a77692244ad7b68a5c71d47b62abb6fa9b74f0495226133b7eff4badbd6dda56994bba74c8')
 validpgpkeys=('B97BD6A80CAC4981091AE547FE558C72A67013C3') # Maarten Lankhorst <maarten@debian.org>
 validpgpkeys+=('C9FA6B58BC799041500F769AC5469FB8758F9C2B') # "Lyude Paul <lyude@redhat.com>"
 validpgpkeys+=('BFB9B0C276D5767C710086EFB178BE4EA075DE07') # "Ilia Mirkin <imirkin@alum.mit.edu>"
-validpgpkeys+=('3BB639E56F861FA2E86505690FDD682D974CA72A') # Matt Turner <mattst88@gmail.com>
+
+prepare() {
+  cd $pkgname-$pkgver
+  patch -np1 -i ../xorg-server-21.1.diff
+}
 
 build() {
   cd $pkgname-$pkgver


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,7 +1,7 @@
 X-ABI-VIDEODRV_VERSION
 glibc
 libdrm
+libudev
 mesa
-systemd
-systemd-libs
+udev
 xorg-server-devel