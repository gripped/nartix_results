--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,19 +1,27 @@
 
 pkgname=ffmpegthumbnailer
-pkgver=2.2.4
-pkgrel=1
+pkgver=2.2.3
+pkgrel=4
 pkgdesc="Lightweight video thumbnailer that can be used by file managers"
 url="https://github.com/dirkvdb/ffmpegthumbnailer"
 license=('GPL-2.0-or-later')
 arch=('x86_64')
 depends=('ffmpeg' 'libjpeg-turbo' 'libpng')
-makedepends=('cmake' 'git')
+makedepends=('cmake')
 optdepends=('gvfs: support for gio uris')
-source=(git+https://github.com/dirkvdb/ffmpegthumbnailer#tag=v$pkgver)
-sha256sums=('52f57cee6963e99e2a367ff60a55ec542643688b69f4bf2d6b941fd679e6fac0')
+source=(https://github.com/dirkvdb/$pkgname/archive/$pkgver/$pkgname-$pkgver.tar.gz
+        https://github.com/dirkvdb/ffmpegthumbnailer/commit/40e050673851baa59ca45c900e24d68027d9d675.patch)
+sha256sums=('8c9b9057c6cc8bce9d11701af224c8139c940f734c439a595525e073b09d19b8'
+            'b144efb0e8d914e1950e8a16299c532d59819768ffcb1ec152f72abf0d3a65fb')
+
+prepare() {
+  cd "$pkgname-$pkgver"
+
+  patch -p1 -i ../40e050673851baa59ca45c900e24d68027d9d675.patch
+}
 
 build() {
-  cmake -B build -S $pkgname \
+  cmake -B build -S $pkgname-$pkgver \
     -DCMAKE_INSTALL_PREFIX=/usr \
     -DENABLE_GIO=ON \
     -DENABLE_THUMBNAILER=ON


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,5 +1,4 @@
 cmake
 ffmpeg
-git
 libjpeg-turbo
 libpng

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,9 @@
+prepare() {
+cd "$pkgname-$pkgver"
+patch -p1 -i ../40e050673851baa59ca45c900e24d68027d9d675.patch
+}
 build() {
-cmake -B build -S $pkgname \
+cmake -B build -S $pkgname-$pkgver \
 -DCMAKE_INSTALL_PREFIX=/usr \
 -DENABLE_GIO=ON \
 -DENABLE_THUMBNAILER=ON
