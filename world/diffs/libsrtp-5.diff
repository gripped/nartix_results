--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,18 +4,14 @@
   libsrtp
   libsrtp-docs
 )
-pkgver=2.7.0
+pkgver=2.6.0
 pkgrel=1
 epoch=1
 pkgdesc="Library for SRTP (Secure Realtime Transport Protocol)"
 url="https://github.com/cisco/libsrtp"
 arch=(x86_64)
 license=(BSD-3-Clause)
-depends=(
-  glibc
-  nspr
-  nss
-)
+depends=(nss)
 makedepends=(
   doxygen
   git
@@ -23,20 +19,29 @@
   meson
 )
 checkdepends=(procps-ng)
-source=("git+https://github.com/cisco/libsrtp#tag=v$pkgver")
-b2sums=('4e72d8ddb6ff1056331377001b575e59973acf27ac8fcdfe5d08e4f44f3702012e8af7da9970de3a0e4643aa1139fcce4af3df3c31258ac8c5b35420b67aa9dd')
+_commit=fd08747fa6800b321d53e15feb34da12dc697dee  # tags/v2
+source=("git+https://github.com/cisco/libsrtp#commit=$_commit")
+b2sums=('SKIP')
+
+pkgver() {
+  cd libsrtp
+  git describe --tags | sed 's/^v//;s/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd libsrtp
+
+  git tag | grep -Pv '^v\d+\.\d+\.\d+$' | xargs git tag -d
 }
 
 build() {
   local meson_options=(
+    --buildtype release
     -D crypto-library=nss
     -D crypto-library-kdf=disabled
   )
 
-  arch-meson libsrtp build "${meson_options[@]}"
+  artix-meson libsrtp build "${meson_options[@]}"
   meson compile -C build
   meson compile -C build doc
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,8 +1,6 @@
 
 doxygen
 git
-glibc
 libpcap
 meson
-nspr
 nss

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,12 +1,14 @@
 prepare() {
 cd libsrtp
+git tag | grep -Pv '^v\d+\.\d+\.\d+$' | xargs git tag -d
 }
 build() {
 local meson_options=(
+--buildtype release
 -D crypto-library=nss
 -D crypto-library-kdf=disabled
 )
-arch-meson libsrtp build "${meson_options[@]}"
+artix-meson libsrtp build "${meson_options[@]}"
 meson compile -C build
 meson compile -C build doc
 }
