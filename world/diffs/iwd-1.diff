--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,18 +1,18 @@
 
 pkgname=iwd
-pkgver=2.22
-pkgrel=1
+pkgver=2.20
+pkgrel=2
 pkgdesc='Internet Wireless Daemon'
 arch=('x86_64')
 url='https://git.kernel.org/cgit/network/wireless/iwd.git/'
 license=('LGPL-2.1-or-later')
 depends=('glibc' 'readline' 'libreadline.so' 'ell' 'gcc-libs')
-makedepends=('python-docutils' 'dbus' 'systemd')
+makedepends=('python-docutils' 'dbus' 'udev')
 optdepends=('qrencode: for displaying QR code after DPP is started')
 source=(https://www.kernel.org/pub/linux/network/wireless/iwd-${pkgver}.tar{.xz,.sign}
         0001-use-network-group-for-unprivileged-access.diff
         0002-fix-scan-segfault.patch)
-sha256sums=('2c41c5da9924b90f8383b293b0c0b3d0bfb34fdc8822d8d0d37ec100707f263e'
+sha256sums=('86827b97cb5b19ddecce36568c59378da2fae8cf37a0e2b9eacd1269f24c6f8e'
             'SKIP'
             'd5fb4fb864b7a0632117aa2039df535ab5c1d024ae618a1f09e34dfab8ee0cc7'
             '4471026fb8816132e7f89327d2f0d72b63b6c8c64ffb1c449205dfe52bfec6ac')
@@ -23,6 +23,7 @@
   cd ${pkgname}-${pkgver}
   patch -Np1 -i ../0001-use-network-group-for-unprivileged-access.diff
 
+  patch -Np1 -i ../0002-fix-scan-segfault.patch
 
   sed -i "s:unit/test-wsc::" Makefile.am
   autoreconf -vfi
@@ -38,6 +39,7 @@
 	--enable-wired \
 	--enable-ofono \
 	--enable-hwsim \
+	--disable-systemd-service \
 	--disable-tools
   make
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -5,4 +5,4 @@
 libreadline.so
 python-docutils
 readline
-systemd
+udev