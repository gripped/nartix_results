--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=python-aiobotocore
 _pkgname=aiobotocore
-pkgver=2.20.0
+pkgver=2.19.0
 pkgrel=1
 pkgdesc='asyncio support for botocore library using aiohttp'
 arch=(any)
@@ -13,8 +13,15 @@
 checkdepends=(python-moto python-pytest python-pytest-asyncio python-dill python-docutils python-pip
               python-time-machine
               python-docker python-openapi-spec-validator python-yaml python-flask python-flask-cors)
-source=("git+https://github.com/aio-libs/aiobotocore.git#tag=$pkgver")
-sha256sums=('94d795d766cb1b20e77e3f856aa9b3790322449936f70d76dd27498be9b8a214')
+source=("git+https://github.com/aio-libs/aiobotocore.git#tag=$pkgver"
+        "moto-5.x.diff")
+sha256sums=('d9b96d20056076edb772d15874650fc81f61891c4b71eb716ee7dd343f7dabb8'
+            '2bfadc984a4ad3a6420b356d572c8085b82a46949fc0ecaea98ddce45980503b')
+
+prepare() {
+  cd $_pkgname
+  patch -Np1 -i ../moto-5.x.diff
+}
 
 build() {
   cd $_pkgname
@@ -26,7 +33,8 @@
 
   export PYTHONPATH="$PWD"
   pytest -m "not localonly" tests \
-      --ignore=tests/test_lambda.py
+      --ignore=tests/test_lambda.py \
+      --deselect 'tests/test_basic_s3.py::test_fail_proxy_request'
 }
 
 package() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,3 +1,7 @@
+prepare() {
+cd $_pkgname
+patch -Np1 -i ../moto-5.x.diff
+}
 build() {
 cd $_pkgname
 python -m build --wheel --no-isolation
