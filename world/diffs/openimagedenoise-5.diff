--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,27 +1,23 @@
 
 pkgname=openimagedenoise
-pkgver=2.3.0
-pkgrel=2
+pkgver=2.2.2
+pkgrel=1
 pkgdesc='Intel(R) Open Image Denoise library'
 arch=('x86_64')
 url='https://openimagedenoise.github.io'
-license=('Apache-2.0')
+license=('Apache')
 depends=('intel-tbb')
-makedepends=('cmake' 'ninja' 'ispc' 'python' 'cuda' 'hip-runtime-amd')
+makedepends=('cmake' 'ninja' 'ispc' 'python')
 source=("https://github.com/OpenImageDenoise/oidn/releases/download/v${pkgver}/oidn-${pkgver}.src.tar.gz")
-sha512sums=('4f68ce3b0da37e1861090d60d7cd823046f325c45a8e2c3f4098eb3b4f7ec676d2acbb9c138ff60a9f83188dd0dcbaba42106aad96beafc5e65045c77c00f2f8')
+sha512sums=('eca18e9e22a40bc1381e75985e5f5e79f48cc6d168a2a703e54540967646487d347db290459e9a612d8ab4924e8d3c83d84664fd5318cca4f17745da1e47cf50')
 
 build() {
   cd oidn-$pkgver
-
-  export CXXFLAGS+=" -fcf-protection=none"
 
   cmake \
     -B build \
     -G Ninja \
     -DCMAKE_INSTALL_PREFIX=/usr \
-    -DOIDN_DEVICE_CUDA=ON \
-    -DOIDN_DEVICE_HIP=ON \
     -DCMAKE_BUILD_TYPE=Release
   ninja -C build
 }
@@ -29,6 +25,4 @@
 package() {
   cd oidn-$pkgver
   DESTDIR="$pkgdir" ninja -C build install
-
-  rm -r "${pkgdir}"/build
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,4 @@
 cmake
-cuda
-hip-runtime-amd
 intel-tbb
 ispc
 ninja

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,12 +1,9 @@
 build() {
 cd oidn-$pkgver
-export CXXFLAGS+=" -fcf-protection=none"
 cmake \
 -B build \
 -G Ninja \
 -DCMAKE_INSTALL_PREFIX=/usr \
--DOIDN_DEVICE_CUDA=ON \
--DOIDN_DEVICE_HIP=ON \
 -DCMAKE_BUILD_TYPE=Release
 ninja -C build
 }
