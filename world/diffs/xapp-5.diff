--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,54 +1,30 @@
 
 pkgname=xapp
-pkgver=3.2.1
+pkgver=2.8.4
 pkgrel=1
 pkgdesc="Common library for X-Apps project"
 arch=(x86_64)
-url='https://github.com/linuxmint/xapp'
-license=('GPL-3.0-only AND LGPL-3.0-only')
-depends=(
-  bash
-  cairo
-  dconf
-  gcc-libs
-  gdk-pixbuf2
-  glib2
-  glibc
-  gtk3
-  hicolor-icon-theme
-  libdbusmenu-gtk3
-  libgnomekbd
-  libx11
-  libxkbfile
-  pango
-  python
-  python-gobject
-  python-setproctitle
-  xapp-symbolic-icons
-)
-makedepends=(
-  git
-  glib2-devel
-  gobject-introspection
-  meson
-  vala
-)
+url="https://github.com/linuxmint/${pkgname}"
+license=(GPL)
+depends=(libdbusmenu-gtk3 libgnomekbd)
+optdepends=('python: for mate-desktop status applet')
+makedepends=(meson samurai gobject-introspection python-gobject vala glib2-devel)
 provides=(xapps)
 conflicts=(xapps)
 replaces=(xapps)
-source=("git+https://github.com/linuxmint/xapp.git#tag=$pkgver")
-sha256sums=(052b06513f205e62ec038c6045612ff228d0966c39f5e47fd83a70dd72846824)
-b2sums=(be3e2fc6140abeec0cf5362a1ca63b4a65f0ec50bbddbf0a78331a3713d7b42c62db6df033c0c08e5f7c023b0b7a5ad0080248f0cea7dc9d362a9b530d3e29e6)
+source=(${url}/archive/${pkgver}/${pkgname}-${pkgver}.tar.gz)
+sha256sums=('cdcf13037451c0e74064c113d93aa438fb259d206199d023defa2690db5b9a19')
+b2sums=('7f3a17b96e236e65eca4369cc21c0f5e913d5727ef17dba03bc7e894ba62285ec9421ad4c53c0e7136ea1ba569f6894a73b11485c6629176f32b69f4dec1587f')
 
 build() {
-  arch-meson $pkgname build \
-    -D docs=true
-  meson compile -C build
+  artix-meson ${pkgname}-${pkgver} build \
+    --buildtype=debugoptimized
+  samu -C build
 }
 
 package(){
-  meson install -C build --destdir="$pkgdir"
+  DESTDIR="${pkgdir}" samu -C build install
 
   local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
-  python -m compileall -o 0 -o 1 -o 2 --hardlink-dupes -s "$pkgdir" "$pkgdir"$site_packages
+  python -m compileall -o 0 -o 1 -o 2 --hardlink-dupes -s "${pkgdir}" "${pkgdir}"${site_packages}
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,23 +1,8 @@
-bash
-cairo
-dconf
-gcc-libs
-gdk-pixbuf2
-git
-glib2
 glib2-devel
-glibc
 gobject-introspection
-gtk3
-hicolor-icon-theme
 libdbusmenu-gtk3
 libgnomekbd
-libx11
-libxkbfile
 meson
-pango
-python
 python-gobject
-python-setproctitle
+samurai
 vala
-xapp-symbolic-icons

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,5 @@
 build() {
-arch-meson $pkgname build \
--D docs=true
-meson compile -C build
+artix-meson ${pkgname}-${pkgver} build \
+--buildtype=debugoptimized
+samu -C build
 }
