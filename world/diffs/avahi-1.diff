--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=avahi
-pkgver=0.9rc3
-pkgrel=1
+pkgver=0.9rc2
+pkgrel=3
 epoch=1
 pkgdesc="Service Discovery for Linux using mDNS/DNS-SD (compatible with Bonjour)"
 url="https://github.com/avahi/avahi"
@@ -16,7 +16,7 @@
   glibc
   libcap
   libdaemon
-  systemd-libs
+  libelogind
 )
 makedepends=(
   doxygen
@@ -28,7 +28,7 @@
   libevent
   python-dbus
   python-gobject
-  systemd
+  elogind
   xmltoman
 )
 optdepends=(
@@ -51,11 +51,15 @@
   "git+$url#tag=v${pkgver/[a-z]/-&}"
   0001-HACK-Install-fixes.patch
 )
-b2sums=('e9cfd9aa6da87cab3040b2243e4c4946ce028503c69eac06f1c7d2356e63ed3c469bb354d5fb56cd142e56028a34f16a4069b30951d22cdf17091edd58dbb4fb'
+b2sums=('2513fcc933cc6010888d1b43254846b1bbc91fc83d257055c82006010b393339b4dcf4cba2cc514827d764b9d7f820bec5c0a266c253ad2c58698746e3f46709'
         'a15b00c05cce3b6a1479d88b1393cd955a80c669fed03be5f624a8e8701f22fe327bbd42f7563a532ae8ebc39408f3aedfc982c42a2b6141ccc22af96f16293c')
 
 prepare() {
   cd avahi
+
+  git cherry-pick -n 78eab31128479f06e30beb8c1cbf99dd921e2524
+
+  git cherry-pick -n 4e2e1ea0908d7e6ad7f38ae04fdcdf2411f8b942
 
   git apply -3 ../0001-HACK-Install-fixes.patch
 
@@ -76,7 +80,8 @@
     --with-autoipd-user=avahi
     --with-avahi-priv-access-group=network
     --with-distro=archlinux
-    --with-systemdsystemunitdir=/usr/lib/systemd/system
+    --with-systemdsystemunitdir=no
+    --disable-libsystemd
     with_dbus_sys=/usr/share/dbus-1/system.d
   )
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,7 @@
 bash
 dbus
 doxygen
+elogind
 expat
 gdbm
 git
@@ -13,9 +14,8 @@
 libcap
 libdaemon
 libdbus-1.so
+libelogind
 libevent
 python-dbus
 python-gobject
-systemd
-systemd-libs
 xmltoman