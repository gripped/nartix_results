--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=pypy
-pkgver=7.3.17
-pkgrel=1
+pkgver=7.3.18
+pkgrel=2
 pkgdesc="A Python implementation written in Python, JIT enabled"
 url="https://pypy.org"
 arch=('x86_64')
@@ -9,15 +9,15 @@
 makedepends=('pypy' 'tk' 'sqlite' 'mercurial')
 optdepends=('sqlite: sqlite module'
             'tk: tk module')
-options=(!buildflags)
 license=('MIT')
-source=("https://downloads.python.org/pypy/pypy2.7-v${pkgver}-src.zip")
-sha512sums=('001344ad5420f154d6199112b00ecb823b69306ede707a73e475abefa2e2d9df1a90958df3063aeea8d03a663852810b3168e425b0a602b0a0dacaaf8688ccef')
+source=("https://downloads.python.org/pypy/pypy2.7-v${pkgver}-src.tar.bz2")
+sha512sums=('f49763073a67292a780c7f078d90210e08cd1e68168fb4997ee1dccb2a84395dbe650dcfb4af5d1cb07249c5d4abc2c63ffe7c078be9fabcce92bcb4626254ac')
 
 build() {
   cd pypy2.7-v${pkgver}-src/pypy/goal
 
-  sed -i "s/, 'linux', 'linux2'//" targetpypystandalone.py
+  export CFLAGS+=" -Wno-error=incompatible-pointer-types"
+
   pypy ../../rpython/bin/rpython -Ojit --shared targetpypystandalone
 
   PYTHONPATH=../.. ./pypy-c ../../lib_pypy/pypy_tools/build_cffi_imports.py


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 build() {
 cd pypy2.7-v${pkgver}-src/pypy/goal
-sed -i "s/, 'linux', 'linux2'//" targetpypystandalone.py
+export CFLAGS+=" -Wno-error=incompatible-pointer-types"
 pypy ../../rpython/bin/rpython -Ojit --shared targetpypystandalone
 PYTHONPATH=../.. ./pypy-c ../../lib_pypy/pypy_tools/build_cffi_imports.py
 }
