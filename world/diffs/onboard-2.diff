--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,35 +1,74 @@
 
 pkgname=onboard
 pkgver=1.4.1
-pkgrel=11
+pkgrel=12
 pkgdesc='On-screen keyboard useful on tablet PCs or for mobility impaired users'
 arch=('x86_64')
 url='https://launchpad.net/onboard'
-license=('GPL')
-depends=('gtk3' 'hunspell' 'iso-codes' 'libcanberra' 'libxkbfile' 'python-cairo' 'python-dbus' 'python-gobject' 'systemd')
-makedepends=('python-distutils-extra')
+license=('GPL-3.0-or-later')
+depends=(
+  'at-spi2-core'
+  'cairo'
+  'dconf'
+  'gcc-libs'
+  'gdk-pixbuf2'
+  'glib2'
+  'glibc'
+  'gtk3'
+  'hunspell'
+  'iso-codes'
+  'libcanberra'
+  'libx11'
+  'libxi'
+  'libxkbfile'
+  'libxtst'
+  'pango'
+  'python'
+  'python-cairo'
+  'python-dbus'
+  'python-gobject'
+  'systemd-libs'
+)
+makedepends=(
+  'python-build'
+  'python-distutils-extra'
+  'python-installer'
+  'python-setuptools'
+  'python-wheel'
+)
 optdepends=('mousetweaks: hover click with mouse')
-source=("https://launchpad.net/$pkgname/${pkgver%.*}/$pkgver/+download/$pkgname-$pkgver.tar.gz"{,.asc}
-        '0001-python-3-12.patch'
-        '0002-thread-state.patch')
+source=(
+  "https://launchpad.net/$pkgname/${pkgver%.*}/$pkgver/+download/$pkgname-$pkgver.tar.gz"{,.asc}
+  "$pkgname-python-3-12.patch"
+  "$pkgname-thread-state.patch"
+  "$pkgname-replace-custom-bool-typedef-with-stdbool-header.patch"
+)
+b2sums=('9833cda373b4df28a8e4a0c9ae81069633903ec04ad22208390f3cc21b5540ae225aae553ef1b934832b6ba7ab1ba76e6e1c2c5d10cdc16b06dc2f5ac8d152b8'
+        'SKIP'
+        'e5f237344241a3e077e016205dd3a7dba25f7c6f59941c46f663ba32885f89bc982db1bc84799faad44ca6e1da94564a617c7c8179b687756e1f10a1e26f2439'
+        '95a215f3173ef1798176394005c8d5c82c027689072e508271b70f07b28b653afb6bce2f129233e3adbe88e1e86b3afdee246c002a0bf1cbce8ff0b2885a8fc6'
+        'ccc05356c5b2000fe851a37dc8780b0a01e0ae0cb7a8ee3ebd6e3ea8f1225e0d37216c9c0b8fab5397ca5e33c07b6ad0ce5f8cb2145e86499254305cfd19d591')
 validpgpkeys=('BCFE9B5A71A0B0F860521CF963087078B67DCFED') # Francesco Fumanti
-sha256sums=('01cae1ac5b1ef1ab985bd2d2d79ded6fc99ee04b1535cc1bb191e43a231a3865'
-            'SKIP'
-            '8d664731749a4dfb66fc49513c4a9ae2133ce2a8f9a5ad4c0eb03152be060e2f'
-            'c074e7209b447e28f2344fa1f24246a5e9935f2875886cd0219562e637914a19')
 
 prepare() {
   cd $pkgname-$pkgver
-  patch -Np1 < ../0001-python-3-12.patch
-  patch -Np1 < ../0002-thread-state.patch
+  patch -Np1 < ../$pkgname-python-3-12.patch
+  patch -Np1 < ../$pkgname-thread-state.patch
+  patch -Np1 < ../$pkgname-replace-custom-bool-typedef-with-stdbool-header.patch
 }
 
 build() {
   cd $pkgname-$pkgver
-  python3 setup.py build
+  python -m build --wheel --no-isolation
 }
 
 package() {
   cd $pkgname-$pkgver
-  python3 setup.py install --root="$pkgdir" --optimize=1
+  python -m installer --destdir="$pkgdir" dist/*.whl
+
+  local python_version=$(python -c 'import sys; print(".".join(map(str, sys.version_info[:2])))')
+  local site_packages="$pkgdir/usr/lib/python$python_version/site-packages"
+  install -vDm644 -t "$pkgdir/etc/xdg/autostart/" \
+    "$site_packages/etc/xdg/autostart/onboard-autostart.desktop"
+  rm -vr "$site_packages/etc"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,10 +1,26 @@
+at-spi2-core
+cairo
+dconf
+gcc-libs
+gdk-pixbuf2
+glib2
+glibc
 gtk3
 hunspell
 iso-codes
 libcanberra
+libx11
+libxi
 libxkbfile
+libxtst
+pango
+python
+python-build
 python-cairo
 python-dbus
 python-distutils-extra
 python-gobject
-systemd
+python-installer
+python-setuptools
+python-wheel
+systemd-libs