--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,12 +4,11 @@
   libgit2-glib
   libgit2-glib-docs
 )
-_commit=f9843757630160f1222ef084a47931c7d0b90fe3  # tags/v1.2.0^0
 pkgver=1.2.0
-pkgrel=2
+pkgrel=3
 pkgdesc="GLib wrapper for libgit2"
 url="https://gitlab.gnome.org/GNOME/libgit2-glib"
-license=(LGPL2.1)
+license=(LGPL-2.1-or-later)
 arch=(x86_64)
 makedepends=(
   gi-docgen
@@ -21,8 +20,12 @@
   python-gobject
   vala
 )
-source=("git+$url.git#commit=$_commit")
-b2sums=('SKIP')
+source=(
+  "git+$url.git#tag=v$pkgver"
+  $pkgname-1.2.0-libgit2_1.8.patch
+)
+b2sums=('d31e3edff3b663b0ba754868b719afd231067dd55aef05d4deec995dfab7eb7ba45c16ef2094dfa0f0c605731732b78e78bfa283a70fb18ab7d24a6f12fb00a8'
+        '412dc5ae24a29789d1f8433c2dd3a1eaebb2087311be2019a2170c32d913ee9310e62e292fdd51d1a9eb5c4f9b1dc19deefb4734ca40940523e17cb76eecb834')
 
 _pick() {
   local p="$1" f d; shift
@@ -39,8 +42,12 @@
   git describe --tags | sed 's/^v//g;s/\([^-]*-g\)/r\1/;s/-/./g'
 }
 
+prepare() {
+  patch -Np1 -d $pkgname -i ../$pkgname-1.2.0-libgit2_1.8.patch
+}
+
 build() {
-  arch-meson $pkgname build -D gtk_doc=true
+  artix-meson $pkgname build -D gtk_doc=true
   meson compile -C build
 }
 


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,7 @@
+prepare() {
+patch -Np1 -d $pkgname -i ../$pkgname-1.2.0-libgit2_1.8.patch
+}
 build() {
-arch-meson $pkgname build -D gtk_doc=true
+artix-meson $pkgname build -D gtk_doc=true
 meson compile -C build
 }
