--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,29 +3,42 @@
 pkgver=3.0
 pkgrel=3
 pkgdesc='WebDav server implementation using libsoup (RFC 4918)'
-arch=('x86_64')
+arch=(x86_64)
 url='https://wiki.gnome.org/phodav'
-license=('LGPL-2.1-or-later')
-depends=('avahi' 'glib2' 'glibc' 'libsoup3' 'libxml2' 'systemd')
-makedepends=('asciidoc' 'gtk-doc' 'meson' 'xmlto')
-backup=('etc/conf.d/spice-webdavd')
-source=("https://download.gnome.org/sources/$pkgname/$pkgver/$pkgname-$pkgver.tar.xz")
-sha256sums=('392ec2d06d50300dcff1ef269a2a985304e29bce3520002fca29f2edc1d138d1')
+license=(LGPL-2.1-or-later)
+depends=(
+  avahi
+  glib2
+  glibc
+  libsoup3
+  libxml2
+)
+makedepends=(
+  asciidoc
+  git
+  gtk-doc
+  meson
+  xmlto
+)
+backup=(etc/conf.d/spice-webdavd)
+source=("git+https://gitlab.gnome.org/GNOME/phodav.git?signed#tag=v$pkgver")
+b2sums=(b27ed0f583980460cd51321d38a48f5c755c67a75fe06e4e9f7b7e6b8a68a31edc89ea1197a101dff8088e30dc1c04217035b2c835911dc93dcc8ed871de9411)
+validpgpkeys=(87A9BD933F87C606D276F62DDAE8E10975969CE5) # Marc-AndrÃ© Lureau
 
 prepare() {
-	cd $pkgname-$pkgver
-	sed -i 's|/etc/sysconfig/spice-webdavd|/etc/conf.d/spice-webdavd|
-	        s|/usr/sbin/spice-webdavd|/usr/bin/spice-webdavd|' data/spice-webdavd.service
+  cd $pkgname
+  sed -i 's|/etc/sysconfig/spice-webdavd|/etc/conf.d/spice-webdavd|
+          s|/usr/sbin/spice-webdavd|/usr/bin/spice-webdavd|' data/spice-webdavd.service
 }
 
 build() {
-	arch-meson $pkgname-$pkgver build
-	meson compile -C build
+  artix-meson $pkgname build
+  meson compile -C build
 }
 
 package() {
-	meson install -C build --destdir "$pkgdir"
+  meson install -C build --destdir "$pkgdir"
 
-	install -dm755 "$pkgdir/etc/conf.d/"
-	echo 'SPICE_WEBDAVD_EXTRA_ARGS=""' > "$pkgdir/etc/conf.d/spice-webdavd"
+  install -dm755 "$pkgdir/etc/conf.d/"
+  echo 'SPICE_WEBDAVD_EXTRA_ARGS=""' > "$pkgdir/etc/conf.d/spice-webdavd"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,10 +1,10 @@
 asciidoc
 avahi
+git
 glib2
 glibc
 gtk-doc
 libsoup3
 libxml2
 meson
-systemd
 xmlto