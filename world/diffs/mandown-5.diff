--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,14 +1,14 @@
 
 pkgname=mandown
 pkgver=1.1.0
-pkgrel=2
+pkgrel=1
 arch=(x86_64)
 license=('Apache-2.0')
 url="https://gitlab.com/kornelski/mandown"
 pkgdesc="Create man pages from markdown markup"
 depends=(
+  gcc-libs
   glibc
-  libgcc
 )
 makedepends=(rust cargo)
 source=(https://gitlab.com/kornelski/mandown/-/archive/v${pkgver}/mandown-v${pkgver}.tar.gz)
@@ -16,16 +16,20 @@
 
 prepare() {
   cd "$pkgname-v$pkgver"
-  cargo fetch --locked --target "$(rustc --print host-tuple)"
+  export RUSTUP_TOOLCHAIN=stable
+  cargo fetch --locked --target "$(rustc -vV | sed -n 's/host: //p')"
 }
 
 build() {
   cd "$pkgname-v$pkgver"
+  export RUSTUP_TOOLCHAIN=stable
+  export CARGO_TARGET_DIR=target
   cargo build --frozen --release --all-features
 }
 
 check() {
   cd "$pkgname-v$pkgver"
+  export RUSTUP_TOOLCHAIN=stable
   cargo test --frozen --all-features
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,4 @@
 cargo
+gcc-libs
 glibc
-libgcc
 rust

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,11 @@
 prepare() {
 cd "$pkgname-v$pkgver"
-cargo fetch --locked --target "$(rustc --print host-tuple)"
+export RUSTUP_TOOLCHAIN=stable
+cargo fetch --locked --target "$(rustc -vV | sed -n 's/host: //p')"
 }
 build() {
 cd "$pkgname-v$pkgver"
+export RUSTUP_TOOLCHAIN=stable
+export CARGO_TARGET_DIR=target
 cargo build --frozen --release --all-features
 }
