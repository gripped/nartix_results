--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 
 pkgname=mpv
 epoch=1
-pkgver=0.41.0
-pkgrel=2
+pkgver=0.40.0
+pkgrel=7
 pkgdesc='a free, open source, and cross-platform media player'
 arch=('x86_64')
 license=('GPL-2.0-or-later AND LGPL-2.1-or-later')
@@ -20,8 +20,18 @@
 provides=('libmpv.so')
 options=('!emptydirs')
 validpgpkeys=('145077D82501AA20152CACCE8D769208D5E31419') # sfan5 <sfan5@live.de>
-source=("git+https://github.com/mpv-player/mpv.git#tag=v${pkgver}?signed")
-sha256sums=('6d591780b86f20397697d8847e30b9bf864798b62615fa995395b7ce03a1e4f2')
+source=("git+https://github.com/mpv-player/mpv.git#tag=v${pkgver}?signed"
+        'fix_wayland_clipboard_high_cpu_usage.patch')
+sha256sums=('754d045dba7143b51dd6eb2d32ab3a9a483e6a337e685b581a876bc2e20eddf1'
+            '610227f044853fe88888d2317ead0e29c84ccffbdb7f712c3671187778b5b60e')
+
+prepare() {
+  cd "${pkgname}"
+
+  patch -Np1 -i "${srcdir}/fix_wayland_clipboard_high_cpu_usage.patch"
+
+  git cherry-pick -n 26b29fba02a2782f68e2906f837d21201fc6f1b9
+}
 
 build() {
   local _meson_options=(
@@ -36,12 +46,13 @@
     -Ddvdnav=enabled
     -Dlibarchive=enabled
     -Dopenal=enabled
+    -Dsdl2=enabled
     -Dsdl2-audio=enabled
     -Dsdl2-video=enabled
     -Dsdl2-gamepad=enabled
   )
 
-  arch-meson "${pkgname}" build "${_meson_options[@]}"
+  artix-meson "${pkgname}" build "${_meson_options[@]}"
 
   meson compile -C build
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,3 +1,8 @@
+prepare() {
+cd "${pkgname}"
+patch -Np1 -i "${srcdir}/fix_wayland_clipboard_high_cpu_usage.patch"
+git cherry-pick -n 26b29fba02a2782f68e2906f837d21201fc6f1b9
+}
 build() {
 local _meson_options=(
 --auto-features auto
@@ -10,10 +15,11 @@
 -Ddvdnav=enabled
 -Dlibarchive=enabled
 -Dopenal=enabled
+-Dsdl2=enabled
 -Dsdl2-audio=enabled
 -Dsdl2-video=enabled
 -Dsdl2-gamepad=enabled
 )
-arch-meson "${pkgname}" build "${_meson_options[@]}"
+artix-meson "${pkgname}" build "${_meson_options[@]}"
 meson compile -C build
 }
