--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,31 +1,39 @@
 
 pkgname=python-pytest-mock
-pkgver=3.13.0
+pkgver=3.12.0
+_commit=69adc6f76c1a7baf4e7a728da9eec38741d5783e
 pkgrel=1
 pkgdesc="Thin-wrapper around the mock package for easier use with py.test"
 arch=('any')
 license=('LGPL3')
 url="https://github.com/pytest-dev/pytest-mock/"
 depends=('python-pytest')
-makedepends=('git' 'python-build' 'python-installer' 'python-setuptools' 'python-wheel'
-             'python-setuptools-scm')
+makedepends=('git' 'python-setuptools-scm')
 checkdepends=('python-pytest-asyncio')
-source=("git+https://github.com/pytest-dev/pytest-mock.git#tag=v$pkgver")
-sha512sums=('72845078a72a8446094fad84b7da69b3ff2ebc6ba1c39210943e4deeb7dc05e0ef9680875a2b991c08fe1d892ab011c9a67f585d1446bdb7fd23dc3ddde09323')
+source=("git+https://github.com/pytest-dev/pytest-mock.git#commit=$_commit")
+sha512sums=('SKIP')
 
 build() {
   cd pytest-mock
-  python -m build -nw
+  python setup.py build
 }
 
 check() {
   cd pytest-mock
-  python -m venv tmpenv --system-site-packages
-  tmpenv/bin/python -m installer dist/*.whl
-  tmpenv/bin/python -m pytest
+  python setup.py egg_info
+  export PYTHONPATH="src:${PYTHONPATH}"
+  pytest -v --assert=plain \
+    -k "not test_used_with_session_scope \
+        and not test_used_with_package_scope \
+        and not test_used_with_module_scope \
+        and not test_used_with_class_scope \
+        and not test_monkeypatch_ini \
+        and not test_monkeypatch_native \
+        and not test_standalone_mock \
+        and not test_plain_stopall"
 }
 
 package() {
   cd pytest-mock
-  python -m installer -d "$pkgdir" dist/*.whl
+  python setup.py install --root="$pkgdir" --optimize=1
 }


############# Stripped diff below #################

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,5 +2,5 @@
 depends=('python-pytest')
 build() {
 cd pytest-mock
-python -m build -nw
+python setup.py build
 }
