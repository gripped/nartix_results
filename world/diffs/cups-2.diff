--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,14 +1,14 @@
 
 pkgbase="cups"
 pkgname=('libcups' 'cups')
-pkgver=2.4.9
-pkgrel=1
+pkgver=2.4.8
+pkgrel=2
 epoch=2
 arch=('x86_64')
 license=('Apache-2.0 WITH LLVM-exception AND BSD-3-Clause AND Zlib AND BSD-2-Clause')
 url="https://openprinting.github.io/cups/"
 makedepends=('acl' 'pam' 'gnutls' 'cups-filters' 'colord'
-             'libusb' 'avahi'  'systemd' 'libpaper')
+             'libusb' 'avahi' 'libpaper')
 source=(https://github.com/OpenPrinting/cups/releases/download/v${pkgver}/cups-${pkgver}-source.tar.gz{,.sig}
         cups.logrotate
         cups.pam
@@ -16,15 +16,17 @@
         cups-2.4.0-statedir.patch
         cups-freebind.patch
         guid.patch
+        0001-Fix-HTTP-query-in-web-interface-fixes-954.patch
 )
-sha256sums=('38fbf4535a10554113e013d54fedda03ee88007ea6a9761d626a04e1e4489e8c'
+sha256sums=('75c326b4ba73975efcc9a25078c4b04cdb4ee333caaad0d0823dbd522c6479a0'
             'SKIP'
             'd87fa0f0b5ec677aae34668f260333db17ce303aa1a752cba5f8e72623d9acf9'
             '57dfd072fd7ef0018c6b0a798367aac1abb5979060ff3f9df22d1048bb71c0d5'
             '06173dfaea37bdd9b39b3e09aba98c34ae7112a2f521db45a688907d8848caa2'
             'f0b15192952c151b1843742c87850ff3a7d0f3ba5dd236ed16623ef908472ad7'
             '3385047b9ac8a7b13aeb8f0ca55d15f793ce7283516db0155fe28a67923c592d'
-            '1b1c3268bdff6627b78070b6cd9abec6ef41572c27abbafccb237199f7137653')
+            '1b1c3268bdff6627b78070b6cd9abec6ef41572c27abbafccb237199f7137653'
+            '2fb4bf61c2c9322d4f3595553d2aa637fee375cc93383922494fd7f76f013e84')
 validpgpkeys=('7082A0A50A2E92640F3880E0E4522DCC9B246FF7') # Zdenek Dohnal (The old 4D4227D7 key revoked) <zdohnal@redhat.com>
 
 prepare() {
@@ -36,6 +38,8 @@
   patch -Np1 -i "${srcdir}"/cups-freebind.patch
 
   patch -Np1 -i "${srcdir}"/guid.patch
+
+  patch -Np1 -i "${srcdir}"/0001-Fix-HTTP-query-in-web-interface-fixes-954.patch
 
   aclocal -I config-scripts
   autoconf -I config-scripts
@@ -64,6 +68,7 @@
      --with-dbusdir=/usr/share/dbus-1 \
      --enable-relro \
      --enable-libpaper \
+     --disable-systemd \
      --with-optim="$CFLAGS" #--help
   make
 }
@@ -93,7 +98,7 @@
         etc/logrotate.d/cups
         etc/pam.d/cups)
 depends=('acl' 'pam' "libcups>=${pkgver}" 'cups-filters'
-         'dbus' 'systemd' 'systemd-libs' 'libpaper' 'hicolor-icon-theme'
+         'dbus' 'libudev' 'libpaper' 'hicolor-icon-theme'
          'glibc' 'gcc-libs' 'avahi' 'gnutls')
 optdepends=('cups-browsed: to browse the network for remote CUPS queues and IPP network printers'
             'libusb: for usb printer backend'


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -9,9 +9,8 @@
 hicolor-icon-theme
 libcups>
 libpaper
+libudev
 libusb
 pam
 sh
-systemd
-systemd-libs
 zlib