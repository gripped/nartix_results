--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,19 +1,19 @@
 
 pkgname=bpf-linker
-pkgver=0.10.0
+pkgver=0.9.15
 pkgrel=1
 pkgdesc="Simple BPF static linker"
 arch=('x86_64')
 url="https://github.com/aya-rs/bpf-linker"
 license=('Apache-2.0' 'MIT')
-depends=('glibc' 'gcc-libs' 'llvm-libs' 'clang')
+depends=('glibc' 'gcc-libs' 'llvm-libs')
 makedepends=('cargo' 'llvm')
 source=("$pkgname-$pkgver.tar.gz::https://github.com/aya-rs/$pkgname/archive/refs/tags/v$pkgver.tar.gz")
-sha256sums=('b803fec30431aeb3b4e9866e0bf8eb283a77966cbe155a275075825c8ad227d0')
+sha256sums=('90e53daa07e0f047a0ef91042a69417d0b0fa961ce9a6afe1d8fbf9f0f048fc1')
 
 prepare() {
   cd "$pkgname-$pkgver"
-  cargo fetch --locked --target "$(rustc --print host-tuple)"
+  cargo fetch --locked --target "$(rustc -vV | sed -n 's/host: //p')"
 }
 
 build() {
@@ -25,7 +25,7 @@
   cd "$pkgname-$pkgver"
 
   CARGO_MANIFEST_DIR="$PWD" cargo test --frozen \
-    -- --skip compile_test --skip test_link_ir_files
+    -- --skip compile_test
 }
 
 package() {


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,5 +1,4 @@
 cargo
-clang
 gcc-libs
 glibc
 llvm

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 prepare() {
 cd "$pkgname-$pkgver"
-cargo fetch --locked --target "$(rustc --print host-tuple)"
+cargo fetch --locked --target "$(rustc -vV | sed -n 's/host: //p')"
 }
 build() {
 cd "$pkgname-$pkgver"
