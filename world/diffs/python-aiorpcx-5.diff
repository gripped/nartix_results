--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,42 +1,24 @@
 
-pkgname=python-aiorpcx
-_pkgname=aiorpcX
-pkgver=0.23.1
-pkgrel=1
-pkgdesc="A generic asyncio library implementation of RPC suitable for an application that is a client, server or both"
-url="https://github.com/kyuupichan/aiorpcX"
+pkgname='python-aiorpcx'
+pkgver=0.22.1
+pkgrel=3
+pkgdesc="A generic asyncio library implementation of RPC suitable for an application that is a client, server or both."
+url="https://github.com/kyuupichan/aiorpcX/"
 arch=('any')
 license=('MIT')
-depends=('python')
-makedepends=(
-  'python-build'
-  'python-installer'
-  'python-setuptools'
-  'python-wheel'
-)
-checkdepends=(
-  'python-pytest'
-  'python-pytest-asyncio'
-  'python-websockets'
-)
-optdepends=('python-websockets: websocket transport')
-source=("$pkgname-$pkgver.tar.gz::$url/archive/$pkgver.tar.gz")
-sha256sums=('b1fe646457bdf3274fdb8894ce38704ca3ecc6613994bd8ff4e105e2ebb214c6')
+depends=('python>=3.6' 'python-attrs')
+makedepends=('python-setuptools' 'python-websockets')
+source=("https://github.com/kyuupichan/aiorpcX/archive/${pkgver}.tar.gz")
+sha256sums=('f72034c4854daf32d83c06ca940d39336908d55ad6a2fe17c039124d51b89430')
+
 
 build() {
-  cd "$_pkgname-$pkgver"
-  python -m build --wheel --no-isolation
-}
-
-check() {
-  cd "$_pkgname-$pkgver"
-  python -m installer --destdir=tmp_install dist/*.whl
-  local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
-  PYTHONPATH="$PWD/tmp_install/$site_packages" pytest
+  cd "${srcdir}/aiorpcX-${pkgver}"
+  python setup.py build
 }
 
 package() {
-  cd "$_pkgname-$pkgver"
-  python -m installer --destdir="$pkgdir" dist/*.whl
-  install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENCE
+  cd "${srcdir}/aiorpcX-${pkgver}"
+  python setup.py install --root="$pkgdir/" --optimize=1 --skip-build
+  install -D -m644 LICENCE -t "${pkgdir}/usr/share/licenses/${pkgname}"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,5 +1,4 @@
-python
-python-build
-python-installer
+python-attrs
 python-setuptools
-python-wheel
+python-websockets
+python>

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-cd "$_pkgname-$pkgver"
-python -m build --wheel --no-isolation
+cd "${srcdir}/aiorpcX-${pkgver}"
+python setup.py build
 }
