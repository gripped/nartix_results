--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -9,7 +9,7 @@
 )
 epoch=1
 pkgver=1.79.0
-pkgrel=3
+pkgrel=1
 pkgdesc="Systems programming language focused on safety, speed and concurrency"
 url=https://www.rust-lang.org/
 arch=(x86_64)
@@ -77,8 +77,7 @@
   patch -Np1 -i ../0004-compiler-Use-wasm-ld-for-wasm-targets.patch
 
   cat >config.toml <<END
-profile = "dist"
-
+profile = "user"
 change-id = 123711
 
 [llvm]
@@ -91,9 +90,6 @@
   "x86_64-unknown-linux-musl",
   "wasm32-unknown-unknown",
   "wasm32-wasi",
-  "wasm32-wasip1",
-  "wasm32-wasip1-threads",
-  "wasm32-wasip2",
 ]
 cargo = "/usr/bin/cargo"
 rustc = "/usr/bin/rustc"
@@ -159,28 +155,13 @@
 sanitizers = false
 profiler = false
 wasi-root = "/usr/share/wasi-sysroot"
-
-[target.wasm32-wasip1]
-sanitizers = false
-profiler = false
-wasi-root = "/usr/share/wasi-sysroot"
-
-[target.wasm32-wasip1-threads]
-sanitizers = false
-profiler = false
-wasi-root = "/usr/share/wasi-sysroot"
-
-[target.wasm32-wasip2]
-sanitizers = false
-profiler = false
-wasi-root = "/usr/share/wasi-sysroot"
 END
 }
 
 _pick() {
   local p="$1" f d; shift
   for f; do
-    d="$srcdir/$p/${f#$pkgdir/}"
+    d="$srcdir/$p/$f"
     mkdir -p "$(dirname "$d")"
     mv "$f" "$d"
     rmdir -p --ignore-fail-on-non-empty "$(dirname "$f")"


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -5,7 +5,7 @@
 patch -Np1 -i ../0003-compiler-Change-LLVM-targets.patch
 patch -Np1 -i ../0004-compiler-Use-wasm-ld-for-wasm-targets.patch
 cat >config.toml <<END
-profile = "dist"
+profile = "user"
 change-id = 123711
 [llvm]
 link-shared = true
@@ -16,9 +16,6 @@
 "x86_64-unknown-linux-musl",
 "wasm32-unknown-unknown",
 "wasm32-wasi",
-"wasm32-wasip1",
-"wasm32-wasip1-threads",
-"wasm32-wasip2",
 ]
 cargo = "/usr/bin/cargo"
 rustc = "/usr/bin/rustc"
@@ -75,18 +72,6 @@
 sanitizers = false
 profiler = false
 wasi-root = "/usr/share/wasi-sysroot"
-[target.wasm32-wasip1]
-sanitizers = false
-profiler = false
-wasi-root = "/usr/share/wasi-sysroot"
-[target.wasm32-wasip1-threads]
-sanitizers = false
-profiler = false
-wasi-root = "/usr/share/wasi-sysroot"
-[target.wasm32-wasip2]
-sanitizers = false
-profiler = false
-wasi-root = "/usr/share/wasi-sysroot"
 END
 }
 build() {
