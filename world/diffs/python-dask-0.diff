--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,12 +1,12 @@
 
 _pkg=dask
 pkgname=python-${_pkg}
-pkgver=2024.8.2
-pkgrel=1
+pkgver=2024.4.1
+pkgrel=2
 pkgdesc="Parallel computing with task scheduling"
 arch=(any)
 url="https://dask.org"
-license=(BSD-3-Clause)
+license=(BSD)
 depends=(
     mpdecimal
     python
@@ -66,17 +66,17 @@
     python-sqlalchemy
     python-xarray
     python-xxhash
-    python-dask-expr
 )
 source=(https://github.com/dask/dask/archive/${pkgver}/${pkgname}-${pkgver}.tar.gz
         test-pandas-2.0)
-sha256sums=('f2f60428db21b100db7b88ddea0ee1a5b4b261d9a8cd63a2292550f5231ad65a'
+sha256sums=('66dbfb2c0d8e7a6ccc5df669215efe99eaa3283878577311daf3736335fb8586'
             '9ddb45fefbfb1aaa3af20a6a2c6d4fcb20da5b3761e70313c92ae4f4f86634a2')
 
 prepare() {
   cd ${_pkg}-${pkgver}
   sed -e 's|versioneer\[toml\].*\"|versioneer[toml]\"|g' -i pyproject.toml
 
+  patch -p1 -i ../test-pandas-2.0 # Fix test with pandas 2.0 (Fedora)
 }
 
 build() {
@@ -89,8 +89,6 @@
   local pytest_options=(
     -vv
     --deselect dask/dataframe/io/tests/test_sql.py::test_division_or_partition
-    --deselect dask/tests/test_base.py::test_visualize_order
-    --deselect dask/tests/test_tokenize.py::test_tokenize_dataclass
     -k 'not test_RandomState_only_funcs'
     -W ignore::DeprecationWarning
   ) # https://github.com/dask/dask/issues/10418


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,7 @@
 prepare() {
 cd ${_pkg}-${pkgver}
 sed -e 's|versioneer\[toml\].*\"|versioneer[toml]\"|g' -i pyproject.toml
+patch -p1 -i ../test-pandas-2.0 # Fix test with pandas 2.0 (Fedora)
 }
 build() {
 cd ${_pkg}-${pkgver}
