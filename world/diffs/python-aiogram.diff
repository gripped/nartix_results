--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,15 +1,15 @@
 
 pkgname=python-aiogram
 pkgver=2.22.2
-pkgrel=3
+pkgrel=2
 pkgdesc="A pretty simple and fully asynchronous library for Telegram Bot API written with asyncio and aiohttp"
 arch=('any')
 url="https://github.com/aiogram/aiogram"
 license=('MIT')
 depends=('python-aiohttp' 'python-babel' 'python-certifi')
-makedepends=('python-setuptools' 'python-build' 'python-installer' 'python-wheel')
+makedepends=('python-setuptools')
 checkdepends=('python-aiohttp-socks' 'python-redis' 'python-aresponses' 'python-pytest'
-              'pifpaf' 'redis')
+              'python-pytest-lazy-fixture' 'pifpaf' 'redis')
 optdepends=('python-uvloop: fast, drop-in replacement of the built-in asyncio event loop'
             'python-ujson: ultra fast JSON encoder and decoder written in pure C'
             'python-rapidjson: extremely fast C++ JSON parser and serialization library'
@@ -20,7 +20,7 @@
 source=("https://github.com/aiogram/aiogram/archive/v$pkgver/$pkgname-$pkgver.tar.gz"
         $pkgname-replace-aioredis.patch::https://github.com/aiogram/aiogram/pull/1074.patch)
 sha512sums=('7cbc979acba4904e503c801c4a823f802a3daf048bc5433e7cf9cb101e6a77f69955f363a73c5559901fa2b674f5092ec8c6336977807feac087581ef35fe5e0'
-            '3678f55b8d14cabcaebc8375168992fa55f0f6433c73d9bf98b0fd696120853a4df74cd3867bd866aff5bf0cdf088588aac24d37c90b2d70ce1b39b76c846b4d')
+            '28eb2d80dd5f530c76c49acd46f583563c8facdeea620ee697b45defc53a2b1e52ef48da5c6543b4619c30e5e083e398906afa091414006c2311e40e7cb2e929')
 
 prepare() {
   cd aiogram-$pkgver
@@ -34,7 +34,7 @@
 
 build() {
   cd aiogram-$pkgver
-  python -m build --wheel --no-isolation
+  python setup.py build
 }
 
 check() {
@@ -44,7 +44,7 @@
 
 package() {
   cd aiogram-$pkgver
-  python -m installer --destdir="$pkgdir" dist/*.whl
+  python setup.py install --root="$pkgdir" --optimize=1 --skip-build
 
   install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname/
   install -Dm644 README.md -t "$pkgdir"/usr/share/doc/$pkgname/


############# Stripped diff below #################

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -13,5 +13,5 @@
 }
 build() {
 cd aiogram-$pkgver
-python -m build --wheel --no-isolation
+python setup.py build
 }
