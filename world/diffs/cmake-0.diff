--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 
 pkgname=cmake
-pkgver=4.0.0
+pkgver=3.31.6
 pkgrel=1
 pkgdesc='A cross-platform open-source make system'
 arch=('x86_64')
@@ -28,9 +28,15 @@
   'ninja: for ninja generator'
   'qt6-base: cmake-gui'
 )
-source=(git+https://gitlab.kitware.com/cmake/cmake.git#tag=v$pkgver?signed)
-sha512sums=('3708b8357a404bc94f3054d641cbf8af50c73ecf436d4d08f45cdefadbbb597a286ee682308085908cf626ff270d4fa31b6f37968b2cb16d2da8d77e9e7e3c97')
+source=(git+https://gitlab.kitware.com/cmake/cmake.git#tag=v$pkgver?signed
+        artix-cmake.patch)
+sha512sums=('c478e688b909e689c5b5ffb2269c8d4c86029f6b0947491c6ed527b00ba93ff21f1840107a97a336b05ba48369b85a3c1f7055cbde1b372eea3669879da3c2a4'
+            'b9dc162136cb3038c63ae2235c665167ac6f7770927fe6c2bf4a4a86b0a995efa1d42e80bee762c77bc690115060b635ea5028a4b3ce4428d24ea851e94b34f6')
 validpgpkeys=(CBA23971357C2E6590D9EFD3EC8FEF3A7BFB4EDA) # Brad King <brad.king@kitware.com>
+
+prepare() {
+  git -C "${pkgname}" apply ../artix-cmake.patch
+}
 
 build() {
   cd ${pkgname}
@@ -52,5 +58,5 @@
 
   rm -r "$pkgdir"/usr/share/doc/cmake/html/_sources
   emacs -batch -f batch-byte-compile "${pkgdir}"/usr/share/emacs/site-lisp/cmake-mode.el
-  install -Dm644 LICENSE.rst -t "${pkgdir}"/usr/share/licenses/$pkgname
+  install -Dm644 Copyright.txt "${pkgdir}"/usr/share/licenses/${pkgname}/LICENSE
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,3 +1,6 @@
+prepare() {
+git -C "${pkgname}" apply ../artix-cmake.patch
+}
 build() {
 cd ${pkgname}
 ./bootstrap --prefix=/usr \
