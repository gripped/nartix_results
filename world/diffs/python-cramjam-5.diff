--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,52 +1,35 @@
 
-pkgname=python-cramjam
-_pkgname=${pkgname#python-}
+_pyname=cramjam
+pkgname=python-$_pyname
 pkgver=2.8.3
-pkgrel=3
-pkgdesc="Thin Python bindings to de/compression algorithms in Rust"
+pkgrel=2
+pkgdesc='Thin Python bindings to de/compression algorithms in Rust'
 arch=(x86_64)
-url="https://github.com/milesgranger/cramjam"
+url='https://github.com/milesgranger/pyrus-cramjam'
 license=(MIT)
-depends=(
-  bzip2
-  gcc-libs
-  glibc
-  python
-)
-makedepends=(
-  python-build
-  python-installer
-  python-maturin
-  python-wheel
-)
-checkdepends=(
-  python-hypothesis
-  python-numpy
-  python-pytest
-)
+depends=(python)
+checkdepends=(python-hypothesis python-pytest python-numpy)
+makedepends=(python-installer maturin rust patchelf)
+source=(https://files.pythonhosted.org/packages/source/${_pyname::1}/$_pyname/$_pyname-$pkgver.tar.gz)
+sha256sums=('6b1fa0a6ea8183831d04572597c182bd6cece62d583a36cde1e6a86e72ce2389')
 options=(!lto)
-source=("$pkgname-$pkgver.tar.gz::$url/archive/v$pkgver.tar.gz")
-sha256sums=('54c5d19876f63bc0955f919d9479145ca9f142f48a18db0cd560e590a6eca01a')
 
-build() {
-  cd "$_pkgname-$pkgver/cramjam-python"
-
-  export RUSTUP_TOOLCHAIN=stable
-  python -m build --wheel --no-isolation
+build(){
+  cd $_pyname-$pkgver
+  maturin build --release --strip --interpreter python
 }
 
 check() {
-  cd "$_pkgname-$pkgver/cramjam-python"
+  local _site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
 
-  local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
-  python -m installer --destdir=tmp_install dist/*.whl
-  PYTHONPATH="$PWD/tmp_install/$site_packages" pytest \
-    --ignore=benchmarks/
+  cd $_pyname-$pkgver
+  python -m installer --destdir=test_dir target/wheels/*.whl
+  export PYTHONPATH="test_dir/$_site_packages:$PYTHONPATH"
+  pytest -v "${_pyname}-python/tests"
 }
 
-package() {
-  cd "$_pkgname-$pkgver"
-
-  python -m installer --destdir="$pkgdir" cramjam-python/dist/*.whl
-  install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE
+package(){
+  cd $_pyname-$pkgver
+  python -m installer --destdir="$pkgdir" target/wheels/*.whl
+  install -vDm 644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,8 +1,5 @@
-bzip2
-gcc-libs
-glibc
+maturin
+patchelf
 python
-python-build
 python-installer
-python-maturin
-python-wheel
+rust

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,4 @@
-build() {
-cd "$_pkgname-$pkgver/cramjam-python"
-export RUSTUP_TOOLCHAIN=stable
-python -m build --wheel --no-isolation
+build(){
+cd $_pyname-$pkgver
+maturin build --release --strip --interpreter python
 }
