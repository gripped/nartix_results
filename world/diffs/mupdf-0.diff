--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgbase=mupdf
 pkgname=('libmupdf' 'mupdf' 'mupdf-gl' 'mupdf-tools' 'python-mupdf')
-pkgver=1.27.0
+pkgver=1.26.11
 pkgrel=1
 pkgdesc="Lightweight PDF and XPS viewer"
 url="https://mupdf.com"
@@ -18,8 +18,9 @@
         "${pkgbase}.xpm"
         "${pkgbase}.pc"
         "${pkgbase}-1.23.9-cpp_ldflags.patch"
-        "${pkgbase}-1.23.9-install_targets.patch")
-sha256sums=('1e8fc3ee3ced726660b4ac0c7ebae1dd40fb7cfbc7b6b5dec6f5cd70640ec5d0'
+        "${pkgbase}-1.23.9-install_targets.patch"
+        "fix_build_with_clang21.patch")
+sha256sums=('c42b60bafed40105f36db97ffe6e4b9d638b5e1c287e25aeca0eff8ee24f4628'
             'SKIP'
             'SKIP'
             'SKIP'
@@ -27,7 +28,8 @@
             'a435f44425f5432c074dee745d8fbaeb879038ec1f1ec64f037c74662f09aca8'
             'bb797ac84edc9856fa828f87e9be684714b7ab2c8bca3372a81fbfa0da018ac4'
             '782745085168ebb7f06bf6330ff49897dbeae7d20a9e242fe98bf434f7eb82f0'
-            '16a193a735e44fefca7d7fbea97823840cfead6b9123898e7ee486c7e08f1528')
+            '16a193a735e44fefca7d7fbea97823840cfead6b9123898e7ee486c7e08f1528'
+            'a66d2a9d7a8aa7b9232f490b3663ec5b3157d748842c20cd475163ffb7a192d5')
 
 prepare() {
 	sed -e "s/VERSION/${pkgver}/" -i "${pkgbase}.pc"
@@ -35,6 +37,7 @@
 	cd "${pkgbase}"
 	patch -Np1 -i "${srcdir}/${pkgbase}-1.23.9-cpp_ldflags.patch"
 	patch -Np1 -i "${srcdir}/${pkgbase}-1.23.9-install_targets.patch"
+	patch -Np1 -i "${srcdir}/fix_build_with_clang21.patch"
 
 	git submodule init
 	rm -rvf thirdparty/{brotli,curl,freeglut,freetype,gumbo-parser,harfbuzz,jbig2dec,leptonica,libjpeg,openjpeg,tesseract,zint,zlib,zxing-cpp}


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,6 +3,7 @@
 cd "${pkgbase}"
 patch -Np1 -i "${srcdir}/${pkgbase}-1.23.9-cpp_ldflags.patch"
 patch -Np1 -i "${srcdir}/${pkgbase}-1.23.9-install_targets.patch"
+patch -Np1 -i "${srcdir}/fix_build_with_clang21.patch"
 git submodule init
 rm -rvf thirdparty/{brotli,curl,freeglut,freetype,gumbo-parser,harfbuzz,jbig2dec,leptonica,libjpeg,openjpeg,tesseract,zint,zlib,zxing-cpp}
 git submodule deinit thirdparty/brotli
