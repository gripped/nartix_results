--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,60 +1,51 @@
 
 pkgname=python-cfn-lint
-pkgver=1.34.2
+pkgver=1.33.2
 pkgrel=1
 pkgdesc='CloudFormation Linter'
 arch=(any)
 url='https://github.com/aws-cloudformation/cfn-lint'
 license=('MIT-0')
-depends=(
-  python
-  python-aws-sam-translator
-  python-jsonpatch
-  python-jsonpointer
-  python-networkx
-  python-regex
-  python-sympy
-  python-typing_extensions
-  python-yaml
-)
-makedepends=(
-  git
-  python-build
-  python-installer
-  python-setuptools
-  python-wheel
-)
-checkdepends=(
-  python-defusedxml
-  python-jschema-to-python
-  python-junit-xml
-  python-pydot
-  python-pytest
-  python-sarif-om
-)
+depends=(python python-yaml python-aws-sam-translator
+         python-jsonpatch python-networkx
+         python-sympy python-regex
+         python-typing_extensions
+         python-jsonpointer)
+makedepends=(git python-build python-installer python-setuptools python-wheel)
+checkdepends=(python-pytest python-defusedxml
+              python-pydot python-junit-xml python-jschema-to-python python-sarif-om)
 optdepends=(
   'python-pydot: for building graphs from templates'
   'python-junit-xml: for junit formatter'
   'python-jschema-to-python: for sarif formatter'
   'python-sarif-om: for sarif formatter'
 )
-source=("git+$url.git#tag=v$pkgver")
-sha256sums=('2e656170d403666458903ba544c31669fbe00a840606d62bbf929dad1a4bdfa9')
+source=("git+https://github.com/aws-cloudformation/cfn-lint.git#tag=v$pkgver")
+sha256sums=('95497b4b7c1ad8e52e15c4195b8fec26788da042b069f92f0c2732bc53a54e90')
+
+prepare() {
+  cd cfn-lint
+  git revert -n dc591808548fcc586668687225342bd5fb68dbd3
+}
 
 build() {
-  cd ${pkgname#python-}
+  cd cfn-lint
   python -m build --wheel --no-isolation
 }
 
 check() {
-  cd ${pkgname#python-}
-  python -m venv --system-site-packages test-env
-  test-env/bin/python -m installer dist/*.whl
-  PATH=$PWD/test-env/bin:$PATH test-env/bin/python -m pytest
+  cd cfn-lint
+
+  python -m installer --destdir="$PWD/tmp_install" dist/*.whl
+
+  export PYTHONPATH="$PWD/src"
+  export PATH="$PATH:$PWD/tmp_install/usr/bin"
+  pytest
 }
 
 package() {
-  cd ${pkgname#python-}
+  cd cfn-lint
   python -m installer --destdir="$pkgdir" dist/*.whl
-  install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE
+
+  install -Dm644 LICENSE -t "$pkgdir"/usr/share/licenses/$pkgname
 }


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,8 @@
+prepare() {
+cd cfn-lint
+git revert -n dc591808548fcc586668687225342bd5fb68dbd3
+}
 build() {
-cd ${pkgname#python-}
+cd cfn-lint
 python -m build --wheel --no-isolation
 }
