--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=sddm
 pkgver=0.21.0
-pkgrel=5
+pkgrel=4.10
 pkgdesc='QML based X11 and Wayland display manager'
 arch=(x86_64)
 url='https://github.com/sddm/sddm'
@@ -9,12 +9,12 @@
 depends=(bash
          gcc-libs
          glibc
+         libelogind
          libxau
          libxcb
          pam
          qt6-base
          qt6-declarative
-         systemd-libs
          ttf-font
          xorg-server
          xorg-xauth)
@@ -32,13 +32,10 @@
         'etc/pam.d/sddm-greeter')
 provides=(display-manager)
 source=(https://github.com/$pkgname/$pkgname/archive/v$pkgver/$pkgname-$pkgver.tar.gz
-        sysusers-fully-locked.patch)
+        sddm.{tmpfiles,sysusers})
 sha256sums=('f895de2683627e969e4849dbfbbb2b500787481ca5ba0de6d6dfdae5f1549abf'
-            '810a645fcd966c21f5dce28230a6e6924bd6f4835158718f7f3fbab867a0278a')
-
-prepare() {
-  patch -d $pkgname-$pkgver -p1 < sysusers-fully-locked.patch
-}
+            'db625f2a3649d6d203e1e1b187a054d5c6263cadf7edd824774d8ace52219677'
+            '9fce66f325d170c61caed57816f4bc72e9591df083e89da114a3bb16b0a0e60f')
 
 build() {
   cmake -B build -S $pkgname-$pkgver \
@@ -48,6 +45,8 @@
         -DDBUS_CONFIG_DIR=/usr/share/dbus-1/system.d \
         -DDBUS_CONFIG_FILENAME=sddm_org.freedesktop.DisplayManager.conf \
         -DBUILD_MAN_PAGES=ON \
+        -DUSE_ELOGIND=yes \
+        -DNO_SYSTEMD=yes \
         -DUID_MAX=60513
   cmake --build build
 
@@ -64,6 +63,11 @@
 
   install -d "$pkgdir"/usr/lib/sddm/sddm.conf.d
   "$pkgdir"/usr/bin/sddm --example-config > "$pkgdir"/usr/lib/sddm/sddm.conf.d/default.conf
+
   sed -r 's|DefaultPath=.*|DefaultPath=/usr/local/sbin:/usr/local/bin:/usr/bin|g' -i "$pkgdir"/usr/lib/sddm/sddm.conf.d/default.conf
+
   sed -e "/^InputMethod/s/qtvirtualkeyboard//" -i "$pkgdir"/usr/lib/sddm/sddm.conf.d/default.conf
+
+  install -Dm644 sddm.sysusers "$pkgdir"/usr/lib/sysusers.d/sddm.conf
+  install -Dm644 sddm.tmpfiles "$pkgdir"/usr/lib/tmpfiles.d/sddm.conf
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -2,6 +2,7 @@
 extra-cmake-modules
 gcc-libs
 glibc
+libelogind
 libxau
 libxcb
 pam
@@ -12,7 +13,6 @@
 qt6-base
 qt6-declarative
 qt6-tools
-systemd-libs
 ttf-font
 xorg-server
 xorg-xauth