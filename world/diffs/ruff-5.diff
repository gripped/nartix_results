--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,11 +1,11 @@
 
 pkgbase=ruff
-pkgname=("$pkgbase" "python-$pkgbase")
-pkgver=0.5.4
+pkgname=($pkgbase python-$pkgbase)
+pkgver=0.5.1
 pkgrel=1
 pkgdesc='An extremely fast Python linter, written in Rust'
 arch=(x86_64)
-url=https://github.com/astral-sh/$pkgbase
+url="https://github.com/astral-sh/$pkgbase"
 license=(MIT)
 depends=(
   gcc-libs
@@ -13,27 +13,27 @@
 )
 makedepends=(
   cargo
-  git
   maturin
   python-installer
 )
 options=(!lto)
-source=("git+$url.git#tag=$pkgver")
-sha512sums=('8cd9f6e385f8f7c09c452b27bf69027857d816d2a3ffff0527bb28e4b36ae34db5aa9ec8f9b1daec24c58d2d6a2afe1353d754f992edb9282e0899abfd69979e')
-b2sums=('dda0ce190d331d8352b701502d6baae2547f624534fefd329620a0270e1be1962c3b385869d06d97996726eccd90bf1dd60971734ad755b495cdba022b512372')
+_archive="$pkgbase-$pkgver"
+source=($url/archive/refs/tags/$pkgver/$_archive.tar.gz)
+sha512sums=('6e88f5f1f36e339727dd8b37b5f771f3f22bf663e772695fb1d5a942f95b3e455ad754695af3e25ad3fc015207fe9966bd7598ccafb49f264a5d0fc6ea5205a2')
+b2sums=('585e3bb683512747b2341e6ef455b8b506ba6f55cc2e1b7574010e560da43a426a263eb2a7e7a9462a1ad1ed3481cb4ff640361c724a494a311185fa31750652')
 
 prepare() {
-  cd $pkgbase
+  cd "$_archive"
   cargo fetch --locked --target "$(rustc -vV | sed -n 's/host: //p')"
 }
 
 build() {
-  cd $pkgbase
+  cd "$_archive"
   maturin build --locked --release --all-features --target "$(rustc -vV | sed -n 's/host: //p')" --strip
 }
 
 check() {
-  cd $pkgbase
+  cd "$_archive"
   cargo test -p ruff --frozen --all-features -- --skip display_default_settings
 }
 
@@ -43,7 +43,7 @@
 }
 
 package_ruff() {
-  cd $pkgbase
+  cd "$_archive"
   _package_common
   local _target="target/$(rustc -vV | sed -n 's/host: //p')/release/ruff"
   install -Dm0755 -t "$pkgdir/usr/bin/" "$_target"
@@ -54,12 +54,9 @@
 }
 
 package_python-ruff() {
+  cd "$_archive"
+  _package_common
   depends=(python "$pkgbase")
-
-  cd $pkgbase
-  _package_common
   python -m installer -d "$pkgdir" target/wheels/*.whl
-
-  cd "$pkgdir"
-  rm -rf usr/bin
+  rm -rf "$pkgdir/usr/bin"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,6 +1,5 @@
 cargo
 gcc-libs
-git
 glibc
 maturin
 python

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 prepare() {
-cd $pkgbase
+cd "$_archive"
 cargo fetch --locked --target "$(rustc -vV | sed -n 's/host: //p')"
 }
 build() {
-cd $pkgbase
+cd "$_archive"
 maturin build --locked --release --all-features --target "$(rustc -vV | sed -n 's/host: //p')" --strip
 }
