--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgbase=samba
 pkgname=('libwbclient' 'ldb' 'smbclient' 'samba')
-pkgver=4.22.0
+pkgver=4.21.4
 pkgrel=1
 arch=(x86_64)
 url="https://www.samba.org"
@@ -32,7 +32,7 @@
   python-markdown
   readline
   rpcsvc-proto
-  systemd
+
   talloc
   tdb
   tevent
@@ -50,7 +50,7 @@
   samba.conf
 )
 validpgpkeys=('81F5E2832BD2545A1897B713AA99442FB680B620') #Samba Distribution Verification Key <samba-bugs@samba.org>
-b2sums=('27997ad025cbdc246c906bb05bf1c67749decc8e760c68cd4837b5121295613824b11f0eea91de6e7cb551ccc5193d189d5742dc7096305565ca8794baa7b585'
+b2sums=('37c3b924799369dfe7a9ac208d3e470d4c41c45eb725f973e6948c3581523abe5fe768ea0a82e38c5a1cf5ad238896ddfd1783a1adebc9fa6d42fbb6769e9bdb'
         'SKIP'
         '72ecb413ca3499af984a0bb391f96e678a24a19d8e5c96050ba227878f0770f03466ac7a0ee328416e08204e92e9d16ec22d63ef25b53c20d957a17221cd3a98'
         '3eab84d332d96678fe6e435ee243c8f1a82b838f601d61d3604d11e918aed7a62202edca5e476c4b9031ed284570e6fcd6c659cfdbd9624aa0019d3233755f81'
@@ -78,8 +78,7 @@
     --with-ldap \
     --with-winbind \
     --with-acl-support \
-    --with-systemd \
-    --systemd-install-services \
+    --without-systemd \
     --with-pam \
     --with-pammodulesdir=/usr/lib/security \
     --private-libraries='!ldb' \
@@ -279,7 +278,6 @@
 backup=(
   etc/logrotate.d/samba
   etc/pam.d/samba
-  etc/conf.d/samba
 )
 install=samba.install
 
@@ -295,9 +293,6 @@
       "${pkgdir}"/usr/${script}
   done
 
-  sed -i -e '/^EnvironmentFile/ s/sysconfig/conf.d/' "${pkgdir}"/usr/lib/systemd/system/*.service
-  install -d -m755  "${pkgdir}"/etc/conf.d
-  install -m644 "${srcdir}"/samba-${pkgver}/packaging/systemd/samba.sysconfig "${pkgdir}"/etc/conf.d/samba
 
   install -D -m644 "${srcdir}"/samba.conf "${pkgdir}"/usr/lib/tmpfiles.d/samba.conf
   install -d -m755 "${pkgdir}"/etc/samba


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -37,7 +37,6 @@
 readline
 rpcsvc-proto
 smbclient>
-systemd
 talloc
 tdb
 tevent