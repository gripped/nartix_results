--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,7 +2,7 @@
 pkgbase=emacs
 pkgname=(emacs emacs-nox emacs-wayland)
 pkgver=30.1
-pkgrel=4
+pkgrel=3
 arch=('x86_64')
 url='https://www.gnu.org/software/emacs/emacs.html'
 license=('GPL3')
@@ -34,7 +34,6 @@
   librsvg-2.so
   libsm
   sqlite libsqlite3.so
-  libsystemd.so
   libtiff.so
   libtree-sitter.so
   libwebp.so
@@ -45,19 +44,13 @@
   zlib
 )
 makedepends=(libgccjit)
-source=(
-  https://ftp.gnu.org/gnu/emacs/${pkgname}-${pkgver}.tar.xz{,.sig}
-  fix-compile.patch::https://github.com/emacs-mirror/emacs/commit/53a5dada413662389a17c551a00d215e51f5049f.patch
-)
+source=(https://ftp.gnu.org/gnu/emacs/${pkgname}-${pkgver}.tar.xz{,.sig})
 b2sums=('ad502a2e15a04618f4766ec6e285739cb5bb6f19c5065c3aed03b3e50df590cee382a0331f382de6f13523f1362a4355f65961ce45504f7d33419ea6d04e326f'
-        'SKIP'
-        'b38ad198ed8975963a05201e2124b8cf2947c6ddb792aaef618d1968d7b0329241235f4ccc69ac62ee43189e20aa70a28254f6c787fa38359c1aae22286df9d1')
+        'SKIP')
 validpgpkeys=('17E90D521672C04631B1183EE78DAE0F3115E06B'  # Eli Zaretskii <eliz@gnu.org>
               'CEA1DE21AB108493CC9C65742E82323B8F4353EE') # Stefan Kangas <stefankangas@gmail.com>
 
 prepare() {
-  patch -d ${pkgname}-${pkgver} -Np1 < fix-compile.patch
-
   cp --reflink=auto -ar ${pkgname}-${pkgver} ${pkgbase}-${pkgver}-nox
   cp --reflink=auto -ar ${pkgname}-${pkgver} ${pkgbase}-${pkgver}-wayland
 }
@@ -71,7 +64,7 @@
     --disable-build-details
     --with-cairo
     --with-harfbuzz
-    --with-libsystemd
+    --with-libsystemd=no
     --with-modules
     --with-native-compilation=aot
     --with-tree-sitter
@@ -124,7 +117,6 @@
     libgccjit
     libgpm.so
     libncursesw.so
-    libsystemd.so
     libtree-sitter.so
     libxml2.so
     zlib


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -26,7 +26,6 @@
 librsvg-2.so
 libsm
 libsqlite3.so
-libsystemd.so
 libtiff.so
 libtree-sitter.so
 libwebp.so