--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,54 +1,46 @@
 
-pkgname=lxtask
-pkgver=0.1.12
+pkgbase=lxtask
+pkgname=(lxtask lxtask-gtk3)
+pkgver=0.1.10
 pkgrel=2
 pkgdesc='Task manager of the LXDE Desktop'
-arch=(x86_64)
-url='https://github.com/lxde/lxtask'
-license=(GPL-2.0-or-later)
-groups=(lxde)
-depends=(
-  glib2
-  glibc
-  gtk3
-)
-makedepends=(
-  git
-  intltool
-)
-conflicts=(lxtask-gtk3)
-replaces=(lxtask-gtk3)
-source=(
-  "git+https://github.com/lxde/lxtask.git#tag=$pkgver"
-  lxtask.appdata.xml
-  lxtask-transient-dialog.patch
-)
-b2sums=(
-  00fd38d16feb818c2a3c1356b3984882e425821aeff4a7f75caa04aeec5052d1f494536400fce307061642129c65487ad8846e5af546c67d368b863190c331e5
-  d52df1095650dd326fe794d0c08461c1b4c9c3bf2a31ea7f737596423011d90d12d7f613882a401534d07ed29af02578ae8583813cf7da0b1bc94f8ad45c3879
-  7e61be192df34fb12b3117e2e99562c472e2cdf0e594b4db9bc4dcf3703eacd5740353c4fc8e62943b75097c227bc527b390eed25376e14071fdc3e2aa476225
-)
-
-prepare() {
-  cd $pkgname
-
-  git apply -3 ../lxtask-transient-dialog.patch
-
-  autoreconf -fi
-}
+arch=('x86_64')
+license=('GPL2')
+url='https://lxde.org/'
+depends=('gtk2' 'gtk3')
+makedepends=('intltool')
+source=(https://downloads.sourceforge.net/lxde/$pkgbase-$pkgver.tar.xz)
+sha256sums=('2216df9bc4bb2d80733e788966512ac58c421e0a0a1ff85210f34a29d1eb4e2c')
 
 build() {
-  cd $pkgname
-  ./configure \
-    --prefix=/usr \
-    --sysconfdir=/etc \
-    --localstatedir=/var \
-    --enable-gtk3
+  [ -d gtk2 ] || cp -r $pkgbase-$pkgver gtk2
+  cd gtk2
+  ./configure --sysconfdir=/etc --prefix=/usr
+  make
+
+  cd "$srcdir"
+  [ -d gtk3 ] || cp -r $pkgbase-$pkgver gtk3
+  cd gtk3
+  ./configure --sysconfdir=/etc --prefix=/usr --enable-gtk3
   make
 }
 
-package() {
-  cd $pkgname
+package_lxtask() {
+  groups=('lxde')
+  depends=('gtk2')
+
+  cd gtk2
   make DESTDIR="$pkgdir" install
-  install -Dm644 ../$pkgname.appdata.xml "$pkgdir/usr/share/metainfo/$pkgname.appdata.xml"
 }
+
+package_lxtask-gtk3() {
+  groups=('lxde-gtk3')
+  pkgdesc+=' (GTK+ 3 version)'
+  depends=('gtk3')
+  conflicts=('lxtask')
+
+  cd gtk3
+  make DESTDIR="$pkgdir" install
+
+  echo 'X-AppStream-Ignore=true' >> "$pkgdir/usr/share/applications/$pkgbase.desktop"
+}


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,5 +1,3 @@
-git
-glib2
-glibc
+gtk2
 gtk3
 intltool

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,14 +1,11 @@
-prepare() {
-cd $pkgname
-git apply -3 ../lxtask-transient-dialog.patch
-autoreconf -fi
-}
 build() {
-cd $pkgname
-./configure \
---prefix=/usr \
---sysconfdir=/etc \
---localstatedir=/var \
---enable-gtk3
+[ -d gtk2 ] || cp -r $pkgbase-$pkgver gtk2
+cd gtk2
+./configure --sysconfdir=/etc --prefix=/usr
+make
+cd "$srcdir"
+[ -d gtk3 ] || cp -r $pkgbase-$pkgver gtk3
+cd gtk3
+./configure --sysconfdir=/etc --prefix=/usr --enable-gtk3
 make
 }
