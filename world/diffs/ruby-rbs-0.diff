--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,8 @@
 
 _gemname='rbs'
 pkgname="ruby-${_gemname}"
-pkgver=3.8.0
-pkgrel=2
+pkgver=3.4.4
+pkgrel=3
 pkgdesc='RBS is the language for type signatures for Ruby and standard library definitions'
 arch=('any')
 url="https://github.com/ruby/${_gemname}"
@@ -15,48 +15,32 @@
   ruby-rdoc
 )
 checkdepends=(
-  ruby-abbrev
-  ruby-base64
-  ruby-bigdecimal
+  ruby-ast
   ruby-bundler
-  ruby-csv
-  ruby-dbm
   ruby-json-schema
   ruby-minitest
-  ruby-mutex_m
   ruby-net-smtp
-  ruby-nkf
   ruby-rake
   ruby-rake-compiler
-  ruby-rspec
   ruby-test-unit
 )
 options=('!emptydirs')
 source=("git+${url}#tag=v$pkgver")
-sha512sums=('94de5d47ba6a1f22c4c939f4e50669f3aa484962908d866c27faa9c53b69eaa6e0c0c66670a2ef741c80474b997f1774024d89e31896deb5bbf8c95f8aa98f78')
-b2sums=('0b34e8a2ae0ca129e705ab446b86472f6d3d2be6207685b591b19810afe3dae06d3190922362df715c93abd70022c01aa2e15a4fc92bf7e6941868cf3144e717')
+sha512sums=('6477ae1443278e981561937a764f00f25e09fc7ecfed25486777b1e9575e270d894fc10e91b681594a7392a1fb672709ec2fcb70829c5deb642f293487ea4402')
+b2sums=('052990cd353bc42b65d43ee37e9f630a5a37987b74a3c9f18ee2a70f6fdea174727a67c963f806c71e1c114462fb23304f713c00bd08fb827e2b3b6a1fc28b27')
 
 prepare() {
   ln -s "${_gemname}" "${_gemname}-${pkgver}"
 
   cd "${_gemname}-${pkgver}"
 
+  git cherry-pick -n f9e1c01df11ef32539d477132b75a6dd08558988
+
   sed --in-place --regexp-extended 's|~>|>=|g' "${_gemname}.gemspec"
 
-  sed --in-place --regexp-extended \
-    --expression 's/:rubocop, //g' \
-    --expression '/task :rubocop do/,+8d' \
-    Rakefile
+  sed --in-place --regexp-extended 's|git ls-files -z|find . -type f -not -path "*/\.git*" -print0|' "${_gemname}.gemspec"
 
-  sed --in-place --regexp-extended \
-    --expression '/activesupport/d' \
-    --expression '/goodcheck/d' \
-    --expression '/raap/d' \
-    --expression '/rubocop/d' \
-    --expression '/group :profilers do/,/end/d' \
-    --expression '/group :typecheck_test do/,/end/d' \
-    Gemfile
-
+  sed --in-place '6,22d' Gemfile
   rm Gemfile.lock
 }
 
@@ -107,7 +91,7 @@
 
   local _gemdir="$(gem env gemdir)"
 
-  GEM_HOME="tmp_install${_gemdir}" rake test stdlib_test
+  GEM_HOME="tmp_install${_gemdir}" rake test
 }
 
 package() {


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,19 +1,10 @@
 prepare() {
 ln -s "${_gemname}" "${_gemname}-${pkgver}"
 cd "${_gemname}-${pkgver}"
+git cherry-pick -n f9e1c01df11ef32539d477132b75a6dd08558988
 sed --in-place --regexp-extended 's|~>|>=|g' "${_gemname}.gemspec"
-sed --in-place --regexp-extended \
---expression 's/:rubocop, //g' \
---expression '/task :rubocop do/,+8d' \
-Rakefile
-sed --in-place --regexp-extended \
---expression '/activesupport/d' \
---expression '/goodcheck/d' \
---expression '/raap/d' \
---expression '/rubocop/d' \
---expression '/group :profilers do/,/end/d' \
---expression '/group :typecheck_test do/,/end/d' \
-Gemfile
+sed --in-place --regexp-extended 's|git ls-files -z|find . -type f -not -path "*/\.git*" -print0|' "${_gemname}.gemspec"
+sed --in-place '6,22d' Gemfile
 rm Gemfile.lock
 }
 build() {
