--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -20,10 +20,10 @@
   'openssl'
   'pcre2'
   'protobuf'
-  'systemd-libs'
+
 )
 makedepends=('libxslt' 'mongo-c-driver' 'librabbitmq-c' 'python' 'libesmtp' 'hiredis'
-             'libdbi' 'libmaxminddb' 'net-snmp' 'librdkafka' 'systemd')
+             'libdbi' 'libmaxminddb' 'net-snmp' 'librdkafka')
 optdepends=('logrotate: for rotating log files'
             'libdbi: for the SQL plugin'
             'librabbitmq-c: for the AMQP plugin'
@@ -39,8 +39,7 @@
 replaces=('eventlog')
 backup=('etc/syslog-ng/scl.conf'
         'etc/syslog-ng/syslog-ng.conf'
-        'etc/logrotate.d/syslog-ng'
-        'etc/default/syslog-ng@default')
+        'etc/logrotate.d/syslog-ng')
 source=(https://github.com/balabit/syslog-ng/releases/download/syslog-ng-$pkgver/$pkgname-$pkgver.tar.gz
         syslog-ng.conf syslog-ng.logrotate
         https://github.com/syslog-ng/syslog-ng/commit/6487d8d8.patch)
@@ -51,8 +50,6 @@
 
 prepare() {
   cd $pkgname-$pkgver
-  sed -i -e 's,/bin/,/usr/bin/,' -e 's,/sbin/,/bin/,' contrib/systemd/syslog-ng@.service
-  sed -i -e 's|/var/run|/run|g' contrib/systemd/syslog-ng@default
   patch -p1 -i ../6487d8d8.patch # Fix build with protobuf 27
 }
 
@@ -79,7 +76,7 @@
   ./configure --prefix=/usr --sysconfdir=/etc/syslog-ng --libexecdir=/usr/lib \
     --sbindir=/usr/bin --localstatedir=/var/lib/syslog-ng --datadir=/usr/share \
     --with-pidfile-dir=/run --enable-spoof-source --enable-ipv6 \
-    --enable-systemd --with-systemdsystemunitdir=/usr/lib/systemd/system \
+    --disable-systemd --with-systemdsystemunitdir=no \
     --enable-manpages --enable-all-modules --disable-java --disable-java-modules  \
     --disable-mqtt --disable-riemann --with-python=3 --with-jsonc=system
   sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
@@ -92,5 +89,4 @@
   install -dm755 "$pkgdir/var/lib/syslog-ng" "$pkgdir/etc/syslog-ng/patterndb.d"
   install -Dm644 "$srcdir/syslog-ng.conf" "$pkgdir/etc/syslog-ng/syslog-ng.conf"
   install -Dm644 "$srcdir/syslog-ng.logrotate" "$pkgdir/etc/logrotate.d/syslog-ng"
-  install -Dm644 "$srcdir"/$pkgname-$pkgver/contrib/systemd/syslog-ng@default -t "$pkgdir"/etc/default
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -21,5 +21,3 @@
 pcre2
 protobuf
 python
-systemd
-systemd-libs