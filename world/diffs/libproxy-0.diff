--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,7 +4,7 @@
   libproxy
   libproxy-docs
 )
-pkgver=0.5.5
+pkgver=0.5.4
 pkgrel=1
 pkgdesc="Automatic proxy configuration management library"
 url="https://libproxy.github.io/libproxy/"
@@ -23,10 +23,16 @@
   meson
   vala
 )
+_commit=dff9a603d823dcc740ec966cd27960daa6b891b1  # tags/0.5.4
 source=(
-  "git+https://github.com/libproxy/libproxy#tag=$pkgver"
+  "git+https://github.com/libproxy/libproxy#commit=$_commit"
 )
-b2sums=('8d5cb6295541ef386e328a77ac9dd827c85da4d57ba50c910996c690d1fd9d97ef0d4df37183fdfa3e9bd7bcac7c5e54afc1cd83c157c0b7d01cc4cc298535b8')
+b2sums=('SKIP')
+
+pkgver() {
+  cd libproxy
+  git describe --tags | sed 's/^libproxy-//;s/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd libproxy
@@ -34,10 +40,9 @@
 
 build() {
   local meson_options=(
-    -D release=true
   )
 
-  arch-meson libproxy build "${meson_options[@]}"
+  artix-meson libproxy build "${meson_options[@]}"
   meson compile -C build
 }
 


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -3,8 +3,7 @@
 }
 build() {
 local meson_options=(
--D release=true
 )
-arch-meson libproxy build "${meson_options[@]}"
+artix-meson libproxy build "${meson_options[@]}"
 meson compile -C build
 }
