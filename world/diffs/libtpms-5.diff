--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,20 +1,21 @@
-
 pkgname=libtpms
-pkgver=0.10.0
+pkgver=0.9.6
+_tag=fccd9f0ec5febf75ccec2742e75889cdfa329e53 # git rev-parse "v$pkgver"
 pkgrel=1
 pkgdesc='Library providing a software emulation of a Trusted Platform Module (TPM 1.2 and TPM 2.0)'
 arch=('x86_64')
 url='https://github.com/stefanberger/libtpms'
-license=('BSD-3-Clause')
-depends=(
-  'glibc'
-  'openssl'
-)
+license=('BSD')
+depends=('openssl')
 makedepends=('git')
-options=('!lto')
-source=("git+$url.git?signed#tag=v$pkgver")
-sha512sums=('67ad9bf751730896fc0386db502466b2b5a3d2e859caf59a2aeff01e869c971cf8bf3cf50e376bbab436aef5ec4c17fc882a08630dd46438f9dfeec4ae831ec0')
+source=("git+$url.git?signed#tag=$_tag")
+sha512sums=('SKIP')
 validpgpkeys=('B818B9CADF9089C2D5CEC66B75AD65802A0B4211') # Stefan Berger <stefanb@linux.vnet.ibm.com>
+
+pkgver() {
+	cd "$pkgname"
+	git describe | sed 's/^v//;s/\([^-]*-\)g/r\1/;s/-/./g'
+}
 
 prepare() {
 	cd "$pkgname"
@@ -23,10 +24,7 @@
 
 build() {
 	cd "$pkgname"
-  ./configure \
-    --prefix=/usr \
-    --with-openssl \
-    --with-tpm2
+	./configure --prefix=/usr --with-openssl --with-tpm2
 	make
 }
 
@@ -38,5 +36,5 @@
 package() {
 	cd "$pkgname"
 	make DESTDIR="$pkgdir" install
-	install -vDm644 -t "$pkgdir/usr/share/licenses/$pkgname" LICENSE
+	install -Dm644 LICENSE -t "$pkgdir/usr/share/licenses/$pkgname"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,3 +1,2 @@
 git
-glibc
 openssl

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,9 +4,6 @@
 }
 build() {
 cd "$pkgname"
-./configure \
---prefix=/usr \
---with-openssl \
---with-tpm2
+./configure --prefix=/usr --with-openssl --with-tpm2
 make
 }
