--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 
 pkgname=python-prompt_toolkit
-pkgver=3.0.51
+pkgver=3.0.50
 pkgrel=1
 pkgdesc='Library for building powerful interactive command lines in Python'
 arch=('any')
@@ -8,6 +8,7 @@
 license=('BSD')
 depends=(
   'python'
+  'python-pygments'
   'python-wcwidth'
 )
 makedepends=(
@@ -18,9 +19,8 @@
   'python-setuptools'
 )
 checkdepends=('python-pytest')
-optdepends=('python-pygments: for its color schemes and lexers')
 source=("$pkgname::git+$url#tag=$pkgver")
-b2sums=('962da5c4f2ef5abeb592995241a270d9cd7b11dd967ab2437123975c9f88acf3048a840f308f91918a948732258bf14b02aff1e5cd9ce56d88b7823f9aa26fac')
+b2sums=('4aea2e3bf90b063f0e239afb5f90525070543fcefea048afa9458692d58ef02159f6c054a90547443501295a4ce30ed4c9e5de760b46b04f304c06456f061709')
 
 build() {
   cd "$pkgname"
@@ -31,9 +31,7 @@
 check() {
   cd "$pkgname"
 
-  python -m venv --system-site-packages test-env
-  test-env/bin/python -m installer dist/*.whl
-  test-env/bin/python -m pytest -v
+  PYTHONPATH=build/lib pytest -v
 }
 
 package() {


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -2,6 +2,7 @@
 python
 python-build
 python-installer
+python-pygments
 python-setuptools
 python-wcwidth
 python-wheel