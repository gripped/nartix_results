--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,15 +1,11 @@
 
-pkgbase=libgusb
-pkgname=(
-  libgusb
-  libgusb-docs
-)
+pkgname=libgusb
 pkgver=0.4.9
-pkgrel=2
+pkgrel=1
 pkgdesc='GObject wrapper for libusb1'
 url=https://github.com/hughsie/libgusb
 arch=(x86_64)
-license=(LGPL-2.1-or-later)
+license=(LGPL2.1)
 depends=(
   glib2
   libjson-glib-1.0.so
@@ -19,33 +15,27 @@
   gi-docgen
   git
   gobject-introspection
+  gtk-doc
   meson
+  python-setuptools
   umockdev
   vala
 )
-source=(git+https://github.com/hughsie/libgusb.git#tag=${pkgver})
+_tag=ed31c8134d80d006bd45450e84180be2a7c0742e
+source=(git+https://github.com/hughsie/libgusb.git#tag=${_tag})
 sha256sums=('27ac4dd41aa0279416bc74f8d195339d439bd9fc0a9f6a0dc9745a07d251c942')
 
+pkgver() {
+  cd libgusb
+  git describe --tags
+}
+
 build() {
-  arch-meson libgusb build
+  artix-meson libgusb build
   ninja -C build
 }
 
-check() {
-  meson test -C build --print-errorlogs
+package() {
+  DESTDIR="${pkgdir}" ninja -C build install
 }
 
-package_libgusb() {
-  DESTDIR="${pkgdir}" ninja -C build install
-
-  mkdir -p doc/usr/share
-  mv {"$pkgdir",doc}/usr/share/doc
-}
-
-package_libgusb-docs() {
-  pkgdesc+=" (documentation)"
-  depends=()
-
-  mv doc/* "$pkgdir"
-}
-


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,10 +1,11 @@
-
 gi-docgen
 git
 glib2
 gobject-introspection
+gtk-doc
 libjson-glib-1.0.so
 libusb-1.0.so
 meson
+python-setuptools
 umockdev
 vala

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,4 +1,4 @@
 build() {
-arch-meson libgusb build
+artix-meson libgusb build
 ninja -C build
 }
