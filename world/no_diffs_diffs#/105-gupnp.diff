--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,33 +4,33 @@
   gupnp
   gupnp-docs
 )
-pkgver=1.6.7
+pkgver=1.6.6
 pkgrel=1
 epoch=1
 pkgdesc="GObject-based UPNP framework"
 url="https://wiki.gnome.org/Projects/GUPnP"
 arch=(x86_64)
-license=(LGPL-2.1-or-later)
+license=(LGPL)
 depends=(
-  gcc-libs
   glib2
-  glibc
   gssdp
   libxml2
 )
 makedepends=(
   gi-docgen
   git
-  glib2-devel
   gobject-introspection
   meson
   vala
 )
-source=("git+https://gitlab.gnome.org/GNOME/gupnp.git?signed#tag=gupnp-$pkgver")
-b2sums=('ed3d89e16ccf3be185407b4f4efe283c7b80b42a400803c2598770f4270337f092ebc6b0376b70f1c8f4ad31d87c6354fa0aea232eb08d96da100f736257c463')
-validpgpkeys=(
-  AC9CD4E32D7C7F6357BA8ADD10F6E970175D29E1 # Jens Georg <mail@jensge.org>
-)
+_commit=78db66f6af9879b93db8eb6452acb24a1aaac71c  # tags/gupnp-1.6.6^0
+source=("git+https://gitlab.gnome.org/GNOME/gupnp.git#commit=$_commit")
+b2sums=('SKIP')
+
+pkgver() {
+  cd gupnp
+  git describe --tags | sed 's/^gupnp-//;s/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd gupnp
@@ -41,12 +41,12 @@
     -D gtk_doc=true
   )
 
-  arch-meson gupnp build "${meson_options[@]}"
+  artix-meson gupnp build "${meson_options[@]}"
   meson compile -C build
 }
 
 check() {
-  meson test -C build --print-errorlogs
+  meson test -C build --print-errorlogs || :
 }
 
 _pick() {


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,10 +1,7 @@
 
-gcc-libs
 gi-docgen
 git
 glib2
-glib2-devel
-glibc
 gobject-introspection
 gssdp
 libgio-2.0.so

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -5,6 +5,6 @@
 local meson_options=(
 -D gtk_doc=true
 )
-arch-meson gupnp build "${meson_options[@]}"
+artix-meson gupnp build "${meson_options[@]}"
 meson compile -C build
 }
