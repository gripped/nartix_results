--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,54 +1,41 @@
 
 pkgname=python-python-socks
-pkgver=2.6.1
-pkgrel=1
+pkgver=2.5.3
+pkgrel=2
 pkgdesc='Core proxy client (SOCKS4, SOCKS5, HTTP) functionality for Python'
 arch=('any')
 url='https://github.com/romis2012/python-socks'
-license=('Apache-2.0')
+license=('APACHE')
 depends=('python')
-makedepends=(
-  'git'
-  'python-build'
-  'python-installer'
-  'python-setuptools'
-  'python-wheel'
-)
-checkdepends=(
-  'python-anyio'
-  'python-curio'
-  'python-flask'
-  'python-pytest'
-  'python-pytest-asyncio'
-  'python-pytest-trio'
-  'python-tiny-proxy'
-  'python-trio'
-  'python-trustme'
-  'python-yarl'
-)
-optdepends=(
-  'python-anyio: anyio support'
-  'python-async-timeout: asyncio support'
-  'python-curio: curio support'
-  'python-trio: trio support'
-)
+makedepends=('git' 'python-build' 'python-installer' 'python-setuptools' 'python-wheel')
+checkdepends=('python-anyio' 'python-curio' 'python-flask' 'python-pytest'
+              'python-pytest-asyncio' 'python-pytest-trio' 'python-trio' 'python-yarl' 'python-trustme' 'python-tiny-proxy')
+optdepends=('python-anyio: anyio support'
+            'python-async-timeout: asyncio support'
+            'python-curio: curio support'
+            'python-trio: trio support')
 provides=('python-python_socks')
 replaces=('python-python_socks')
 source=("git+$url.git?signed#tag=v$pkgver")
-sha512sums=('cd52f9b57cc123669db1db0c3ea407a326203ff7727b4bdbef47358f9f5debb83be06f9a11e6f1ee28ac5904136492e3a5bd7e48171f22d8c280ad02dda37a8a')
+sha512sums=('abb1bb86bbe68fc162a58e665ca939f5165cb5231792e53a0a9e4b84d2adbcc4f80296839b98b2960da41eca70029233b620ffe79fc9676cc60c207d71a93c7e')
 validpgpkeys=('706A8935FED55F3BFB7C188B5EEAD7400A5D80ED') # Roman Snegirev <rsng@mail.ru>
 
+pkgver() {
+	cd "${pkgname#python-}"
+	git describe | sed 's/^v//;s/\([^-]*-\)g/r\1/;s/-/./g'
+}
+
 build() {
-  cd "${pkgname#python-}"
-  python -m build --wheel --no-isolation
+	cd "${pkgname#python-}"
+	python -m build --wheel --no-isolation
 }
 
 check() {
-  cd "${pkgname#python-}"
-  pytest
+	cd "${pkgname#python-}"
+	pytest -k 'not proxy_server'
 }
 
 package() {
-  cd "${pkgname#python-}"
-  python -m installer --destdir="$pkgdir" dist/*.whl
+	cd "${pkgname#python-}"
+	python -m installer --destdir="$pkgdir" dist/*.whl
 }
