--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,18 +4,15 @@
   glibmm
   glibmm-docs
 )
-pkgver=2.66.8
+pkgver=2.66.7
 pkgrel=1
 pkgdesc="C++ bindings for GLib"
 url="https://www.gtkmm.org/"
 arch=(x86_64)
 license=(LGPL-2.1-or-later)
 depends=(
-  gcc-libs
   glib2
-  glibc
   libsigc++
-  perl
 )
 makedepends=(
   clang
@@ -25,9 +22,14 @@
   perl-xml-parser
 )
 checkdepends=(glib-networking)
-options=(!emptydirs)
-source=("git+https://gitlab.gnome.org/GNOME/glibmm.git#tag=$pkgver")
-b2sums=('00aa236ec18f62b189ee83f003bfc1f1dcf55c0c1f0eadb12a53f4ae328e3e47e7cc78c89edaf05a4a761beb6116258b04926f1611a9d36a5409639a15d3bfcf')
+_commit=a33c12cb694a46f97fe46372e6a97a22bbcd601f  # tags/2.66.7^0
+source=("git+https://gitlab.gnome.org/GNOME/glibmm.git#commit=$_commit")
+b2sums=('4b626196a994c74a94e2b9e3876b5ec0e3050b5f7b669537e0afb3d4b4872ead17ef6ae7a3359a497ba06570acd58e9f4c831ca48fb164dec016639471894c54')
+
+pkgver() {
+  cd glibmm
+  git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd glibmm
@@ -38,7 +40,7 @@
     -D maintainer-mode=true
   )
 
-  arch-meson glibmm build "${meson_options[@]}"
+  artix-meson glibmm build "${meson_options[@]}"
   meson compile -C build
 }
 
@@ -49,6 +51,7 @@
 package_glibmm() {
   depends+=(libsigc-2.0.so)
   provides=(libglibmm-2.4.so)
+  options=(!emptydirs)
 
   meson install -C build --destdir "$pkgdir"
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,12 +1,9 @@
 
 clang
-gcc-libs
 git
 glib2
-glibc
 libsigc++
 libsigc-2.0.so
 meson
 mm-common
-perl
 perl-xml-parser

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -5,6 +5,6 @@
 local meson_options=(
 -D maintainer-mode=true
 )
-arch-meson glibmm build "${meson_options[@]}"
+artix-meson glibmm build "${meson_options[@]}"
 meson compile -C build
 }
