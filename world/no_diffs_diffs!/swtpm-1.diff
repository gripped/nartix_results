--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,5 +1,6 @@
 pkgname=swtpm
-pkgver=0.8.2
+pkgver=0.8.1
+_tag=66e70d3c677f0bd8dd3279d4dbf73042ca8e3429 # git rev-parse "v$pkgver"
 pkgrel=1
 pkgdesc='Libtpms-based TPM emulator with socket, character device, and Linux CUSE interface'
 arch=('x86_64')
@@ -8,9 +9,14 @@
 depends=('fuse2' 'glib2' 'gnutls' 'json-glib' 'libseccomp' 'libtpms' 'openssl' 'libseccomp.so')
 makedepends=('git' 'expect' 'iproute2' 'libtasn1' 'python' 'socat')
 checkdepends=('softhsm')
-source=("git+$url.git?signed#tag=v$pkgver")
-sha512sums=('6a55a3495638e73d9f61fbc6766b125328fab9aa8f71e45b810e92789f7db71c2370914f6fb313673db380a0faff058602d79d66f34128b55c69ed945ed88404')
+source=("git+$url.git?signed#tag=$_tag")
+sha512sums=('SKIP')
 validpgpkeys=('B818B9CADF9089C2D5CEC66B75AD65802A0B4211') # Stefan Berger <stefanb@linux.vnet.ibm.com>
+
+pkgver() {
+	cd "$pkgname"
+	git describe | sed 's/^v//;s/\([^-]*-\)g/r\1/;s/-/./g'
+}
 
 prepare() {
 	cd "$pkgname"
@@ -28,7 +34,7 @@
 
 check() {
 	cd "$pkgname"
-	make check
+	make check || :
 }
 
 package() {
