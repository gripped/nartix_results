--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,7 +1,7 @@
 
 pkgname=mkdocstrings
-pkgver=0.28.0
-pkgrel=1
+pkgver=0.27.0
+pkgrel=2
 pkgdesc="Automatic documentation from sources, for MkDocs"
 arch=(any)
 url="https://github.com/mkdocstrings/mkdocstrings"
@@ -9,11 +9,12 @@
 depends=(
   mkdocs
   mkdocs-autorefs
-  mkdocs-get-deps
   python
+  python-click
   python-jinja
   python-markdown
   python-markupsafe
+  python-platformdirs
   python-pymdown-extensions
   python-yaml
 )
@@ -29,7 +30,7 @@
   python-pytest
 )
 source=("$pkgname-$pkgver.tar.gz::$url/archive/$pkgver.tar.gz")
-sha256sums=('9288f7dd3b4e36fa744a8cda60acdd72119678a98480f54a757caea77437d5b8')
+sha256sums=('b0092b9fde1161df831775c686d3bd20c950e0a7025dbad7b16a88abd29a91bf')
 
 build() {
   cd $pkgname-$pkgver
@@ -39,13 +40,13 @@
 
 check() {
   cd $pkgname-$pkgver
-  python -m venv --system-site-packages test-env
-  test-env/bin/python -m installer dist/*.whl
-  test-env/bin/python -m pytest \
-    --deselect 'tests/test_extension.py' \
-    --deselect 'tests/test_handlers.py::test_extended_templates' \
-    --deselect 'tests/test_handlers.py::test_nested_autodoc[ext_markdown0]' \
-    --deselect 'tests/test_plugin.py::test_disabling_plugin'
+  python -m installer --destdir=tmp_install dist/*.whl
+  local site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
+  export PYTHONPATH="$PWD/tmp_install/$site_packages"
+  pytest \
+    --deselect tests/test_extension.py \
+    --deselect tests/test_handlers.py::test_extended_templates\
+    --deselect tests/test_plugin.py::test_disabling_plugin
 }
 
 package() {


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,13 +1,14 @@
 mkdocs
 mkdocs-autorefs
-mkdocs-get-deps
 python
 python-build
+python-click
 python-installer
 python-jinja
 python-markdown
 python-markupsafe
 python-pdm-backend
+python-platformdirs
 python-pymdown-extensions
 python-wheel
 python-yaml