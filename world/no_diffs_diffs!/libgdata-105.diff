--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,20 +1,15 @@
 
 pkgname=libgdata
 pkgver=0.18.1
-pkgrel=5
+pkgrel=4
 pkgdesc="GLib-based library for accessing online service APIs using the GData protocol"
 url="https://wiki.gnome.org/Projects/libgdata"
 arch=(x86_64)
-license=(LGPL-2.1-or-later)
+license=(GPL)
 depends=(
   gcr
-  glib2
-  glibc
-  json-glib
-  libgcc
   libgoa
   libsoup
-  libxml2
 )
 makedepends=(
   git
@@ -24,8 +19,14 @@
   meson
   vala
 )
-source=("git+https://gitlab.gnome.org/Archive/libgdata.git#tag=$pkgver")
-b2sums=('6d1304109657a56640404b491fc712b22e673a3ec96bcff7198735e072973bca58f806f45f4de44eec840f2dae7f6d7e85b2eaa61f71a988e827ec1c468aaad3')
+_commit=eb7db048e5445ad567817dced344c47a20c6ea6b  # tags/0.18.1^0
+source=("git+https://gitlab.gnome.org/GNOME/libgdata.git#commit=$_commit")
+b2sums=('SKIP')
+
+pkgver() {
+  cd libgdata
+  git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd libgdata
@@ -39,7 +40,7 @@
     -D man=true
   )
 
-  arch-meson libgdata build "${meson_options[@]}"
+  artix-meson libgdata build "${meson_options[@]}"
   meson compile -C build
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,15 +1,10 @@
 gcr
 git
-glib2
 glib2-devel
-glibc
 gobject-introspection
 gtk-doc
-json-glib
-libgcc
 libgoa
 libsoup
 libsoup-2.4.so
-libxml2
 meson
 vala

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -7,6 +7,6 @@
 -D gtk_doc=true
 -D man=true
 )
-arch-meson libgdata build "${meson_options[@]}"
+artix-meson libgdata build "${meson_options[@]}"
 meson compile -C build
 }
