--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 
 pkgname=mitmproxy
-pkgver=12.2.0
+pkgver=12.1.2
 pkgrel=1
 pkgdesc='SSL-capable man-in-the-middle HTTP proxy'
 arch=(any)
@@ -35,7 +35,6 @@
   python-urwid
   python-wsproto
   python-zstandard
-  python-bcrypt
 )
 makedepends=(
   git
@@ -54,8 +53,8 @@
 conflicts=(pathod)
 replaces=(pathod)
 source=("$pkgname::git+https://github.com/mitmproxy/mitmproxy#tag=v$pkgver")
-sha512sums=('5465a27e46bc83adc9d9e04d83d116947d501157366acee9a340332efd97cb6af068803bdf9eba6ec6f7557b16ed5c2bccf3345a3aef337ac81335bd028c90d7')
-b2sums=('99e3a92ac89423900eb205a6fa73194146e1fba4c5be16612951cd5a30c8d7fe117a0e14d953885ffec67861cd97b5ed2760f7d9ec5a131d2376dc82b3e4a8ae')
+sha512sums=('e08028ae6755e7a52aa08de17a2416b8cd0ca6546d1f1561257e8907c7590495ded12b96a3ac1fd823b950160c6684145f60d077a7aea503eb8704704ec2a9e9')
+b2sums=('2ba5810a140ab049acf9b2d54feb4d1e64070ef5f03d461acd82a518871065f8684eba863a2a6ab4fca6401cfa85d244e846e9bb5a38011a1e0614828b064459')
 
 build() {
   cd "$pkgname"
@@ -66,9 +65,14 @@
 check() {
   cd "$pkgname"
 
+  local pytest_opts=(
+  	--override-ini="addopts="
+    --deselect test/mitmproxy/addons/test_dns_resolver.py
+  )
+
   python -m installer --destdir=test_dir dist/*.whl
   local _site_packages=$(python -c "import site; print(site.getsitepackages()[0])")
-  PATH="test_dir/usr/bin:$PATH" PYTHONPATH="test_dir/$_site_packages:$PYTHONPATH" pytest -vv
+  PATH="test_dir/usr/bin:$PATH" PYTHONPATH="test_dir/$_site_packages:$PYTHONPATH" pytest -vv "${pytest_opts[@]}"
 }
 
 package() {


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -3,7 +3,6 @@
 python-aioquic
 python-argon2-cffi
 python-asgiref
-python-bcrypt
 python-brotli
 python-build
 python-certifi