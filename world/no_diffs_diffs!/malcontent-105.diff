--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,7 +4,7 @@
   malcontent
   libmalcontent
 )
-pkgver=0.13.0
+pkgver=0.12.0
 pkgrel=1
 pkgdesc="Parental control support for applications"
 url="https://gitlab.freedesktop.org/pwithnall/malcontent"
@@ -28,7 +28,6 @@
 )
 makedepends=(
   git
-  glib2-devel
   gobject-introspection
   gtk-doc
   libglib-testing
@@ -36,18 +35,21 @@
   python-packaging
   yelp-tools
 )
-source=("git+https://gitlab.freedesktop.org/pwithnall/malcontent.git#tag=$pkgver")
-b2sums=('9d92fd3f8032a7828dba57bf2d7e76b041f101d06d77c1038724c928e78eec7890c35573ba68dbcd5111740ba7fcee7e733a48b5aa361c5362daaf5e69906175')
-validpgpkeys=(
-  923B7025EE03C1C59F42684CF0942E894B2EAFA0 # Philip Withnall <pwithnall@gnome.org>
-)
+_commit=3ba80995bb25b7aeda7e21d547f9e39ff9a81736  # tags/0.12.0^0
+source=("git+https://gitlab.freedesktop.org/pwithnall/malcontent.git#commit=$_commit")
+b2sums=('6d0887476764bfd8b481bd42b8f5405227160c33026cdf8bdb6d83c3b0bad8e4831d5dea9ede44d7bcad7a0173e5ac7bec780e37e6577bf393054d01004018b4')
+
+pkgver() {
+  cd $pkgname
+  git describe --tags | sed 's/[^-]*-g/r&/;s/-/+/g'
+}
 
 prepare() {
   cd $pkgname
 }
 
 build() {
-  arch-meson $pkgname build
+  artix-meson $pkgname build
   meson compile -C build
 }
 


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -5,7 +5,6 @@
 gcc-libs
 git
 glib2
-glib2-devel
 glibc
 gobject-introspection
 gtk-doc

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,6 +2,6 @@
 cd $pkgname
 }
 build() {
-arch-meson $pkgname build
+artix-meson $pkgname build
 meson compile -C build
 }
