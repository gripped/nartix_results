--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,6 +1,6 @@
 
 pkgname=autopep8
-pkgver=2.1.0
+pkgver=2.0.4
 pkgrel=1
 epoch=1
 pkgdesc='A tool that automatically formats Python code to conform to the PEP 8 style guide'
@@ -10,6 +10,7 @@
 depends=(
   'python'
   'python-pycodestyle'
+  'python-tomli'
 )
 makedepends=(
   'git'
@@ -20,9 +21,15 @@
 )
 checkdepends=('python-pytest')
 _commit='8f12c0ab83c3dcc9eaf5078393dd2c53e1d253d2'
-source=("$pkgname::git+$url#tag=v$pkgver")
-sha512sums=('bd0b5b7dd3d680f06135f3d8a7af1c48059fdee5caa73f115137e62e25d0889206988a87ed86c2bd55bff6653c462e1bdfe2a8e9f8042b2f32fbef2e95b4eb07')
-b2sums=('5595d00c8b915b4e57e44606d0bd62238461a44db2fa91f0bb2205bb801a4de2a6ba372e33958d0c88b5f6dbe6b3c91cb518cd36cae9a077ba4ac9fc91a5b4fa')
+source=("$pkgname::git+$url#commit=$_commit")
+sha512sums=('SKIP')
+b2sums=('SKIP')
+
+pkgver() {
+  cd "$pkgname"
+
+  git describe --tags | sed 's/^v//'
+}
 
 build() {
   cd "$pkgname"


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -4,4 +4,5 @@
 python-installer
 python-pycodestyle
 python-setuptools
+python-tomli
 python-wheel