--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -2,7 +2,7 @@
 
 pkgname=blender
 pkgver=4.3.0
-pkgrel=4
+pkgrel=2
 epoch=17
 pkgdesc="A fully integrated 3D graphics creation suite"
 arch=('x86_64')
@@ -89,7 +89,6 @@
   'git'
   'git-lfs'
   'hip-runtime-amd'
-  'hiprt'
   'intel-oneapi-compiler-shared-runtime'
   'intel-oneapi-dpcpp-cpp'
   'intel-compute-runtime'
@@ -104,8 +103,6 @@
 )
 optdepends=('cuda: Cycles renderer CUDA support'
             'intel-compute-runtime: Cycles renderer Intel OneAPI support'
-            'hip-runtime-amd: Cycles renderer AMD ROCm support'
-            'hiprt: Ray tracing AMD ROCm support'
             'libdecor: wayland support')
 options=('!lto')
 source=("git+https://projects.blender.org/blender/blender.git#tag=v$pkgver"
@@ -115,8 +112,7 @@
         force-draco2.patch
         blender-4.11-mantaflow-python-3.12.patch
         ffmpeg-7-1.patch
-        ffmpeg-7-2.patch
-        hiprt-lib-path.patch)
+        ffmpeg-7-2.patch)
 sha512sums=('c13f4f37a65db6ee98c3d1fda493d7c3d1184eb7ac600c008f9cedbbc3fb61cb0ff83dc5c4a8404219a8c209ea06fac720c353211136b0191696c9c11cb78268'
             '01f3054383d12665975600c2ad4dfba1765a6a52a837c944a510c871c51268ab4368110f5ecd21d51670b65dcbbc1cf6f40a7b47bf7636bf414c71d2a7d5dfc1'
             '5502d9df847de12badc702c0444bd4f1f7620460b2235026df2c3133da1e04c148af0f1fc7f345e9a0c009c32f905f66c8d427743445e8864d3a797cdce6a483'
@@ -124,8 +120,7 @@
             'a3cc13d7fedc4421e9edfa37a29c237c55c74ca29f05d72480369d6bcde4a276f061de0398962d0529decffe69ff3e797b4b2d38e43d7cf73b9d72d1a9d01236'
             '59044954880ce94d7a1da78ccd03e61a9d23382281b2221ca5c9c7eec9caeecf810d10ee07940d5843b7540fa81c00df5a26e8076605410116815e73c60ab9b9'
             'ce67f8cb4857f3cc98759f00c226e1e0f81578a656e5772bd016fd0eee387f1fc0bc8e44b54e4ddef4df226d416f4ba2f7ef9e7ad02db36c968e727c986e3c4e'
-            'e1522345d6119ad396f27293b5f67b3a6d1b7352791186a04aeb654f285eeae873937f124461ff8dc9fc8ac5ae820cd8254bd4c3b64dcc06f1e41bee45f9bbe9'
-            '52dd6c4496af38505761e559adee556176aa2ad023f073618af77f6c9bc5e3a8faa59c8f259dc92302f7e650740afd2060951129408f1939d29c0901e8ccccae')
+            'e1522345d6119ad396f27293b5f67b3a6d1b7352791186a04aeb654f285eeae873937f124461ff8dc9fc8ac5ae820cd8254bd4c3b64dcc06f1e41bee45f9bbe9')
 
 prepare() {
   cd "$pkgname"
@@ -146,8 +141,6 @@
 
   patch -p1 -i "$srcdir"/ffmpeg-7-1.patch
   patch -p1 -i "$srcdir"/ffmpeg-7-2.patch
-
-  patch -p1 -i "$srcdir"/hiprt-lib-path.patch
 }
 
 _get_pyver() {
@@ -166,10 +159,7 @@
     -D WITH_LINKER_MOLD=ON
     -D CUDA_HOST_COMPILER="$NVCC_CCBIN"
     -D HIP_ROOT_DIR=/opt/rocm
-    -D WITH_CYCLES_HIP_BIANRIES=ON
-    -D WITH_CYCLES_DEVICE_HIPRT=ON
-    -D HIPRT_INCLUDE_DIR=/opt/rocm/include
-    -D HIP_LINKER_EXECUTABLE=/opt/rocm/lib/llvm/bin/clang++
+    -D CYCLES_HIP_BINARIES_ARCH="gfx900;gfx90c;gfx902;gfx1010;gfx1011;gfx1012;gfx1030;gfx1031;gfx1032;gfx1034;gfx1035;gfx1036;gfx1100;gfx1101;gfx1102;gfx1103"
     -D OCLOC_INSTALL_DIR=/usr
     -D OPTIX_ROOT_DIR="$srcdir"
     -D PYTHON_VERSION="$(_get_pyver)"


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -18,7 +18,6 @@
 gmp
 hicolor-icon-theme
 hip-runtime-amd
-hiprt
 imath
 intel-compute-runtime
 intel-oneapi-compiler-dpcpp-cpp-runtime-libs

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -12,7 +12,6 @@
 patch -p1 -i "$srcdir"/blender-4.11-mantaflow-python-3.12.patch
 patch -p1 -i "$srcdir"/ffmpeg-7-1.patch
 patch -p1 -i "$srcdir"/ffmpeg-7-2.patch
-patch -p1 -i "$srcdir"/hiprt-lib-path.patch
 }
 build() {
 export CXXFLAGS=${CXXFLAGS/-Wp,-D_GLIBCXX_ASSERTIONS/}
@@ -25,10 +24,7 @@
 -D WITH_LINKER_MOLD=ON
 -D CUDA_HOST_COMPILER="$NVCC_CCBIN"
 -D HIP_ROOT_DIR=/opt/rocm
--D WITH_CYCLES_HIP_BIANRIES=ON
--D WITH_CYCLES_DEVICE_HIPRT=ON
--D HIPRT_INCLUDE_DIR=/opt/rocm/include
--D HIP_LINKER_EXECUTABLE=/opt/rocm/lib/llvm/bin/clang++
+-D CYCLES_HIP_BINARIES_ARCH="gfx900;gfx90c;gfx902;gfx1010;gfx1011;gfx1012;gfx1030;gfx1031;gfx1032;gfx1034;gfx1035;gfx1036;gfx1100;gfx1101;gfx1102;gfx1103"
 -D OCLOC_INSTALL_DIR=/usr
 -D OPTIX_ROOT_DIR="$srcdir"
 -D PYTHON_VERSION="$(_get_pyver)"
