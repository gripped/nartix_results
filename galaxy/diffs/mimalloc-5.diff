--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,31 +1,25 @@
 
 pkgname=mimalloc
-pkgver=3.2.8
+pkgver=2.1.7
 pkgrel=1
 pkgdesc='General-purpose allocator with excellent performance characteristics'
-arch=(x86_64)
+arch=('x86_64')
 url='https://github.com/microsoft/mimalloc'
-license=(MIT)
-depends=(glibc)
-makedepends=(git cmake ninja)
-options=(staticlibs)
+license=('MIT')
+depends=('glibc')
+makedepends=('git' 'cmake')
 source=("$pkgname::git+$url#tag=v$pkgver")
-sha512sums=('6adaff8c3e392f7e0c08ec6e9e16ebc192d1b69703234d5ef5b47a19104045d9086859a350053c324ef1c0ea8ad3aee301e3635a72b23ecf122808a4d827036b')
-b2sums=('fdbef6dfd258dba1faec2f51857d2925f5deed7a8f9acedd0d1e2daf0526bb8c4fccf7765230ff99d8abd35daa95d95fae4bc3ef50650cd5a47949487cd99d41')
+sha512sums=('75d1ee7c25b6e53d1da25ab21b4140331cad4af72f7ff19e72f2a7c57715dfd3cbd4642b8f7cd5ae5a8695ed6a9592cb4cc20c340e09fb42abc619b245203c51')
+b2sums=('afa823bee649bce039f9cb70ab5e222dd17b967fcefaf215b43fa55bbed11d5369add2a1471f8d5f606c2d62b1c4fd9b2e5c0a7a924ea390cc7d321ab2f15e53')
 
 build() {
-  local cmake_options=(
-    -B build
-    -S "$pkgname"
-    -G Ninja
-    -W no-dev
-    -D CMAKE_BUILD_TYPE=Release
-    -D CMAKE_INSTALL_PREFIX=/usr
-    -D MI_BUILD_OBJECT=OFF
+  cmake \
+    -B build \
+    -S "$pkgname" \
+    -D CMAKE_INSTALL_PREFIX=/usr \
+    -D MI_BUILD_STATIC=OFF \
+    -D MI_BUILD_OBJECT=OFF \
     -D MI_INSTALL_TOPLEVEL=ON
-  )
-
-  cmake "${cmake_options[@]}"
 
   cmake --build build
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,4 +1,3 @@
 cmake
 git
 glibc
-ninja

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,14 +1,10 @@
 build() {
-local cmake_options=(
--B build
--S "$pkgname"
--G Ninja
--W no-dev
--D CMAKE_BUILD_TYPE=Release
--D CMAKE_INSTALL_PREFIX=/usr
--D MI_BUILD_OBJECT=OFF
+cmake \
+-B build \
+-S "$pkgname" \
+-D CMAKE_INSTALL_PREFIX=/usr \
+-D MI_BUILD_STATIC=OFF \
+-D MI_BUILD_OBJECT=OFF \
 -D MI_INSTALL_TOPLEVEL=ON
-)
-cmake "${cmake_options[@]}"
 cmake --build build
 }
