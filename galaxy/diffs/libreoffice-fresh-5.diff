--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,9 +4,9 @@
 
 pkgbase=libreoffice-fresh
 pkgname=('libreoffice-fresh-sdk' 'libreoffice-fresh')
-_LOver=26.2.0.3
-pkgver=26.2.0
-pkgrel=2
+_LOver=25.8.4.2
+pkgver=25.8.4
+pkgrel=3
 arch=('x86_64')
 license=('MPL-2.0' 'LGPL-3.0-or-later')
 url="https://www.libreoffice.org/"
@@ -17,7 +17,7 @@
     'libmspub' 'harfbuzz-icu' 'nss' 'hicolor-icon-theme'
     'gst-plugins-base-libs' 'sane' 'perl-archive-zip' 'zip' 'unzip' 'unixodbc' 'ant'
     'gperf' 'gtk3' 'gtk4' 'cppunit' 'beanshell' 'clucene'
-    'qt5-base' 'qt5-x11extras' 'md4c'
+    'qt5-base' 'qt5-x11extras'
     'qt6-base' 'qt6-multimedia' 'kio' 'kconfig' 'kcoreaddons' 'kwindowsystem' 'ki18n' 'kcoreaddons'
     'libmythes' 'libwpg'  'java-environment=17' 'postgresql-libs' 'mariadb-libs' 'libgl'
     'bluez-libs' 'gdb' 'doxygen'  'libatomic_ops'  'mdds'
@@ -27,7 +27,7 @@
     'libtommath' 'libzmf' 'xmlsec' 'rxvt-unicode' 'gpgme' 'libwebp'
     'libepubgen' 'libfreehand' 'libqxp' 'libstaroffice'  'boost' 'libnumbertext'
     'abseil-cpp' 'clang' 'zxing-cpp'
-    'libffi' 'git' 'python-setuptools' 'rhino' 'argon2' 'gpgmepp' 'fast_float'
+    'libffi' 'git' 'python-setuptools' 'rhino' 'argon2' 'gpgmepp'
 )
 options=('!lto') # using --enable-lto (for parallel link-time optimization)
 _mirror="https://download.documentfoundation.org/libreoffice/src/${pkgver}"
@@ -40,13 +40,11 @@
     ${_additional_source_url}/17410483b5b5f267aa18b7e00b65e6e0-hsqldb_1_8_0.zip
     ${_additional_source_url}/d8bd5eed178db6e2b18eeed243f85aa8-flute-1.1.6.zip
     ${_additional_source_url}/ba2930200c9f019c2d93a8c88c651a0f-flow-engine-0.9.4.zip
-    ${_additional_source_url}/pdfium-7471.tar.bz2
-    ${_additional_source_url}/afdko-4.0.3.tar.gz
-    ${_additional_source_url}/antlr4-cpp-runtime-4.13.2-source.zip
+    ${_additional_source_url}/pdfium-7012.tar.bz2
     ${_additional_source_url}/dtoa-20180411.tgz
     ${_additional_source_url}/lxml-4.1.1.tgz
     ${_additional_source_url}/Firebird-3.0.7.33374-0.tar.bz2
-    ${_additional_source_url}/skia-m142-f4ed99d2443962782cf5f8b4dd27179f131e7cbe.tar.xz
+    ${_additional_source_url}/skia-m136-28685d899b0a35894743e2cedad4c9f525e90e1e.tar.xz
     ${_additional_source_url}/box2d-2.4.1.tar.gz
     ${_additional_source_url}/dragonbox-1.1.3.tar.gz
     ${_additional_source_url}/frozen-1.2.0.tar.gz
@@ -56,21 +54,22 @@
     ${_additional_source_url2}/8249374c274932a21846fa7629c2aa9b-officeotron-0.7.4-master.jar  # for test suite
     ${_additional_source_url2}/odfvalidator-1.2.0-incubating-SNAPSHOT-jar-with-dependencies-971c54fd38a968f5860014b44301872706f9e540.jar # for test suite
     ${_additional_source_url2}/f543e6e2d7275557a839a164941c0a86e5f2c3f2a0042bfc434c88c6dde9e140-opens___.ttf
+    libreoffice-24.8.4.2-icu76_fixes-1.patch
+    orcus-0.21.0.patch
     soffice-template.desktop.in
-    libreoffice-fresh.sh libreoffice-fresh.csh)
+    libreoffice-fresh.sh libreoffice-fresh.csh
+    fix_build_with_poppler_26.01.0.patch)
 noextract=(a7983f859eafb2677d7ff386a023bc40-xsltml_2.1.2.zip
            0168229624cfac409e766913506961a8-ucpp-1.3.2.tar.gz
            language-subtag-registry-2021-03-05.tar.bz2
            17410483b5b5f267aa18b7e00b65e6e0-hsqldb_1_8_0.zip
            d8bd5eed178db6e2b18eeed243f85aa8-flute-1.1.6.zip
            ba2930200c9f019c2d93a8c88c651a0f-flow-engine-0.9.4.zip
-           pdfium-7471.tar.bz2
-           afdko-4.0.3.tar.gz
-           antlr4-cpp-runtime-4.13.2-source.zip
+           pdfium-7012.tar.bz2
            dtoa-20180411.tgz
            lxml-4.1.1.tgz
            Firebird-3.0.7.33374-0.tar.bz2
-           skia-m142-f4ed99d2443962782cf5f8b4dd27179f131e7cbe.tar.xz
+           skia-m136-28685d899b0a35894743e2cedad4c9f525e90e1e.tar.xz
            box2d-2.4.1.tar.gz
            dragonbox-1.1.3.tar.gz
            frozen-1.2.0.tar.gz
@@ -82,11 +81,11 @@
            f543e6e2d7275557a839a164941c0a86e5f2c3f2a0042bfc434c88c6dde9e140-opens___.ttf
 )
 validpgpkeys=('C2839ECAD9408FBE9531C3E9F434A1EFAFEEAEA3') # LibreOffice Build Team (CODE SIGNING KEY) <build@documentfoundation.org>
-sha256sums=('5b80ec8ed6726479e0f033c08c38f9df36fa20b15c575378d75ba0c373f15416'
+sha256sums=('1a33dd5888e0b5db648f608e1c6ed7581ec1784f565f38e5c537efa09eacf419'
             'SKIP'
-            'fa04daee947b2ddc5c3c67d39f603d34c0c13adc316d191866fe2ddd7ce9a30e'
+            '851eb8cee3344999a90fb740620c64261761f085ac3ab48c76ac3a3545102908'
             'SKIP'
-            '036acca4e7d44c1bd9f5272381bae95b173dd12ffa6e492a4a140cee28053064'
+            '26373dfea7e48a4e1423d2962f87864a1024a02e769781f642836d9c2f41c14c'
             'SKIP'
             '75823776fb51a9c526af904f1503a7afaaab900fba83eda64f8a41073724c870'
             '983941d31ee8d366085cadf28db75eb1f5cb03ba1e5853b98f12f7f51c63b776'
@@ -94,13 +93,11 @@
             'd30b13f4ba2e3b6a2d4f020c0dee0a9fb9fc6fbcc2d561f36b78da4bf3802370'
             '1b5b24f7bc543c0362b667692f78db8bab4ed6dafc6172f104d0bd3757d8a133'
             '233f66e8d25c5dd971716d4200203a612a407649686ef3b52075d04b4c9df0dd'
-            '7144b0fa78fd408997e7b84ffd3c257db602e392a1bb1584828d80e60b6b27c5'
-            '5feed7c2468e25b25fce0479c04af07f4ed2680bc9251bb4c4aef9ec2fba5720'
-            '0ed13668906e86dbc0dcddf30fdee68c10203dea4e83852b4edb810821bee3c4'
+            'e647ca4fcc2c91d9dca717452e1b1be1ab6155ac4977dca716041652c7b10bdd'
             '0082d0684f7db6f62361b76c4b7faba19e0c7ce5cb8e36c4b65fea8281e711b4'
             '940caef1ec7c78e0c34b0f6b94fe42d0f2022915ffc78643d28538a5cfd0f40e'
             'acb85cedafa10ce106b1823fb236b1b3e5d942a5741e8f8435cc8ccfec0afe76'
-            '45ae58e84fa2d1e261bfc980e1c5b7bbfaf83887e3813795bd343d3786f4d0bc'
+            '2384f5f44a0b714d8dc78923fdf17453ab5a1808ca638154e3e27b361531db25'
             'd6b4650ff897ee1ead27cf77a5933ea197cbeef6705638dd181adc2e816b23c2'
             '09d63b05e9c594ec423778ab59b7a5aa1d76fdd71d25c7048b0258c4ec9c3384'
             'ed8339c017d7c5fe019ac2c642477f435278f0dc643c1d69d3f3b1e95915e823'
@@ -110,9 +107,12 @@
             'f2443f27561af52324eee03a1892d9f569adc8db9e7bca55614898bc2a13a770'
             '984f2a479df79e27e7b01a5815ac53ae64e07746b882262d8a64566494515504'
             'f543e6e2d7275557a839a164941c0a86e5f2c3f2a0042bfc434c88c6dde9e140'
+            '5c67449d7f7d43b66063780650ebf8954e59164c38b36883078e36c11fde82de'
+            '76896e6d3a8f52650ea2c8184b001cdb6f5eb7792803835dfc664e7ba23df923'
             'd0be8099cbee3c9dfda694a828149b881c345b204ab68826f317580aafb50879'
             '9fb33dbc3ffeb6af2ea7341b58242142d4eca903584c21c5f4b44ff27fbf5b5f'
-            '512355b5ef646791089da8c2b35cf8b019673c0c8a58685962af3b5d9eb5d6bb')
+            '512355b5ef646791089da8c2b35cf8b019673c0c8a58685962af3b5d9eb5d6bb'
+            '04c3e77cd357b5f6ff2c53eb398a902b0219b8bfe9f169eae9c70748cd46d9d0')
 
 prepare() {
 
@@ -123,6 +123,12 @@
     ln -s "${srcdir}"/$source .
     done
     popd
+
+    patch -Np1 -i "${srcdir}"/libreoffice-24.8.4.2-icu76_fixes-1.patch
+
+    patch -Np1 -i "${srcdir}"/orcus-0.21.0.patch
+
+    patch -Np1 -i "${srcdir}"/fix_build_with_poppler_26.01.0.patch
 
     for i in $CFLAGS; do
         case "$i" in
@@ -145,6 +151,7 @@
 
     export CFLAGS="${CFLAGS/_FORTIFY_SOURCE=3/_FORTIFY_SOURCE=2}"
     export CXXFLAGS="${CXXFLAGS/_FORTIFY_SOURCE=3/_FORTIFY_SOURCE=2}"
+
 
     ./autogen.sh --with-extra-buildid="${pkgver}-${pkgrel}" \
         --with-vendor="Arch Linux" \
@@ -201,7 +208,6 @@
         --with-system-libebook \
         --with-system-libabw \
         --with-system-coinmp \
-        --with-system-fast-float \
         --with-system-dicts \
         --with-external-dict-dir=/usr/share/hunspell \
         --with-external-hyph-dir=/usr/share/hyphen \
@@ -236,7 +242,6 @@
         --without-system-java-websocket \
         --with-system-rhino \
         --without-system-libeot \
-        --without-system-afdko \
         --with-gdrive-client-id=${_google_default_client_id} \
         --with-gdrive-client-secret=${_google_default_client_secret} \
         --disable-dependency-tracking
@@ -286,7 +291,7 @@
         'zxing-cpp' 'xdg-utils'
         'libldap' 'fontconfig' 'zlib' 'libpng' 'freetype2' 'raptor' 'libxml2'
         'cairo' 'libx11' 'expat' 'glib2' 'boost-libs' 'libtiff' 'dbus' 'glibc'
-        'librevenge' 'libxext' 'openjpeg2' 'argon2' 'md4c')
+        'librevenge' 'libxext' 'openjpeg2' 'argon2')
     optdepends=('java-runtime:     adds java support'
         'java-environment>=17: required by extension-wiki-publisher and extension-nlpsolver'
         'pstoedit:         translates PostScript and PDF graphics into other vector formats'


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -16,7 +16,6 @@
 desktop-file-utils
 doxygen
 expat
-fast_float
 fontconfig
 freetype2
 gcc
@@ -91,7 +90,6 @@
 lpsolve
 make
 mariadb-libs
-md4c
 mdds
 neon>
 nspr

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -5,6 +5,9 @@
 ln -s "${srcdir}"/$source .
 done
 popd
+patch -Np1 -i "${srcdir}"/libreoffice-24.8.4.2-icu76_fixes-1.patch
+patch -Np1 -i "${srcdir}"/orcus-0.21.0.patch
+patch -Np1 -i "${srcdir}"/fix_build_with_poppler_26.01.0.patch
 for i in $CFLAGS; do
 case "$i" in
 -pipe|-Wall|-Werror*|-fexceptions) continue;;
@@ -77,7 +80,6 @@
 --with-system-libebook \
 --with-system-libabw \
 --with-system-coinmp \
---with-system-fast-float \
 --with-system-dicts \
 --with-external-dict-dir=/usr/share/hunspell \
 --with-external-hyph-dir=/usr/share/hyphen \
@@ -112,7 +114,6 @@
 --without-system-java-websocket \
 --with-system-rhino \
 --without-system-libeot \
---without-system-afdko \
 --with-gdrive-client-id=${_google_default_client_id} \
 --with-gdrive-client-secret=${_google_default_client_secret} \
 --disable-dependency-tracking
