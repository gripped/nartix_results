--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,34 +1,47 @@
 
 pkgname=ly
-pkgver=1.0.0
-pkgrel=2
+pkgver=0.6.0
+pkgrel=1
+_tag=1c2be475ad09af18e632609c779d508e7fb866f9
 pkgdesc="TUI display manager"
 arch=(x86_64)
 url="https://github.com/fairyglade/ly"
-license=('WTFPL')
-depends=(pam glibc)
-makedepends=(git libxcb zig)
+license=('custom:WTFPL')
+depends=(pam)
+makedepends=(git libxcb)
 optdepends=('xorg-xauth: for X server sessions'
             'libxcb: for X server sessions')
 backup=(etc/$pkgname/{config.ini,wsetup.sh,xsetup.sh})
-source=("git+$url.git#tag=v${pkgver}")
-b2sums=('b44536c57e3464ffbb45d12cee54bad00b5eb31873fdd79c81222640ecab5df34b9a587232e5db760561f3f2d33af872456d3a3b92ef2a414b8dbf4fc6a70725')
+source=("git+$url.git#tag=$_tag"
+        "git+https://github.com/nullgemm/argoat.git"
+        "git+https://github.com/nullgemm/configator.git"
+        "git+https://github.com/nullgemm/dragonfail.git"
+        "git+https://github.com/nullgemm/termbox_next.git")
+b2sums=('SKIP'
+        'SKIP'
+        'SKIP'
+        'SKIP'
+        'SKIP')
 
 prepare() {
     cd "$pkgname"
-    git cherry-pick -n cbe7b37564f307fddfeba3732c68d5024d30f4f7
+    git submodule init
+
+    git config submodule.sub/argoat.url "$srcdir/argoat"
+    git config submodule.sub/configator.url "$srcdir/configator"
+    git config submodule.sub/dragonfail.url "$srcdir/dragonfail"
+    git config submodule.sub/termbox_next.url "$srcdir/termbox_next"
+
+    git -c protocol.file.allow=always submodule update
 }
 
 build() {
-    cd "$pkgname"
-    zig build -Ddest_directory="$pkgdir" -Dname="ly-dm" -Dcpu=baseline
+    make -C "$pkgname"
 }
 
 package() {
     cd "$pkgname"
-    zig build -Ddest_directory="$pkgdir" -Dname="ly-dm" -Dcpu=baseline installsystemd
-    chmod 644 "$pkgdir/etc/pam.d/ly" "$pkgdir/usr/lib/systemd/system/ly.service"
+    make DESTDIR="$pkgdir" NAME=ly-dm install installsystemd
     sed -i "s;/usr/bin/ly;/usr/bin/ly-dm;g" "$pkgdir/usr/lib/systemd/system/ly.service"
-
     install -Dm644 license.md "$pkgdir/usr/share/licenses/$pkgname/WTFPL"
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,5 +1,3 @@
 git
-glibc
 libxcb
 pam
-zig

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,8 +1,12 @@
 prepare() {
 cd "$pkgname"
-git cherry-pick -n cbe7b37564f307fddfeba3732c68d5024d30f4f7
+git submodule init
+git config submodule.sub/argoat.url "$srcdir/argoat"
+git config submodule.sub/configator.url "$srcdir/configator"
+git config submodule.sub/dragonfail.url "$srcdir/dragonfail"
+git config submodule.sub/termbox_next.url "$srcdir/termbox_next"
+git -c protocol.file.allow=always submodule update
 }
 build() {
-cd "$pkgname"
-zig build -Ddest_directory="$pkgdir" -Dname="ly-dm" -Dcpu=baseline
+make -C "$pkgname"
 }
