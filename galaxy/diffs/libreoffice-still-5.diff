--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -4,9 +4,9 @@
 
 pkgbase=libreoffice-still
 pkgname=('libreoffice-still-sdk' 'libreoffice-still')
-_LOver=24.2.7.2
-pkgver=24.2.7
-pkgrel=5
+_LOver=24.8.4.2
+pkgver=24.8.4
+pkgrel=1
 arch=('x86_64')
 license=('MPL-2.0' 'LGPL-3.0-or-later')
 url="https://www.libreoffice.org/"
@@ -18,7 +18,7 @@
     'gst-plugins-base-libs' 'sane' 'perl-archive-zip' 'zip' 'unzip' 'unixodbc' 'ant'
     'gperf' 'gtk3' 'gtk4' 'cppunit' 'beanshell' 'clucene'
     'qt5-base' 'qt5-x11extras'
-    'qt6-base' 'kio' 'kconfig' 'kcoreaddons' 'kwindowsystem' 'ki18n' 'kcoreaddons'
+    'qt6-base' 'qt6-multimedia' 'kio' 'kconfig' 'kcoreaddons' 'kwindowsystem' 'ki18n' 'kcoreaddons'
     'libmythes' 'libwpg'  'java-environment=17' 'postgresql-libs' 'mariadb-libs' 'libgl'
     'bluez-libs' 'gdb' 'doxygen'  'libatomic_ops'  'mdds'
     'ttf-liberation' 'ttf-dejavu' 'ttf-carlito' 'libxinerama' 'libpagemaker' 'glm'
@@ -27,22 +27,20 @@
     'libtommath' 'libzmf' 'xmlsec' 'rxvt-unicode' 'gpgme' 'libwebp'
     'libepubgen' 'libfreehand' 'libqxp' 'libstaroffice'  'boost' 'libnumbertext'
     'abseil-cpp' 'clang' 'zxing-cpp'
-    'libffi' 'git' 'python-setuptools'
+    'libffi' 'git' 'python-setuptools' 'rhino' 'argon2'
 )
 options=('!lto') # using --enable-lto (for parallel link-time optimization)
 _mirror="https://download.documentfoundation.org/libreoffice/src/${pkgver}"
 _additional_source_url="https://dev-www.libreoffice.org/src"
 _additional_source_url2="https://dev-www.libreoffice.org/extern"
 source=(${_mirror}/libreoffice{,-help,-translations}-${_LOver}.tar.xz{,.asc}
-    ${_additional_source_url}/35c94d2df8893241173de1d16b6034c0-swingExSrc.zip
-    ${_additional_source_url}/798b2ffdc8bcfe7bca2cf92b62caf685-rhino1_5R5.zip # keep old bundled version, new system version ftbs
     ${_additional_source_url}/a7983f859eafb2677d7ff386a023bc40-xsltml_2.1.2.zip
     ${_additional_source_url}/0168229624cfac409e766913506961a8-ucpp-1.3.2.tar.gz
     ${_additional_source_url}/language-subtag-registry-2021-03-05.tar.bz2
     ${_additional_source_url}/17410483b5b5f267aa18b7e00b65e6e0-hsqldb_1_8_0.zip
     ${_additional_source_url}/d8bd5eed178db6e2b18eeed243f85aa8-flute-1.1.6.zip
     ${_additional_source_url}/ba2930200c9f019c2d93a8c88c651a0f-flow-engine-0.9.4.zip
-    ${_additional_source_url}/pdfium-6179.tar.bz2
+    ${_additional_source_url}/pdfium-6425.tar.bz2
     ${_additional_source_url}/dtoa-20180411.tgz
     ${_additional_source_url}/lxml-4.1.1.tgz
     ${_additional_source_url}/Firebird-3.0.7.33374-0.tar.bz2
@@ -51,24 +49,20 @@
     ${_additional_source_url}/dragonbox-1.1.3.tar.gz
     ${_additional_source_url}/frozen-1.1.1.tar.gz
     ${_additional_source_url}/zxcvbn-c-2.5.tar.gz
-    ${_additional_source_url}/Java-WebSocket-1.5.4.tar.gz
+    ${_additional_source_url}/Java-WebSocket-1.5.6.tar.gz
     ${_additional_source_url2}/8249374c274932a21846fa7629c2aa9b-officeotron-0.7.4-master.jar  # for test suite
     ${_additional_source_url2}/odfvalidator-1.2.0-incubating-SNAPSHOT-jar-with-dependencies-971c54fd38a968f5860014b44301872706f9e540.jar # for test suite
     ${_additional_source_url2}/f543e6e2d7275557a839a164941c0a86e5f2c3f2a0042bfc434c88c6dde9e140-opens___.ttf
-    623ea5c.diff
-    libreoffice-7.5.8.2-icu-74-compatibility.patch
     poppler24.12-buildfix.patch
     soffice-template.desktop.in
     libreoffice-still.sh libreoffice-still.csh)
-noextract=(35c94d2df8893241173de1d16b6034c0-swingExSrc.zip
-           798b2ffdc8bcfe7bca2cf92b62caf685-rhino1_5R5.zip
-           a7983f859eafb2677d7ff386a023bc40-xsltml_2.1.2.zip
+noextract=(a7983f859eafb2677d7ff386a023bc40-xsltml_2.1.2.zip
            0168229624cfac409e766913506961a8-ucpp-1.3.2.tar.gz
            language-subtag-registry-2021-03-05.tar.bz2
            17410483b5b5f267aa18b7e00b65e6e0-hsqldb_1_8_0.zip
            d8bd5eed178db6e2b18eeed243f85aa8-flute-1.1.6.zip
            ba2930200c9f019c2d93a8c88c651a0f-flow-engine-0.9.4.zip
-           pdfium-6179.tar.bz2
+           pdfium-6425.tar.bz2
            dtoa-20180411.tgz
            lxml-4.1.1.tgz
            Firebird-3.0.7.33374-0.tar.bz2
@@ -77,27 +71,25 @@
            dragonbox-1.1.3.tar.gz
            frozen-1.1.1.tar.gz
            zxcvbn-c-2.5.tar.gz
-           Java-WebSocket-1.5.4.tar.gz
+           Java-WebSocket-1.5.6.tar.gz
            8249374c274932a21846fa7629c2aa9b-officeotron-0.7.4-master.jar  # for test suite
            odfvalidator-1.2.0-incubating-SNAPSHOT-jar-with-dependencies-971c54fd38a968f5860014b44301872706f9e540.jar  # for test suite
            f543e6e2d7275557a839a164941c0a86e5f2c3f2a0042bfc434c88c6dde9e140-opens___.ttf
 )
 validpgpkeys=('C2839ECAD9408FBE9531C3E9F434A1EFAFEEAEA3') # LibreOffice Build Team (CODE SIGNING KEY) <build@documentfoundation.org>
-sha256sums=('f5e9b12cedea211d60fb7cce21bed80483c43321d81977dc76e01fedca4310e5'
+sha256sums=('1564de2ea39aa91a66315c051058e43a0be4536ae88c43fdf0f8ce0ebe081a17'
             'SKIP'
-            'ba4132e54b1405da7978f5a5e81e95a209bc3f756f00f17a60a5c95eabeb613c'
+            'f00e4bfada8fa10b6fc60524429e06124e7118664be6e26cae3bd61e5cbc097c'
             'SKIP'
-            '58fa54ef04863621d219042af6287392aaff868163cb820c1d1ef63734ba5c3c'
+            '8d525b83bb5b2a8f831bb40dd0f7eeea35e134d204d590c85af22756b0a8047d'
             'SKIP'
-            '64585ac36a81291a58269ec5347e7e3e2e8596dbacb9221015c208191333c6e1'
-            '1fb458d6aab06932693cc8a9b6e4e70944ee1ff052fa63606e3131df34e21753'
             '75823776fb51a9c526af904f1503a7afaaab900fba83eda64f8a41073724c870'
             '983941d31ee8d366085cadf28db75eb1f5cb03ba1e5853b98f12f7f51c63b776'
             'ce80e8face06bf2ada363e0c159e3f990c4116fdae9232ca43e6369aa82bf16a'
             'd30b13f4ba2e3b6a2d4f020c0dee0a9fb9fc6fbcc2d561f36b78da4bf3802370'
             '1b5b24f7bc543c0362b667692f78db8bab4ed6dafc6172f104d0bd3757d8a133'
             '233f66e8d25c5dd971716d4200203a612a407649686ef3b52075d04b4c9df0dd'
-            '4d3f08fe0e2fda86246832085426616826dcca0912202874428bfbc24d13d95c'
+            'fe0291b96d7352bac530d13ef2e5fd63ad9980e0128911f88b957b5992508f1c'
             '0082d0684f7db6f62361b76c4b7faba19e0c7ce5cb8e36c4b65fea8281e711b4'
             '940caef1ec7c78e0c34b0f6b94fe42d0f2022915ffc78643d28538a5cfd0f40e'
             'acb85cedafa10ce106b1823fb236b1b3e5d942a5741e8f8435cc8ccfec0afe76'
@@ -106,13 +98,11 @@
             '09d63b05e9c594ec423778ab59b7a5aa1d76fdd71d25c7048b0258c4ec9c3384'
             'f7c7075750e8fceeac081e9ef01944f221b36d9725beac8681cbd2838d26be45'
             '77d6c6ecb35952a8d8ce7f736b7a2bf466275c48210e309b73782d6b7e84dffd'
-            'a6828b35d1f938fee2335945f3d3c563cbbfa58ce7eb0bf72778d0fa7a550720'
+            '167e86561cd7b5ed21b67d7543536134edcb14b373892739b28c417566a3832f'
             'f2443f27561af52324eee03a1892d9f569adc8db9e7bca55614898bc2a13a770'
             '984f2a479df79e27e7b01a5815ac53ae64e07746b882262d8a64566494515504'
             'f543e6e2d7275557a839a164941c0a86e5f2c3f2a0042bfc434c88c6dde9e140'
-            '440c9af5f3d1213d8ed7177282380f25cbc981cabc8b590dcb777aaae84178e5'
-            'd7b952a51e1e40d3faf2f465b68f46d56828d8c46948748fa82fe82a29af2599'
-            'cb23909b693dbf32dc8dcd964f0f2ea84b3f8b2c21f718474a553ce90e0751fe'
+            'df1ea9e1bfdd91af43d2240eeb70e2985a5d77797f379f656c420fcccf3f673a'
             'd0be8099cbee3c9dfda694a828149b881c345b204ab68826f317580aafb50879'
             '9fb33dbc3ffeb6af2ea7341b58242142d4eca903584c21c5f4b44ff27fbf5b5f'
             '512355b5ef646791089da8c2b35cf8b019673c0c8a58685962af3b5d9eb5d6bb')
@@ -126,11 +116,6 @@
     ln -s "${srcdir}"/$source .
     done
     popd
-
-    patch -Np1 -i "${srcdir}"/623ea5c.diff
-
-    patch -Np1 -i "${srcdir}"/libreoffice-7.5.8.2-icu-74-compatibility.patch
-    sed -i "109d" i18npool/source/breakiterator/data/sent.txt
 
     patch -Np1 -i "${srcdir}"/poppler24.12-buildfix.patch
 
@@ -155,10 +140,6 @@
 
     export CFLAGS="${CFLAGS/_FORTIFY_SOURCE=3/_FORTIFY_SOURCE=2}"
     export CXXFLAGS="${CXXFLAGS/_FORTIFY_SOURCE=3/_FORTIFY_SOURCE=2}"
-
-    CPPFLAGS+=' -DU_USING_ICU_NAMESPACE=1'
-
-    export qt6_libexec_dirs="/usr/lib/qt6"
 
     ./autogen.sh --with-extra-buildid="${pkgver}-${pkgrel}" \
         --with-vendor="Arch Linux" \
@@ -246,6 +227,7 @@
         --without-system-libfixmath \
         --without-system-frozen \
         --without-system-zxcvbn \
+        --with-system-rhino \
         --with-gdrive-client-id=${_google_default_client_id} \
         --with-gdrive-client-secret=${_google_default_client_secret} \
         --disable-dependency-tracking
@@ -260,7 +242,7 @@
 
 package_libreoffice-still-sdk() {
     pkgdesc="Software Development Kit for LibreOffice maintenance branch"
-    depends=('libreoffice-still' 'gcc-libs' 'sh' 'make' 'zip' 'gcc' 'java-environment')
+    depends=('libreoffice-still' 'gcc-libs' 'sh' 'make' 'zip' 'gcc' 'java-environment' 'glibc')
     provides=('libreoffice-sdk')
     conflicts=('libreoffice-fresh-sdk')
 
@@ -300,7 +282,7 @@
         'java-environment>=17: required by extension-wiki-publisher and extension-nlpsolver'
         'pstoedit:         translates PostScript and PDF graphics into other vector formats'
         'libmythes:        for use in thesaurus'
-        'beanshell:       interactive java -- good for prototyping/macros'
+        'beanshell:        interactive java -- good for prototyping/macros'
         'libwpg:           library for importing and converting WordPerfect Graphics format'
         'sane:             for scanner access'
         'unixodbc:         adds ODBC database support'
@@ -311,7 +293,10 @@
         'coin-or-mp:       required by the Calc solver'
         'gtk3:             for GTK3 integration'
         'gtk4:             for GTK4 integration (experimental)'
-        'qt6-base:         for Qt6 desktop integration')
+        'qt5-x11extras:    for Qt5 desktop integration'
+        'kio:              for KF6 KDE desktop integration'
+        'qt6-multimedia:   for Qt6 desktop integration'
+        'rhino:            for JavaScript support')
     backup=(etc/libreoffice/sofficerc
         etc/libreoffice/bootstraprc
         etc/libreoffice/psprint.conf
@@ -348,7 +333,6 @@
         mv -f "${pkgdir}"/usr/lib/libreoffice/program/unohelper.py* .
         mv -f "${pkgdir}"/usr/lib/libreoffice/program/officehelper.py* .
     popd
-
 
     ln -svf /usr/lib/libreoffice/program/liblibreofficekitgtk.so \
         "${pkgdir}"/usr/lib/liblibreofficekitgtk.so


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -103,8 +103,10 @@
 qt5-base
 qt5-x11extras
 qt6-base
+qt6-multimedia
 raptor
 redland
+rhino
 rxvt-unicode
 sane
 sh

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -5,9 +5,6 @@
 ln -s "${srcdir}"/$source .
 done
 popd
-patch -Np1 -i "${srcdir}"/623ea5c.diff
-patch -Np1 -i "${srcdir}"/libreoffice-7.5.8.2-icu-74-compatibility.patch
-sed -i "109d" i18npool/source/breakiterator/data/sent.txt
 patch -Np1 -i "${srcdir}"/poppler24.12-buildfix.patch
 for i in $CFLAGS; do
 case "$i" in
@@ -26,8 +23,6 @@
 CXXFLAGS=${CXXFLAGS/-g /-g1 }
 export CFLAGS="${CFLAGS/_FORTIFY_SOURCE=3/_FORTIFY_SOURCE=2}"
 export CXXFLAGS="${CXXFLAGS/_FORTIFY_SOURCE=3/_FORTIFY_SOURCE=2}"
-CPPFLAGS+=' -DU_USING_ICU_NAMESPACE=1'
-export qt6_libexec_dirs="/usr/lib/qt6"
 ./autogen.sh --with-extra-buildid="${pkgver}-${pkgrel}" \
 --with-vendor="Arch Linux" \
 --enable-split-app-modules \
@@ -114,6 +109,7 @@
 --without-system-libfixmath \
 --without-system-frozen \
 --without-system-zxcvbn \
+--with-system-rhino \
 --with-gdrive-client-id=${_google_default_client_id} \
 --with-gdrive-client-secret=${_google_default_client_secret} \
 --disable-dependency-tracking
