--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,12 +1,10 @@
 
 pkgbase=linux-zen
-pkgver=6.18.13.zen1
-pkgrel=1
+pkgver=6.18.9.zen1
+pkgrel=2
 pkgdesc='Linux ZEN'
 url='https://github.com/zen-kernel/zen-kernel'
-arch=(
-  x86_64
-)
+arch=(x86_64)
 license=(GPL-2.0-only)
 makedepends=(
   bc
@@ -37,25 +35,25 @@
 source=(
   https://cdn.kernel.org/pub/linux/kernel/v${pkgver%%.*}.x/${_srcname}.tar.{xz,sign}
   $url/releases/download/$_srctag/linux-$_srctag.patch.zst{,.sig}
-)
-source_x86_64=(config.x86_64)
+  config  # the main kernel config file
+)
 validpgpkeys=(
   ABAF11C65A2970B130ABE3C479BE3E4300411886  # Linus Torvalds
   647F28654894E3BD457199BE38DBBDC86092693E  # Greg Kroah-Hartman
   83BC8889351B5DEBBB68416EB8AC08600F108CDF  # Jan Alexander Steffens (heftig)
 )
-b2sums=('1b97badce04dcc6a9e674a646e1eec5b2fa31a442856af748de730946113b2549d31ccf24417d0702142bdbde6636d874db7dd6f274f513f973c97e0866a3c34'
+sha256sums=('030115ff8fb4cb536d8449dc40ebc3e314e86ba1b316a6ae21091a11cc930578'
+            'SKIP'
+            '6de083ccfbe1283715c30876a53e3a92c8aa702b6023c6a471e5d008b30f78ca'
+            'SKIP'
+            'e6b2d169833144e944d1a1ca48c3f9288e6b9b81e79947f4211d59c35155dc15')
+b2sums=('9aed902e41583597cb7595efe77504630a621993d20f89365a93cf2ea4d9790a6361d93cbb7fd7603881a4f82b76394b7e12fb4e4a88c9fedb2d63d64a9d49d3'
         'SKIP'
-        '6e2b9aee38752e3db223d83a0dee333392cfba83d07d5deb826170caa532330005ba92047689853eb15153aef8216715d506a609c65a0b9b42ebd98194459cb5'
-        'SKIP')
-b2sums_x86_64=('9ea5218c1711bdf368564231c7e8f0ac34a284e2bdc4c8bf89f5cad0f88ae9392bf970b64b70184906b48e96bd1d57207f9dac075abd101d0b7622e8f53b33ee')
-
-sha256sums=('ed2c3c55fd38e6836c094fce356f2567f9516130b73354a29857960368c5687f'
-            'SKIP'
-            'd8562fbc8a1fa8742ad2e8f756657921919ef30b1dfb240f293a9c2d734c3ce2'
-            'SKIP')
-
-export KBUILD_BUILD_HOST=archlinux
+        '9034b7a407d863d868506234702b7572e6de65110e4aecefb56dc5362dbf0a4088c2b97069b275cda75ce244782a1f348e6f838dbe25fbd4abbf4a2175473b8e'
+        'SKIP'
+        '823956f56477d31ade7540c66961f8522e96c9dd2f2d3437910fe8e4944d19b591c9caa810cb061cebbc2a263505c9954d6efb6ec6a832da74a45189b1ad023a')
+
+export KBUILD_BUILD_HOST=artixlinux
 export KBUILD_BUILD_USER=$pkgbase
 export KBUILD_BUILD_TIMESTAMP="$(date -Ru${SOURCE_DATE_EPOCH:+d @$SOURCE_DATE_EPOCH})"
 
@@ -77,9 +75,9 @@
   done
 
   echo "Setting config..."
-  cp ../config.$CARCH .config
+  cp ../config .config
   make olddefconfig
-  diff -u ../config.$CARCH .config || :
+  diff -u ../config .config || :
 
   make -s kernelrelease > version
   echo "Prepared $pkgbase version $(<version)"
@@ -100,7 +98,6 @@
     kmod
   )
   optdepends=(
-    "$pkgbase-headers: headers and scripts for building modules"
     'linux-firmware: firmware images needed for some devices'
     'scx-scheds: to use sched-ext schedulers'
     'wireless-regdb: to set the correct wireless channels of your country'
@@ -138,32 +135,22 @@
   cd $_srcname
   local builddir="$pkgdir/usr/lib/modules/$(<version)/build"
 
-  local karch
-  case $CARCH in
-    x86_64) karch=x86 ;;
-    *) echo "Unknown CARCH $CARCH"; exit 1 ;;
-  esac
-
   echo "Installing build files..."
   install -Dt "$builddir" -m644 .config Makefile Module.symvers System.map \
     localversion.* version vmlinux tools/bpf/bpftool/vmlinux.h
   install -Dt "$builddir/kernel" -m644 kernel/Makefile
-  install -Dt "$builddir/arch/$karch" -m644 arch/$karch/Makefile
+  install -Dt "$builddir/arch/x86" -m644 arch/x86/Makefile
   cp -t "$builddir" -a scripts
   ln -srt "$builddir" "$builddir/scripts/gdb/vmlinux-gdb.py"
 
-  if [[ $(scripts/config -s CONFIG_HAVE_STACK_VALIDATION) = y ]]; then
-    install -Dt "$builddir/tools/objtool" tools/objtool/objtool
-  fi
-
-  if [[ $(scripts/config -s CONFIG_DEBUG_INFO_BTF_MODULES) = y ]]; then
-    install -Dt "$builddir/tools/bpf/resolve_btfids" tools/bpf/resolve_btfids/resolve_btfids
-  fi
+  install -Dt "$builddir/tools/objtool" tools/objtool/objtool
+
+  install -Dt "$builddir/tools/bpf/resolve_btfids" tools/bpf/resolve_btfids/resolve_btfids
 
   echo "Installing headers..."
   cp -t "$builddir" -a include
-  cp -t "$builddir/arch/$karch" -a arch/$karch/include
-  install -Dt "$builddir/arch/$karch/kernel" -m644 arch/$karch/kernel/asm-offsets.s
+  cp -t "$builddir/arch/x86" -a arch/x86/include
+  install -Dt "$builddir/arch/x86/kernel" -m644 arch/x86/kernel/asm-offsets.s
 
   install -Dt "$builddir/drivers/md" -m644 drivers/md/*.h
   install -Dt "$builddir/net/mac80211" -m644 net/mac80211/*.h
@@ -180,10 +167,8 @@
   find . -name 'Kconfig*' -exec install -Dm644 {} "$builddir/{}" \;
 
   echo "Installing Rust files..."
-  if [[ $(scripts/config -s CONFIG_RUST) = y ]]; then
-    install -Dt "$builddir/rust" -m644 rust/*.rmeta
-    install -Dt "$builddir/rust" rust/*.so
-  fi
+  install -Dt "$builddir/rust" -m644 rust/*.rmeta
+  install -Dt "$builddir/rust" rust/*.so
 
   echo "Installing unstripped VDSO..."
   make INSTALL_MOD_PATH="$pkgdir/usr" vdso_install \
@@ -192,7 +177,7 @@
   echo "Removing unneeded architectures..."
   local arch
   for arch in "$builddir"/arch/*/; do
-    [[ $arch = */$karch/ ]] && continue
+    [[ $arch = */x86/ ]] && continue
     echo "Removing $(basename "$arch")"
     rm -r "$arch"
   done


############# Stripped diff below #################



--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -13,9 +13,9 @@
 patch -Np1 < "../$src"
 done
 echo "Setting config..."
-cp ../config.$CARCH .config
+cp ../config .config
 make olddefconfig
-diff -u ../config.$CARCH .config || :
+diff -u ../config .config || :
 make -s kernelrelease > version
 echo "Prepared $pkgbase version $(<version)"
 }
