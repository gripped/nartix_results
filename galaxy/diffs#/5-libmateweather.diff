--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,56 +1,40 @@
 
 pkgname=libmateweather
-pkgver=1.28.2
-pkgrel=2
-pkgdesc='Provides access to weather information from the Internet'
-arch=(x86_64)
-url='https://github.com/mate-desktop/libmateweather'
-license=(GPL-2.0-or-later)
-depends=(
-  dconf
-  gdk-pixbuf2
-  glib2
-  glibc
-  gtk3
-  hicolor-icon-theme
-  libsoup3
-  libxml2
-)
-makedepends=(
-  git
-  glib2-devel
-  gtk-doc
-  tar
-)
-source=(
-  "git+https://github.com/mate-desktop/libmateweather#tag=v$pkgver"
-  libmateweather-libsoup3.patch
-)
-b2sums=(
-  af967ea1debb57f97746811c2edf74d8a8f72b8879f603439a7b188634296c868f608269b66e2dff6d06d203679a8bdcf6221161b5e43ee162daef888fb70239
-  59552942ed4f0887e76b271cfe67a519f6bdc48754311b498e16174a8126109097beae02728ea492ecf092ed9286a9178b2ecb6d50841a76ee73c87b3fbc4954
-)
+pkgver=1.28.0
+pkgrel=3
+pkgdesc="Provides access to weather information from the Internet."
+url="https://mate-desktop.org"
+arch=('x86_64')
+license=('LGPL')
+depends=('gtk3' 'libsoup3' 'gettext')
+makedepends=('git' 'glib2-devel' 'gtk-doc')
+conflicts=('libmateweather-gtk3')
+replaces=('libmateweather-gtk3')
+source=(git+https://github.com/mate-desktop/libmateweather#tag=v$pkgver)
+sha256sums=('5914bbaf84fcb578933cf48772c9cf0d0009ff75bb3c38448036ba591548b021')
 
 prepare() {
-  cd $pkgname
+    	cd "${pkgname}"
 
-  git apply -3 ../libmateweather-libsoup3.patch
+    	git cherry-pick -n c1c54a15545f13f3dabd2bcd303533d818905c7b
 
-  autoreconf -fiv
+    	autoreconf -fiv
 }
 
 build() {
-  cd $pkgname
-  ./configure \
-    --prefix=/usr \
-    --sysconfdir=/etc \
-    --localstatedir=/var \
-    --enable-locations-compression \
-    --enable-gtk-doc
-  make
+    	cd "${pkgname}"
+    	./configure \
+        	--prefix=/usr \
+        	--sysconfdir=/etc \
+        	--localstatedir=/var \
+        	--enable-locations-compression
+
+    	sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
+
+    	make
 }
 
 package() {
-  cd $pkgname
-  make DESTDIR="$pkgdir" install
+    	cd "${pkgname}"
+    	make DESTDIR="${pkgdir}" install
 }


############# Stripped diff below #################

--- arch_depends
+++ artix_depends
@@ -1,12 +1,6 @@
-dconf
-gdk-pixbuf2
+gettext
 git
-glib2
 glib2-devel
-glibc
 gtk-doc
 gtk3
-hicolor-icon-theme
 libsoup3
-libxml2
-tar

--- Arch PKGBUILD
+++ Artix PKGBUILD
@@ -1,15 +1,15 @@
 prepare() {
-cd $pkgname
-git apply -3 ../libmateweather-libsoup3.patch
+cd "${pkgname}"
+git cherry-pick -n c1c54a15545f13f3dabd2bcd303533d818905c7b
 autoreconf -fiv
 }
 build() {
-cd $pkgname
+cd "${pkgname}"
 ./configure \
 --prefix=/usr \
 --sysconfdir=/etc \
 --localstatedir=/var \
---enable-locations-compression \
---enable-gtk-doc
+--enable-locations-compression
+sed -i -e 's/ -shared / -Wl,-O1,--as-needed\0/g' libtool
 make
 }
